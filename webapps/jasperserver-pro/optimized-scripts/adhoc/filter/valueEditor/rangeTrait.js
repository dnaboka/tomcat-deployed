define(["require","jquery","underscore","adhoc/filter/validation/ValidationError"],function(e){"use strict";var r=e("jquery"),t=e("underscore"),i=e("adhoc/filter/validation/ValidationError");return{onChange:function(){var e=this.$(this.inputSelector),t=e.map(function(){return r(this).val()}).get(),i=this.convert(t);this.setValue(i)},convert:function(e){var r=this;return t.map(e,function(e){return r.valueConverter?r.valueConverter(e):e})},getValue:function(e){var r=this.model.get("value");return t.isNumber(e)?r[e]:r},validCallback:function(e,r,t){e.markAllFieldsAsValid(r,t)},invalidCallback:function(e,r,n,a){e.markAllFieldsAsValid(r,a),t.isArray(n)||(n=[n]),t.each(n,function(t){e.markSingleFieldAsInvalid(t instanceof i?t.getAttr():r,t,a)})},markAllFieldsAsValid:function(e,r){this.$("["+r+"]").text("").parent().removeClass("error")}}});