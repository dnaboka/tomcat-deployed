define(["require","underscore","adhoc/filter/valueEditor/AbstractValueEditor","adhoc/filter/format/OlapFilterValueFormatter","adhoc/filter/format/filterValueFormatter","components/singleSelect/view/SingleSelectNew","settings!adhocFilterSettings"],function(e){"use strict";var t=e("underscore"),i=e("adhoc/filter/valueEditor/AbstractValueEditor"),s=e("adhoc/filter/format/OlapFilterValueFormatter"),a=e("adhoc/filter/format/filterValueFormatter"),l=e("components/singleSelect/view/SingleSelectNew");e("settings!adhocFilterSettings");return i.extend({tagName:"div",className:"values",initialize:function(e){this.list=this.createList(),i.prototype.initialize.apply(this,arguments)},createList:function(){return new l({getData:t.bind(this.model.dataProvider.getData,this.model),formatValue:this.model.isOlap?new s(this.model.get("isFirstLevelInHierarchyAll")).format:a})},registerEvents:function(){this.listenTo(this.list,"selection:change",t.bind(function(e,i){i&&this.model.set("isAnyValue",i.isTrueAll,{silent:!0}),this.setValue(t.isArray(e)?t.reject(e,function(e){return void 0===e}):e)},this))},render:function(){return this.$el.empty(),this.list.$el.hide(),this.$el.append(this.list.el),this.$el.append('<span class="message warning" data-validation-field="value"></span>'),this},renderData:function(){this.list.renderData()},_setValueToList:function(e){this.list.setValue(this.getValue(),e)},_removeAvailableData:function(){this.model.isOlap&&(this.model.removeAvailableData(),this.list.reset({silent:!0}))},updateData:function(){this._removeAvailableData();var e={};this.model.setShowLoading(!1),this.list.once("selection:change",t.bind(this.model.setShowLoading,this.model,!0)),this._setValueToList(e),this.list.$el.show(),this.trigger("rendered",this)},remove:function(){this.list.remove(),this.removeView(),i.prototype.remove.call(this)}})});