AdHocCrosstab.mouseDownHandler=function(e){},AdHocCrosstab.mouseUpHandler=function(e){var t,o,s,a,r=(AdHocCrosstab,e.element()),n=(new RegExp("\\d+$"),null);if(Draggables.dragging!=designerBase.AVAILABLE_FIELDS_AREA){if(matchAny(r,[localContext.GROUP_LEVEL_DISCLOSURE_PATTERN],!1)){if(a=r.up()){var i=a.readAttribute("data-dimension"),d=a.readAttribute("data-level"),l=r.hasClassName("closed");s=a.identify().startsWith("rowGroup"),l?AdHocCrosstab.expandLevel(i,d,s):AdHocCrosstab.collapseLevel(i,d,s)}return}if(matchAny(r,[localContext.GROUP_MEMBER_DISCLOSURE_PATTERN],!1)){if(a=r.up(),$(a)){t=a.identify(),s=t.startsWith("rowGroup_");var c=new RegExp(/\B\d+\B/);o=c.exec(t)[0];var u=$(a).readAttribute("data-path");s?localContext.toggleExpandCollapseForRow(u,o):localContext.toggleExpandCollapseForColumn(u,o)}return}if(n=matchAny(r,[localContext.COLUMN_GROUP_MEMBER_PATTERN,localContext.ROW_GROUP_MEMBER_PATTERN],!0),n&&!isRightClick(e)&&(AdHocCrosstab.deselectAllSelectedOverlays(),crossTabMultiSelect.selectXtabGroupMember(n,e)),n=matchAny(r,[localContext.ROW_GROUP_OVERFLOW_PATTERN,localContext.COLGROUP_GROUP_OVERFLOW_PATTERN],!0))if($(n).hasClassName("colOverflow")){var E=$(n).readAttribute("data-canShowMore");"true"===E&&AdHocCrosstab.retrieveOverflowColumnGroups()}else AdHocCrosstab.retrieveOverflowRowGroups()}},AdHocCrosstab.mouseOverHandler=function(e){},AdHocCrosstab.mouseOutHandler=function(e){},AdHocCrosstab.mouseClickHandler=function(e){var t=null,o=e.element(),s=new RegExp("\\d+","g");if(o.match(AdHocCrosstab.DRILL_THROUGH_PATTERN)&&(crossTabMultiSelect.deselectAllGroupMembers(),o=o.parentNode,$(o)&&(t=o.identify(),localContext.state.inDesignView))){if(t.startsWith("measureBucketDrill_")){var a=s.exec(t)[0],r=s.exec(t)[0];return void(AdHocCrosstab.isOlapMode()?AdHocCrosstab.drillOLAP(a,r):AdHocCrosstab.drill(a,r))}if(t.startsWith("measureBucketNoDrillParentChild_")&&dialogs.systemConfirm.show(adhocDesigner.getMessage("ADH_1213_DRILLTHROUGH_NOT_SUPPORTED_PARENT_CHILD",15e3)),t.startsWith("measureBucketInvalidDrill_"))return}},AdHocCrosstab.contextMenuHandler=function(e){var t,o,s,a=e.element(),r=a.identify();if(matchAny(a,[AdHocCrosstab.COLUMN_GROUP_MEMBER_PATTERN,AdHocCrosstab.ROW_GROUP_MEMBER_PATTERN],!0)){if(a){if(0===r.indexOf("anonymous"))return;designerBase.isObjectInSelection({id:r},"id")||crossTabMultiSelect.selectXtabGroupMember(a,e),adhocDesigner.showDynamicMenu(e,designerBase.MEMBER_GROUP_MENU_LEVEL)}}else if(matchAny(a,[AdHocCrosstab.GROUP_LEVEL_PATTERN],!1)){for(;$(a).hasClassName("dummy");)a=a.nextSiblings()[0];r=a.identify(),s=r.startsWith("rowGroup"),t=parseInt(AdHocCrosstab.ENDS_WITH_A_NUMBER_REGEX.exec(r)[0]);var n=localContext.state,i=s?"row":"column",d=a.readAttribute("data-dimension"),l=_.indexOf(n.getDimensions(i),n.getDimension(d,i));$(a)&&(o={id:(s?"rowGroup_":"colGroup_")+t,name:a.readAttribute("data-level"),level:a.readAttribute("data-level"),dimensionId:d,expandable:"true"===a.readAttribute("data-expanable"),axis:i,isMeasure:d===adhocDesigner.MEASURES,groupIndex:AdHocCrosstab.isOlapMode()?l:t,index:t,sorting:a.readAttribute("data-sorting")},o.dimensionId!==AdHocCrosstab.NULL_DIMENSION&&(crossTabMultiSelect.selectXtabGroupLabel(o),o.isMeasure?AdHocCrosstab.showCrosstabMenu(e,localContext[s?"MEASURES_DIMENSION_ROW_MENU_CONTEXT":"MEASURES_DIMENSION_COLUMN_MENU_CONTEXT"]):AdHocCrosstab.showCrosstabMenu(e,designerBase[s?"ROW_GROUP_MENU_LEVEL":"COLUMN_GROUP_MENU_LEVEL"])))}else if(matchAny(a,[AdHocCrosstab.MEASURE_PATTERN],!1)){for(;$(a).hasClassName("dummy");)a=a.nextSiblings()[0];t=parseInt(AdHocCrosstab.ENDS_WITH_A_NUMBER_REGEX.exec(r)[0]),s=r.startsWith("rowGroup");var c=AdHocCrosstab.getRefinedMeasuresFromState(),u=c.length,E=t%u,A=c[E].fieldName,m=a.readAttribute("data-path"),C=AdHocCrosstab.getTopBottomFilter();$(a)&&(o={id:(s?"rowGroup_":"colGroup_")+t,name:A,level:A,dimensionId:adhocDesigner.MEASURES,expandable:"true"===a.readAttribute("data-expanable"),axis:s?"row":"column",isMeasure:!0,index:E,path:a.readAttribute("data-path"),isInner:a.hasClassName("inner"),sorting:a.readAttribute("data-sorting"),topBottomFilter:C&&C.path===m?C.type:"none"},crossTabMultiSelect.selectXtabGroupLabel(o),AdHocCrosstab.showCrosstabMenu(e,localContext[s?"MEASURE_ROW_MENU_CONTEXT":"MEASURE_COLUMN_MENU_CONTEXT"]))}},AdHocCrosstab.lmHandlersMap={addItems:function(e,t,o){var s=_.uniq(_.map(e,function(e){return e.extra.dimensionId})),a=_.pluck(e,"id"),r=e[0].extra.isMeasure,n=AdHocCrosstab.isOlapMode();AdHocCrosstab.insertDimensionInAxisWithChild({dim:r?s.slice(0,1):s,axis:o,pos:t,child:n||r?a:null,hierarchyName:e[0].extra.hierarchyName})},measureReorder:function(e,t){AdHocCrosstab.moveMeasure(e,t)},column:{addItem:function(e,t,o,s,a,r,n){AdHocCrosstab.insertDimensionInAxisWithChild({dim:e,axis:"column",pos:t,child:AdHocCrosstab.isOlapMode()||a?o:null,measure_pos:s,isMeasure:a,uri:r,hierarchyName:n})},removeItem:function(e,t){e.isMeasure?AdHocCrosstab.removeMeasure(t):AdHocCrosstab.hideColumnLevel(e.dimensionId,e.level)},moveItem:function(e,t,o){AdHocCrosstab.moveDimension(e,"column","column",t,o)},switchItem:function(e,t,o){AdHocCrosstab.moveDimension(e,"row","column",t,o)},contextMenu:function(e,t){AdHocCrosstab.selectFromDisplayManager(t.targetEvent,t.extra,designerBase.COLUMN_GROUP_MENU_LEVEL),AdHocCrosstab.showCrosstabMenu(t.targetEvent,localContext.DISPLAY_MANAGER_COLUMN_CONTEXT)}},row:{addItem:function(e,t,o,s,a,r,n){AdHocCrosstab.insertDimensionInAxisWithChild({dim:e,axis:"row",pos:t,child:AdHocCrosstab.isOlapMode()||a?o:null,measure_pos:s,isMeasure:a,uri:r,hierarchyName:n})},removeItem:function(e,t){e.isMeasure?AdHocCrosstab.removeMeasure(t):AdHocCrosstab.hideRowLevel(e.dimensionId,e.level)},moveItem:function(e,t,o){AdHocCrosstab.moveDimension(e,"row","row",t,o)},switchItem:function(e,t,o){AdHocCrosstab.moveDimension(e,"column","row",t,o)},contextMenu:function(e,t){AdHocCrosstab.selectFromDisplayManager(t.targetEvent,t.extra,designerBase.ROW_GROUP_MENU_LEVEL),AdHocCrosstab.showCrosstabMenu(t.targetEvent,localContext.DISPLAY_MANAGER_ROW_CONTEXT)}}},AdHocCrosstab.treeMenuHandler=function(e){var t,o=e.memo.node;"dimensionsTree"===o.treeId?t=o.isParent()?adhocDesigner.DIMENSION_TREE_DIMENSION_CONTEXT:adhocDesigner.DIMENSION_TREE_LEVEL_CONTEXT:"measuresTree"===o.treeId&&(t=o.isParent()?adhocDesigner.MEASURE_TREE_GROUP_CONTEXT:adhocDesigner.MEASURE_TREE_CONTEXT),adhocDesigner.showDynamicMenu(e.memo.targetEvent,t,null)},AdHocCrosstab.selectFromDisplayManager=function(e,t,o){designerBase.unSelectAll();var s=adhocDesigner.isMultiSelect(e,o);selectionCategory.area=o;var a=adhocDesigner.isAlreadySelected(t);actionModel.setSelected([t]),adhocDesigner.addSelectedObject(e,t,s,a),Event.stop(e)};