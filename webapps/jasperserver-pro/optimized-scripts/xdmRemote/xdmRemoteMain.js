(function(){function e(e,n,t){for(var r=(t||0)-1,o=e?e.length:0;++r<o;)if(e[r]===n)return r;return-1}function n(e,n){for(var t=e.criteria,r=n.criteria,o=-1,i=t.length;++o<i;){var a=t[o],u=r[o];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return e.index-n.index}function t(e){return"\\"+Dn[e]}function r(){return hn.pop()||[]}function o(e){e.length=0,hn.length<wn&&hn.push(e)}function i(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(0>o?0:o);++r<o;)i[r]=e[n+r];return i}function a(e){return e instanceof a?e:new u(e)}function u(e,n){this.__chain__=!!n,this.__wrapped__=e}function c(e){function n(){if(r){var e=i(r);Qn.apply(e,arguments)}if(this instanceof n){var a=l(t.prototype),u=t.apply(a,e||arguments);return B(u)?u:a}return t.apply(o,e||arguments)}var t=e[0],r=e[2],o=e[4];return n}function s(e,n,t,a,u){if(t){var c=t(e);if("undefined"!=typeof c)return c}var l=B(e);if(!l)return e;var f=zn.call(e);if(!An[f])return e;var p=at[f];switch(f){case Sn:case Tn:return new p(+e);case Rn:case Ln:return new p(e);case Cn:return c=p(e.source,bn.exec(e)),c.lastIndex=e.lastIndex,c}var g=ct(e);if(n){var d=!a;a||(a=r()),u||(u=r());for(var h=a.length;h--;)if(a[h]==e)return u[h];c=g?p(e.length):{}}else c=g?i(e):T({},e);return g&&(Gn.call(e,"index")&&(c.index=e.index),Gn.call(e,"input")&&(c.input=e.input)),n?(a.push(e),u.push(c),(g?ie:mt)(e,function(e,r){c[r]=s(e,n,t,a,u)}),d&&(o(a),o(u)),c):c}function l(e,n){return B(e)?Zn(e):{}}function f(e,n,t){if("function"!=typeof e)return Ye;if("undefined"==typeof n||!("prototype"in e))return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)};case 4:return function(t,r,o,i){return e.call(n,t,r,o,i)}}return He(e,n)}function p(e){function n(){var e=s?u:this;if(o){var m=i(o);Qn.apply(m,arguments)}if((a||g)&&(m||(m=i(arguments)),a&&Qn.apply(m,a),g&&m.length<c))return r|=16,p([t,d?r:-4&r,m,null,u,c]);if(m||(m=arguments),f&&(t=e[h]),this instanceof n){e=l(t.prototype);var v=t.apply(e,m);return B(v)?v:e}return t.apply(e,m)}var t=e[0],r=e[1],o=e[2],a=e[3],u=e[4],c=e[5],s=1&r,f=2&r,g=4&r,d=8&r,h=t;return n}function g(e,n){for(var t=-1,r=x(),o=e?e.length:0,i=[];++t<o;){var a=e[t];r(n,a)<0&&i.push(a)}return i}function d(e,n,t,r){for(var o=(r||0)-1,i=e?e.length:0,a=[];++o<i;){var u=e[o];if(u&&"object"==typeof u&&"number"==typeof u.length&&(ct(u)||S(u))){n||(u=d(u,n,t));var c=-1,s=u.length,l=a.length;for(a.length+=s;++c<s;)a[l++]=u[c]}else t||a.push(u)}return a}function h(e,n,t,r){if(e===n)return 0!==e||1/e==1/n;var o=typeof e,i=typeof n;if(!(e!==e||e&&Nn[o]||n&&Nn[i]))return!1;if(null==e||null==n)return e===n;var u=zn.call(e),c=zn.call(n);if(u!=c)return!1;switch(u){case Sn:case Tn:return+e==+n;case Rn:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case Cn:case Ln:return e==String(n)}var s=u==En;if(!s){var l=e instanceof a,f=n instanceof a;if(l||f)return h(l?e.__wrapped__:e,f?n.__wrapped__:n,t,r);if(u!=Mn)return!1;var p=e.constructor,g=n.constructor;if(p!=g&&!($(p)&&p instanceof p&&$(g)&&g instanceof g)&&"constructor"in e&&"constructor"in n)return!1}t||(t=[]),r||(r=[]);for(var d=t.length;d--;)if(t[d]==e)return r[d]==n;var m=!0,v=0;if(t.push(e),r.push(n),s){if(v=n.length,m=v==e.length)for(;v--&&(m=h(e[v],n[v],t,r)););}else ht(n,function(n,o,i){return Gn.call(i,o)?(v++,!(m=Gn.call(e,o)&&h(e[o],n,t,r))&&vn):void 0}),m&&ht(e,function(e,n,t){return Gn.call(t,n)?!(m=--v>-1)&&vn:void 0});return t.pop(),r.pop(),m}function m(e,n,t,r,o){(ct(n)?ie:mt)(n,function(n,i){var a,u,c=n,s=e[i];if(n&&((u=ct(n))||vt(n))){for(var l=r.length;l--;)if(a=r[l]==n){s=o[l];break}if(!a){var f;t&&(c=t(s,n),(f="undefined"!=typeof c)&&(s=c)),f||(s=u?ct(s)?s:[]:vt(s)?s:{}),r.push(n),o.push(s),f||m(s,n,t,r,o)}}else t&&(c=t(s,n),"undefined"==typeof c&&(c=n)),"undefined"!=typeof c&&(s=c);e[i]=s})}function v(e,n){return e+Jn(it()*(n-e+1))}function y(e,n,t){for(var r=-1,o=x(),i=e?e.length:0,a=[],u=t?[]:a;++r<i;){var c=e[r],s=t?t(c,r,e):c;(n?!r||u[u.length-1]!==s:o(u,s)<0)&&(t&&u.push(s),a.push(c))}return a}function w(e){return function(n,t,r){var o={};t=Ke(t,r,3);var i=-1,a=n?n.length:0;if("number"==typeof a)for(;++i<a;){var u=n[i];e(o,u,t(u,i,n),n)}else mt(n,function(n,r,i){e(o,n,t(n,r,i),i)});return o}}function b(e,n,t,r,o,i){var a=2&n,u=16&n,s=32&n;if(!a&&!$(e))throw new TypeError;u&&!t.length&&(n&=-17,u=t=!1),s&&!r.length&&(n&=-33,s=r=!1);var l=1==n||17===n?c:p;return l([e,n,t,r,o,i])}function _(e){return ft[e]}function x(){var n=(n=a.indexOf)===Ee?e:n;return n}function k(e){return"function"==typeof e&&Xn.test(e)}function O(e){var n,t;return e&&zn.call(e)==Mn&&(n=e.constructor,!$(n)||n instanceof n)?(ht(e,function(e,n){t=n}),"undefined"==typeof t||Gn.call(e,t)):vn}function E(e){return pt[e]}function S(e){return e&&"object"==typeof e&&"number"==typeof e.length&&zn.call(e)==On||!1}function T(e){if(!e)return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var o in r)e[o]=r[o]}return e}function j(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t=n,n=!1),s(e,n,"function"==typeof t&&f(t,r,1))}function R(e,n,t){return s(e,!0,"function"==typeof n&&f(n,t,1))}function M(e){if(!e)return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var o in r)"undefined"==typeof e[o]&&(e[o]=r[o])}return e}function C(e){var n=[];return ht(e,function(e,t){$(e)&&n.push(t)}),n.sort()}function L(e,n){return e?Gn.call(e,n):!1}function A(e){for(var n=-1,t=lt(e),r=t.length,o={};++n<r;){var i=t[n];o[e[i]]=i}return o}function N(e){return e===!0||e===!1||e&&"object"==typeof e&&zn.call(e)==Sn||!1}function D(e){return e&&"object"==typeof e&&zn.call(e)==Tn||!1}function F(e){return e&&1===e.nodeType||!1}function I(e){if(!e)return!0;if(ct(e)||W(e))return!e.length;for(var n in e)if(Gn.call(e,n))return!1;return!0}function P(e,n){return h(e,n)}function H(e){return et(e)&&!nt(parseFloat(e))}function $(e){return"function"==typeof e}function B(e){return!(!e||!Nn[typeof e])}function q(e){return z(e)&&e!=+e}function U(e){return null===e}function z(e){return"number"==typeof e||e&&"object"==typeof e&&zn.call(e)==Rn||!1}function X(e){return e&&Nn[typeof e]&&zn.call(e)==Cn||!1}function W(e){return"string"==typeof e||e&&"object"==typeof e&&zn.call(e)==Ln||!1}function J(e){return"undefined"==typeof e}function V(e){var n=arguments,t=2;if(!B(e))return e;if("number"!=typeof n[2]&&(t=n.length),t>3&&"function"==typeof n[t-2])var a=f(n[--t-1],n[t--],2);else t>2&&"function"==typeof n[t-1]&&(a=n[--t]);for(var u=i(arguments,1,t),c=-1,s=r(),l=r();++c<t;)m(e,u[c],a,s,l);return o(s),o(l),e}function G(e){var n=[];ht(e,function(e,t){n.push(t)}),n=g(n,d(arguments,!0,!1,1));for(var t=-1,r=n.length,o={};++t<r;){var i=n[t];o[i]=e[i]}return o}function Q(e){for(var n=-1,t=lt(e),r=t.length,o=Array(r);++n<r;){var i=t[n];o[n]=[i,e[i]]}return o}function K(e){for(var n=-1,t=d(arguments,!0,!1,1),r=t.length,o={};++n<r;){var i=t[n];i in e&&(o[i]=e[i])}return o}function Z(e,n,t,r){var o=ct(e);if(null==t)if(o)t=[];else{var i=e&&e.constructor,a=i&&i.prototype;t=l(a)}return n&&(n=Ke(n,r,4),(o?ie:mt)(e,function(e,r,o){return n(t,e,r,o)===!1&&vn})),t}function Y(e){for(var n=-1,t=lt(e),r=t.length,o=Array(r);++n<r;)o[n]=e[t[n]];return o}function ee(e,n){var t=x(),r=e?e.length:0,o=!1;return r&&"number"==typeof r?o=t(e,n)>-1:mt(e,function(e){return(o=e===n)&&vn}),o}function ne(e,n,t){var r=!0;n=Ke(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&(r=!!n(e[o],o,e)););else mt(e,function(e,t,o){return!(r=!!n(e,t,o))&&vn});return r}function te(e,n,t){var r=[];n=Ke(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i;){var a=e[o];n(a,o,e)&&r.push(a)}else mt(e,function(e,t,o){n(e,t,o)&&r.push(e)});return r}function re(e,n,t){n=Ke(n,t,3);var r=-1,o=e?e.length:0;if("number"!=typeof o){var i;return mt(e,function(e,t,r){return n(e,t,r)?(i=e,vn):void 0}),i}for(;++r<o;){var a=e[r];if(n(a,r,e))return a}}function oe(e,n){return be(e,n,!0)}function ie(e,n,t){var r=-1,o=e?e.length:0;if(n=n&&"undefined"==typeof t?n:f(n,t,3),"number"==typeof o)for(;++r<o&&n(e[r],r,e)!==vn;);else mt(e,n)}function ae(e,n){var t=e?e.length:0;if("number"==typeof t)for(;t--&&n(e[t],t,e)!==!1;);else{var r=lt(e);t=r.length,mt(e,function(e,o,i){return o=r?r[--t]:--t,n(i[o],o,i)===!1&&vn})}}function ue(e,n){var t=i(arguments,2),r=-1,o="function"==typeof n,a=e?e.length:0,u=Array("number"==typeof a?a:0);return ie(e,function(e){u[++r]=(o?n:e[n]).apply(e,t)}),u}function ce(e,n,t){var r=-1,o=e?e.length:0;if(n=Ke(n,t,3),"number"==typeof o)for(var i=Array(o);++r<o;)i[r]=n(e[r],r,e);else i=[],mt(e,function(e,t,o){i[++r]=n(e,t,o)});return i}function se(e,n,t){var r=-(1/0),o=r;"function"!=typeof n&&t&&t[n]===e&&(n=null);var i=-1,a=e?e.length:0;if(null==n&&"number"==typeof a)for(;++i<a;){var u=e[i];u>o&&(o=u)}else n=Ke(n,t,3),ie(e,function(e,t,i){var a=n(e,t,i);a>r&&(r=a,o=e)});return o}function le(e,n,t){var r=1/0,o=r;"function"!=typeof n&&t&&t[n]===e&&(n=null);var i=-1,a=e?e.length:0;if(null==n&&"number"==typeof a)for(;++i<a;){var u=e[i];o>u&&(o=u)}else n=Ke(n,t,3),ie(e,function(e,t,i){var a=n(e,t,i);r>a&&(r=a,o=e)});return o}function fe(e,n,t,r){if(!e)return t;var o=arguments.length<3;n=Ke(n,r,4);var i=-1,a=e.length;if("number"==typeof a)for(o&&(t=e[++i]);++i<a;)t=n(t,e[i],i,e);else mt(e,function(e,r,i){t=o?(o=!1,e):n(t,e,r,i)});return t}function pe(e,n,t,r){var o=arguments.length<3;return n=Ke(n,r,4),ae(e,function(e,r,i){t=o?(o=!1,e):n(t,e,r,i)}),t}function ge(e,n,t){return n=Ke(n,t,3),te(e,function(e,t,r){return!n(e,t,r)})}function de(e,n,t){if(e&&"number"!=typeof e.length&&(e=Y(e)),null==n||t)return e?e[v(0,e.length-1)]:dn;var r=he(e);return r.length=ot(rt(0,n),r.length),r}function he(e){var n=-1,t=e?e.length:0,r=Array("number"==typeof t?t:0);return ie(e,function(e){var t=v(0,++n);r[n]=r[t],r[t]=e}),r}function me(e){var n=e?e.length:0;return"number"==typeof n?n:lt(e).length}function ve(e,n,t){var r;n=Ke(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&!(r=n(e[o],o,e)););else mt(e,function(e,t,o){return(r=n(e,t,o))&&vn});return!!r}function ye(e,t,r){var o=-1,i=e?e.length:0,a=Array("number"==typeof i?i:0);for(t=Ke(t,r,3),ie(e,function(e,n,r){a[++o]={criteria:[t(e,n,r)],index:o,value:e}}),i=a.length,a.sort(n);i--;)a[i]=a[i].value;return a}function we(e){return ct(e)?i(e):e&&"number"==typeof e.length?ce(e):Y(e)}function be(e,n,t){return t&&I(n)?dn:(t?re:te)(e,n)}function _e(e){for(var n=-1,t=e?e.length:0,r=[];++n<t;){var o=e[n];o&&r.push(o)}return r}function xe(e){return g(e,d(arguments,!0,!0,1))}function ke(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=Ke(n,t,3);++a<o&&n(e[a],a,e);)r++}else if(r=n,null==r||t)return e?e[0]:dn;return i(e,0,ot(rt(0,r),o))}function Oe(e,n){return d(e,n)}function Ee(n,t,r){if("number"==typeof r){var o=n?n.length:0;r=0>r?rt(0,o+r):r||0}else if(r){var i=Le(n,t);return n[i]===t?i:-1}return e(n,t,r)}function Se(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=Ke(n,t,3);a--&&n(e[a],a,e);)r++}else r=null==n||t?1:n||r;return i(e,0,ot(rt(0,o-r),o))}function Te(){for(var e=[],n=-1,t=arguments.length;++n<t;){var r=arguments[n];(ct(r)||S(r))&&e.push(r)}var o=e[0],i=-1,a=x(),u=o?o.length:0,c=[];e:for(;++i<u;)if(r=o[i],a(c,r)<0){for(var n=t;--n;)if(a(e[n],r)<0)continue e;c.push(r)}return c}function je(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=Ke(n,t,3);a--&&n(e[a],a,e);)r++}else if(r=n,null==r||t)return e?e[o-1]:dn;return i(e,rt(0,o-r))}function Re(e,n,t){var r=e?e.length:0;for("number"==typeof t&&(r=(0>t?rt(0,r+t):ot(t,r-1))+1);r--;)if(e[r]===n)return r;return-1}function Me(e,n,t){e=+e||0,t=+t||1,null==n&&(n=e,e=0);for(var r=-1,o=rt(0,Wn((n-e)/t)),i=Array(o);++r<o;)i[r]=e,e+=t;return i}function Ce(e,n,t){if("number"!=typeof n&&null!=n){var r=0,o=-1,a=e?e.length:0;for(n=Ke(n,t,3);++o<a&&n(e[o],o,e);)r++}else r=null==n||t?1:rt(0,n);return i(e,r)}function Le(e,n,t,r){var o=0,i=e?e.length:o;for(t=t?Ke(t,r,1):Ye,n=t(n);i>o;){var a=o+i>>>1;t(e[a])<n?o=a+1:i=a}return o}function Ae(){return y(d(arguments,!0,!0))}function Ne(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t="function"!=typeof n&&r&&r[n]===e?null:n,n=!1),null!=t&&(t=Ke(t,r,3)),y(e,n,t)}function De(e){return g(e,i(arguments,1))}function Fe(){for(var e=-1,n=se(_t(arguments,"length")),t=Array(0>n?0:n);++e<n;)t[e]=_t(arguments,e);return t}function Ie(e,n){var t=-1,r=e?e.length:0,o={};for(n||!r||ct(e[0])||(n=[]);++t<r;){var i=e[t];n?o[i]=n[t]:i&&(o[i[0]]=i[1])}return o}function Pe(e,n){if(!$(n))throw new TypeError;return function(){return--e<1?n.apply(this,arguments):void 0}}function He(e,n){return arguments.length>2?b(e,17,i(arguments,2),null,n):b(e,1,null,null,n)}function $e(e){for(var n=arguments.length>1?d(arguments,!0,!1,1):C(e),t=-1,r=n.length;++t<r;){var o=n[t];e[o]=b(e[o],1,null,null,e)}return e}function Be(){for(var e=arguments,n=e.length;n--;)if(!$(e[n]))throw new TypeError;return function(){for(var n=arguments,t=e.length;t--;)n=[e[t].apply(this,n)];return n[0]}}function qe(e,n,t){var r,o,i,a,u,c,s,l=0,f=!1,p=!0;if(!$(e))throw new TypeError;if(n=rt(0,n)||0,t===!0){var g=!0;p=!1}else B(t)&&(g=t.leading,f="maxWait"in t&&(rt(n,t.maxWait)||0),p="trailing"in t?t.trailing:p);var d=function(){var t=n-(xt()-a);if(0>=t){o&&clearTimeout(o);var f=s;o=c=s=dn,f&&(l=xt(),i=e.apply(u,r),c||o||(r=u=null))}else c=setTimeout(d,t)},h=function(){c&&clearTimeout(c),o=c=s=dn,(p||f!==n)&&(l=xt(),i=e.apply(u,r),c||o||(r=u=null))};return function(){if(r=arguments,a=xt(),u=this,s=p&&(c||!g),f===!1)var t=g&&!c;else{o||g||(l=a);var m=f-(a-l),v=0>=m;v?(o&&(o=clearTimeout(o)),l=a,i=e.apply(u,r)):o||(o=setTimeout(h,m))}return v&&c?c=clearTimeout(c):c||n===f||(c=setTimeout(d,n)),t&&(v=!0,i=e.apply(u,r)),!v||c||o||(r=u=null),i}}function Ue(e){if(!$(e))throw new TypeError;var n=i(arguments,1);return setTimeout(function(){e.apply(dn,n)},1)}function ze(e,n){if(!$(e))throw new TypeError;var t=i(arguments,2);return setTimeout(function(){e.apply(dn,t)},n)}function Xe(e,n){var t={};return function(){var r=n?n.apply(this,arguments):yn+arguments[0];return Gn.call(t,r)?t[r]:t[r]=e.apply(this,arguments)}}function We(e){var n,t;if(!$(e))throw new TypeError;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function Je(e){return b(e,16,i(arguments,1))}function Ve(e,n,t){var r=!0,o=!0;if(!$(e))throw new TypeError;return t===!1?r=!1:B(t)&&(r="leading"in t?t.leading:r,o="trailing"in t?t.trailing:o),t={},t.leading=r,t.maxWait=n,t.trailing=o,qe(e,n,t)}function Ge(e,n){return b(n,16,[e])}function Qe(e){return function(){return e}}function Ke(e,n,t){var r=typeof e;if(null==e||"function"==r)return f(e,n,t);if("object"!=r)return tn(e);var o=lt(e);return function(n){for(var t=o.length,r=!1;t--&&(r=n[o[t]]===e[o[t]]););return r}}function Ze(e){return null==e?"":String(e).replace(dt,_)}function Ye(e){return e}function en(e){ie(C(e),function(n){var t=a[n]=e[n];a.prototype[n]=function(){var e=[this.__wrapped__];Qn.apply(e,arguments);var n=t.apply(a,e);return this.__chain__?new u(n,!0):n}})}function nn(){return Fn._=Un,this}function tn(e){return function(n){return n[e]}}function rn(e,n){return null==e&&null==n&&(n=1),e=+e||0,null==n?(n=e,e=0):n=+n||0,e+Jn(it()*(n-e+1))}function on(e,n){if(e){var t=e[n];return $(t)?e[n]():t}}function an(e,n,r){var o=a,i=o.templateSettings;e=String(e||""),r=M({},r,i);var u=0,c="__p += '",s=r.variable,l=RegExp((r.escape||xn).source+"|"+(r.interpolate||xn).source+"|"+(r.evaluate||xn).source+"|$","g");e.replace(l,function(n,r,o,i,a){return c+=e.slice(u,a).replace(kn,t),r&&(c+="' +\n_.escape("+r+") +\n'"),i&&(c+="';\n"+i+";\n__p += '"),o&&(c+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=a+n.length,n}),c+="';\n",s||(s="obj",c="with ("+s+" || {}) {\n"+c+"\n}\n"),c="function("+s+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+c+"return __p\n}";try{var f=Function("_","return "+c)(o)}catch(p){throw p.source=c,p}return n?f(n):(f.source=c,f)}function un(e,n,t){e=(e=+e)>-1?e:0;var r=-1,o=Array(e);for(n=f(n,t,1);++r<e;)o[r]=n(r);return o}function cn(e){return null==e?"":String(e).replace(gt,E)}function sn(e){var n=++mn+"";return e?e+n:n}function ln(e){return e=new u(e),e.__chain__=!0,e}function fn(e,n){return n(e),e}function pn(){return this.__chain__=!0,this}function gn(){return this.__wrapped__}var dn,hn=[],mn=0,vn={},yn=+new Date+"",wn=40,bn=/\w*$/,_n=/<%=([\s\S]+?)%>/g,xn=/($^)/,kn=/['\n\r\t\u2028\u2029\\]/g,On="[object Arguments]",En="[object Array]",Sn="[object Boolean]",Tn="[object Date]",jn="[object Function]",Rn="[object Number]",Mn="[object Object]",Cn="[object RegExp]",Ln="[object String]",An={};An[jn]=!1,An[On]=An[En]=An[Sn]=An[Tn]=An[Rn]=An[Mn]=An[Cn]=An[Ln]=!0;var Nn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Dn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Fn=Nn[typeof window]&&window||this,In=Nn[typeof exports]&&exports&&!exports.nodeType&&exports,Pn=Nn[typeof module]&&module&&!module.nodeType&&module,Hn=Pn&&Pn.exports===In&&In,$n=Nn[typeof global]&&global;!$n||$n.global!==$n&&$n.window!==$n||(Fn=$n);var Bn=[],qn=Object.prototype,Un=Fn._,zn=qn.toString,Xn=RegExp("^"+String(zn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Wn=Math.ceil,Jn=Math.floor,Vn=k(Vn=Object.getPrototypeOf)&&Vn,Gn=qn.hasOwnProperty,Qn=Bn.push,Kn=qn.propertyIsEnumerable,Zn=k(Zn=Object.create)&&Zn,Yn=k(Yn=Array.isArray)&&Yn,et=Fn.isFinite,nt=Fn.isNaN,tt=k(tt=Object.keys)&&tt,rt=Math.max,ot=Math.min,it=Math.random,at={};at[En]=Array,at[Sn]=Boolean,at[Tn]=Date,at[jn]=Function,at[Mn]=Object,at[Rn]=Number,at[Cn]=RegExp,at[Ln]=String,u.prototype=a.prototype;var ut={};!function(){var e={0:1,length:1};ut.spliceObjects=(Bn.splice.call(e,0,1),!e[0])}(1),a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:_n,variable:""},Zn||(l=function(){function e(){}return function(n){if(B(n)){e.prototype=n;var t=new e;e.prototype=null}return t||Fn.Object()}}()),S(arguments)||(S=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Gn.call(e,"callee")&&!Kn.call(e,"callee")||!1});var ct=Yn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&zn.call(e)==En||!1},st=function(e){var n,t=e,r=[];if(!t)return r;if(!Nn[typeof e])return r;for(n in t)Gn.call(t,n)&&r.push(n);return r},lt=tt?function(e){return B(e)?tt(e):[]}:st,ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},pt=A(ft),gt=RegExp("("+lt(pt).join("|")+")","g"),dt=RegExp("["+lt(ft).join("")+"]","g"),ht=function(e,n){var t,r=e,o=r;if(!r)return o;if(!Nn[typeof r])return o;for(t in r)if(n(r[t],t,e)===vn)return o;return o},mt=function(e,n){var t,r=e,o=r;if(!r)return o;if(!Nn[typeof r])return o;for(t in r)if(Gn.call(r,t)&&n(r[t],t,e)===vn)return o;return o};$(/x/)&&($=function(e){return"function"==typeof e&&zn.call(e)==jn});var vt=Vn?function(e){if(!e||zn.call(e)!=Mn)return!1;var n=e.valueOf,t=k(n)&&(t=Vn(n))&&Vn(t);return t?e==t||Vn(e)==t:O(e)}:O,yt=w(function(e,n,t){Gn.call(e,t)?e[t]++:e[t]=1}),wt=w(function(e,n,t){(Gn.call(e,t)?e[t]:e[t]=[]).push(n)}),bt=w(function(e,n,t){e[t]=n}),_t=ce,xt=k(xt=Date.now)&&xt||function(){return(new Date).getTime()};a.after=Pe,a.bind=He,a.bindAll=$e,a.chain=ln,a.compact=_e,a.compose=Be,a.constant=Qe,a.countBy=yt,a.debounce=qe,a.defaults=M,a.defer=Ue,a.delay=ze,a.difference=xe,a.filter=te,a.flatten=Oe,a.forEach=ie,a.functions=C,a.groupBy=wt,a.indexBy=bt,a.initial=Se,a.intersection=Te,a.invert=A,a.invoke=ue,a.keys=lt,a.map=ce,a.max=se,a.memoize=Xe,a.merge=V,a.min=le,a.omit=G,a.once=We,a.pairs=Q,a.partial=Je,a.pick=K,a.pluck=_t,a.range=Me,a.reject=ge,a.rest=Ce,a.shuffle=he,a.sortBy=ye,a.tap=fn,a.throttle=Ve,a.times=un,a.toArray=we,a.transform=Z,a.union=Ae,a.uniq=Ne,a.values=Y,a.where=be,a.without=De,a.wrap=Ge,a.zip=Fe,a.collect=ce,a.drop=Ce,a.each=ie,a.extend=T,a.methods=C,a.object=Ie,a.select=te,a.tail=Ce,a.unique=Ne,a.clone=j,a.cloneDeep=R,a.contains=ee,a.escape=Ze,a.every=ne,a.find=re,a.has=L,a.identity=Ye,a.indexOf=Ee,a.isArguments=S,a.isArray=ct,a.isBoolean=N,a.isDate=D,a.isElement=F,a.isEmpty=I,a.isEqual=P,a.isFinite=H,a.isFunction=$,a.isNaN=q,a.isNull=U,a.isNumber=z,a.isObject=B,a.isRegExp=X,a.isString=W,a.isUndefined=J,a.lastIndexOf=Re,a.mixin=en,a.noConflict=nn,a.random=rn,a.reduce=fe,a.reduceRight=pe,a.result=on,a.size=me,a.some=ve,a.sortedIndex=Le,a.template=an,a.unescape=cn,a.uniqueId=sn,a.all=ne,a.any=ve,a.detect=re,a.findWhere=oe,a.foldl=fe,a.foldr=pe,a.include=ee,a.inject=fe,a.first=ke,a.last=je,a.sample=de,a.take=ke,a.head=ke,en(a),a.VERSION="2.4.1",a.prototype.chain=pn,a.prototype.value=gn,ie(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=Bn[e];a.prototype[e]=function(){var e=this.__wrapped__;return n.apply(e,arguments),ut.spliceObjects||0!==e.length||delete e[0],this}}),ie(["concat","join","slice"],function(e){var n=Bn[e];a.prototype[e]=function(){var e=this.__wrapped__,t=n.apply(e,arguments);return this.__chain__&&(t=new u(t),t.__chain__=!0),t}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Fn._=a,define("lodash.custom",[],function(){return a})):In&&Pn?Hn?(Pn.exports=a)._=a:In._=a:Fn._=a}).call(this),define("jrs.configs",[],function(){return"undefined"!=typeof __jrsConfigs__?__jrsConfigs__:{contextPath:"",userLocale:"en"}}),define("common/util/xssUtil",["require","jrs.configs"],function(e){var n=e("jrs.configs"),t="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,button,caption,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",r={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=function(e){var n=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(o(t));return n},a=function(){var e,n={"&#111;":"o","&#110;":"n","&#115;":"s","&#114;":"r","&#99;":"c","&amp;":"&"};for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[r[e]]=e);return n}(),u=RegExp("(?:"+i(r).join("|")+")","g"),c=/(?:\)|\()/g,s=/\bjavascript:/gi,l=/\bon(\w+?)\s*=/gi,f=/\bsrcdoc\s*=/gi,p=function(e,o){if(e=null==e?"":e,o=o||{},!("string"==typeof e||e instanceof String))return e;if(e.indexOf(n.xssNonce)>=0)return e;if(o.softHTMLEscape){if(e=c.test(e)?e.replace(c,function(e){return r[e]}):e,o.whiteList&&o.whiteList instanceof Array&&o.whiteList.length>0){var i=RegExp("<(?!/|"+o.whiteList.join("\\b|")+")","ig");e=i.test(e)?e.replace(i,"&lt;"):e;var a=RegExp("</(?!"+o.whiteList.join("\\b|")+")","ig");e=a.test(e)?e.replace(a,"&lt;/"):e}else{var p=t;if(o.escapeTags&&o.escapeTags instanceof Array)for(var g=0;g<o.escapeTags.length;++g)p=t.replace(o.escapeTags[g]+",","");var d=RegExp("<(?!/|"+p.replace(/,/g,"\\b|")+")","ig");e=d.test(e)?e.replace(d,"&lt;"):e;var h=RegExp("</(?!"+p.replace(/,/g,"\\b|")+")","ig");e=h.test(e)?e.replace(h,"&lt;/"):e}e=s.test(e)?e.replace(s,""):e,e=l.test(e)?e.replace(l,"&#111;&#110;$1="):e,e=f.test(e)?e.replace(f,"&#115;&#114;&#99;doc="):e}else e=u.test(e)?e.replace(u,function(e){return r[e]}):e;return e},g=RegExp("(?:"+i(a).join("|")+")","ig"),d=function(e){return e=null==e?"":e,"string"==typeof e||e instanceof String?e.indexOf(n.xssNonce)>=0?e:g.test(e)?e.replace(g,function(e){return a[e]}):e:e};return xssUtil={escape:p,unescape:d,noConflict:function(){}},xssUtil}),!function(e,n){"use strict";var t=n.prototype.trim,r=n.prototype.trimRight,o=n.prototype.trimLeft,i=function(e){return 1*e||0},a=function(e,n){if(1>n)return"";for(var t="";n>0;)1&n&&(t+=e),n>>=1,e+=e;return t},u=[].slice,c=function(e){return null==e?"\\s":e.source?e.source:"["+g.escapeRegExp(e)+"]"},s={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},l={};for(var f in s)l[s[f]]=f;var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=a,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,o){var i,a,u,c,s,l,f,g=1,d=r.length,h="",m=[];for(a=0;d>a;a++)if(h=e(r[a]),"string"===h)m.push(r[a]);else if("array"===h){if(c=r[a],c[2])for(i=o[g],u=0;u<c[2].length;u++){if(!i.hasOwnProperty(c[2][u]))throw new Error(p('[_.sprintf] property "%s" does not exist',c[2][u]));i=i[c[2][u]]}else i=c[1]?o[c[1]]:o[g++];if(/[^s]/.test(c[8])&&"number"!=e(i))throw new Error(p("[_.sprintf] expecting number but found %s",e(i)));switch(c[8]){case"b":i=i.toString(2);break;case"c":i=n.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=c[7]?i.toExponential(c[7]):i.toExponential();break;case"f":i=c[7]?parseFloat(i).toFixed(c[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=n(i))&&c[7]?i.substring(0,c[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(c[8])&&c[3]&&i>=0?"+"+i:i,l=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",f=c[6]-n(i).length,s=c[6]?t(l,f):"",m.push(c[5]?i+s:s+i)}return m.join("")},r.cache={},r.parse=function(e){for(var n=e,t=[],r=[],o=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(t[2]){o|=1;var i=[],a=t[2],u=[];if(null===(u=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(i.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(u[1]);else{if(null===(u=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");i.push(u[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return r},r}(),g={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":n(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":n(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return null==e?[]:(e=n(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])},clean:function(e){return g.strip(e).replace(/\s+/g," ")},count:function(e,t){return null==e||null==t?0:n(e).split(t).length-1},chars:function(e){return null==e?[]:n(e).split("")},swapCase:function(e){return null==e?"":n(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":n(e).replace(/[&<>"']/g,function(e){return"&"+l[e]+";"})},unescapeHTML:function(e){return null==e?"":n(e).replace(/\&([^;]+);/g,function(e,t){var r;return t in s?s[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?n.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return null==e?"":n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,n,t,r){var o=g.chars(e);return o.splice(~~n,~~t,r),o.join("")},insert:function(e,n,t){return g.splice(e,n,0,t)},include:function(e,t){return""===t?!0:null==e?!1:-1!==n(e).indexOf(t)},join:function(){var e=u.call(arguments),n=e.shift();return null==n&&(n=""),e.join(n)},lines:function(e){return null==e?[]:n(e).split("\n")},reverse:function(e){return g.chars(e).reverse().join("")},startsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(0,t.length)===t)},endsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(e.length-t.length)===t)},succ:function(e){return null==e?"":(e=n(e),e.slice(0,-1)+n.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":n(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return g.trim(e).replace(/[-_\s]+(.)?/g,function(e,n){return n.toUpperCase()})},underscored:function(e){return g.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return g.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return g.titleize(n(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return g.capitalize(g.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return null==e?"":!r&&t?t.call(e):(r=c(r),n(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,t){return null==e?"":!t&&o?o.call(e):(t=c(t),n(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return null==e?"":!t&&r?r.call(e):(t=c(t),n(e).replace(new RegExp(t+"+$"),""))},truncate:function(e,t,r){return null==e?"":(e=n(e),r=r||"...",t=~~t,e.length>t?e.slice(0,t)+r:e)},prune:function(e,t,r){if(null==e)return"";if(e=n(e),t=~~t,r=null!=r?n(r):"...",e.length<=t)return e;var o=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,o);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):g.rtrim(i.slice(0,i.length-1)),(i+r).length>e.length?e:e.slice(0,i.length)+r},words:function(e,n){return g.isBlank(e)?[]:g.trim(e,n).split(n||/\s+/)},pad:function(e,t,r,o){e=null==e?"":n(e),t=~~t;var i=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",o){case"right":return i=t-e.length,e+a(r,i);case"both":return i=t-e.length,a(r,Math.ceil(i/2))+e+a(r,Math.floor(i/2));default:return i=t-e.length,a(r,i)+e}},lpad:function(e,n,t){return g.pad(e,n,t)},rpad:function(e,n,t){return g.pad(e,n,t,"right")},lrpad:function(e,n,t){return g.pad(e,n,t,"both")},sprintf:p,vsprintf:function(e,n){return n.unshift(e),p.apply(null,n)},toNumber:function(e,t){if(null==e||""==e)return 0;e=n(e);var r=i(i(e).toFixed(~~t));return 0!==r||e.match(/^0+$/)?r:Number.NaN},numberFormat:function(e,n,t,r){if(isNaN(e)||null==e)return"";e=e.toFixed(~~n),r=r||",";var o=e.split("."),i=o[0],a=o[1]?(t||".")+o[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a},strRight:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strRightBack:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.lastIndexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strLeft:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,n){if(null==e)return"";e+="",n=null!=n?""+n:n;var t=e.lastIndexOf(n);return~t?e.slice(0,t):e},toSentence:function(e,n,t,r){n=n||", ",t=t||" and ";var o=e.slice(),i=o.pop();return e.length>2&&r&&(t=g.rtrim(n)+t),o.length?o.join(n)+t+i:i},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,g.toSentence.apply(g,e)},slugify:function(e){if(null==e)return"";var t="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0107\u0119\xe8\xe9\xeb\xea\xec\xed\xef\xee\u0142\u0144\xf2\xf3\xf6\xf4\xf5\xf8\xf9\xfa\xfc\xfb\xf1\xe7\u017c\u017a",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",o=new RegExp(c(t),"g");return e=n(e).toLowerCase().replace(o,function(e){var n=t.indexOf(e);return r.charAt(n)||"-"}),g.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,n){return[n,e,n].join("")},quote:function(e){return g.surround(e,'"')},exports:function(){var e={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(e[n]=this[n]);return e},repeat:function(e,t,r){if(null==e)return"";if(t=~~t,null==r)return a(n(e),t);for(var o=[];t>0;o[--t]=e);return o.join(r)},levenshtein:function(e,t){if(null==e&&null==t)return 0;if(null==e)return n(t).length;if(null==t)return n(e).length;e=n(e),t=n(t);for(var r,o,i=[],a=0;a<=t.length;a++)for(var u=0;u<=e.length;u++)o=a&&u?e.charAt(u-1)===t.charAt(a-1)?r:Math.min(i[u],i[u-1],r)+1:a+u,r=i[u],i[u]=o;return i.pop()}};g.strip=g.trim,g.lstrip=g.ltrim,
g.rstrip=g.rtrim,g.center=g.lrpad,g.rjust=g.lpad,g.ljust=g.rpad,g.contains=g.include,g.q=g.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=g),exports._s=g):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return g}):(e._=e._||{},e._.string=e._.str=g)}(this,String),define("underscore",["require","lodash.custom","common/util/xssUtil","underscore.string"],function(e){"use strict";var n=e("lodash.custom"),t=e("common/util/xssUtil");n.str=e("underscore.string"),n.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},n.mixin(n.str.exports()),n.xssEscape=t.escape;var r=n.template;return n.template=function(e,t,o){var i=n.templateSettings,a=/($^)/;e=String(e||""),o=n.defaults({},o,i);var u=RegExp((o.escape||a).source+"|$","g");return e=e.replace(u,"{{ print(_.xssEscape($1)); }}"),r.call(n,e,t,o)},n}),function(e,n){"function"==typeof define&&define.amd?define("common/enum/loggingLevels",[],e):(n.logging||(n.logging={}),n.logging.loggingLevels=e())}(function(){return{DEBUG:100,INFO:200,WARN:300,ERROR:400}},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/Level",["common/enum/loggingLevels"],e):(n.logging||(n.logging={}),n.logging.Level=e(n.logging.loggingLevels))}(function(e){function n(e,n){this.level=e,this.name=n.toUpperCase()}n.prototype.isGreaterOrEqual=function(e){var t=(e instanceof n?e:n.getLevel(e)).level;return this.level>=t},n.prototype.toString=function(){return this.name},n.getLevel=function(e){return n[e.toUpperCase()]};for(var t in e)e.hasOwnProperty(t)&&(n[t]=new n(e[t],t));return n},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/LogItem",[],e):(n.logging||(n.logging={}),n.logging.LogItem=e())}(function(){"use strict";function e(e){var n,t=e.getHours().toString(),r=e.getMinutes().toString(),o=e.getSeconds().toString(),i=e.getMilliseconds();return 1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),1==o.length&&(o="0"+o),n=t+":"+r+":"+o+"."+i}function n(e){for(var n in e)if(e.hasOwnProperty(n)){if("args"===n)for(var t=0,r=e[n].length;r>t;t++)e[n][t]instanceof Error&&(e[n][t]=e[n][t].message);this[n]=e[n]}}return n.prototype.toArray=function(){var n=[];return n.push(e(this.time)),n.push("["+this.id+"]"),"unknown"!==this.file&&n.push("["+this.file+":"+this.line+"]"),n.push("["+this.level.toString()+"] -"),n=n.concat(this.args)},n},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/Log",["common/logging/Level","common/logging/LogItem"],e):(n.logging||(n.logging={}),n.logging.Log=e(n.logging.Level,n.logging.LogItem))}(function(e,n){function t(n){return function(){return this._prepareLogItem({level:e.getLevel(n),args:arguments})}}function r(e,n){this._id=e.id,this._callback=n}return r.prototype._prepareLogItem=function(e){e.id=this._id,e.args=Array.prototype.slice.call(e.args,0),e.time=new Date;var t=(new Error).stack;if(t){var r=t.split("\n")[2],o=r.match(/\/(\w+\.\w+):(\d+)/i);o&&(e.file=o[1],e.line=o[2])}return e.file||(e.file="unknown",e.line="0"),e=new n(e),this._callback(e),e},r.prototype.debug=t("debug"),r.prototype.info=t("info"),r.prototype.warn=t("warn"),r.prototype.error=t("error"),r},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/appender/ConsoleAppender",[],e):(n.logging||(n.logging={}),n.logging.appender||(n.logging.appender={}),n.logging.appender.ConsoleAppender=e())}(function(){function e(){}return e.prototype.console=function(){if("undefined"==typeof console){var e=function(){};return{assert:e,clear:e,count:e,debug:e,dir:e,dirxml:e,error:e,group:e,groupCollapsed:e,groupEnd:e,info:e,log:e,markTimeline:e,profile:e,profileEnd:e,table:e,time:e,timeEnd:e,timeStamp:e,trace:e,warn:e}}return console}(),e.prototype.write=function(e){var n=this.console.log;switch(e.level.toString()){case"DEBUG":n=this.console.debug||this.console.log;break;case"INFO":n=this.console.info||this.console.log;break;case"WARN":n=this.console.warn;break;case"ERROR":n=this.console.error}try{n.apply(this.console,e.toArray())}catch(t){try{Function.prototype.apply.call(n,this.console,e.toArray())}catch(r){}}},e},this),function(e,n,t){"function"==typeof define&&define.amd?define("common/logging/LoggerManager",["underscore","common/logging/Log","common/logging/Level","common/logging/appender/ConsoleAppender"],e):(n.logging||(n.logging={}),n.logging.LoggerManager=e(t,n.logging.Log,n.logging.Level,n.logging.appender.ConsoleAppender))}(function(e,n,t,r){var o={console:r},i=function(e){this.initialize(e||{})};return e.extend(i.prototype,{defaults:function(){return{enabled:!1,level:"error",appenders:{},appenderInstances:{},loggers:{}}},initialize:function(n){this.attributes=e.defaults(n,this.defaults());var t={};e.each(o,function(e,n){t[n]=new e}),this.set("appenderInstances",t)},get:function(e){return this.attributes[e]},set:function(e,n){this.attributes[e]=n},register:function(t){var r={id:"root"};if("string"==typeof t&&""!==t?r.id=t:t&&t.hasOwnProperty("id")&&(r.id=t.id),!this.get("loggers").hasOwnProperty(r.id)){var o=this.get("loggers");o[r.id]=new n(r,e.bind(this._processLogItem,this)),this.set("loggers",o)}return this.get("loggers")[r.id]},disable:function(){this.set("enabled",!1)},enable:function(e){e&&this.set("level",t.getLevel(e)),this.set("enabled",!0)},setLevel:function(e){this.set("level",e)},_processLogItem:function(e){this.get("enabled")&&e.level.isGreaterOrEqual(this.get("level"))&&this._appendLogItem(e)},_appendLogItem:function(e){var n=this.get("appenders"),t=this.get("appenderInstances");for(var r in n)t.hasOwnProperty(n[r])&&t[n[r]].write(e)}}),i},this,this._),define("logger",["require","exports","module","common/logging/LoggerManager"],function(e,n,t){"use strict";var r=e("common/logging/LoggerManager"),o=t.config(),i=new r(o);return i}),function(e){"use strict";define("xdm",["logger"],e)}(function(e){function n(e,n){var t=typeof e[n];return"function"==t||!("object"!=t||!e[n])||"unknown"==t}function t(e,n){return!("object"!=typeof e[n]||!e[n])}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(){var e="Shockwave Flash",n="application/x-shockwave-flash";if(!d(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var t=navigator.plugins[e].description;t&&!d(navigator.mimeTypes)&&navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin&&(k=t.match(/\d+/g))}if(!k){var r;try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),k=Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),r=null}catch(o){}}if(!k)return!1;var i=parseInt(k[0],10),a=parseInt(k[1],10);return O=i>9&&a>0,!0}function i(){if(!q){q=!0,$("firing dom_onReady");for(var e=0;e<U.length;e++)U[e]();U.length=0}}function a(e,n){return q?void e.call(n):void U.push(function(){e.call(n)})}function u(){var e=parent;if(""!==D)for(var n=0,t=D.split(".");n<t.length;n++)e=e[t[n]];return e.easyXDM}function c(e){return $("Settings namespace to '"+e+"'"),window.easyXDM=I,D=e,D&&(P="easyXDM_"+D.replace(".","_")+"_"),F}function s(e){return e.match(L)[3]}function l(e){return e.match(L)[4]||""}function f(e){var n=e.toLowerCase().match(L),t=n[2],r=n[3],o=n[4]||"";return("http:"==t&&":80"==o||"https:"==t&&":443"==o)&&(o=""),t+"//"+r+o}function p(e){if(e=e.replace(N,"$1/"),!e.match(/^(http||https):\/\//)){var n="/"===e.substring(0,1)?"":location.pathname;"/"!==n.substring(n.length-1)&&(n=n.substring(0,n.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+n+e}for(;A.test(e);)e=e.replace(A,"");return $("resolved url '"+e+"'"),e}function g(e,n){var t="",r=e.indexOf("#");-1!==r&&(t=e.substring(r),e=e.substring(0,r));var o=[];for(var i in n)n.hasOwnProperty(i)&&o.push(i+"="+encodeURIComponent(n[i]));return e+(H?"#":-1==e.indexOf("?")?"?":"&")+o.join("&")+t}function d(e){return"undefined"==typeof e}function h(e,n,t){var r;for(var o in n)n.hasOwnProperty(o)&&(o in e?(r=n[o],"object"==typeof r?h(e[o],r,t):t||(e[o]=n[o])):e[o]=n[o]);return e}function m(){var e=document.body.appendChild(document.createElement("form")),n=e.appendChild(document.createElement("input"));n.name=P+"TEST"+M,x=n!==e.elements[n.name],document.body.removeChild(e),$("HAS_NAME_PROPERTY_BUG: "+x)}function v(e){$("creating frame: "+e.props.src),d(x)&&m();var n;x?n=document.createElement('<iframe name="'+e.props.name+'"/>'):(n=document.createElement("IFRAME"),n.name=e.props.name),n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=document.getElementById(e.container)),e.container||(h(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=document.body);var t=e.props.src;if(e.props.src="javascript:false",h(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,e.container.appendChild(n),e.onLoad&&E(n,"load",e.onLoad),e.usePost){var r,o=e.container.appendChild(document.createElement("form"));if(o.target=n.name,o.action=t,o.method="POST","object"==typeof e.usePost)for(var i in e.usePost)e.usePost.hasOwnProperty(i)&&(x?r=document.createElement('<input name="'+i+'"/>'):(r=document.createElement("INPUT"),r.name=i),r.value=e.usePost[i],o.appendChild(r));o.submit(),o.parentNode.removeChild(o)}else n.src=t;return e.props.src=t,n}function y(e,n){"string"==typeof e&&(e=[e]);for(var t,r=e.length;r--;)if(t=e[r],t=new RegExp("^"==t.substr(0,1)?t:"^"+t.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),t.test(n))return!0;return!1}function w(e){var t,r=e.protocol;if(e.isHost=e.isHost||d(X.xdm_p),H=e.hash||!1,$("preparing transport stack"),e.props||(e.props={}),e.isHost)e.remote=p(e.remote),e.channel=e.channel||"default"+M++,e.secret=Math.random().toString(16).substring(2),d(r)?(r=f(location.href)==f(e.remote)?"4":n(window,"postMessage")||n(document,"postMessage")?"1":e.swf&&n(window,"ActiveXObject")&&o()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0",$("selecting protocol: "+r)):$("using protocol: "+r);else if($("using parameters from query"),e.channel=X.xdm_c.replace(/["'<>\\]/g,""),e.secret=X.xdm_s,e.remote=X.xdm_e.replace(/["'<>\\]/g,""),r=X.xdm_p,e.acl&&!y(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=r,r){case"0":if(h(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){$("looking for image to use as local");for(var i,a=location.protocol+"//"+location.host,u=document.body.getElementsByTagName("img"),c=u.length;c--;)if(i=u[c],i.src.substring(0,a.length)===a){e.local=i.src;break}e.local||($("no image found, defaulting to using the window"),e.local=window)}var s={xdm_c:e.channel,xdm_p:0};e.local===window?(e.usePolling=!0,e.useParent=!0,e.local=location.protocol+"//"+location.host+location.pathname+location.search,s.xdm_e=e.local,s.xdm_pa=1):s.xdm_e=p(e.local),e.container&&(e.useResize=!1,s.xdm_po=1),e.remote=g(e.remote,s)}else h(e,{channel:X.xdm_c,remote:X.xdm_e,useParent:!d(X.xdm_pa),usePolling:!d(X.xdm_po),useResize:e.useParent?!1:e.useResize});t=[new F.stack.HashTransport(e),new F.stack.ReliableBehavior({}),new F.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new F.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":t=[new F.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=p(e.remoteHelper)),t=[new F.stack.NameTransport(e),new F.stack.QueueBehavior,new F.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":t=[new F.stack.NixTransport(e)];break;case"4":t=[new F.stack.SameOriginTransport(e)];break;case"5":t=[new F.stack.FrameElementTransport(e)];break;case"6":k||o(),t=[new F.stack.FlashTransport(e)]}return t.push(new F.stack.QueueBehavior({lazy:e.lazy,remove:!0})),t}function b(e){for(var n,t={incoming:function(e,n){this.up.incoming(e,n)},outgoing:function(e,n){this.down.outgoing(e,n)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},r=0,o=e.length;o>r;r++)n=e[r],h(n,t,!0),0!==r&&(n.down=e[r-1]),r!==o-1&&(n.up=e[r+1]);return n}function _(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if("undefined"==typeof document)return{};var x,k,O,E,S,T=window.setTimeout,j=e.register("EasyXDM"),R=this,M=Math.floor(1e4*Math.random()),C=Function.prototype,L=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,A=/[\-\w]+\/\.\.\//,N=/([^:])\/\//g,D="",F={},I=window.easyXDM,P="easyXDM_",H=!1,$=C;if(n(window,"addEventListener"))E=function(e,n,t){$("adding listener "+n),e.addEventListener(n,t,!1)},S=function(e,n,t){$("removing listener "+n),e.removeEventListener(n,t,!1)};else{if(!n(window,"attachEvent"))throw new Error("Browser not supported");E=function(e,n,t){$("adding listener "+n),e.attachEvent("on"+n,t)},S=function(e,n,t){$("removing listener "+n),e.detachEvent("on"+n,t)}}var B,q=!1,U=[];if("readyState"in document?(B=document.readyState,q="complete"==B||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==B||"interactive"==B)):q=!!document.body,!q){if(n(window,"addEventListener"))E(document,"DOMContentLoaded",i);else if(E(document,"readystatechange",function(){"complete"==document.readyState&&i()}),document.documentElement.doScroll&&window===top){var z=function(){if(!q){try{document.documentElement.doScroll("left")}catch(e){return void T(z,1)}i()}};z()}E(window,"load",i)}var X=function(e){e=e.substring(1).split("&");for(var n,t={},r=e.length;r--;)n=e[r].split("="),t[n[0]]=decodeURIComponent(n[1]);return t}(/xdm_e=/.test(location.search)?location.search:location.hash),W=function(){var e={},n={a:[1,2,3]},t='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(n).replace(/\s/g,"")===t?JSON:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===t&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(n=t.evalJSON(),n.a&&3===n.a.length&&3===n.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(W=function(){return e},e):null)};h(F,{version:"2.4.19.0",query:X,stack:{},apply:h,getJSONObject:W,whenReady:a,noConflict:c});var J={_deferred:[],flush:function(){this.trace("... deferred messages ...");for(var e=0,n=this._deferred.length;n>e;e++)this.trace(this._deferred[e]);this._deferred.length=0,this.trace("... end of deferred messages ...")},getTime:function(){var e=new Date,n=e.getHours()+"",t=e.getMinutes()+"",r=e.getSeconds()+"",o=e.getMilliseconds()+"",i="000";return 1==n.length&&(n="0"+n),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),o=i.substring(o.length)+o,n+":"+t+":"+r+"."+o},log:function(e){j.debug(location.host+(D?":"+D:"")+": "+e)},getTracer:function(n){var t=e.register(n);return function(e){t.debug(e)}}};return J.log("easyXDM present on '"+location.href),F.Debug=J,$=J.getTracer("EasyXDM.{Private}"),F.DomHelper={on:E,un:S,requiresJSON:function(e){t(window,"JSON")?J.log("native JSON found"):(J.log("loading external JSON"),document.write('<script type="text/javascript" src="'+e+'"></script>'))}},function(){var e={};F.Fn={set:function(n,t){this._trace("storing function "+n),e[n]=t},get:function(n,t){if(this._trace("retrieving function "+n),e.hasOwnProperty(n)){var r=e[n];return r||this._trace(n+" not found"),t&&delete e[n],r}}},F.Fn._trace=J.getTracer("easyXDM.Fn")}(),F.Socket=function(e){var n=J.getTracer("easyXDM.Socket");n("constructor");var t=b(w(e).concat([{incoming:function(n,t){e.onMessage(n,t)},callback:function(n){e.onReady&&e.onReady(n)}}])),r=f(e.remote);this.origin=f(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,r)},t.init()},F.Rpc=function(e,n){var t=J.getTracer("easyXDM.Rpc");if(t("constructor"),n.local)for(var r in n.local)if(n.local.hasOwnProperty(r)){var o=n.local[r];"function"==typeof o&&(n.local[r]={method:o})}var i=b(w(e).concat([new F.stack.RpcBehavior(this,n),{callback:function(n){e.onReady&&e.onReady(n)}}]));this.origin=f(e.remote),this.destroy=function(){i.destroy()},i.init()},F.stack.SameOriginTransport=function(e){var n=J.getTracer("easyXDM.stack.SameOriginTransport");n("constructor");var t,r,o,i;return t={outgoing:function(e,n,t){o(e),t&&t()},destroy:function(){n("destroy"),r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){n("init"),i=f(e.remote),e.isHost?(h(e.props,{src:g(e.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:e.channel,xdm_p:4}),name:P+e.channel+"_provider"}),r=v(e),F.Fn.set(e.channel,function(e){return o=e,T(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,i)}})):(o=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,i)}),T(function(){t.up.callback(!0)},0))},init:function(){a(t.onDOMReady,t)}}},F.stack.FlashTransport=function(e){function n(e,n){T(function(){r("received message"),o.up.incoming(e,u)},0)}function t(n){r("creating factory with SWF from "+n);var t=e.swf+"?host="+e.isHost,o="easyXDM_swf_"+Math.floor(1e4*Math.random());F.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){F.stack.FlashTransport[n].swf=c=d.firstChild;for(var e=F.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?d="string"==typeof e.swfContainer?document.getElementById(e.swfContainer):e.swfContainer:(d=document.createElement("div"),h(d.style,O&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),document.body.appendChild(d));var i="callback=flash_loaded"+encodeURIComponent(n.replace(/[\-.]/g,"_"))+"&proto="+R.location.protocol+"&domain="+encodeURIComponent(s(R.location.href))+"&port="+encodeURIComponent(l(R.location.href))+"&ns="+encodeURIComponent(D);i+="&log=true",d.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+o+"' data='"+t+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+t+"'></param><param name='flashvars' value='"+i+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+t+"' height='1' width='1'></embed></object>"}var r=J.getTracer("easyXDM.stack.FlashTransport");r("constructor");var o,i,u,c,d;return o={outgoing:function(n,t,r){c.postMessage(e.channel,n.toString()),r&&r()},destroy:function(){r("destroy");try{c.destroyChannel(e.channel)}catch(n){}c=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){r("init"),u=e.remote,F.Fn.set("flash_"+e.channel+"_init",function(){T(function(){r("firing onReady"),o.up.callback(!0)})}),F.Fn.set("flash_"+e.channel+"_onMessage",n),e.swf=p(e.swf);var a=s(e.swf),l=function(){F.stack.FlashTransport[a].init=!0,c=F.stack.FlashTransport[a].swf,c.createChannel(e.channel,e.secret,f(e.remote),e.isHost),e.isHost&&(O&&e.swfNoThrottle&&h(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),h(e.props,{src:g(e.remote,{xdm_e:f(location.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:P+e.channel+"_provider"}),i=v(e))};F.stack.FlashTransport[a]&&F.stack.FlashTransport[a].init?l():F.stack.FlashTransport[a]?F.stack.FlashTransport[a].queue.push(l):(F.stack.FlashTransport[a]={queue:[l]},t(a))},init:function(){a(o.onDOMReady,o)}}},F.stack.PostMessageTransport=function(e){function n(e){if(e.origin)return f(e.origin);if(e.uri)return f(e.uri);if(e.domain)return location.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function t(t){var i=n(t);r("received message '"+t.data+"' from "+i),i==c&&t.data.substring(0,e.channel.length+1)==e.channel+" "&&o.up.incoming(t.data.substring(e.channel.length+1),i)}var r=J.getTracer("easyXDM.stack.PostMessageTransport");r("constructor");var o,i,u,c;return o={outgoing:function(n,t,r){u.postMessage(e.channel+" "+n,t||c),r&&r()},destroy:function(){r("destroy"),S(window,"message",t),i&&(u=null,i.parentNode.removeChild(i),i=null)},onDOMReady:function(){if(r("init"),c=f(e.remote),e.isHost){var n=function(a){a.data==e.channel+"-ready"&&(r("firing onReady"),u="postMessage"in i.contentWindow?i.contentWindow:i.contentWindow.document,S(window,"message",n),E(window,"message",t),T(function(){o.up.callback(!0)},0))};E(window,"message",n),h(e.props,{src:g(e.remote,{xdm_e:f(location.href),xdm_c:e.channel,xdm_p:1}),name:P+e.channel+"_provider"}),i=v(e)}else E(window,"message",t),u="postMessage"in window.parent?window.parent:window.parent.document,u.postMessage(e.channel+"-ready",c),T(function(){o.up.callback(!0)},0)},init:function(){a(o.onDOMReady,o)}}},F.stack.FrameElementTransport=function(e){var n=J.getTracer("easyXDM.stack.FrameElementTransport");n("constructor");var t,r,o,i;return t={outgoing:function(e,n,t){o.call(this,e),t&&t()},destroy:function(){n("destroy"),r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){n("init"),i=f(e.remote),e.isHost?(h(e.props,{src:g(e.remote,{xdm_e:f(location.href),xdm_c:e.channel,xdm_p:5}),name:P+e.channel+"_provider"}),r=v(e),r.fn=function(e){return delete r.fn,o=e,T(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,i)}}):(document.referrer&&f(document.referrer)!=X.xdm_e&&(window.top.location=X.xdm_e),o=window.frameElement.fn(function(e){t.up.incoming(e,i)}),t.up.callback(!0))},init:function(){a(t.onDOMReady,t)}}},F.stack.NameTransport=function(e){function n(n){var t=e.remoteHelper+(c?"#_3":"#_2")+e.channel;i("sending message "+n),i("navigating to  '"+t+"'"),s.contentWindow.sendMessage(n,t)}function t(){c?2!==++m&&c||u.up.callback(!0):(n("ready"),i("calling onReady"),u.up.callback(!0))}function r(e){i("received message "+e),u.up.incoming(e,w)}function o(){y&&T(function(){y(!0)},0)}var i=J.getTracer("easyXDM.stack.NameTransport");i("constructor"),e.isHost&&d(e.remoteHelper)&&i("missing remoteHelper");var u,c,s,l,m,y,w,b;return u={outgoing:function(e,t,r){y=r,n(e)},destroy:function(){i("destroy"),s.parentNode.removeChild(s),s=null,c&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){i("init"),c=e.isHost,m=0,w=f(e.remote),e.local=p(e.local),c?(F.Fn.set(e.channel,function(n){i("received initial message "+n),c&&"ready"===n&&(F.Fn.set(e.channel,r),t())}),b=g(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),h(e.props,{src:b+"#"+e.channel,name:P+e.channel+"_provider"}),l=v(e)):(e.remoteHelper=e.remote,F.Fn.set(e.channel,r));var n=function(){var r=s||this;S(r,"load",n),F.Fn.set(e.channel+"_load",o),function i(){"function"==typeof r.contentWindow.sendMessage?t():T(i,50)}()};s=v({props:{src:e.local+"#_4"+e.channel},onLoad:n})},init:function(){a(u.onDOMReady,u)}}},F.stack.HashTransport=function(e){function n(n){if(i("sending message '"+(g+1)+" "+n+"' to "+w),!m)return void i("no caller window");var t=e.remote+"#"+g++ +"_"+n;(c||!y?m.contentWindow:m).location=t}function t(e){p=e,i("received message '"+p+"' from "+w),u.up.incoming(p.substring(p.indexOf("_")+1),w)}function r(){if(d){var e=d.location.href,n="",r=e.indexOf("#");-1!=r&&(n=e.substring(r)),n&&n!=p&&(i("poll: new message"),t(n))}}function o(){i("starting polling"),s=setInterval(r,l)}var i=J.getTracer("easyXDM.stack.HashTransport");i("constructor");var u,c,s,l,p,g,d,m,y,w;return u={outgoing:function(e,t){n(e)},destroy:function(){window.clearInterval(s),(c||!y)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){if(c=e.isHost,l=e.interval,p="#"+e.channel,g=0,y=e.useParent,w=f(e.remote),c){if(h(e.props,{src:e.remote,name:P+e.channel+"_provider"}),y)e.onLoad=function(){d=window,o(),u.up.callback(!0)};else{var n=0,t=e.delay/50;!function r(){if(++n>t)throw i("unable to get reference to _listenerWindow, giving up"),new Error("Unable to reference listenerwindow");try{d=m.contentWindow.frames[P+e.channel+"_consumer"]}catch(a){}d?(o(),i("got a reference to _listenerWindow"),u.up.callback(!0)):T(r,50)}()}m=v(e)}else d=window,o(),y?(m=parent,u.up.callback(!0)):(h(e,{props:{src:e.remote+"#"+e.channel+new Date,name:P+e.channel+"_consumer"},onLoad:function(){u.up.callback(!0)}}),m=v(e))},init:function(){a(u.onDOMReady,u)}}},F.stack.ReliableBehavior=function(e){var n=J.getTracer("easyXDM.stack.ReliableBehavior");n("constructor");var t,r,o=0,i=0,a="";return t={incoming:function(e,u){n("incoming: "+e);var c=e.indexOf("_"),s=e.substring(0,c).split(",");e=e.substring(c+1),s[0]==o&&(n("message delivered"),a="",r&&r(!0)),e.length>0&&(n("sending ack, and passing on "+e),t.down.outgoing(s[1]+","+o+"_"+a,u),i!=s[1]&&(i=s[1],t.up.incoming(e,u)))},outgoing:function(e,n,u){a=e,r=u,t.down.outgoing(i+","+ ++o+"_"+e,n)}}},F.stack.QueueBehavior=function(e){function n(){if(e.remove&&0===i.length)return t("removing myself from the stack"),void _(r);if(!a&&0!==i.length&&!o){t("dispatching from queue"),a=!0;var u=i.shift();r.down.outgoing(u.data,u.origin,function(e){a=!1,u.callback&&T(function(){u.callback(e)},0),n()})}}var t=J.getTracer("easyXDM.stack.QueueBehavior");t("constructor");var r,o,i=[],a=!0,u="",c=0,s=!1,l=!1;return r={init:function(){d(e)&&(e={}),e.maxLength&&(c=e.maxLength,l=!0),e.lazy?s=!0:r.down.init()},callback:function(e){a=!1;var t=r.up;n(),t.callback(e)},incoming:function(n,o){if(l){var i=n.indexOf("_"),a=parseInt(n.substring(0,i),10);u+=n.substring(i+1),0===a?(t("received the last fragment"),e.encode&&(u=decodeURIComponent(u)),r.up.incoming(u,o),u=""):t("waiting for more fragments, seq="+n)}else r.up.incoming(n,o)},outgoing:function(o,a,u){e.encode&&(o=encodeURIComponent(o));var f,p=[];if(l){for(;0!==o.length;)f=o.substring(0,c),o=o.substring(f.length),p.push(f);for(;f=p.shift();)t("enqueuing"),i.push({data:p.length+"_"+f,origin:a,callback:0===p.length?u:null})}else i.push({data:o,origin:a,callback:u});s?r.down.init():n()},destroy:function(){t("destroy"),o=!0,r.down.destroy()}}},F.stack.VerifyBehavior=function(e){function n(){t("requesting verification"),o=Math.random().toString(16).substring(2),r.down.outgoing(o)}var t=J.getTracer("easyXDM.stack.VerifyBehavior");t("constructor");var r,o,i;return r={incoming:function(a,u){var c=a.indexOf("_");-1===c?a===o?(t("verified, calling callback"),r.up.callback(!0)):i||(t("returning secret"),i=a,e.initiate||n(),r.down.outgoing(a)):a.substring(0,c)===i&&r.up.incoming(a.substring(c+1),u)},outgoing:function(e,n,t){r.down.outgoing(o+"_"+e,n,t)},callback:function(t){e.initiate&&n()}}},F.stack.RpcBehavior=function(e,n){function t(e){e.jsonrpc="2.0",a.down.outgoing(c.stringify(e))}function o(e,n){var r=Array.prototype.slice;return u("creating method "+n),function(){u("executing method "+n);var o,i=arguments.length,a={method:n};i>0&&"function"==typeof arguments[i-1]?(i>1&&"function"==typeof arguments[i-2]?(o={success:arguments[i-2],error:arguments[i-1]},a.params=r.call(arguments,0,i-2)):(o={success:arguments[i-1]},a.params=r.call(arguments,0,i-1)),l[""+ ++s]=o,a.id=s):a.params=r.call(arguments,0),e.namedParams&&1===a.params.length&&(a.params=a.params[0]),t(a)}}function i(e,n,o,i){if(!o)return u("requested to execute non-existent procedure "+e),void(n&&t({id:n,error:{code:-32601,message:"Procedure not found."}}));u("requested to execute procedure "+e);var a,c;n?(a=function(e){a=C,t({id:n,result:e})},c=function(e,r){c=C;var o={id:n,error:{code:-32099,message:e}};r&&(o.error.data=r),t(o)}):a=c=C,r(i)||(i=[i]);try{var s=o.method.apply(o.scope,i.concat([a,c]));d(s)||a(s)}catch(l){c(l.message)}}var a,u=J.getTracer("easyXDM.stack.RpcBehavior"),c=n.serializer||W(),s=0,l={};return a={incoming:function(e,r){var o=c.parse(e);if(o.method)u("received request to execute method "+o.method+(o.id?" using callback id "+o.id:"")),n.handle?n.handle(o,t):i(o.method,o.id,n.local[o.method],o.params);else{u("received return value destined to callback with id "+o.id);var a=l[o.id];o.error?a.error?a.error(o.error):u("unhandled error returned."):a.success&&a.success(o.result),delete l[o.id]}},init:function(){if(u("init"),n.remote){u("creating stubs");for(var t in n.remote)n.remote.hasOwnProperty(t)&&(e[t]=o(n.remote[t],t))}a.down.init()},destroy:function(){u("destroy");for(var t in n.remote)n.remote.hasOwnProperty(t)&&e.hasOwnProperty(t)&&delete e[t];a.down.destroy()}}},F}),define("xdmRemote/xdmRemoteMain",["require","jquery","xdm"],function(e){function n(e){var n=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,t=e.toLowerCase().match(n),r=t[2],o=t[3],i=t[4]||"";return("http:"==r&&":80"==i||"https:"==r&&":443"==i)&&(i=""),r+"//"+o+i}var t=e("jquery"),r=e("xdm"),o={},i=new r.Rpc({acl:["*"]},{local:{request:function(e,r,a){void 0===e.headers&&(e.headers={}),e.headers["X-Remote-Domain"]=i.origin,e.headers["X-Local-Domain"]=n(location.href);var u=t.ajax(e);e.id&&(o[e.id]=u),u.then(function(e,n,t){t.responseHeadersString=t.getAllResponseHeaders(),r({data:e,status:n,xhr:t})},a)},abort:function(e){o[e]&&"pending"==o[e].state()&&o[e].abort(),delete o[e]}}});window.remote=i});