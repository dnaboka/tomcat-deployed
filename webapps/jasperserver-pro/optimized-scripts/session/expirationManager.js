define(["require","jquery","common/util/classUtil","settings!request","request","common/util/datetime/Time","bundle!CommonBundle"],function(e){var t=e("jquery"),n=(e("common/util/classUtil"),e("settings!request")),r=e("request"),o=e("common/util/datetime/Time"),u=e("bundle!CommonBundle"),i="hh:mm:ss",s=1e3,m=120*s,a=n.maxInactiveInterval;return a=0>=a?0:a*s,function(e){function c(){f&&clearTimeout(f),f=setTimeout(function(){var e=l();e&&r({url:n.contextPath+"/rest_v2/resources/"})},q)}function l(){var e=new Date((new Date).getTime()+v),t=new o(e.getHours(),e.getMinutes(),e.getSeconds());return confirm(u["session.expiration.warning"]+" "+t.format(i))}var d;e&&(d=e.timeoutWarningDelay*s||m);var f,g,q=a>d?a-d:a/2,v=a>d?d:a/2;return a&&(g=t(window.document),g.on("request:before",c),g.on("request:success",c)),{handle:c,showWarning:l}}});