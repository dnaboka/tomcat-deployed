define(["require","backbone","jquery","underscore","home/view/ExpandableBlockView","home/view/PopularLinkView","home/view/ListView","home/view/WorkflowView","home/view/ResourceView","text!home/template/homeTemplate.htm","bundle!HomeBundle"],function(e){"use strict";var t=e("backbone"),i=e("jquery"),l=e("underscore"),o=e("home/view/ExpandableBlockView"),n=e("home/view/PopularLinkView"),s=e("home/view/ListView"),r=e("home/view/WorkflowView"),a=e("home/view/ResourceView"),m=s.extend({tagName:"ul",className:"resourceBlock-list",itemPlural:"items",tabindex:"0"}),c=s.extend({tagName:"table",className:"resourceBlock-table",itemPlural:"items",tabindex:"0"}),h=e("text!home/template/homeTemplate.htm"),w=e("bundle!HomeBundle");return t.View.extend({initialize:function(){var e=new m({collection:this.model.getContentReferences(),itemPlural:w["popular.resources"],listElementView:n}),t=new c({collection:this.model.getResources(),itemPlural:w["recently.viewed.items"],listElementView:a,msgNothingToDisplay:w["recently.viewed.nothing.display"],nothingPrefix:'<tr colspan="2"><td>',nothingSuffix:"</td></tr>"});this.popularLinksBlock=new o({title:w["popular.resources"],stateKey:"homePagePopularLinksExpandableList",$block:e.$el}),this.recentItemsBlock=new o({title:w["recently.viewed.items"],stateKey:"homePageRecentlyViewedResourcesExpandableList",$block:t.$el}),this.workflowsView=new s({collection:this.model.getWorkflows(),listElementView:r,className:"workflowsBlock",template:"",tagName:"ul"}),this.model.on("change",this.render,this)},render:function(){return this.$el.append(i(l.template(h,this.model.toJSON()))),this.$(".homeMain").append(this.workflowsView.$el),this.$(".homeSidebar-title").after(this.recentItemsBlock.render().$el),this.$(".homeSidebar").append(this.popularLinksBlock.render().$el),this}})});