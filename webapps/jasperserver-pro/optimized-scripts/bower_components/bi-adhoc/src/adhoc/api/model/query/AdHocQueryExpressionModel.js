define(["require","underscore","jquery","backbone","./AdHocQueryParametersModel","./AdHocQueryExpansionsCollection"],function(e){"use strict";function n(e){var r=a.keys(e)[0],o=a.omit(e[r],"operands","start","end");return o.nodeType=r,"range"==r?o.operands=[n(e[r].start),n(e[r].end)]:"boundary"==r?o=n(e[r]):e[r].operands&&(o.operands=a.map(e[r].operands,n)),e[r].value&&(o.nodeType="literal",o.type=r),o}function r(e,n,a){if(a||(a=[]),e.nodeType===n&&a.push(e),e.operands)for(var o=0;o<e.operands.length;o++)r(e.operands[o],n,a);return a}var a=e("underscore"),o=(e("jquery"),e("backbone")),t=(e("./AdHocQueryParametersModel"),e("./AdHocQueryExpansionsCollection"),o.Model.extend({initialize:function(e,n){this.schema=n.adHocModel.schema},acquire:function(e){e&&e.object&&this.set(n(e.object))},readFilterInformation:function(){var e=this,n=a.filter(r(this.attributes,"function"),function(e){return"filter"===e.functionName});return a.compact(a.map(n,function(n){if("DYNAMIC"===n.operands[1].value){var o=r(n.operands[2],"variable"),t=a.reduce(o,function(n,r){if(!n){var a=e.schema.getByReference(r.name);a&&(n=a.type)}return n},null);return{id:n.operands[0].value,isDynamic:"DYNAMIC"===n.operands[1].value,levelName:n.operands[2].operands[0].name,filterExpression:n.operands[2],variables:a.map(o,function(e){return{name:e.name,type:t}})}}}))}}));return t});