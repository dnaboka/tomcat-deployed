"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(e,t){var i=this._messages[e];return i?new Template(i).evaluate(t?t:{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,i){ajaxTargettedUpdate(e,{postData:t,callback:i,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(e)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(e){return function(){var t;return t||e.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;$("display").observe("click",function(e){var t=e.element(),i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);if(i)for(var n in Administer.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[n]())}),jQuery(".js-logSettings select").on("change",function(t){var i,n=jQuery(t.target);i=n.hasClass("js-newLogger")?jQuery("#newLoggerName").val():n.parent().prev().text(),e._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(e){return function(){var t;return t||e.logging}}(this)),define("serverSettingsCommon/enum/confirmDialogTypesEnum",[],function(){return{CANCEL_CONFIRM:"cancelConfirm",DELETE_CONFIRM:"deleteConfirm",PERMISSION_CONFIRM:"permissionConfirm",NAME_CONFIRM:"nameConfirm",EDIT_CONFIRM:"editConfirm"}}),define("text!serverSettingsCommon/templates/buttonTemplate.htm",[],function(){return'<button class="button action up {{= primary ? \'primary\' : \'\'}}">\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),define("serverSettingsCommon/view/traits/buttonsTrait",["require","underscore","common/component/base/OptionContainer","serverSettingsCommon/enum/confirmDialogTypesEnum","text!serverSettingsCommon/templates/buttonTemplate.htm"],function(e){var t=e("underscore"),i=e("common/component/base/OptionContainer"),n=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),o=e("text!serverSettingsCommon/templates/buttonTemplate.htm");return{_initButtons:function(e){this.buttons=new i({options:e.buttons,el:e.buttonsContainer,contextName:"button",optionTemplate:o}),this.buttons.disable(),this.listenTo(this.buttons,"button:save",this.saveChildren),this.listenTo(this.buttons,"button:cancel",t.bind(this._openConfirm,this,null,n.CANCEL_CONFIRM))},toggleButtons:function(){var e=this.buttons;this.containsUnsavedItems()?e.enable():(t.each(e.options,function(e){e.$el.removeClass("over")}),e.disable())}}}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.marionette",["backbone","underscore"],function(i,n){return e.Marionette=e.Mn=t(e,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(e,i,n)}else e.Marionette=e.Mn=t(e,e.Backbone,e._)}(this,function(e,t,i){"use strict";!function(e,t){var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.5",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}(t,i),function(e,t){var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,i,n){var o=this.storage.getCommands(e);t.each(o.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(i){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var o="vent"===e?"on":"setHandler";t.each(i,function(i,s){this[e][o](s,t.bind(i,n))},this)}}}),n}(n),n.radio=function(e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(n[e],function(t){this[e][t]=o(this,e,t)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(e,t,i){return function(n){var o=e._getChannel(n)[t],s=Array.prototype.slice.call(arguments,1);return o[i].apply(o,s)}};return new i}(n),e.Wreqr}(t,i);var n=e.Marionette,o=t.Marionette={};o.VERSION="2.3.2",o.noConflict=function(){return e.Marionette=n,this},t.Marionette=o,o.Deferred=t.$.Deferred,o.extend=t.Model.extend,o.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},o.getOption=function(e,t){return e&&t?e.options&&void 0!==e.options[t]?e.options[t]:e[t]:void 0},o.proxyGetOption=function(e){return o.getOption(this,e)},o._getValue=function(e,t,n){return i.isFunction(e)&&(n=n||[],e=e.apply(t,n)),e},o.normalizeMethods=function(e){return i.reduce(e,function(e,t,n){return i.isFunction(t)||(t=this[t]),t&&(e[n]=t),e},{},this)},o.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},o.normalizeUIKeys=function(e,t){return i.reduce(e,function(e,i,n){var s=o.normalizeUIString(n,t);return e[s]=i,e},{})},o.normalizeUIValues=function(e,t){return i.each(e,function(n,s){i.isString(n)&&(e[s]=o.normalizeUIString(n,t))}),e},o.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),o=[e].concat(i.toArray(arguments));return i[n].apply(i,o)}})};var s=o.deprecate=function(e,t){i.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||s._cache[e]||(s._warn("Deprecation warning: "+e),s._cache[e]=!0)};s._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},s._cache={},o._triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(n,o,s){var r=arguments.length<3;r&&(s=o,o=s[0]);var a,h="on"+o.replace(t,e),l=n[h];return i.isFunction(l)&&(a=l.apply(n,r?i.rest(s):s)),i.isFunction(n.trigger)&&(r+s.length>1?n.trigger.apply(n,r?s:[o].concat(i.rest(s,0))):n.trigger(o)),a}}(),o.triggerMethod=function(e){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(e){var t=i.isFunction(e.triggerMethod)?e.triggerMethod:o.triggerMethod;return t.apply(e,i.rest(arguments))},o.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,s()}function n(){e._isRendered=!0,s()}function s(){e._isShown&&e._isRendered&&o.isNodeAttached(e.el)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:n})},function(e){function t(t,n,o,s){var r=s.split(/\s+/);i.each(r,function(i){var s=t[i];if(!s)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,o,s)})}function n(e,t,i,n){e.listenTo(t,i,n)}function o(e,t,n,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];e.stopListening(t,n,o)})}function s(e,t,i,n){e.stopListening(t,i,n)}function r(t,n,o,s,r){if(n&&o){if(!i.isObject(o))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});o=e._getValue(o,t),i.each(o,function(e,o){i.isFunction(e)?s(t,n,o,e):r(t,n,o,e)})}}e.bindEntityEvents=function(e,i,o){r(e,i,o,n,t)},e.unbindEntityEvents=function(e,t,i){r(e,t,i,s,o)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(o);var r=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,r),i.pick(t,r)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,t.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,t.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var i=t||{},n=e!==this.currentView,s=!!i.preventDestroy,r=!!i.forceShow,a=!!this.currentView,h=n&&!s,l=n||r;if(a&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,h?this.empty():a&&l&&this.currentView.off("destroy",this.empty,this),l){e.once("destroy",this.empty,this),e.render(),e._parent=this,a&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),o.triggerMethodOn(e,"before:show",e,this,t),a&&this.triggerMethod("swapOut",this.currentView,this,t);var c=o.isNodeAttached(this.el),u=[],d=i.triggerBeforeAttach||this.triggerBeforeAttach,m=i.triggerAttach||this.triggerAttach;return c&&d&&(u=this._displayedViews(e),this._triggerAttach(u,"before:")),this.attachHtml(e),this.currentView=e,c&&m&&(u=this._displayedViews(e),this._triggerAttach(u)),a&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),o.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var n=(t||"")+"attach";i.each(e,function(e){o.triggerMethodOn(e,n,e,this)},this)},_displayedViews:function(e){return i.union([e],i.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,o._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(e)return e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var n=e.regionClass||t,o=i.omit(e,"selector","regionClass");return e.selector&&!o.el&&(o.el=e.selector),new n(o)},_buildRegionFromRegionClass:function(e){return new e}}),o.RegionManager=o.Controller.extend({constructor:function(e){this._regions={},o.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=o._getValue(e,this,arguments),i.reduce(e,function(e,n,o){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,t)),e[o]=this.addRegion(o,n),e},{},this)},addRegion:function(e,t){var i;return i=t instanceof o.Region?t:o.Region.buildRegion(t,o.Region),this.triggerMethod("before:add:region",e,i),i._parent=this,this._store(e,i),this.triggerMethod("add:region",e,i),i},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(e){this.templateId=e},i.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i.toArray(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var i=t.$(e).html();if(!i||0===i.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i},compileTemplate:function(e){return i.template(e)}}),o.Renderer={render:function(e,t){if(!e)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n=i.isFunction(e)?e:o.TemplateCache.get(e);return n(t)}},o.View=t.View.extend({isDestroyed:!1,constructor:function(e){i.bindAll(this,"render"),e=o._getValue(e,this),this.options=i.extend({},i.result(this,"options"),e),this._behaviors=o.Behaviors(this),t.View.apply(this,arguments),o.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,i.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=o._getValue(t,this),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"_uiBindings");return o.normalizeUIKeys(e,t||i.result(this,"ui"))},normalizeUIValues:function(e){var t=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIValues(e,n||t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(e,function(e,t,i){return e[i]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=o._getValue(e||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var s={},r=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),h=i.result(this,"behaviorTriggers")||{};i.extend(s,r,n,a,h),t.View.prototype.delegateEvents.call(this,s)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var e=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),i.invoke(this._behaviors,"destroy",e),this}},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.isObject(e),n=i.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),o=t?n.event:e;return function(e){e&&(e.preventDefault&&n.preventDefault&&e.preventDefault(),e.stopPropagation&&n.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){for(var e=o._triggerMethod,t=e(this,arguments),i=this._behaviors,n=0,s=i&&i.length;s>n;n++)e(i[n],arguments);return t},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?i.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var i=o.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.html(e),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};i.isUndefined(this.sort)&&(this.sort=i.isUndefined(t.sort)?!0:t.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){o.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),i=this.collection.indexOf(e);this.addChild(e,t,i)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var e=this.collection.find(function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this);e&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this,e,this._emptyViewIndex));var s=this.buildChildView(e,t,n);s._parent=this,this.proxyChildEvents(s),this._isShown&&o.triggerMethodOn(s,"before:show"),this.children.add(s),this.renderChildView(s,this._emptyViewIndex),this._isShown&&o.triggerMethodOn(s,"show")},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[e,i]);var s=this.buildChildView(e,t,n);return this._updateIndices(s,!0,i),this._addChildView(s,i),s._parent=this,s},_updateIndices:function(e,t,i){this.sort&&(t&&(e._index=i),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1)}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){var o=i.extend({model:e},n);return new t(o)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i,n=this.sort&&t<this.children.length-1;return n&&(i=this.children.find(function(e){return e._index===t+1})),i?(i.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?void 0:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var e=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=i.toArray(arguments),o=n[0],s=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+o,n.splice(1,0,e),"undefined"!=typeof s&&i.isFunction(s[o])&&s[o].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)},_getImmediateChildren:function(){return i.values(this.children._views)}}),o.CompositeView=o.CollectionView.extend({constructor:function(){
o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){var t=this.getOption("childView")||this.constructor;return t},serializeData:function(){var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=o.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var i=this.getChildViewContainer(e);i.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},getChildViewContainer:function(e,t){if("$childViewContainer"in e)return e.$childViewContainer;var i,n=o.getOption(e,"childViewContainer");if(n){var s=o._getValue(n,e);if(i="@"===s.charAt(0)&&e.ui?e.ui[s.substr(4)]:e.$(s),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else i=e.$el;return e.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=o._getValue(this.regions,this,[e])||{};var n=this.getOption.call(e,"regions");n=o._getValue(n,this,[e]),i.extend(t,n),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(e,t){this.view=t,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,e),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),o.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(s)),n):{}}function n(e,i){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=i,this._triggers={}}var o=/^(\S+)\s*(.*)$/,s={behaviorTriggers:function(e,t){var i=new n(this,t);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var s={},r=this._uiBindings||t.result(this,"ui");return t.each(n,function(i,n){var a={},h=t.clone(t.result(i,"events"))||{},l=i._uiBindings||t.result(i,"ui"),c=t.extend({},r,l);h=e.normalizeUIKeys(h,c);var u=0;t.each(h,function(e,s){var r=s.match(o),h=r[1]+"."+[this.cid,n,u++," "].join(""),l=r[2],c=h+l,d=t.isFunction(e)?e:i[e];a[c]=t.bind(d,i)},this),s=t.extend(s,a)},this),s}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e._getValue(i.behaviorsLookup,this,[t,n])[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,o){var s=i.getBehaviorClass(n,o),r=new s(n,e),a=i.parseBehaviors(e,t.result(r,"behaviors"));return[r].concat(a)}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(s[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=t.extend({},this._viewUI,t.result(i,"ui")),s=t.clone(t.result(i,"triggers"))||{};s=e.normalizeUIKeys(s,o),t.each(s,t.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(e,t,i,n){var o=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[o]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[e];this.onRoute(e,n,t)}},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var s=e[n];if(!s)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(s,e))},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),o.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=o.Module.getClass(t),s=i.toArray(arguments);return s.unshift(this),n.create.apply(n,s)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=o.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var s=i.flatten([this,this.app,t,o,t.$,i,n]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(e,t,n){var o=e,s=i.rest(arguments,3);t=t.split(".");var r=t.length,a=[];return a[r-1]=n,i.each(t,function(t,i){var r=o;o=this._getModule(r,t,e,n),this._addModuleDefinition(r,o,a[i],s)},this),o},_getModule:function(e,t,n,o,s){var r=i.extend({},o),a=this.getClass(o),h=e[t];return h||(h=new a(t,n,r),e[t]=h,e.submodules[t]=h),h},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var o=this._getDefine(i),s=this._getStartWithParent(i,t);o&&t.addDefinition(o,n),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof o.Module?(n=t.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(e)?(n=e.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof o.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o}),define("text!common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("common/component/tooltip/Tooltip",["require","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),o=e("text!./template/tooltipTemplate.htm");return n.View.extend({template:i.template(o),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(e){if(e||(e={}),!e.attachTo||0===t(e.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!e.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=t(e.attachTo),this.$attachTo[0].tooltip=this,e.delay&&(this.delay=e.delay),e.offset&&(this.offset=e.offset),e.attribute&&(this.attribute=e.attribute),e.cssClasses&&(this.cssClasses=e.cssClasses),this.contentTemplate=e.contentTemplate,this.i18n=e.i18n||{},!i.isUndefined(e.triggerEvents)&&(this.triggerEvents=e.triggerEvents),this.selector="["+this.attribute+"]",i.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.constructor.apply(this,arguments)},_render:function(e,t,o){if(this._event){e=e instanceof n.Model?e.toJSON():e;var s=i.template(this.contentTemplate)({model:e,i18n:this.i18n,options:t||{}});this.$el.find(".body").empty().append(s),this._showTooltip()}o.resolve()},show:function(e,n){var o=new t.Deferred;return this._timer=setTimeout(i.bind(this._render,this,e,n,o),this.delay),o},_showTooltip:function(){t("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var e=this.$el.innerHeight(),i=this.$el.innerWidth(),n=t(window).height(),o=t(window).width(),s=this.offset.y,r=this.offset.x;e+this._event.pageY+this.offset.y+3>=n&&(s=-this.offset.y-e),i+this._event.pageX+this.offset.x+3>=o&&(r=-this.offset.x-i),this.$el.css({top:this._event.pageY+s,left:this._event.pageX+r})},_onMouseMove:function(e){this._event=e},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.remove.apply(this,arguments)}},{attachTo:function(e,t){var i=this;return t||(t={}),t.attachTo=e||"body",new i(t)},detachFrom:function(e){e=t(e)[0],e.tooltip&&e.tooltip.remove()}})}),define("common/component/baseTable/BaseTable",["require","backbone.marionette","common/component/tooltip/Tooltip"],function(e){var t=e("backbone.marionette"),i=e("common/component/tooltip/Tooltip"),n=t.CompositeView.extend({initialize:function(e){e=e||{};var t=e.tooltip;t&&t.template&&t.i18n&&(this.tooltip=new i({i18n:t.i18n,attachTo:this.$el,contentTemplate:t.template}))},remove:function(){this.tooltip&&this.tooltip.remove(),t.CompositeView.prototype.remove.apply(this,arguments)}});return n}),define("text!administer/resetSettings/templates/collectionViewTemplate.htm",[],function(){return'<div class="baseTableContainer">\n    <div class="baseTable resetSettingsTable">\n        <div class="table-row thead">\n            <div class="name table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["editSettings.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["editSettings.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="actions table-column"></div>\n        </div>\n        <div class="tbody"></div>\n    </div>\n</div>'}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(e){"use strict";var t,i,n=e("underscore"),o=e("jquery"),s=e("backbone"),r=e("bundle!js-sdk/CommonBundle"),a=e("text!./template/notificationTemplate.htm");e("css!notifications");var h={SUCCESS:"success",WARNING:"warning"},l=2e3,c={};return c[h.WARNING]=h.WARNING,i=s.View.extend({template:n.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return o("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(e){return e=n.extend({type:h.WARNING,delay:l},e),this.$messageContainer.text(e.message),this.$messageContainer.removeClass().attr({"class":c[e.type]}),this.$el.slideDown(),e.delay&&n.delay(n.bind(this.hide,this),e.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){s.View.prototype.remove.apply(this,arguments)}},{show:function(){return t||(t=new i),t.show.apply(t,arguments)},hide:function(){return t||(t=new i),t.hide.apply(t,arguments)}})}),define("administer/resetSettings/factory/confirmationDialogFactory",["require","bundle!EditSettingsBundle","serverSettingsCommon/enum/confirmDialogTypesEnum","common/component/dialog/ConfirmationDialog"],function(e){var t=e("bundle!EditSettingsBundle"),i=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),n=e("common/component/dialog/ConfirmationDialog"),o={},s={title:t["editSettings.confirm.dialog.title"]};return o[i.DELETE_CONFIRM]=s,o[i.CANCEL_CONFIRM]={title:t["editSettings.confirm.dialog.title"],text:t["editSettings.confirm.cancel.dialog.text.custom"]},function(e){return o[e]&&new n(o[e])}}),define("administer/resetSettings/view/ResetSettingsCollectionView",["require","jquery","underscore","backbone","bundle!EditSettingsBundle","common/component/baseTable/BaseTable","text!../templates/collectionViewTemplate.htm","common/component/base/OptionContainer","common/component/dialog/AlertDialog","common/component/notification/Notification","serverSettingsCommon/enum/confirmDialogTypesEnum","administer/resetSettings/factory/confirmationDialogFactory","css!attributes.css"],function(e){var t=e("jquery"),i=e("underscore"),n=e("backbone"),o=e("bundle!EditSettingsBundle"),s=e("common/component/baseTable/BaseTable"),r=e("text!../templates/collectionViewTemplate.htm"),a=(e("common/component/base/OptionContainer"),e("common/component/dialog/AlertDialog")),h=e("common/component/notification/Notification"),l=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),c=e("administer/resetSettings/factory/confirmationDialogFactory");e("css!attributes.css");var u=s.extend({template:i.template(r),templateHelpers:function(){return{i18n:o}},childEvents:{"open:confirm":"_openConfirm"},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.notification=new h,this.alertDialog=new a,this.model=new n.Model,this.changedViews=[],!i.isEmpty(e.buttons)&&e.buttonsContainer&&this._initButtons(e),this._initConfirmationDialogs(),this.tooltip&&this._initTooltipEvents(),this._initEvents()},fetchData:function(){return this.collection.fetch({reset:!0,headers:{Accept:"application/attributes.collection.hal+json"}})},saveChildren:function(){var e=this,t=[];i.each(e.changedViews,function(e){t.push(e.model)},e),t.length&&e.collection.save(t).done(i.bind(e._successAjaxCallback,e)).fail(i.bind(e._errorAjaxCallback,e))},revertChanges:function(){for(var e=this.changedViews.length,t=e-1;t>=0;t--)this._revertViewRemoval(this.changedViews[t]);this._resetChangedList()},containsUnsavedItems:function(){return!!this.changedViews.length},remove:function(){t(window).off("beforeunload",this._onPageLeave),this.confirmationDialog&&this.confirmationDialog.remove(),this.notification&&this.notification.remove(),this.alertDialog&&this.alertDialog.remove(),s.prototype.remove.apply(this,arguments)},_initEvents:function(){t(window).on("beforeunload",i.bind(this._onPageLeave,this))},_initTooltipEvents:function(){this.listenTo(this,"childview:mouseover",this._onChildViewMouseOver),this.listenTo(this,"childview:mouseout",this._onChildViewMouseOut)},_initConfirmationDialogs:function(){this.confirmationDialogs={},i.each(l,function(e){this.confirmationDialogs[e]=c(e)},this),this.listenTo(this.confirmationDialogs[l.DELETE_CONFIRM],"button:yes",this._onDeleteConfirm),this.listenTo(this.confirmationDialogs[l.CANCEL_CONFIRM],"button:yes",this.revertChanges),this._initPermissionConfirmEvents&&this._initPermissionConfirmEvents()},_successAjaxCallback:function(e){this.notification.show({message:o["editSettings.notification.message.saved"],type:"success"}),this._resetChangedList()},_errorAjaxCallback:function(e){var t;switch(e.status){case 401:t=o["editSettings.error.message.not.authenticated"];break;default:t=o["editSettings.error.message.unknown.error"]}this.alertDialog.setMessage(t),this.alertDialog.open()},_findChildrenByModel:function(e){return e=i.isString(e)?this._findModelsWhere({name:e}):e,e&&this.children.findByModel(e)},_resetChangedList:function(){this.changedViews.length=0,this.toggleButtons()},_revertViewRemoval:function(e){this._deleteViewFromChangedList(e),this.collection.add(e.model,{at:e.indexAt})},_openConfirm:function(e,t){this.model.set("changedChildView",e);var n=this.confirmationDialogs[t],s=t!==l.CANCEL_CONFIRM?!0:this.containsUnsavedItems();t===l.DELETE_CONFIRM&&n.setContent(i.template(o["editSettings.confirm.delete.dialog.text"],{name:e.model.get("name")})),s&&n.open()},_saveChildViewToChangedList:function(e,t){var n=i.indexOf(this.changedViews,e);-1!==n?!t&&this._deleteViewFromChangedList(e,n):t&&this.changedViews.push(e),this.toggleButtons()},_deleteViewFromChangedList:function(e,t){t=t||i.indexOf(this.changedViews,e),-1!==t&&this.changedViews.splice(t,1)},_removeModel:function(e){this.collection.remove(e)},_onPageLeave:function(e){return this.containsUnsavedItems()?((e||window.event).returnValue=o["editSettings.dialog.unsaved.changes"],o["editSettings.dialog.unsaved.changes"]):void 0},_onDeleteConfirm:function(){var e=this.model.get("changedChildView"),t=e.model;e.indexAt=this.collection.indexOf(t),this._saveChildViewToChangedList(e,!0),this._removeModel(t)},_onChildViewMouseOver:function(e,n,o){var s,r=t(o.target).closest(".table-column");r.hasClass("name")&&(s="name"),r.hasClass("value")&&(s="value"),this.tooltip.show(i.pick(n.toJSON(),s))},_onChildViewMouseOut:function(e,t,i){this.tooltip.hide()}});return u}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(e){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(e){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(e){var t=e("backbone.epoxy"),i=e("underscore"),n=e("./epoxyCustomBindingHandlers"),o=e("./epoxyCustomBindingFilters");return{epoxifyView:function(){var e=this.remove;t.View.mixin(this),e&&(this.remove=e),this.bindingFilters?this.bindingFilters=i.extend({},o,this.bindingFilters):o,this.bindingHandlers?this.bindingHandlers=i.extend({},n,this.bindingHandlers):n},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("common/component/baseTable/behaviors/TooltipRowBehavior",["require","backbone.marionette"],function(e){var t=e("backbone.marionette");return t.Behavior.extend({events:{mouseover:"_onMouseOver",mouseout:"_onMouseOut"},_onMouseOver:function(e){this.view.trigger("mouseover",this.view.model,e)},_onMouseOut:function(e){this.view.trigger("mouseout",this.view.model,e)}})}),define("common/component/baseTable/childView/BaseRow",["require","underscore","backbone.marionette","common/view/mixin/epoxyViewMixin","common/component/baseTable/behaviors/TooltipRowBehavior"],function(e){var t=e("underscore"),i=e("backbone.marionette"),n=e("common/view/mixin/epoxyViewMixin"),o=e("common/component/baseTable/behaviors/TooltipRowBehavior"),s=i.ItemView.extend({behaviors:{Tooltip:{behaviorClass:o}},initialize:function(){this.epoxifyView()},render:function(){return i.ItemView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this},remove:function(){this.removeEpoxyBindings(),i.ItemView.prototype.remove.apply(this,arguments)}});return t.extend(s.prototype,n),s}),define("text!administer/resetSettings/templates/itemViewTemplate.htm",[],function(){return'<div class="name table-column" data-tooltip="" data-tooltip-attrs="name, description">\n    <div class="item"><p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column"\n     data-tooltip="" data-tooltip-attrs="value">\n    <div class="item">\n        <p data-bind="text:value"></p>\n    </div>\n</div>\n<div class="actions table-column">\n    <div class="item">\n        <div class="actionButtons">\n            <span>\n                <button name="deleteButton" class="button action simple delete"></button>\n            </span>\n        </div>\n    </div>\n</div>\n\n'}),define("serverSettingsCommon/behaviors/DeleteConfirmBehavior",["require","backbone.marionette","serverSettingsCommon/enum/confirmDialogTypesEnum"],function(e){var t=e("backbone.marionette"),i=e("serverSettingsCommon/enum/confirmDialogTypesEnum");return t.Behavior.extend({events:{"click .delete":"_onDeleteClick"},_onDeleteClick:function(e){this.view.trigger("open:confirm",i.DELETE_CONFIRM,this.view,this.view.model)}})}),define("administer/resetSettings/view/ResetSettingsItemView",["require","underscore","common/component/baseTable/childView/BaseRow","serverSettingsCommon/enum/confirmDialogTypesEnum","text!../templates/itemViewTemplate.htm","serverSettingsCommon/behaviors/DeleteConfirmBehavior"],function(e){var t=e("underscore"),i=e("common/component/baseTable/childView/BaseRow"),n=(e("serverSettingsCommon/enum/confirmDialogTypesEnum"),e("text!../templates/itemViewTemplate.htm")),o=e("serverSettingsCommon/behaviors/DeleteConfirmBehavior"),s=i.extend({tagName:"div",className:"table-row",template:t.template(n),behaviors:t.extend(i.prototype.behaviors,{DeleteConfirm:{behaviorClass:o}})});return s}),define("text!administer/resetSettings/templates/emptyCollectionViewTemplate.htm",[],function(){return'<div class="table-column name"></div>\n<div class="table-column value"></div>\n<div class="table-column actions"></div>\n'}),define("administer/resetSettings/view/ResetSettingsEmptyView",["require","underscore","backbone.marionette","text!../templates/emptyCollectionViewTemplate.htm"],function(e){var t=e("underscore"),i=e("backbone.marionette"),n=e("text!../templates/emptyCollectionViewTemplate.htm"),o=i.ItemView.extend({className:"table-row",template:t.template(n)});return o}),define("administer/resetSettings/collection/ResetSettingsCollection",["require","underscore","backbone","request","serverSettingsCommon/enum/serverSettingGroupsEnum"],function(e){var t=e("underscore"),i=e("backbone"),n=e("request"),o=e("serverSettingsCommon/enum/serverSettingGroupsEnum"),s=i.Collection.extend({initialize:function(e,t){this.urlPUTTemplate="rest_v2/attributes?_embedded=permission",this.urlGETTemplate=this.urlPUTTemplate+"&group="+o.CUSTOM_SERVER_SETTINGS},parse:function(e){return e&&e.attribute?e.attribute:[]},url:function(e){return"PUT"===e?this.urlPUTTemplate:this.urlGETTemplate},escapeLevelId:function(e){return encodeURIComponent(e).replace("'","%27")},save:function(e,t){var i="PUT",o=this._modelsToJSON(t);return n({url:this.url(i)+this._concatNames(e),type:"PUT",contentType:"application/hal+json",headers:{Accept:"application/hal+json"},data:JSON.stringify({attribute:o})})},_modelsToJSON:function(e){return t.map(e,function(e){return e.toJSON()})},_concatNames:function(e){e=t.isArray(e)?e:[e];var i="";return t.each(e,function(e){i+="&name="+this.escapeLevelId(e.get("name"))},this),i}});return s}),define("administer/resetSettings/model/ResetSettingsModel",["require","backbone.epoxy"],function(e){var t=e("backbone.epoxy"),i=t.Model.extend({defaults:{id:void 0,name:void 0,value:"",description:""},initialize:function(){this.get("id")||this.setId()},url:function(){var e=encodeURIComponent(this.id).replace("'","%27");return e=e.replace("'","%27"),this.collection.url(this.isNew()?"":e)},setId:function(){var e=this.get("name"),t=this.get("id");e!==t&&this.set("id",e)}});return i}),define("text!administer/resetSettings/templates/tooltipTemplate.htm",[],function(){return"{{ if( !_.isUndefined(model.value) ) { }}\n    <p class='message label'>{{- i18n['editSettings.value'] + ':'}}</p>\n    <p class='message'>{{- model.value }}</p>\n{{ } else { }}\n    <p class='message label'>{{- i18n['editSettings.name'] + ':'}}</p>\n    <p class='message'>{{- model.name }}</p>\n{{ } }}"}),define("administer/resetSettings/resetSettingsMain",["require","!domReady","jquery","bundle!CommonBundle","bundle!EditSettingsBundle","administer.logging","administer.base","jrs.configs","serverSettingsCommon/view/traits/buttonsTrait","./view/ResetSettingsCollectionView","./view/ResetSettingsItemView","./view/ResetSettingsEmptyView","./collection/ResetSettingsCollection","./model/ResetSettingsModel","text!./templates/tooltipTemplate.htm"],function(e){"use strict";var t=e("!domReady"),i=e("jquery"),n=e("bundle!CommonBundle"),o=e("bundle!EditSettingsBundle"),s=e("administer.logging"),r=e("administer.base"),a=e("jrs.configs"),h=e("serverSettingsCommon/view/traits/buttonsTrait"),l=e("./view/ResetSettingsCollectionView").extend(h),c=e("./view/ResetSettingsItemView"),u=e("./view/ResetSettingsEmptyView"),d=e("./collection/ResetSettingsCollection"),m=e("./model/ResetSettingsModel"),g=e("text!./templates/tooltipTemplate.htm");t(function(){r.urlContext=a.urlContext,s.initialize();var e=new d([],{model:m}),t=new l({el:i(".resetSettings"),tooltip:{template:g,i18n:o},collection:e,childViewContainer:".tbody",childView:c,emptyView:u,buttons:[{label:n["button.save"],action:"save",primary:!0},{label:n["button.cancel"],action:"cancel",primary:!1}],buttonsContainer:".buttonsContainer"});t.fetchData().done(t.render)})});