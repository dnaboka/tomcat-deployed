"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(e,t){var n=this._messages[e];return n?new Template(n).evaluate(t?t:{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,n){ajaxTargettedUpdate(e,{postData:t,callback:n,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(e)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(e){return function(){var t;return t||e.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;$("display").observe("click",function(e){var t=e.element(),n=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);if(n)for(var i in Administer.menuActions)if(n.match(i)&&!n.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[i]())}),jQuery(".js-logSettings select").on("change",function(t){var n,i=jQuery(t.target);n=i.hasClass("js-newLogger")?jQuery("#newLoggerName").val():i.parent().prev().text(),e._setLevel(encodeURIComponent(n),i.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(e){return function(){var t;return t||e.logging}}(this)),define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(e){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("common/enum/httpStatusCodes"),s=e("common/enum/errorCodes"),o=n.Model.extend({initialize:function(){this.on("error",o.unifyServerErrors)},serialize:function(){return t.clone(this.attributes)}},{unifyServerErrors:function(e,t){var n=i[t.status],s=o.createServerError(t);e.trigger("error:"+n,e,s,t),e.trigger("error:all",e,s,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t={message:"Can't parse server response",errorCode:s.UNEXPECTED_ERROR,parameters:[]}}return t}});return o}),define("tenantImportExport/export/model/ResourcesModel",["require","backbone","request"],function(e){var t=e("backbone"),n=e("request");return t.Model.extend({url:"rest_v2/settings/exportResourceOptions",fetch:function(){return n({url:this.url,type:"GET"})}})}),define("tenantImportExport/export/enum/exportTypesEnum",{ROOT_TENANT:"rootTenant",TENANT:"tenant",SERVER_CE:"serverCE",SERVER_PRO:"serverPRO",REPOSITORY:"repository"}),define("tenantImportExport/export/factory/exportModelAttributesFactory",["require","underscore","tenantImportExport/export/enum/exportTypesEnum"],function(e){var t=e("underscore"),n=e("tenantImportExport/export/enum/exportTypesEnum"),i={},s={roles:null,users:null,everything:!0,userForRoles:!1,rolesForUser:!1,includeReports:!0,includeOtherResourceFiles:!0,includeDataSources:!0,includeDependentObjects:!0,includeAttributes:!0,includeAttributeValues:!0},o={includeAccessEvents:!1,includeAuditEvents:!1,includeMonitoringEvents:!1},r={includeDomains:!0,includeAdHocViews:!0,includeDashboards:!0},l={includeSubOrganizations:!0},a={includeServerSettings:!0};return i[n.ROOT_TENANT]=t.extend({},s,o,r,l,a),i[n.TENANT]=t.extend({},s,r,l),i[n.SERVER_PRO]=t.extend({},s,o,r,l,a),i[n.SERVER_CE]=t.extend({},s,a,{includeAccessEvents:!0}),function(e){return i[e]}}),define("tenantImportExport/export/model/ExportModel",["require","jquery","underscore","backbone","backbone.validation","jrs.configs","bundle!ImportExportValidationBundle","common/util/i18nMessage","common/model/BaseModel","../model/ResourcesModel","tenantImportExport/export/factory/exportModelAttributesFactory","tenantImportExport/export/enum/exportTypesEnum"],function(e){function t(e){var t,n,s=[];return e.get("everything")?(s.push("everything"),e.get("includeAccessEvents")&&s.push("include-access-events")):(t=i(e)&&e.get("includeRepositoryPermissions")&&!r.isEmpty(e.get("uris")),n=!e.get("includeAttributeValues")||!e.get("includeAttributes"),e.get("userForRoles")&&s.push("role-users"),e.get("rolesForUser")&&s.push("users-roles"),t&&s.push("repository-permissions"),!e.get("includeSubOrganizations")&&s.push("skip-suborganizations"),e.get("includeAttributes")&&s.push("include-attributes"),n&&s.push("skip-attribute-values"),e.get("includeServerSettings")&&s.push("include-server-settings"),(!i(e)||!e.get("includeDependentObjects"))&&s.push("skip-dependent-resources")),e.get("includeAuditEvents")&&s.push("include-audit-events"),e.get("includeMonitoringEvents")&&s.push("include-monitoring-events"),e.get("encryptFile")&&s.push("encrypted"),s}function n(e){var t=[],n=new o.Deferred;return!e.get("everything")&&i(e)?e.resources.fetch().done(function(i){for(var s in f)e.get(s)&&t.push(i[f[s]]);n.resolve(r.flatten(t))}):n.resolve(null),n}function i(e){var t=r.keys(f);return r.filter(t,function(t){return e.get(t)}).length}function s(e){var t=c.organizationsFolderUri||"/organizations",n=c.orgTemplateFolderUri||"/org_template",i=new RegExp("^("+t+"(?!"+n+")/([^/]+))+");return i.exec(e)}var o=e("jquery"),r=e("underscore"),l=e("backbone"),a=e("backbone.validation"),c=e("jrs.configs"),d=e("bundle!ImportExportValidationBundle"),u=e("common/util/i18nMessage").extend({bundle:d}),p=e("common/model/BaseModel"),h=e("../model/ResourcesModel"),m=e("tenantImportExport/export/factory/exportModelAttributesFactory"),g=e("tenantImportExport/export/enum/exportTypesEnum"),x=256,f={includeReports:"report",includeDomains:"domain",includeAdHocViews:"adhocDataView",includeDataSources:"dataSource",includeDashboards:"dashboard",includeOtherResourceFiles:"others"},v=p.extend({defaults:{uris:["/"],fileName:"export.zip",encryptFile:!1,includeRepositoryPermissions:!0,includeScheduledReportJobs:!0,includeDependencies:!0,includeFullResourcePath:!0},validation:{fileName:[{required:!0,msg:new u("export.file.name.empty")},{maxLength:x,msg:new u("export.file.name.too.long",x)},{fn:function(e){return/[\\/?*%:|"<>]/g.test(e)?new u("export.file.name.contains.not.supported.characters"):/^[\.]{1,2}$/g.test(e)?new u("export.file.name.not.valid"):void 0}}],uris:[{fn:function(){var e=this.toExportTask();return!(e.uris||e.roles||e.users||r.filter(e.parameters,function(e){return"role-users"!==e&&"users-roles"!==e}).length)}}]},initialize:function(){p.prototype.initialize.call(this),r.bindAll(this),this.resources=new h},url:function(){return"rest_v2/export"},save:function(){var e=new o.Deferred,t=new l.Model,i=this;t.url=this.url;var s={};return n(this).done(function(n){n&&(s.resourceTypes=n),t.save(r.extend(i.toExportTask(),s)).done(function(t){e.resolve(t)}).fail(function(t){e.reject(t),i.trigger("error",i,t)})}),e},cancel:function(){var e=this.url()+"/"+this.id;this.destroy({url:e})},toExportTask:function(){var e=this.get("everything"),n=this.get("roles"),o=this.get("users"),l=r.clone(this.get("uris")),a=e||this.get("includeReports")&&this.get("includeScheduledReportJobs"),c={uris:l,scheduledJobs:this.get("includeScheduledReportJobs")?l:null,parameters:[]};this.get("includeRepositoryPermissions")&&c.parameters.push("repository-permissions"),!this.get("includeDependencies")&&c.parameters.push("skip-dependent-resources");var d=s(l&&l[0]);d&&!this.get("includeFullResourcePath")&&(c.organization=d.last(),c.parameters.push("skip-suborganizations","skip-attribute-values"),c.uris=r.map(l,function(e){return e.replace(d.first(),"")}),c.scheduledJobs=this.get("includeScheduledReportJobs")?c.uris:null);var u={uris:i(this)?l:null,roles:r.isEmpty(n)?null:n,users:r.isEmpty(o)?null:o,scheduledJobs:a?l:null,organization:this.get("organization"),parameters:t(this)};return this.type!==g.REPOSITORY?u:c},reset:function(e,t){this.type=t;var n=r.extend({},this.defaults,m(t));this.clear().set(r.extend({},n,e))}});return r.extend(v.prototype,a.mixin),v}),define("tenantImportExport/export/model/ExportStateModel",["require","underscore","common/model/BaseModel"],function(e){var t=e("underscore"),n=e("common/model/BaseModel"),i={INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",PENDING:"pending",CANCELLED:"cancelled"};return n.extend({url:function(){return"rest_v2/export/"+this.id+"/state"},initialize:function(e){n.prototype.initialize.call(this),this.on("change:phase",function(e,n){n==i.INPROGRESS&&t.isUndefined(e.interval)?e.interval=window.setInterval(function(){e.fetch({cache:!1}).fail(t.bind(e.stopPolling,e))},1e3):e.stopPolling()})},stopPolling:function(){t.isUndefined(this.interval)||(window.clearInterval(this.interval),this.interval=void 0)}},{STATE:i})}),define("tenantImportExport/export/model/AuthorityPickerModel",["require","jquery","backbone","components.templateengine","underscore"],function(e){"use strict";var t=e("jquery"),n=e("backbone"),i=e("components.templateengine"),s=e("underscore");return n.Model.extend({defaults:{items:[]},url:function(){return i.renderUrl(this.urlTemplate,this.context,!0)},parse:function(e){return{items:e?e.role?e.role:e.user:[]}},defaultErrorHandler:function(e,n){var i;try{i=t.parseJSON(n.responseText)}catch(s){i=null}this.trigger("error:server",n.status,i,e)},setContext:function(e){this.context=s.extend(this.context||{},e),this.fetch({error:s.bind(this.defaultErrorHandler,this)})}},{instance:function(e,t){var n=new this;return n.urlTemplate=e,t&&n.setContext(t),n}})}),define("text!tenantImportExport/export/template/authorityPickerTemplate.htm",[],function(){return'<div class="control combo {{- customClass}} " title="{{- title}}">\n    <span class="wrap">{{- title}}</span>\n        <span class="control searchLockup ">\n            <div class="wrap">\n                <input type="text" tabindex="">\n            </div>\n            <b class="right">\n                <a class="button searchClear"></a>\n            </b>\n            <a class="button search up"></a>\n        </span>\n\n    <div class="authorityPicker" onselectstart="return false">\n        <div class="selectBorder upper"></div>\n        <ul class="list"></ul>\n        <div class="selectBorder lower"></div>\n    </div>\n\n    <div class="button-select-all" title="{{- selectLabel }}">\n        <i class="icon"></i>\n        <a class="label">\n            <span class="text">{{- selectLabel }}</span>\n        </a>\n    </div>\n</div>'}),define("text!tenantImportExport/export/template/authorityPickerOptionsTemplate.htm",[],function(){return'{{ for (var i = 0, l = items.length; i<l; i++){ }}\n<li class="leaf">\n    <div class=""><span class="leftColumn">{{- items[i].name}}{{- items[i].username}}</span>\n        {{ if (items[i].tenantId){ }}\n            <span class="rightColumn">{{- items[i].tenantId }}</span>\n        {{ } }}\n    </div>\n</li>\n{{ } }}\n'}),define("tenantImportExport/export/view/AuthorityPickerView",["require","jquery","backbone","text!tenantImportExport/export/template/authorityPickerTemplate.htm","text!tenantImportExport/export/template/authorityPickerOptionsTemplate.htm","underscore"],function(e){"use strict";function t(e,t,n){return n<=Math.max(e,t)&&n>=Math.min(e,t)}var n=e("jquery"),i=e("backbone"),s=e("text!tenantImportExport/export/template/authorityPickerTemplate.htm"),o=e("text!tenantImportExport/export/template/authorityPickerOptionsTemplate.htm"),r=e("underscore");return i.View.extend({events:{"click .button.search":"search","click .button.searchClear":"clear","click .button-select-all":"_selectAllHandler","keydown input[type=text]":"keyHandler","mousedown li":"selectionStarted","mouseenter li":"mouseEntered","mouseleave li":"mouseLeave","mouseup ul":"selectionFinished","mouseenter ul":"stopScroll","mouseleave ul":"startScroll"},cursor:-1,baseCursor:-1,selecting:!1,scrollSpeed:30,initialize:function(e){this.model.on("change",r.bind(this.renderList,this)),this.model.on("error:server",r.bind(function(){this.trigger("error:server",arguments)},this)),this.upHandler=r.bind(function(e){this.stopScroll(e),this.selecting=!1},this),this.el=!1,this.initOptions=e},render:function(){return this.mainTemplate||(this.mainTemplate=r.template(s)),this.optionsTemplate||(this.optionsTemplate=r.template(o)),this.el||(this.$el=n("<div/>").html(this.mainTemplate(this.initOptions)).children(),this.el=this.$el[0],this.subEl=this.$el.find(".authorityPicker ul"),this.delegateEvents()),this.model.context||this.model.setContext(),this},renderList:function(){return this.subEl.html(this.optionsTemplate(this.model.attributes)).find("li").each(function(e,t){n(t).attr("index",e)}),this.cursor=-1,this.baseCursor=-1,this.scrollSpeed=this.subEl.find("li:eq(0)").height(),this.subEl.scrollTop(0),this.trigger("change:selection",[]),this},getSelected:function(){return r.reduce(this.subEl.find(".selected"),function(e,t){return e.push(r.pluck(n(t).find("span"),"innerHTML").join("|")),e},[])},search:function(){var e=this.$el.find("input[type=text]").val();this.model.setContext({searchString:e}),e?this.$el.find(".button.searchClear").addClass("up"):this.$el.find(".button.searchClear").removeClass("up")},_selectAllHandler:function(){this.selectAll()},clear:function(){this.$el.find("input[type=text]").val(""),this.search()},keyHandler:function(e){13===e.which&&this.search()},setDisabled:function(e){var t=this.$el.find(".button-select-all").children();e?(this.subEl.addClass("disabled"),t.addClass("disabled"),this.undelegateEvents()):(this.subEl.removeClass("disabled"),t.removeClass("disabled"),this.delegateEvents()),this.$el.find("input[type=text]").attr("disabled",e)},highlightSet:function(e){this.subEl.find("li").each(function(t,i){i=n(i),i.toggleClass("highlighted",r.contains(e,r.pluck(i.find("span"),"innerHTML").join("|")))})},selectAll:function(e){this.subEl.find("li").each(function(e,t){n(t).addClass("selected")}),e||this.trigger("change:selection",this.getSelected())},selectNone:function(e){this.subEl.find("li").each(function(e,t){n(t).removeClass("selected")}),e||this.trigger("change:selection",this.getSelected())},selectInverse:function(e){this.subEl.find("li").each(function(e,t){n(t).toggleClass("selected")}),e||this.trigger("change:selection",this.getSelected())},selectItem:function(e,t){this.subEl.find("li[index="+e+"]").addClass("selected"),t||this.trigger("change:selection",this.getSelected())},unSelectItem:function(e,t){this.subEl.find("li[index="+e+"]").removeClass("selected"),t||this.trigger("change:selection",this.getSelected())},selectRange:function(e,t,i){var s=Math.min(e,t),o=Math.max(e,t);this.subEl.find("li:lt("+(o+1)+")").each(function(e,t){e>=s&&n(t).addClass("selected")}),i||this.trigger("change:selection",this.getSelected())},selectionStarted:function(e){this.selecting=!0,e.ctrlKey||e.metaKey||this.selectNone(!0);var t=+n(e.target).parents("li").toggleClass("selected").attr("index");e.shiftKey?-1!=this.cursor&&this.selectRange(this.cursor,t,!0):(this.cursor=t,this.baseCursor=this.cursor)},mouseEntered:function(e){this.selecting&&(this.cursor=+n(e.target).parents("li").addClass("selected").attr("index"))},mouseLeave:function(e){if(this.selecting){var i=n(e.target).parents("li"),s=n(e.relatedTarget).parents("li");t(this.cursor,this.baseCursor,+s.attr("index"))&&i.removeClass("selected")}},selectionFinished:function(e){this.selecting=!1,this.trigger("change:selection",this.getSelected())},startScroll:function(e){if(this.selecting){if(n(e.relatedTarget).hasClass("upper"))this.direction=-1;else{if(!n(e.relatedTarget).hasClass("lower"))return void(this.selecting=!1);this.direction=1}n(document.body).on("mouseup",this.upHandler),this.scrollTimer=setInterval(r.bind(this.scrollList,this),200)}},stopScroll:function(e){this.selecting&&(clearInterval(this.scrollTimer),this.direction=0,n(document.body).off("mouseup",this.upHandler))},scrollList:function(){this.subEl.scrollTop(+this.subEl.scrollTop()+this.scrollSpeed*this.direction),t(this.cursor,this.baseCursor,this.cursor+this.direction)?this.unSelectItem(this.cursor,!0):this.selectItem(this.cursor+this.direction,!0),this.cursor=this.cursor+this.direction}})}),define("text!tenantImportExport/export/template/loadingDialogTemplate.htm",[],function(){return'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}" tabindex="-1">\n    <div class="content">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body">\n            <p class="message"></p>\n        </div>\n    </div>\n</div>\n'}),define("tenantImportExport/export/view/LoadingDialog",["require","common/component/dialog/Dialog","underscore","bundle!CommonBundle","text!tenantImportExport/export/template/loadingDialogTemplate.htm"],function(e){var t=e("common/component/dialog/Dialog"),n=e("underscore"),i=e("bundle!CommonBundle"),s=e("text!tenantImportExport/export/template/loadingDialogTemplate.htm");return t.extend({defaultTemplate:s,constructor:function(e){n.defaults(e,{contentContainer:".body > .message",title:i["dialog.overlay.title"],modal:!0}),t.call(this,e)}})}),define("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm",[],function(){return'{{ if (message) { }}<p class="message">{{- message }}</p> {{ } }}\n<div class="control groupBox">\n    <ol class="list tabular oneColumn">\n        {{ for (var i = 0; i<items.length; i++) { }}\n        <li class="leaf {{-  i === 0 ? \' first\' : \'\' }} {{- i === items.length - 1 ? \'last\' : \'\' }}" tabindex="-1">\n            <div class="wrap">\n                <div class="column one">\n                    <p class="uri">{{- items[i] }} </p>\n                </div>\n            </div>\n        </li>\n        {{ } }}\n    </ol>\n\n</div>\n\n'}),define("tenantImportExport/view/BaseWarningDialogView",["require","jquery","underscore","common/component/dialog/Dialog","bundle!ImportExportBundle","text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm"],function(e){var t=(e("jquery"),e("underscore")),n=e("common/component/dialog/Dialog"),i=e("bundle!ImportExportBundle"),s=e("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm");return n.extend({events:{resize:"onResizeHeight"},onResizeHeight:function(){this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.$(".control.groupBox").css("min-height",this.$contentContainer.height()-this.$(".message").outerHeight(!0))},constructor:function(e){e=e||{},this.options=e,n.prototype.constructor.call(this,{modal:!0,resizable:e.resizable,minWidth:e.minWidth,minHeight:e.minHeight,additionalCssClasses:e.additionalCssClasses||"dependent-resources-dialog jr-uWidth-725px jr-uHeight-500px",title:e.title||i["dialog.broken.dependencies.title"],content:"",buttons:e.buttons}),this.template=t.template(e.template||s)},open:function(e){this.setContent(this.template(t.defaults(e,{message:""}))),n.prototype.open.apply(this,arguments),this.$contentContainer.scrollTop(0),this._resizableContainerShiftHeight=this.$(".jr-mDialog-footer").outerHeight()+this.$(".jr-mDialog-header").outerHeight()+this.$contentContainer.outerHeight()-this.$contentContainer.height()}})}),define("tenantImportExport/export/view/ExportDependentResourcesDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(e){var t=e("underscore"),n=e("bundle!CommonBundle"),i=e("bundle!ImportExportBundle"),s=e("tenantImportExport/view/BaseWarningDialogView");return s.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,buttons:[{label:i["export.button.continue"],action:"export",primary:!0},{label:n["button.cancel"],action:"cancel",primary:!1}]}),s.prototype.constructor.call(this,e),this.on("button:export",t.bind(this.close,this)),this.on("button:cancel",t.bind(this.close,this))},open:function(e){t.extend(e,{message:i["export.dialog.broken.dependencies.intro"]}),s.prototype.open.call(this,e)}})}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(e){"use strict";var t,n,i=e("underscore"),s=e("jquery"),o=e("backbone"),r=e("bundle!js-sdk/CommonBundle"),l=e("text!./template/notificationTemplate.htm");e("css!notifications");var a={SUCCESS:"success",WARNING:"warning"},c=2e3,d={};return d[a.WARNING]=a.WARNING,n=o.View.extend({template:i.template(l),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return s("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(e){return e=i.extend({type:a.WARNING,delay:c},e),this.$messageContainer.text(e.message),this.$messageContainer.removeClass().attr({"class":d[e.type]}),this.$el.slideDown(),e.delay&&i.delay(i.bind(this.hide,this),e.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){o.View.prototype.remove.apply(this,arguments)}},{show:function(){return t||(t=new n),t.show.apply(t,arguments)},hide:function(){return t||(t=new n),t.hide.apply(t,arguments)}})}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(e){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(e){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(e){var t=e("backbone.epoxy"),n=e("underscore"),i=e("./epoxyCustomBindingHandlers"),s=e("./epoxyCustomBindingFilters");return{epoxifyView:function(){var e=this.remove;t.View.mixin(this),e&&(this.remove=e),this.bindingFilters?this.bindingFilters=n.extend({},s,this.bindingFilters):s,this.bindingHandlers?this.bindingHandlers=n.extend({},i,this.bindingHandlers):i},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("text!tenantImportExport/export/template/assetsToIncludeExtendedVersionTemplate.htm",[],function(){return'<div class="section resources tenant-options">\n    <p class="title">{{- i18n["export.dialog.resources"] }}</p>\n\n    <div class="group">\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.data.sources"] }}</label>\n            <input class="includeDataSources" name="includeDataSources" type="checkbox"\n                   data-bind="checked:includeDataSources, disabled:everything">\n        </div>\n        {{ if(!isServerCe) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.domains"] }}</label>\n            <input class="includeDomains" name="includeDomains" type="checkbox"\n                   data-bind="checked:includeDomains, disabled:everything">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.ad.hoc.views"] }}</label>\n            <input class="includeAdHocViews" name="includeAdHocViews" type="checkbox"\n                   data-bind="checked:includeAdHocViews, disabled:everything">\n        </div>\n        {{ } }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.reports"] }}</label>\n            <input class="includeReports" name="includeReports" type="checkbox"\n                   data-bind="checked:includeReports, disabled:everything">\n        </div>\n        {{ if(!isServerCe) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.dashboards"] }}</label>\n            <input class="includeDashboards" name="includeDashboards" type="checkbox"\n                   data-bind="checked:includeDashboards, disabled:everything">\n        </div>\n        {{ } }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.scheduled.report.jobs"] }}</label>\n            <input class="includeScheduledReportJobs" name="includeScheduledReportJobs" type="checkbox"\n                   data-bind="checked:includeScheduledReportJobs, enabled:enableReportJobs">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.resources.other.resources"] }}</label>\n            <input class="includeOtherResourceFiles" name="includeOtherResourceFiles" type="checkbox"\n                   data-bind="checked:includeOtherResourceFiles, disabled:everything">\n        </div>\n    </div>\n</div>\n\n<div class="section assets tenant-options">\n    <p class="title">{{- i18n["export.dialog.assets"] }}</p>\n\n    <div class="group">\n        {{ if(!isServerCe) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.sub.organizations"] }}</label>\n            <input class="includeSubOrganizations" name="includeSubOrganizations" type="checkbox"\n                   data-bind="checked:includeSubOrganizations, disabled:everything">\n        </div>\n        {{ } }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.dependent.objects"] }}</label>\n            <input class="includeDependentObjects" name="includeDependentObjects" type="checkbox"\n                   data-bind="checked:includeDependentObjects, enabled:someResourceIsChecked">\n        </div>\n\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.repository.permissions"] }}</label>\n            <input class="includeRepositoryPermissions" name="includeRepositoryPermissions" type="checkbox"\n                   data-bind="checked:includeRepositoryPermissions, enabled:someResourceIsChecked">\n        </div>\n        {{ if (isServerOrRootType) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.server.settings"] }}</label>\n            <input class="includeServerSettings" name="includeServerSettings" type="checkbox"\n                   data-bind="checked:includeServerSettings, disabled:everything">\n        </div>\n        {{ } }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.attributes"] }}</label>\n            <input class="includeAttributes" name="includeAttributes" type="checkbox"\n                   data-bind="checked:includeAttributes, disabled:everything">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.assets.attribute.values"] }}</label>\n            <input class="includeAttributeValues" name="includeAttributeValues" type="checkbox"\n                   data-bind="checked:includeAttributeValues, enabled:enableAttributesValues">\n        </div>\n    </div>\n</div>\n'}),define("text!tenantImportExport/export/template/eventsToIncludeTemplate.htm",[],function(){return'<div class="section events">\n    <p class="title">{{- i18n["export.dialog.events"] }}</p>\n    <div class="group">\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.events.access.events"] }}</label>\n            <input class="includeAccessEvents" name="includeAccessEvents" type="checkbox" data-bind="checked:includeAccessEvents, enabled:everything">\n        </div>\n        {{ if(!isServerCe) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.events.audit.events"] }}</label>\n            <input class="includeAuditEvents" name="includeAuditEvents" type="checkbox" data-bind="checked:includeAuditEvents">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.dialog.events.monitoring.events"] }}</label>\n            <input class="includeMonitoringEvents" name="includeMonitoringEvents" type="checkbox" data-bind="checked:includeMonitoringEvents">\n        </div>\n        {{ } }}\n    </div>\n</div>'}),define("text!tenantImportExport/export/template/exportDataFileTemplate.htm",[],function(){return'<div class="section file-name">\n    {{ if (!isRepository) { }} <p class="title">{{- i18n["export.dialog.file.properties"] }}</p> {{ } }}\n    <div class="group">\n        <div class="control input" data-bind="validationErrorClass:fileName" data-model-attr="fileName">\n            <span class="wrap">{{- i18n["export.dialog.file.properties.data.file.name"]}}</span>\n            <input type="text" class="fileName"  data-bind="value:fileName, events:[\'keyup\']"/>\n            <span class="message warning fileNameMessage" data-bind="validationErrorText:fileName" data-model-attr="fileName"></span>\n        </div>\n\n        {{ if (0) { }}\n        <div class="control checkBox encryptFileWrapper">\n            <label class="wrap" title="">{{- i18n["export.dialog.file.properties.encrypt.file"] }}</label>\n            <input class="encryptFile" name="encryptFile" type="checkbox" data-bind="checked:encryptFile">\n        </div>\n        {{ } }}\n    </div>\n</div>\n'}),define("text!tenantImportExport/export/template/rolesAndUsersToIncludeTemplate.htm",[],function(){
return'<div class="section roles-users">\n    <p class="title">{{- i18n["export.dialog.roles.users"] }}</p>\n    <div class="group rolesAndUsers">\n        <div class="control radio">\n            <label class="wrap" title="" for="selectedUsersRoles">{{- i18n["export.dialog.roles.users.selected.roles.users"] }}</label>\n            <input id="selectedUsersRoles" class="selectedUsersRoles" name="sample" type="radio" data-bind="disabled:everything" checked="checked">\n        </div>\n        <div class="control radio">\n            <label class="wrap" title="" for="usersWithSelectedRoles">{{- i18n["export.dialog.roles.users.users.with.selected.roles"] }}</label>\n            <input id="usersWithSelectedRoles" class="usersWithSelectedRoles" name="sample" type="radio" data-bind="disabled:everything">\n        </div>\n        <div class="control radio">\n            <label class="wrap" title="" for="rolesWithSelectedUsers">{{- i18n["export.dialog.roles.users.roles.with.selected.users"] }}</label>\n            <input id="rolesWithSelectedUsers" class="rolesWithSelectedUsers" name="sample" type="radio" data-bind="disabled:everything">\n        </div>\n    </div>\n    <div class="group">\n        <div class="selectRolesUsers column two control pickWells"></div>\n    </div>\n</div>'}),define("text!tenantImportExport/export/template/exportOptionsContainerTemplate.htm",[],function(){return'<div class="export-options">\n    {{ if (!isRepository) { }}\n    <p class="title export-options-title">{{- i18n["export.dialog.options"] }}</p>\n    <div class="section everything">\n        <div class="control checkBox everything">\n            <label class="wrap" title="">{{- i18n["export.dialog.everything"] }}</label>\n            <input class="everything" name="everything" type="checkbox" data-bind="checked:everything">\n        </div>\n    </div>\n    {{ } }}\n</div>'}),define("text!tenantImportExport/export/template/repositoryExportTemplate.htm",[],function(){return'<div class="section resources">\n    <p>{{- i18n["export.dialog.options"] }}</p>\n    <div class="group">\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.report.jobs"] }}</label>\n            <input class="includeScheduledReportJobs" name="includeScheduledReportJobs" type="checkbox" data-bind="checked:includeScheduledReportJobs">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.include.permissions"] }}</label>\n            <input class="includeRepositoryPermissions" name="includeRepositoryPermissions" type="checkbox" data-bind="checked:includeRepositoryPermissions">\n        </div>\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.include.dependencies"] }} </label>\n            <input class="includeDependencies" name="includeDependencies" type="checkbox" data-bind="checked:includeDependencies">\n        </div>\n        {{ if (isSubOrgLevel) { }}\n        <div class="control checkBox">\n            <label class="wrap" title="">{{- i18n["export.include.full.repo.path"] }}</label>\n            <input class="includeFullResourcePath" name="includeFullResourcePath" type="checkbox" data-bind="checked:includeFullResourcePath">\n        </div>\n        {{ } }}\n    </div>\n</div>'}),define("tenantImportExport/export/factory/exportTemplateFactory",["require","jquery","text!tenantImportExport/export/template/assetsToIncludeExtendedVersionTemplate.htm","text!tenantImportExport/export/template/eventsToIncludeTemplate.htm","text!tenantImportExport/export/template/exportDataFileTemplate.htm","text!tenantImportExport/export/template/rolesAndUsersToIncludeTemplate.htm","text!tenantImportExport/export/template/exportOptionsContainerTemplate.htm","text!tenantImportExport/export/template/repositoryExportTemplate.htm","tenantImportExport/export/enum/exportTypesEnum"],function(e){var t=e("jquery"),n=e("text!tenantImportExport/export/template/assetsToIncludeExtendedVersionTemplate.htm"),i=e("text!tenantImportExport/export/template/eventsToIncludeTemplate.htm"),s=e("text!tenantImportExport/export/template/exportDataFileTemplate.htm"),o=e("text!tenantImportExport/export/template/rolesAndUsersToIncludeTemplate.htm"),r=e("text!tenantImportExport/export/template/exportOptionsContainerTemplate.htm"),l=e("text!tenantImportExport/export/template/repositoryExportTemplate.htm"),a=e("tenantImportExport/export/enum/exportTypesEnum"),c={};return c[a.ROOT_TENANT]=[o,n,i].join(""),c[a.TENANT]=[o,n].join(""),c[a.SERVER_PRO]=[o,n,i].join(""),c[a.SERVER_CE]=[o,n,i].join(""),c[a.REPOSITORY]=[l].join(""),function(e){return e=e||{},s+t(r).append(c[e.type])[0].outerHTML}}),define("tenantImportExport/export/view/ExportView",["require","css!importExport","jquery","underscore","backbone","../model/ExportModel","../model/ExportStateModel","../model/AuthorityPickerModel","./AuthorityPickerView","./LoadingDialog","./ExportDependentResourcesDialogView","common/component/notification/Notification","common/view/mixin/epoxyViewMixin","tenantImportExport/export/factory/exportTemplateFactory","tenantImportExport/export/enum/exportTypesEnum","bundle!ImportExportBundle","bundle!CommonBundle"],function(e){"use strict";function t(e){this.rolesList=new d({model:c.instance("rest_v2/{{#tenantId}}organizations/{{{tenantId}}}/{{/tenantId}}roles?q={{{searchString}}}{{#excludeSubOrgs}}&includeSubOrgs=false{{/excludeSubOrgs}}",{tenantId:e.tenantId}),customClass:"selectedRoles",title:f["export.dialog.roles.users.roles.label"],selectLabel:f["export.dialog.roles.users.select.all.roles.label"]}),this.rolesList.on("change:selection",this.bindWithRoles),this.rolesList.render(),this.usersList=new d({model:c.instance("rest_v2/{{#tenantId}}organizations/{{{tenantId}}}/{{/tenantId}}users?q={{{searchString}}}{{#excludeSubOrgs}}&includeSubOrgs=false{{/excludeSubOrgs}}",{tenantId:e.tenantId}),customClass:"select selectedUsers",title:f["export.dialog.roles.users.users.label"],selectLabel:f["export.dialog.roles.users.select.all.users.label"]}),this.usersList.on("change:selection",this.bindWithUsers),this.usersList.render(),this.rolesToUsers=c.instance("rest_v2/users?hasAllRequiredRoles=false{{#roles}}&requiredRole={{{.}}}{{/roles}}"),this.rolesToUsers.on("change",this.onRolesToUsersChange),this.usersToRoles=c.instance("rest_v2/roles?hasAllUsers=false{{#users}}&user={{{.}}}{{/users}}"),this.usersToRoles.on("change",this.onUsersToRolesChange),this.changeEnabledState(),this.listenTo(this.model,"change:everything",this.changeEnabledState),this.$el.find(".selectRolesUsers").append(this.rolesList.el).append(this.usersList.el),this.listenTo(this.model,"change:includeSubOrganizations",this.filterAuthoritiesBySubOrgs)}function n(){var e=document.createElement("iframe");e.src=this.model.url()+"/"+this.stateModel.id+"/"+this.model.get("fileName"),e.style.display="none",s("body").append(e)}function i(e){this.model.cancel(),this.stateModel.set("phase",e)}e("css!importExport");var s=e("jquery"),o=e("underscore"),r=e("backbone"),l=e("../model/ExportModel"),a=e("../model/ExportStateModel"),c=e("../model/AuthorityPickerModel"),d=e("./AuthorityPickerView"),u=e("./LoadingDialog"),p=e("./ExportDependentResourcesDialogView"),h=e("common/component/notification/Notification"),m=e("common/view/mixin/epoxyViewMixin"),g=e("tenantImportExport/export/factory/exportTemplateFactory"),x=e("tenantImportExport/export/enum/exportTypesEnum"),f=e("bundle!ImportExportBundle"),v=e("bundle!CommonBundle"),b=r.View.extend({className:"export-view",events:{"change .usersWithSelectedRoles":"includeRolesByUsers","change .rolesWithSelectedUsers":"includeUsersWithRoles","change .selectedUsersRoles":"includeSelectedRolesUsersOnly","click .section .checkBox label":"_clickOnCheckbox"},computeds:{includeAccessEventsChecked:function(){return this.model.get("everything")?this.model.get("includeAccessEvents"):!1},enableAttributesValues:{deps:["everything","includeAttributes"],get:function(e,t){return!e&&t}},enableReportJobs:{deps:["everything","includeReports"],get:function(e,t){return!e&&t}},someResourceIsChecked:{deps:["everything","includeReports","includeAdHocViews","includeDashboards","includeDomains","includeDataSources","includeOtherResourceFiles"],get:function(e,t,n,i,s,o,r){return!e&&(t||n||i||s||o||r)}}},initialize:function(){o.bindAll(this),this.model||(this.model=new l),this.stateModel=new a,this.epoxifyView(),this.loadingDialog=new u({content:v["dialog.overlay.loading"]}),this.notification=new h,this.dependentResourcesDialogView=new p,this.listenTo(this.model,"change",this._onModelChange),this.listenTo(this.stateModel,"change:phase",this.handleExportPhase,this),this.listenTo(this.model,"error:unauthorized",window.location.reload),this.listenTo(this.stateModel,"error:unauthorized",window.location.reload);var e={delay:!1,message:f["export.error.cancelled"]},t={delay:!1,message:f["export.error.unexpected"]};this.listenTo(this.model,"error:notFound",o.bind(this.notification.show,this.notification,e)),this.listenTo(this.stateModel,"error:notFound",o.bind(this.notification.show,this.notification,e)),this.listenTo(this.model,"error:internalServerError",o.bind(this.notification.show,this.notification,t)),this.listenTo(this.stateModel,"error:internalServerError",o.bind(this.notification.show,this.notification,t)),this.listenTo(this.model,"error",o.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.stateModel,"error",o.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.dependentResourcesDialogView,"button:export",o.compose(o.bind(this.dependentResourcesDialogView.close,this.dependentResourcesDialogView),o.bind(function(){n.call(this),this._showNotification({message:f["export.finished"],type:"success"})},this))),this.listenTo(this.dependentResourcesDialogView,"button:cancel",o.bind(i,this,a.STATE.CANCELLED))},render:function(e){e=e||{},this.type=e.type;var n=this._isServerLevel(this.type),i=n||this.type===x.ROOT_TENANT;return i?this.$el.addClass("with-events"):this.$el.removeClass("with-events"),this.stopListening(this.model,"change:includeSubOrganizations",this.filterAuthoritiesBySubOrgs),this._resetModel(e),this.template=o.template(g(e))({everything:!1,i18n:f,isServerOrRootType:i,isServerLevel:n,isServerCe:this.type===x.SERVER_CE,isRepository:this.type===x.REPOSITORY,isSubOrgLevel:e.isSubOrgLevel}),this.$el.html(this.template),this.$(".selectRolesUsers").length&&t.call(this,e),this.applyEpoxyBindings(),this},doExport:function(){var e=this;this.model.isValid(!0)&&(this.loadingDialog.open(),this.model.save().done(function(t){e.stateModel.unset("warnings",{silent:!0}),e.stateModel.set(t),e.model.set("id",t.id)}))},handleExportPhase:function(){var e,t=this.stateModel.get("phase"),i=this._getBrokenDependencies();t==a.STATE.READY&&(this.loadingDialog.close(),o.isEmpty(i)?(n.call(this),e={message:f["export.finished"],type:"success"}):this.dependentResourcesDialogView.open({items:i})),t==a.STATE.FAILED&&(e={message:f["export.error.unexpected"]}),t==a.STATE.CANCELLED&&(e={message:f["export.error.cancelled"]}),e&&this._showNotification(e)},filterAuthoritiesBySubOrgs:function(){var e={excludeSubOrgs:!this.model.get("includeSubOrganizations")};this.rolesList.model.setContext(e),this.usersList.model.setContext(e)},bindWithRoles:function(e){this.model.set({roles:e}),this.onUsersToRolesChange(),e.length?this.rolesToUsers.setContext({roles:e}):this.rolesToUsers.set({items:[]})},bindWithUsers:function(e){this.model.set({users:e}),this.onRolesToUsersChange(),e.length?this.usersToRoles.setContext({users:e}):this.usersToRoles.set({items:[]})},changeEnabledState:function(){var e=this.model.get("everything");this.rolesList.setDisabled(e||this.model.get("rolesForUser")),this.usersList.setDisabled(e||this.model.get("userForRoles")),e&&(this.rolesList.selectNone(),this.usersList.selectNone())},includeRolesByUsers:function(e){var t=s(e.target).is(":checked");this.model.set({rolesForUser:!t,userForRoles:t}),this.onRolesToUsersChange(),this._includeUsersOrRoles(!t,t)},includeUsersWithRoles:function(e){var t=s(e.target).is(":checked");this.model.set({rolesForUser:t,userForRoles:!t}),this.onUsersToRolesChange(),this._includeUsersOrRoles(t,!t)},includeSelectedRolesUsersOnly:function(e){s(e.target).is(":checked")&&(this.model.set({userForRoles:!1,rolesForUser:!1}),this.onRolesToUsersChange(),this.onUsersToRolesChange(),this._includeUsersOrRoles(!1,!1))},sendParameters:function(e){this.model.isValid(!0)&&this.model.save()},onRolesToUsersChange:function(){this.model.get("userForRoles")?(this.usersList.highlightSet(o.map(this.rolesToUsers.get("items"),function(e){return e.username+(e.tenantId?"|"+e.tenantId:"")})),this.rolesList.highlightSet([])):this.usersList.highlightSet([])},onUsersToRolesChange:function(){this.model.get("rolesForUser")?(this.rolesList.highlightSet(o.map(this.usersToRoles.get("items"),function(e){return e.name+(e.tenantId?"|"+e.tenantId:"")})),this.usersList.highlightSet([])):this.rolesList.highlightSet([])},_isServerLevel:function(e){return e===x.SERVER_CE||e===x.SERVER_PRO},_includeUsersOrRoles:function(e,t){this.rolesList.setDisabled(e),this.usersList.setDisabled(t),this.rolesList.selectNone(),this.usersList.selectNone()},_showNotification:function(e){e=o.defaults(e,{type:"warning"}),this.loadingDialog.isVisible()&&this.loadingDialog.close(),this.notification.show({delay:!1,message:e.message,type:e.type})},_getBrokenDependencies:function(){var e=this.stateModel.get("warnings"),t=[];return o.each(e,function(e){"export.broken.dependency"===e.code&&t.push(e.parameters)}),o.flatten(o.sortBy(t,function(e){return e}))},_clickOnCheckbox:function(e){var t=s(e.target).next();t[0].disabled||this.model.set(t[0].name,!t[0].checked)},_onModelChange:function(){this.model.isValid(!0)},_resetModel:function(e){var t={organization:this.type==x.REPOSITORY?null:e.tenantId};if(this.type===x.ROOT_TENANT||this.type===x.TENANT){var n=this.type===x.ROOT_TENANT?"root_export.zip":e.tenantId+"_export.zip";o.extend(t,{fileName:n})}this.model.reset(t,this.type)}});return o.extend(b.prototype,m),b}),define("tenantImportExport/export/view/ExportPageView",["require","backbone","./ExportView","jrs.configs","tenantImportExport/export/enum/exportTypesEnum"],function(e){"use strict";var t=e("backbone"),n=e("./ExportView"),i=e("jrs.configs"),s=e("tenantImportExport/export/enum/exportTypesEnum");return t.View.extend({events:{"click #exportButton":"doExport"},initialize:function(){this.exportView=new n,this.exportView.render({type:i.isProVersion?s.SERVER_PRO:s.SERVER_CE,tenantId:i.isProVersion?"organizations":null}),this.$el.find(".body").append(this.exportView.el),this.listenTo(this.exportView.model,"validated",function(e){var t=this.$("#exportButton"),n=e?null:"disabled";t.attr("disabled",n)},this)},doExport:function(){this.exportView.doExport()}})}),JRS.Log=function(e){window.console||(window.console={log:function(){},debug:function(){},error:function(){}})}(),define("controls.logging",["namespace"],function(e){return function(){var t;return t||e.JRS}}(this)),define("components.dialog",["require","jquery","underscore","backbone","components.templateengine","components.dialogs"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("backbone"),s=e("components.templateengine"),o=e("components.dialogs"),r=i.View.extend({rendered:!1,contentSelector:".body",events:{"click .cancel":"hide"},initialize:function(e){if(this.templateId=e&&e.templateId||this.templateId,this.contentSelector=e&&e.contentSelector||this.contentSelector,!this.templateId)throw"Dialog template is not provided";n.bindAll(this),this.options=n.extend({},e)},render:function(e){return this.undelegateEvents(),this.$el=t(s.getTemplateText(this.templateId)).closest("div"),this.el=this.$el[0],t(e?e:document.body).append(this.$el),this.delegateEvents(),this.rendered=!0,this},hide:function(e){o.popup.hide(this.el),e&&e.stopPropagation()},show:function(e){this.rendered||this.render(e),o.popup.show(this.el,this.options.modal)},setContent:function(e){this.$el.find(this.contentSelector).html(t(e))},_updateMessage:function(e){e=n.isString(e)?[e]:e;var i=document.createDocumentFragment();n.each(e||[],function(e){i.appendChild(t("<p/>",{text:e,"class":"message"})[0])},this),this.$el.find(".body").html(i)}}),l=r.extend({templateId:"standardConfirmTemplate",events:{"click button.cancel":"hide","click button.ok":"onOk"},initialize:function(e){r.prototype.initialize.call(this,e),n.extend(this,n.defaults(e||{},{messages:"",ok:function(){}}))},show:function(e){r.prototype.show.call(this),this._updateMessage(e.messages||this.messages),e.ok&&(this.ok=e.ok)},onOk:function(){this.hide(),this.ok()}});return jaspersoft||(jaspersoft={components:{}}),jaspersoft.components||(jaspersoft.components={}),jaspersoft.components.Dialog=r,jaspersoft.components.ConfirmDialog=l,r}),define("administer/administerExportMain",["require","!domReady","administer.logging","administer.base","jrs.configs","tenantImportExport/export/view/ExportPageView","controls.logging","components.dialog"],function(e){"use strict";var t=e("!domReady"),n=e("administer.logging"),i=e("administer.base"),s=e("jrs.configs"),o=e("tenantImportExport/export/view/ExportPageView");e("controls.logging"),e("components.dialog"),t(function(){i.urlContext=s.urlContext,n.initialize(),new o({el:document.getElementById("settings")})})});