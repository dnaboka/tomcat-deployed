"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(e,t){var n=this._messages[e];return n?new Template(n).evaluate(t?t:{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,n){ajaxTargettedUpdate(e,{postData:t,callback:n,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(e)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(e){return function(){var t;return t||e.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;$("display").observe("click",function(e){var t=e.element(),n=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);if(n)for(var i in Administer.menuActions)if(n.match(i)&&!n.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[i]())}),jQuery(".js-logSettings select").on("change",function(t){var n,i=jQuery(t.target);n=i.hasClass("js-newLogger")?jQuery("#newLoggerName").val():i.parent().prev().text(),e._setLevel(encodeURIComponent(n),i.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(e){return function(){var t;return t||e.logging}}(this)),define("tenantImportExport/export/enum/exportTypesEnum",{ROOT_TENANT:"rootTenant",TENANT:"tenant",SERVER_CE:"serverCE",SERVER_PRO:"serverPRO",REPOSITORY:"repository"}),define("tenantImportExport/import/factory/importModelAttributesFactory",["require","underscore","tenantImportExport/export/enum/exportTypesEnum"],function(e){var t=e("underscore"),n=e("tenantImportExport/export/enum/exportTypesEnum"),i={},o={includeAccessEvents:!0,includeAuditEvents:!0,includeMonitoringEvents:!0},r={skipThemes:!0},s={includeServerSettings:!0};return i[n.ROOT_TENANT]=t.extend({},o,r),i[n.TENANT]=t.extend({},r),i[n.SERVER_PRO]=t.extend({},o,r,s),i[n.SERVER_CE]=t.extend({},s,{includeAccessEvents:!0}),function(e){return i[e]}}),define("tenantImportExport/import/enum/brokenDependencyStrategyEnum",{FAIL:"fail",SKIP:"skip",INCLUDE:"include"}),define("common/transport/AjaxFormSubmitter",["require","underscore","request","jquery"],function(e){function t(e){var t,i=null;return e.firstChild.innerText&&""!==e.firstChild.innerText&&e.body?(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e.firstChild.innerText.replace("\r\n-","\r\n"))):t=e,t.firstChild&&(i=t.firstChild.nodeName.toLowerCase()),i&&"html"!==i&&"#comment"!==i?n("xml"===t.firstChild.nodeName.toLowerCase()?t.firstChild.nextSibling:t.firstChild):{errorCode:"unexpected.error"}}function n(e){var t,i;if(e.children)t=e.children;else{t=[];for(var o=0,r=e.childNodes.length;r>o;o++)null===e.childNodes[o].nodeValue&&t.push(e.childNodes[o])}if(0===t.length&&1===e.childNodes.length)return e.childNodes[0].nodeValue;if(t.length>1&&t[0].nodeName===t[1].nodeName){i=[];for(var o=0,r=t.length;r>o;o++)i[o]=n(t[o])}else{i={};for(var o=0,r=t.length;r>o;o++)i[t[o].nodeName]=n(t[o])}return i}function i(e){var t=new a.Deferred;return e.submit(function(n){n.preventDefault(),s({url:e.attr("action"),type:e.attr("method"),data:new FormData(e[0]),cache:!1,contentType:!1,processData:!1,headers:{Accept:"application/json"}}).done(function(e){t.resolve(e)}).fail(function(e){e=e.responseJSON||e||{},r.defaults(e,{errorCode:"error.load.error"}),t.reject(e)}),e.unbind("submit")}),e.submit(),t}function o(e,n){var i=a.Deferred(),o=a("<iframe style='display:none' name='"+n+"'></iframe>");return e.append(o).attr("target",n),o.load(function(){try{i.resolve(t(this.contentWindow.document))}catch(e){i.reject({errorCode:"error.invalid.response"})}o.remove()}),o.on("abort",function(){i.reject({errorCode:"error.load.aborted"}),o.remove()}),o.on("error",function(){i.reject({errorCode:"error.load.error"}),o.remove()}),e.submit(),i}var r=e("underscore"),s=e("request"),a=e("jquery"),l=function(e,n,i,o){this.name=r.uniqueId("uploadTarget"),this.form=a(e),n&&this.form.attr("action",n),i&&this.form.attr("method",i),o&&this.form.attr("enctype",o),this.parceXmlDocToObject=t};return l.prototype.submit=function(){return window.FormData?i(this.form):o(this.form,this.name)},l}),define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(e){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("common/enum/httpStatusCodes"),o=e("common/enum/errorCodes"),r=n.Model.extend({initialize:function(){this.on("error",r.unifyServerErrors)},serialize:function(){return t.clone(this.attributes)}},{unifyServerErrors:function(e,t){var n=i[t.status],o=r.createServerError(t);e.trigger("error:"+n,e,o,t),e.trigger("error:all",e,o,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t={message:"Can't parse server response",errorCode:o.UNEXPECTED_ERROR,parameters:[]}}return t}});return r}),define("tenantImportExport/import/model/ImportModel",["require","underscore","jquery","tenantImportExport/import/factory/importModelAttributesFactory","../enum/brokenDependencyStrategyEnum","common/transport/AjaxFormSubmitter","backbone.validation","common/model/BaseModel"],function(e){var t=e("underscore"),n=e("jquery"),i=e("tenantImportExport/import/factory/importModelAttributesFactory"),o=e("../enum/brokenDependencyStrategyEnum"),r=e("common/transport/AjaxFormSubmitter"),s=e("backbone.validation"),a=e("common/model/BaseModel"),l=a.extend({defaults:{fileName:"",update:!0,skipUserUpdate:!1,mergeOrganization:!1,skipThemes:!0,brokenDependencies:o.FAIL},url:"rest_v2/import",validation:{fileName:[{fn:function(e){return!/\.zip$/.test(e)}}]},initialize:function(e,t){this.form=new r(t.form,this.url,"post","multipart/form-data")},parse:function(){return this.attributes},save:function(){var e,i,o=this;return this.isNew()?(e=new n.Deferred,this.form.submit().done(function(n){o.set("id",n.id),t.isUndefined(n.errorCode)&&t.isUndefined(n.error)?e.resolve(n):e.reject(n)}).fail(function(t){o.trigger("error",t),e.reject(t)})):(i=this._convertParameters(),e=a.prototype.save.call(this,{parameters:i},{url:this.url+"/"+this.id}).fail(t.bind(this.trigger,"error"))),e},cancel:function(){var e=this.url+"/"+this.id;this.destroy({url:e})},reset:function(e,n){var o=t.extend({},this.defaults,i(e),n);this.clear().set(t.extend({},o)),this.id=void 0},_convertParameters:function(){var e=[];return this.get("skipUserUpdate")&&e.push("skip-user-update"),this.get("includeAccessEvents")&&e.push("include-access-events"),this.get("includeAuditEvents")&&e.push("include-audit-events"),this.get("includeMonitoringEvents")&&e.push("include-monitoring-events"),this.get("includeServerSettings")&&e.push("include-server-setting"),this.get("mergeOrganization")&&e.push("merge-organization"),this.get("skipThemes")&&e.push("skip-themes"),this.get("update")&&e.push("update"),e}});return t.extend(l.prototype,s.mixin),l}),define("tenantImportExport/export/model/ExportStateModel",["require","underscore","common/model/BaseModel"],function(e){var t=e("underscore"),n=e("common/model/BaseModel"),i={INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",PENDING:"pending",CANCELLED:"cancelled"};return n.extend({url:function(){return"rest_v2/export/"+this.id+"/state"},initialize:function(e){n.prototype.initialize.call(this),this.on("change:phase",function(e,n){n==i.INPROGRESS&&t.isUndefined(e.interval)?e.interval=window.setInterval(function(){e.fetch({cache:!1}).fail(t.bind(e.stopPolling,e))},1e3):e.stopPolling()})},stopPolling:function(){t.isUndefined(this.interval)||(window.clearInterval(this.interval),this.interval=void 0)}},{STATE:i})}),define("tenantImportExport/import/model/ImportStateModel",["require","../../export/model/ExportStateModel"],function(e){var t=e("../../export/model/ExportStateModel");return t.extend({url:function(){return"rest_v2/import/"+this.id+"/state"}})}),define("tenantImportExport/import/enum/importPendingStatesEnum",{BROKEN_DEPS:"import.broken.dependencies",TENANT_MISMATCH:"import.organizations.not.match"}),define("text!tenantImportExport/export/template/loadingDialogTemplate.htm",[],function(){return'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}" tabindex="-1">\n    <div class="content">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body">\n            <p class="message"></p>\n        </div>\n    </div>\n</div>\n'}),define("tenantImportExport/export/view/LoadingDialog",["require","common/component/dialog/Dialog","underscore","bundle!CommonBundle","text!tenantImportExport/export/template/loadingDialogTemplate.htm"],function(e){var t=e("common/component/dialog/Dialog"),n=e("underscore"),i=e("bundle!CommonBundle"),o=e("text!tenantImportExport/export/template/loadingDialogTemplate.htm");return t.extend({defaultTemplate:o,constructor:function(e){n.defaults(e,{contentContainer:".body > .message",title:i["dialog.overlay.title"],modal:!0}),t.call(this,e)}})}),define("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm",[],function(){return'{{ if (message) { }}<p class="message">{{- message }}</p> {{ } }}\n<div class="control groupBox">\n    <ol class="list tabular oneColumn">\n        {{ for (var i = 0; i<items.length; i++) { }}\n        <li class="leaf {{-  i === 0 ? \' first\' : \'\' }} {{- i === items.length - 1 ? \'last\' : \'\' }}" tabindex="-1">\n            <div class="wrap">\n                <div class="column one">\n                    <p class="uri">{{- items[i] }} </p>\n                </div>\n            </div>\n        </li>\n        {{ } }}\n    </ol>\n\n</div>\n\n'}),define("tenantImportExport/view/BaseWarningDialogView",["require","jquery","underscore","common/component/dialog/Dialog","bundle!ImportExportBundle","text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm"],function(e){var t=(e("jquery"),e("underscore")),n=e("common/component/dialog/Dialog"),i=e("bundle!ImportExportBundle"),o=e("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm");return n.extend({events:{resize:"onResizeHeight"},onResizeHeight:function(){this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.$(".control.groupBox").css("min-height",this.$contentContainer.height()-this.$(".message").outerHeight(!0))},constructor:function(e){e=e||{},this.options=e,n.prototype.constructor.call(this,{modal:!0,resizable:e.resizable,minWidth:e.minWidth,minHeight:e.minHeight,additionalCssClasses:e.additionalCssClasses||"dependent-resources-dialog jr-uWidth-725px jr-uHeight-500px",title:e.title||i["dialog.broken.dependencies.title"],content:"",buttons:e.buttons}),this.template=t.template(e.template||o)},open:function(e){this.setContent(this.template(t.defaults(e,{message:""}))),n.prototype.open.apply(this,arguments),this.$contentContainer.scrollTop(0),this._resizableContainerShiftHeight=this.$(".jr-mDialog-footer").outerHeight()+this.$(".jr-mDialog-header").outerHeight()+this.$contentContainer.outerHeight()-this.$contentContainer.height()}})}),define("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm",[],function(){return"<p class=\"message\">{{- i18n['import.dialog.merge.tenant.intro'] }}</p>\n\n<p class=\"message imported-tenant\"><b>{{- i18n['import.dialog.merge.tenant.imported'] }} : </b> {{- fileTenantId}} </p>\n<p class=\"message selected-tenant\"><b>{{- i18n['import.dialog.merge.tenant.selected'] }} : </b> {{- selectedTenantId}} </p>\n\n<p class=\"message\">{{- i18n['import.dialog.merge.tenant.outro'] }} {{- selectedTenantId}}</p>\n"}),define("tenantImportExport/import/view/MergeTenantDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView","text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm"],function(e){var t=e("underscore"),n=e("bundle!CommonBundle"),i=e("bundle!ImportExportBundle"),o=e("tenantImportExport/view/BaseWarningDialogView"),r=e("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm");return o.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,additionalCssClasses:"merge-tenant-dialog",title:i["import.dialog.merge.tenant.title"],buttons:[{label:i["import.button.continue"],action:"import",primary:!0},{label:n["button.cancel"],action:"cancel",primary:!1}],template:r}),o.prototype.constructor.call(this,e),this.on("button:import",t.bind(this.close,this)),this.on("button:cancel",t.bind(this.close,this))},open:function(e){t.extend(e,{i18n:i}),o.prototype.open.call(this,e)}})}),define("tenantImportExport/import/view/ImportDependentResourcesDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(e){var t=e("underscore"),n=e("bundle!CommonBundle"),i=e("bundle!ImportExportBundle"),o=e("tenantImportExport/view/BaseWarningDialogView");return o.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,buttons:[{label:i["import.button.include"],action:"include",primary:!0},{label:i["import.button.skip"],action:"skip",primary:!1},{label:n["button.cancel"],action:"cancel",primary:!1}]}),o.prototype.constructor.call(this,e),this.on("button:include",t.bind(this.close,this)),this.on("button:skip",t.bind(this.close,this)),this.on("button:cancel",t.bind(this.close,this))},open:function(e){t.extend(e,{message:i["import.dialog.broken.dependencies.intro"]}),o.prototype.open.call(this,e)}})}),define("tenantImportExport/import/view/ImportWarningsDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(e){var t=e("underscore"),n=e("bundle!CommonBundle"),i=e("bundle!ImportExportBundle"),o=e("tenantImportExport/view/BaseWarningDialogView");return o.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,title:i["import.dialog.warnings.title"],additionalCssClasses:"warnings-dialog",buttons:[{label:n["button.close"],action:"close",primary:!1}]}),o.prototype.constructor.call(this,e),this.on("button:close",t.bind(this.close,this))}})}),define("tenantImportExport/import/factory/warningsFactory",["require","bundle!ImportExportBundle","underscore"],function(e){function t(e,t){var n={};return i.each(e,function(e,i){n[e]=t[i]}),n}var n=e("bundle!ImportExportBundle"),i=e("underscore"),o={};return o["import.resource.uri.too.long"]=[{msg:n["import.resource.uri.too.long"],parameters:["resourceURI"]},{msg:n["import.resource.uri.too.long.length"],parameters:["resourceURI","maxURILength"]}],o["import.access.denied"]=[{msg:n["import.access.denied"],parameters:["resourceURI"]}],o["import.resource.not.found"]=[{msg:n["import.resource.not.found"],parameters:["resourceURI"]}],o["import.resource.different.type.already.exists"]=[{msg:n["import.resource.different.type.already.exists"],parameters:["resourceURI"]}],o["import.resource.uri.not.valid"]=[{msg:n["import.resource.uri.not.valid"],parameters:["resourceURI"]}],o["import.resource.data.missing"]=[{msg:n["import.resource.data.missing"],parameters:["resourceURI"]}],o["import.reference.resource.not.found"]=[{msg:n["import.reference.resource.not.found"],parameters:["resourceURI"]},{msg:n["import.reference.dependent.resource.not.found"],parameters:["dependentResourceURI","resourceURI"]}],o["import.resource.attached.not.exist.org"]=[{msg:n["import.resource.attached.not.exist.org"],parameters:["resourceURI"]}],o["import.folder.attached.not.exist.org"]=[{msg:n["import.folder.attached.not.exist.org"],parameters:["resourceURI"]}],o["import.multi.tenancy.not.supported"]=[{msg:n["import.multi.tenancy.not.supported"],parameters:["organizationId"]}],o["import.report.job.reference.resource.not.found"]=[{msg:n["import.report.job.reference.resource.not.found"],parameters:["resourceURI"]},{msg:n["import.report.job.reference.dependent.resource.not.found"],parameters:["dependentResourceURI","resourceURI"]}],function(e){var n,r=e.code,s=e.parameters,a=o[r];return n=i.template(a[s.length-1].msg)(t(a[s.length-1].parameters,s))}}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(e){"use strict";var t,n,i=e("underscore"),o=e("jquery"),r=e("backbone"),s=e("bundle!js-sdk/CommonBundle"),a=e("text!./template/notificationTemplate.htm");e("css!notifications");var l={SUCCESS:"success",WARNING:"warning"},d=2e3,c={};return c[l.WARNING]=l.WARNING,n=r.View.extend({template:i.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:s})},initialize:function(){this.render()},render:function(){return o("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(e){return e=i.extend({type:l.WARNING,delay:d},e),this.$messageContainer.text(e.message),this.$messageContainer.removeClass().attr({"class":c[e.type]}),this.$el.slideDown(),e.delay&&i.delay(i.bind(this.hide,this),e.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){r.View.prototype.remove.apply(this,arguments)}},{show:function(){return t||(t=new n),t.show.apply(t,arguments)},hide:function(){return t||(t=new n),t.hide.apply(t,arguments)}})}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(e){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(e){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(e){var t=e("backbone.epoxy"),n=e("underscore"),i=e("./epoxyCustomBindingHandlers"),o=e("./epoxyCustomBindingFilters");return{epoxifyView:function(){var e=this.remove;t.View.mixin(this),e&&(this.remove=e),this.bindingFilters?this.bindingFilters=n.extend({},o,this.bindingFilters):o,this.bindingHandlers?this.bindingHandlers=n.extend({},i,this.bindingHandlers):i},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("text!tenantImportExport/import/template/importTemplate.htm",[],function(){return'<input name="organization" class="" type="hidden" data-bind="value:organization"/>\n\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.file.name\'] }}</span>\n    </legend>\n    <label for="uploadFile">\n        <input name="file" class="upload-file" id="uploadFile" type="file"/>\n    </label>\n</fieldset>\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.options\'] }}</span>\n    </legend>\n    <ul class="list inputSet">\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="" for="update">{{- i18n[\'import.update\'] }}</label>\n                <input id="update" class="" type="checkbox" value="" name="update" data-bind="checked:update"/>\n            </div>\n            <ul class="list inputSet">\n                <li class="leaf">\n                    <div class="control checkBox">\n                        <label class="wrap" title="">{{- i18n[\'import.skip.user.update\']\n                            }}</label>\n                        <input id="skipUserUpdate" class="" type="checkbox" value="" name="skip-user-update"\n                               data-bind="checked:skipUserUpdate, enabled:update"/>\n                    </div>\n                </li>\n            </ul>\n        </li>\n\n        {{ if (model.includeAuditEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.audit.events\']}}</label>\n                <input id="includeAuditEvents" class="" type="checkbox" name="include-audit-events"\n                       data-bind="checked:includeAuditEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeAccessEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.access.events\']}}</label>\n                <input id="includeAccessEvents" class="" type="checkbox" value="" name="include-access-events"\n                       data-bind="checked:includeAccessEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeMonitoringEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.monitoring.events\'] }}</label>\n                <input id="includeMonitoringEvents" class="" type="checkbox" value="" name="include-monitoring-events"\n                       data-bind="checked:includeMonitoringEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeServerSettings) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap">{{- i18n[\'import.include.configuration.settings\']}}</label>\n                <input class="" type="checkbox" value="" name="include-server-settings"\n                       data-bind="checked:includeServerSettings"/>\n            </div>\n        </li>\n        {{ } if (typeof model.skipThemes !== "undefined") { }}\n\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.themes\']}}</label>\n                <input type="checkbox" value=""\n                       data-bind="checked:not(skipThemes)"/>\n                <input class="hidden" id="skip-themes" type="checkbox"  value="" name="skip-themes"\n                       data-bind="checked:skipThemes"/>\n            </div>\n        </li>\n        {{ } }}\n    </ul>\n</fieldset>\n\n<!-- Hack for correct sending of multipart/form-data in IE. -->\n<!-- Here is the fix https://blog.yorkxin.org/posts/2014/02/06/ajax-with-formdata-is-broken-on-ie10-ie11/ -->\n<input type="hidden" name="_dontcare">'}),define("tenantImportExport/import/view/ImportView",["require","css!importExport.css","jquery","underscore","backbone","../model/ImportModel","../model/ImportStateModel","../enum/importPendingStatesEnum","../enum/brokenDependencyStrategyEnum","../../export/view/LoadingDialog","./MergeTenantDialogView","./ImportDependentResourcesDialogView","./ImportWarningsDialogView","tenantImportExport/import/factory/warningsFactory","common/component/notification/Notification","common/view/mixin/epoxyViewMixin","text!tenantImportExport/import/template/importTemplate.htm","bundle!ImportExportBundle","bundle!CommonBundle"],function(e){"use strict";function t(){var e=this.stateModel.get("warnings");return a.map(e,function(e){return v(e)})}function n(e,n){n=n||"warning";var i=t.call(this);"import.finished"!==e||a.isEmpty(i)||this.warningsDialogView.open({items:i}),this.notification.show({delay:!1,message:y[e]||y["import.error.unexpected"],type:n}),this.trigger("import:finished",this.model.get("organization")),this.model.reset(this.type)}function i(){var e=this.stateModel.get("error");e.errorCode===m.BROKEN_DEPS?this.dependentResourcesDialogView.open({items:e.parameters}):e.errorCode===m.TENANT_MISMATCH&&this.mergeTenantDialogView.open({fileTenantId:e.parameters[0],selectedTenantId:this.model.get("organization")})}function o(e,t){return function(n){e.model.set("brokenDependencies",t),e.doImport()}}function r(e){this.model.cancel(),this.stateModel.set("phase",e)}e("css!importExport.css");var s=e("jquery"),a=e("underscore"),l=e("backbone"),d=e("../model/ImportModel"),c=e("../model/ImportStateModel"),m=e("../enum/importPendingStatesEnum"),u=e("../enum/brokenDependencyStrategyEnum"),p=e("../../export/view/LoadingDialog"),h=e("./MergeTenantDialogView"),g=e("./ImportDependentResourcesDialogView"),f=e("./ImportWarningsDialogView"),v=e("tenantImportExport/import/factory/warningsFactory"),x=e("common/component/notification/Notification"),b=e("common/view/mixin/epoxyViewMixin"),E=e("text!tenantImportExport/import/template/importTemplate.htm"),y=e("bundle!ImportExportBundle"),w=e("bundle!CommonBundle"),I=l.View.extend({tagName:"form",className:"import-view",id:"importDataFile",events:{"change input[type='file']":"validateFile","click .checkBox label":"_clickOnCheckbox"},initialize:function(){this.model||(this.model=new d(null,{form:this.el})),this.stateModel=new c,this.loadingDialog=new p({content:w["dialog.overlay.loading"]}),this.mergeTenantDialogView=new h,this.dependentResourcesDialogView=new g,this.warningsDialogView=new f,this.notification=new x,this.listenTo(this.stateModel,"change:phase",this._handleImportPhase,this);var e={delay:!1,message:y["import.error.cancelled"]},t={delay:!1,message:y["import.error.unexpected"]};this.listenTo(this.model,"change",this._onModelChange),this.listenTo(this.model,"error:notFound",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.stateModel,"error:notFound",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.model,"error:internalServerError",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.stateModel,"error:internalServerError",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.model,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.stateModel,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.mergeTenantDialogView,"button:import",function(){this.model.set("mergeOrganization",!0),this.doImport()},this),this.listenTo(this.mergeTenantDialogView,"button:cancel",a.bind(r,this,c.STATE.CANCELLED)),this.listenTo(this.dependentResourcesDialogView,"button:skip",o(this,u.SKIP)),this.listenTo(this.dependentResourcesDialogView,"button:include",o(this,u.INCLUDE)),this.listenTo(this.dependentResourcesDialogView,"button:cancel",a.bind(r,this,c.STATE.CANCELLED)),this.epoxifyView()},render:function(e){return this.type=e.type,this.model.reset(this.type,{organization:e.tenantId}),this.$el.html(a.template(E)({i18n:y,model:this.model.toJSON()})),this.applyEpoxyBindings(),this},validateFile:function(e){this.model.set("fileName",s(e.target).val());var t=s(e.target),n=t.parent();this.model.isValid(!0)?n.removeClass("error"):n.addClass("error")},doImport:function(){var e=this;this.loadingDialog.open(),this.model.isValid(!0)&&this.model.save().always(function(t){e.stateModel.set(t)})},_handleImportPhase:function(){var e=this.stateModel.get("phase");e!==c.STATE.INPROGRESS&&this.loadingDialog.close(),e===c.STATE.READY&&n.call(this,"import.finished","success")||e===c.STATE.FAILED&&n.call(this,this.stateModel.get("error").errorCode)||e===c.STATE.CANCELLED&&n.call(this,"import.error.cancelled")||e===c.STATE.PENDING&&i.call(this)},_clickOnCheckbox:function(e){var t=s(e.target).next();t[0].disabled||(t[0].checked=!t[0].checked,t.trigger("change"))},_onModelChange:function(){this.model.isValid(!0)}});return a.extend(I.prototype,b),I}),define("tenantImportExport/import/view/ImportPageView",["require","backbone","jrs.configs","./ImportView","tenantImportExport/export/enum/exportTypesEnum"],function(e){"use strict";var t=e("backbone"),n=e("jrs.configs"),i=e("./ImportView"),o=e("tenantImportExport/export/enum/exportTypesEnum");return t.View.extend({events:{"click #importButton":"doImport"},initialize:function(){this.importView=new i,this.importView.render({tenantId:n.isProVersion?"organizations":null,type:n.isProVersion?o.SERVER_PRO:o.SERVER_CE}),this.$el.find(".body").append(this.importView.el),this.listenTo(this.importView.model,"validated",function(e){var t=this.$("#importButton"),n=e?null:"disabled";t.attr("disabled",n)},this)},doImport:function(){this.importView.doImport()}})}),define("administer/administerImportMain",["require","!domReady","administer.logging","administer.base","jrs.configs","tenantImportExport/import/view/ImportPageView"],function(e){"use strict";var t=e("!domReady"),n=e("administer.logging"),i=e("administer.base"),o=e("jrs.configs"),r=e("tenantImportExport/import/view/ImportPageView");t(function(){i.urlContext=o.urlContext,n.initialize(),new r({el:document.getElementById("settings")})})});