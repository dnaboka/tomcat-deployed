define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(e){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(e){"use strict";var t=e("underscore"),a=e("backbone"),n=e("common/enum/httpStatusCodes"),i=e("common/enum/errorCodes"),r=a.Model.extend({initialize:function(){this.on("error",r.unifyServerErrors)},serialize:function(){return t.clone(this.attributes)}},{unifyServerErrors:function(e,t){var a=n[t.status],i=r.createServerError(t);e.trigger("error:"+a,e,i,t),e.trigger("error:all",e,i,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(a){t={message:"Can't parse server response",errorCode:i.UNEXPECTED_ERROR,parameters:[]}}return t}});return r}),define("bi/repository/model/RepositoryResourceModel",["require","underscore","common/model/BaseModel","backbone.validation","bundle!js-sdk/RepositoryResourceBundle","common/util/i18nMessage","common/enum/httpStatusCodes","request"],function(e){"use strict";function t(e,t,a,n,i){return o({type:t,dataType:"json",url:e.contextPath+"/rest_v2/resources"+a+"?overwrite="+n+"&createFolders="+i,headers:{Accept:"application/json","Content-Location":e.get("uri")}}).done(function(t){e.set("uri",t.uri)})}var a=e("underscore"),n=e("common/model/BaseModel"),i=e("backbone.validation"),r=e("bundle!js-sdk/RepositoryResourceBundle"),s=e("common/util/i18nMessage").extend({bundle:r}),o=(e("common/enum/httpStatusCodes"),e("request")),l={LABEL_MAX_LENGTH:100,NAME_MAX_LENGTH:100,DESCRIPTION_MAX_LENGTH:250,NAME_NOT_SUPPORTED_SYMBOLS:"~!#\\$%^|\\s`@&*()\\-+={}\\[\\]:;\"'\\<\\>,?/\\|\\\\"},c=/application\/repository\.([^\+]+)\+json/,d=n.extend({idAttribute:"uri",type:void 0,urlRoot:function(){return(this.contextPath||"")+"/rest_v2/resources"},defaults:{name:void 0,parentFolderUri:void 0,uri:void 0,label:void 0,description:void 0,permissionMask:void 0,creationDate:void 0,updateDate:void 0,version:void 0},validation:{name:function(e,t,a){return e&&e.length>l.NAME_MAX_LENGTH?new s("error.field.max.length","name",l.NAME_MAX_LENGTH):e&&new RegExp("["+l.NAME_NOT_SUPPORTED_SYMBOLS+"]","g").test(e)?new s("error.field.bad.symbols","name",l.NAME_NOT_SUPPORTED_SYMBOLS):void 0},label:function(e,t,n){return a.isEmpty(e)?new s("error.field.required","label"):e.length>l.LABEL_MAX_LENGTH?new s("error.field.max.length","label",l.LABEL_MAX_LENGTH):void 0},description:function(e,t,a){return e&&e.length>l.NAME_MAX_LENGTH?new s("error.field.max.length","description",l.DESCRIPTION_MAX_LENGTH):void 0},parentFolderUri:[{required:!0,msg:new s("error.field.required","parentFolderUri")}]},url:function(){return this.isNew()?this.urlRoot()+encodeURI(this.get("parentFolderUri")):this.urlRoot()+encodeURI(this.id)},constructor:function(e,t){t||(t={}),a.defaults(t,{parse:!0}),n.call(this,e,t)},initialize:function(e,t){this.contextPath=t.contextPath,t.type&&(this.type=t.type),this.on("change:parentFolderUri change:name",this._updateUri),this.on("change:uri",this._updateNameAndParentFolderUri),n.prototype.initialize.apply(this,arguments)},clone:function(){return new this.constructor(this.attributes,{contextPath:this.contextPath})},parse:function(e){return"undefined"!=typeof e.uri?(e.name=d.getNameFromUri(e.uri),e.parentFolderUri=d.getParentFolderFromUri(e.uri)):e.parentFolderUri&&e.name&&(e.uri=d.constructUri(e.parentFolderUri,e.name)),e},toJSON:function(){var e=this.serialize();return delete e.name,delete e.parentFolderUri,e},_updateUri:function(){var e=this.get("name"),t=this.get("parentFolderUri"),a=d.constructUri(t,e);a&&this.set("uri",a)},_updateNameAndParentFolderUri:function(){var e=this.get("uri"),t=d.getNameFromUri(e),a=d.getParentFolderFromUri(e);this.set({name:t,parentFolderUri:a})},fetch:function(e){return a.defaults(e||(e={}),{headers:{Accept:"application/json"}}),e.url=this.url()+"?expanded="+(e.expanded===!0),delete e.expanded,n.prototype.fetch.call(this,e)},sync:function(e,t,a){if("read"===e){var i=a.success,r=this;a.success=function(e,t,a){var n=a.getResponseHeader("Content-Type"),s=c.exec(n);if(!s||!s[1])throw new Error("Unsupported response content type: "+n);r.type=s[1],i&&i(e,t,a)}}return n.prototype.sync.call(this,e,t,a)},save:function(e,t,i){var r;if(a.isUndefined(e)||a.isNull(e)||a.isObject(e)?(r=e||{},i=t):(r={})[e]=t,!this.type)throw new Error("Resource type is unspecified. It's not possible to save a resource without it's type specified");return a.defaults(i||(i={}),{headers:{Accept:"application/json","Content-Type":"application/repository."+this.type+"+json; charset=UTF-8"}}),i.url=this.url()+"?createFolders="+(i.createFolders===!0),i.url+="&overwrite="+(i.overwrite===!0),i.url+="&expanded="+(i.expanded===!0),i.url+="&dry-run="+(i.dryRun===!0),delete i.createFolders,delete i.overwrite,delete i.expanded,delete i.expanded,delete i.dryRun,n.prototype.save.call(this,r,i)},isWritable:function(){var e=this.get("permissionMask"),t=!1;return a.isUndefined(e)||(t=1===e||4&e),t},copyTo:function(e,a,n){return t(this,"POST",e,!!a,arguments.length<3||n)},moveTo:function(e,a,n){return t(this,"PUT",e,!!a,arguments.length<3||n)}},{settings:l,getNameFromUri:function(e){if(e){var t=e.split("/");return t[t.length-1]}},getParentFolderFromUri:function(e){if(e){var t=e.split("/");return 2===t.length&&""!==t[1]?"/":t.slice(0,t.length-1).join("/")}},constructUri:function(e,t){return t&&e?-1!==e.indexOf("/",e.length-1)?e+t:e+"/"+t:void 0},generateResourceName:function(e){var t="";return e&&(t=e.replace(new RegExp("["+d.settings.NAME_NOT_SUPPORTED_SYMBOLS+"]","g"),"_")),t}});return a.extend(d.prototype,i.mixin),d}),define("dataSource/model/BaseDataSourceModel",["require","bi/repository/model/RepositoryResourceModel","underscore","jquery","backbone","jrs.configs"],function(e){"use strict";var t=e("bi/repository/model/RepositoryResourceModel"),a=e("underscore"),n=e("jquery"),i=e("backbone"),r=e("jrs.configs");return t.extend({defaults:function(){var e={};return a.extend(e,t.prototype.defaults,{connectionType:void 0}),e}(),validation:{},initialize:function(e,n){n=a.defaults(n||{},{contextPath:r.contextPath}),this.options=n,this.isNew()&&n.parentFolderUri&&this.set("parentFolderUri",n.parentFolderUri,{silent:!0});var i=n.parentFolderUri?n.parentFolderUri:e.parentFolderUri;e.name&&i&&!e.uri&&n.isEditMode===!0&&this.set("uri",t.constructUri(i,e.name),{silent:!0}),t.prototype.initialize.call(this,e,n)},testConnection:function(){if(this.validate(),this._isValid){var e=n.Deferred(),t=n("#"+ajax.LOADING_ID)[0],a=!1,s=window.setTimeout(function(){a=!0,dialogs.popup.show(t,!0)},AjaxRequester.prototype.MAX_WAIT_TIME),o=this.toJSON();return i.ajax({type:"POST",url:r.contextPath+"/rest_v2/connections",contentType:o.connectionType,headers:{Accept:"application/json"},data:JSON.stringify(o)}).always(function(){window.clearTimeout(s),a&&dialogs.popup.hide(t)}).done(e.resolve).fail(e.reject),e.promise()}}})}),define("common/util/featureDetection",[],function(){"use strict";return{supportsTouch:function(){return"ontouchstart"in window||navigator.msMaxTouchPoints}()}}),define("util/historyHelper",["require","utils.common","jrs.configs"],function(e){"use strict";e("utils.common");var t=e("jrs.configs");return{saveCurrent:function(e){new JSCookie(e,encodeURIComponent(document.location.href))},saveReferrer:function(e){-1===document.referrer.indexOf("login.html")&&new JSCookie(e,encodeURIComponent(document.referrer))},restore:function(e,a){var n=encodeURIComponent(document.location.href),i=new JSCookie(e).value;if(i&&i!==n){var r=decodeURIComponent(i);if(r)return void redirectToUrl(r)}a=a||"/",redirectToUrl(t.contextPath+a)}}}),define("text!dataSource/template/nameAndDescriptionTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.nameanddesc\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.labelIDtitle\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.label }}" name="label">\n        <span class="message warning"></span>\n    </label>\n\n\n    <label title="{{- i18n[\'resource.dataSource.nameIDtitle\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.resource\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- modelAttributes.name }}" name="name">\n        <span class="message warning"></span>\n    </label>\n\n\n    <label title="{{- i18n[\'resource.dataSource.descriptionTitle\']}}" class="control textArea">\n        <span class="wrap">{{- i18n[\'resource.dataSource.description\']}}</span>\n        <textarea type="text" name="description">{{- modelAttributes.description }}</textarea>\n        <span class="message warning"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/saveLocationTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <label title="{{- i18n[\'dialog.datasource.destination\']}}" class="control saveLocation browser">\n        <span class="wrap">{{- i18n[\'dialog.datasource.destination\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.parentFolderUri }}" {{ if (isEditMode) { }}disabled="disabled"{{ } }} name="parentFolderUri" id="parentFolderUri">\n        <button class="button action" type="button" {{ if (isEditMode) { }}disabled="disabled"{{ } }} id="parentFolderUriBrowse">\n			<span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...\n				<span class="icon"></span>\n			</span>\n		</button>\n        <span class="message warning"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/timezoneTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n    <label title="{{- i18n[\'resource.analysisConnection.timeZone\'] }}" class="control select">\n        <span class="wrap">{{- i18n["resource.dataSource.timezone"] }}</span>\n        <select class="fnormal timeZone" name="timezone">\n            <option {{ if (modelAttributes.timezone === "") { }}selected="selected"{{ } }} value="">{{- i18n["jsp.jdbcPropsForm.timezone.default.option"] }}</option>\n            {{ _.each(timezones, function(timezone) { }}\n            <option value="{{- timezone.code }}" {{ if (timezone.code === modelAttributes.timezone) { }}selected="selected"{{ } }}>\n                {{- i18n[\'timezone.option\'].replace(\'{0}\', timezone.code).replace(\'{1}\', timezone.description) }}\n            </option>\n            {{ }); }}\n        </select>\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.hint3"] }}</span>\n    </label>\n</fieldset>'}),define("text!dataSource/template/dialog/selectFromRepository.htm",[],function(){return'<div id="ajaxbuffer" style="display:none"></div>\r\n<div id="{{- dialogId }}" class="panel dialog selectFromRepository overlay moveable sizeable centered_horz centered_vert hidden">\r\n\r\n    <div class="sizer diagonal"></div>\r\n\r\n    <div class="content hasFooter ">\r\n\r\n        <div class="header mover">\r\n            <div class="title">\r\n            </div>\r\n        </div>\r\n        <div class="body  ">\r\n\r\n            <div class="control groupBox fillParent">\r\n\r\n                <div class="content ">\r\n\r\n                    <div class="header ">\r\n                        <div class="title">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="body  ">\r\n                        <ul id="{{- treeId }}"></ul>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="footer ">\r\n\r\n            <button id="selectFromRepoBtnSelect" class="button action primary up"><span class="wrap">{{- i18n["button.select"] }}</span><span class="icon"></span></button>\r\n            <button id="selectFromRepoBtnCancel" class="button action up"><span class="wrap">{{- i18n["button.cancel"] }}</span><span class="icon"></span></button>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'}),define("text!dataSource/template/testConnectionTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <span id="testDataSource" class="button action up"><span class="wrap">{{- i18n[\'button.testConnection\']}}</span></span>\n    <div class="message warning" name="testConnectionMessage">\n        <span></span>\n        <a class="details" name="testConnectionMessageDetails" href="#">{{- i18n[\'button.details\']}}</a>\n    </div>\n\n</fieldset>\n\n<br/>'}),define("dataSource/view/BaseDataSourceView",["require","jquery","underscore","bi/repository/model/RepositoryResourceModel","dataSource/model/BaseDataSourceModel","bundle!jasperserver_messages","settings!userTimeZones","backbone","text!dataSource/template/nameAndDescriptionTemplate.htm","text!dataSource/template/saveLocationTemplate.htm","text!dataSource/template/timezoneTemplate.htm","text!dataSource/template/dialog/selectFromRepository.htm","components.dialogs","text!dataSource/template/testConnectionTemplate.htm","backbone.validation"],function(e){"use strict";var t,a,n=e("jquery"),i=e("underscore"),r=e("bi/repository/model/RepositoryResourceModel"),s=e("dataSource/model/BaseDataSourceModel"),o=e("bundle!jasperserver_messages"),l=e("settings!userTimeZones"),c=e("backbone"),d=(e("text!dataSource/template/nameAndDescriptionTemplate.htm"),e("text!dataSource/template/saveLocationTemplate.htm"),e("text!dataSource/template/timezoneTemplate.htm")),u=(e("text!dataSource/template/dialog/selectFromRepository.htm"),e("components.dialogs")),p=e("text!dataSource/template/testConnectionTemplate.htm"),A=e("backbone.validation");return c.View.extend({PAGE_TITLE_NEW_MESSAGE_CODE:void 0,PAGE_TITLE_EDIT_MESSAGE_CODE:void 0,modelConstructor:s,events:{"keyup input[type='text'], input[type='password'], textarea, select":"updateModelProperty","change input[type='text'], input[type='password'], input[type='radio'], input[type='checkbox'], textarea, select":"updateModelProperty","click #testDataSource":"testConnection","click [name=testConnectionMessageDetails]":"showTestConnectionMessageDetails"},initialize:function(e){this.options=e,this.isEditMode=e.isEditMode,this.timezones=e.timezones?e.timezones:l;var t={};if(e.dataSource&&(t=i.extend(t,e.dataSource)),this.model=new this.modelConstructor(t,e),A.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"}),this.model.initialization){var a=this;this.model.initialization.done(function(){a.render.apply(a)})}else this.render();this.setPageTitle()},testConnection:function(){if(t!==!0){var e,n,i=this.model.testConnection(),r=this;i&&(t=!0,n=r.$el.find("#testDataSource"),n.addClass("disabled"),e=this.$el.find("[name=testConnectionMessage]"),e.removeClass("warning success").addClass("hidden"),e.parent().addClass("error"),e.find("a").addClass("hidden"),i.done(function(){e.addClass("success").find("span").text(o["resource.dataSource.connectionState.passed"])}).fail(function(t){var n=r.getTestConnectionErrorMessage(t);e.addClass("warning").find("span").text(n.text),n.details&&(e.find("a").removeClass("hidden"),a=n.details)}).always(function(){t=!1,e.removeClass("hidden"),n.removeClass("disabled")}))}},showTestConnectionMessageDetails:function(){u.errorPopup.show(a)},getTestConnectionErrorMessage:function(e){var t=!1,a=o["resource.dataSource.connectionState.failed"],i=!1;try{t=n.parseJSON(e.responseText)}catch(r){i=e.responseText}return t&&(t.parameters&&t.parameters[2]&&(a=t.parameters[2]),t.parameters&&t.parameters[3]&&(i=t.parameters[3])),{text:a,details:i}},updateModelProperty:function(e){var t=n(e.target),a={},i=t.attr("name"),s="checkbox"===t.attr("type")?t.is(":checked"):n.trim(t.val());if(a[i]=s,this.model.set(a),!this.isEditMode)if("name"===i){var o=r.generateResourceName(this.model.get("label"));s!==o&&(this._idUpdatedManually=!0)}else if("label"===i&&!this._idUpdatedManually){var l=r.generateResourceName(s);this.model.set("name",l),this.$("input[name='name']").val(l)}this.model.validate(a)},render:function(){return this.$el.empty(),this},renderTimezoneSection:function(){this.$el.append(i.template(d,this.templateData()))},renderTestConnectionSection:function(){this.$el.append(i.template(p,this.templateData()))},renderOrAddAnyBlock:function(e,t){if(i.isString(t)){try{t=n(t)}catch(a){t=!1}if(!t)return!1}var r=t.first().attr("name");return r?(e.find("[name="+r+"]").length>0?e.find("[name="+r+"]").empty().append(t.children()):e.append(t),!0):!1},templateData:function(){return{_:i,i18n:o,modelAttributes:i.clone(this.model.attributes),timezones:this.timezones,isEditMode:this.isEditMode}},setPageTitle:function(){var e,t=n("#display .showingToolBar > .content > .header > .title");e=this.isEditMode?o[this.PAGE_TITLE_EDIT_MESSAGE_CODE]+": "+this.model.get("label"):o[this.PAGE_TITLE_NEW_MESSAGE_CODE],t.text(e)},fieldIsValid:function(e,t,a){var n=e.$("["+a+'="'+t+'"]').parent();n.removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,a,n){if(a!==!0){var i=e.$("["+n+'="'+t+'"]').parent();i.addClass("error"),i.find(".message.warning").text(a)}},validField:function(e){var t=this.$(e).parent();t.removeClass("error"),t.find(".message.warning").text("")},invalidField:function(e,t){var a=this.$(e).parent();a.addClass("error"),a.find(".message.warning").text(t.toString())},remove:function(){return n("div[id^='selectFromRepository1'], div[id^='selectFromRepository2']").remove(),A.unbind(this),c.View.prototype.remove.call(this),this}})}),define("text!dataSource/template/customDataSourceTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n\n	<legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n	{{\n\n	var buildAttrs = function(attrs) {\n		return _.map(attrs, function(v, k){\n			v = v.toString().replace(/"/g, "\\&quot\\;");\n			return k + \'="\' + _.xssEscape(v) + \'"\';\n		}).join(" ");\n	};\n\n	_.each(customFields, function(field){\n\n		var\n			attrs = {},\n			label = i18n[field.label] || field.label;\n\n		if (field.mandatory) {\n			label = label + " (" + i18n["required.field"] + ")";\n		}\n	}}\n\n		<label title="{{- label }}" class="control input text">\n			<span class="wrap">{{- label }}:</span>\n			{{\n\n				var properties = field.properties || {};\n                var value = modelAttributes[field.name] ? modelAttributes[field.name] : "";\n                if("password" === field.name && value !== ""){\n                    value = i18n[\'input.password.substitution\']\n                }\n\n				if (properties.type === "boolean") {\n					attrs.name = field.name;\n					attrs.type = "checkbox";\n					if (value == \'on\' || value == \'true\') {\n						attrs.checked = "true";\n					}\n					}}\n					<input {{ print(buildAttrs(attrs)) }} />\n					{{\n				} else if (properties.displayHeight != null) {\n					attrs.name = field.name;\n					attrs.rows = properties.displayHeight;\n					attrs.cols = properties.displayWidth != null ? properties.displayWidth : 40;\n					attrs["class"] = "fnormal";\n					}}\n					<textarea {{ print(buildAttrs(attrs)) }} >{{- value }}</textarea>\n					{{\n				} else {\n					attrs.name = field.name;\n					attrs.type = field.name === "password" ? "password" : "text";\n					attrs.size = properties.displayWidth != null ? properties.displayWidth : 40;\n					attrs["class"] = "fnormal";\n					attrs.value = value;\n					}}\n					<input {{ print(buildAttrs(attrs)) }} />\n					{{\n				} }}\n\n			<span class="message hint"></span>\n			<span class="message warning"></span>\n		</label>\n\n	{{ }); }}\n\n</fieldset>\n'}),define("dataSource/enum/connectionTypes",{AWS:"application/repository.awsDataSource+json",AZURE_SQL:"application/repository.azureSqlDataSource+json",BEAN:"application/repository.beanDataSource+json",JDBC:"application/repository.jdbcDataSource+json",JNDI:"application/repository.jndiJdbcDataSource+json",VIRTUAL:"application/repository.virtualDataSource+json",MONGODB:"application/connections.mongodb+json",HIVE:"application/connections.hive+json",TEXT_FILE:"application/connections.txtFile+json",XLS_FILE:"application/connections.xlsFile+json",CUSTOM:"application/repository.customDataSource+json"}),define("bi/repository/enum/repositoryResourceTypes",{RESOURCE_LOOKUP:"resourceLookup",DASHBOARD:"dashboard",LEGACY_DASHBOARD:"legacyDashboard",REPORT_UNIT:"reportUnit",TOPIC:"topic",ADHOC_DATA_VIEW:"adhocDataView",FILE:"file",FOLDER:"folder",SECURE_FILE:"secureFile",DATA_TYPE:"dataType",JDBC_DATA_SOURCE:"jdbcDataSource",AWS_DATA_SOURCE:"awsDataSource",AZURE_SQL_DATA_SOURCE:"azureSqlDataSource",JNDI_DATA_SOURCE:"jndiJdbcDataSource",VIRTUAL_DATA_SOURCE:"virtualDataSource",CUSTOM_DATA_SOURCE:"customDataSource",BEAN_DATA_SOURCE:"beanDataSource",XMLA_CONNECTION:"xmlaConnection",LIST_OF_VALUES:"listOfValues",REPORT_OPTIONS:"reportOptions",QUERY:"query",OLAP_UNIT:"olapUnit",DOMAIN_TOPIC:"domainTopic",SEMANTIC_LAYER_DATA_SOURCE:"semanticLayerDataSource",SECURE_MONDRIAN_CONNECTION:"secureMondrianConnection",MONDRIAN_XMLA_DEFINITION:"mondrianXmlaDefinition",MONDRIAN_CONNECTION:"mondrianConnection",INPUT_CONTROL:"inputControl",ORGANIZATION:"organization",OLAP_CUBE:"olapCube"}),define("dataSource/model/CustomDataSourceModel",["require","dataSource/model/BaseDataSourceModel","underscore","jquery","jrs.configs","requestSettings","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","components.dialogs","bundle!all","bundle!jasperserver_config"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),a=e("underscore"),n=e("jquery"),i=e("jrs.configs"),r=e("requestSettings"),s=e("dataSource/enum/connectionTypes"),o=e("bi/repository/enum/repositoryResourceTypes"),l=e("components.dialogs"),c=e("bundle!all"),d=e("bundle!jasperserver_config"),u=t.extend({type:o.CUSTOM_DATA_SOURCE,constructor:function(e,n){this.defaults=a.extend({},this.defaults,{dataSourceName:n.dataSourceType,connectionType:s.CUSTOM}),t.prototype.constructor.apply(this,arguments)},initialize:function(e,a){var i=t.prototype.initialize.apply(this,arguments);return this.customFields=[],this.testable=!1,this.queryTypes=null,this.initialization=n.Deferred(),this.getCustomFieldsDefinition(),i},getCustomFieldsDefinition:function(){var e,t={};return a.extend(t,r,{Accept:"application/json"}),e=n.ajax({type:"GET",headers:t,url:i.contextPath+"/rest_v2/customDataSources/"+this.get("dataSourceName")}).done(a.bind(this.getCustomFieldsDefinitionDone,this)).fail(a.bind(this.getCustomFieldsDefinitionFail,this))},getCustomFieldsDefinitionDone:function(e){var t=this;e&&e.propertyDefinitions&&a.isArray(e.propertyDefinitions)&&(this.resetValidation(),this.testable=!!e.testable,this.queryTypes=e.queryTypes?e.queryTypes:null,a.each(e.propertyDefinitions,function(e){var n={};e.properties&&(e.properties=a(e.properties).reduce(function(e,t){return e[t.key]=t.value,e},{})),t.customFields.push(e),t.defaults[e.name]=e.defaultValue,t.options.isEditMode||t.set(e.name,e.defaultValue),"password"===e.name&&t.options.isEditMode&&!t.isNew()&&t.set("password",d["input.password.substitution"]),e.properties&&e.properties.mandatory&&(n[e.name]={required:!0,msg:c[t.get("dataSourceName")+"."+e.name+".required"]||c["required.field.specify.value"]},a.extend(t.validation,n))})),this.options.isEditMode||this.set(this.parse(this.attributes),{silent:!0}),this.initialization.resolve()},getCustomFieldsDefinitionFail:function(e){var t=!1,a="Failed to load custom data source definition. ";try{t=JSON.parse(e.responseText)}catch(n){}t&&(t[0]&&t[0].errorCode?a+="<br/>The reason is: "+t[0].errorCode:t.message&&(a+="<br/>The reason is: "+t.message),a+="<br/><br/>The full response from the server is: "+e.responseText),l.errorPopup.show(a)},parse:function(e){var n=t.prototype.parse.apply(this,arguments);return n=a.extend(n,this.parseProperties(e.properties)),delete e.properties,n},parseProperties:function(e){var t={};return a.isEmpty(e)||a.each(e,function(e){t[e.key]="password"===e.key?d["input.password.substitution"]:e.value}),t},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.customFieldsToJSON(e,this.customFields)},customFieldsToJSON:function(e,t){return a.isEmpty(t)||(e.properties=[],a.each(t,function(t){var a=e[t.name],n="password"===t.name;(!n||n&&a!==d["input.password.substitution"])&&(e.properties.push({key:t.name,value:a}),delete e[t.name])})),e},resetValidation:function(){this.validation=a.clone(u.prototype.validation)}});return u}),define("dataSource/view/CustomDataSourceView",["require","underscore","jquery","bundle!all","dataSource/view/BaseDataSourceView","text!dataSource/template/customDataSourceTemplate.htm","dataSource/model/CustomDataSourceModel"],function(e){"use strict";var t=e("underscore"),a=e("jquery"),n=e("bundle!all"),i=e("dataSource/view/BaseDataSourceView"),r=e("text!dataSource/template/customDataSourceTemplate.htm"),s=e("dataSource/model/CustomDataSourceModel");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.custom.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.custom.page.title.edit",modelConstructor:s,customFieldsTemplate:r,render:function(){return this.$el.empty(),this.renderCustomFieldsSection(),this.model.testable&&this.renderTestConnectionSection(),this},templateData:function(){return t.extend({},i.prototype.templateData.apply(this,arguments),{i18n:n,customFields:this.model.customFields})},renderCustomFieldsSection:function(){var e=t.template(this.customFieldsTemplate,this.templateData()),n=this.$el.find("[name=customFieldsContainer]");n.length>0?n.empty().append(a(e).children()):this.$el.append(e)}},{})}),define("dataSource/enum/dataSourceResourceTypes",{JDBC:"jdbcDataSource",AWS:"awsDataSource",AZURE_SQL:"azureSqlDataSource",JNDI:"jndiJdbcDataSource",VIRTUAL:"virtualDataSource",CUSTOM:"customDataSource",BEAN:"beanDataSource",MONGODB:"MongoDbDataSource",MONGODBJDBC:"mongoDbJDBCDataSource"}),define("dataSource/enum/customDataSourceTypes",{DIAGNOSTIC:"diagnosticCustomDataSource",HIVE:"HiveDataSource",MONGODB:"MongoDbDataSource",TEXT_FILE:"textDataSource"});var XRegExp;XRegExp=XRegExp||function(e){"use strict";function t(e,t,a){var n;for(n in d.prototype)d.prototype.hasOwnProperty(n)&&(e[n]=d.prototype[n]);return e.xregexp={captureNames:t,isNative:!!a},e}function a(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function n(e,n,i){if(!d.isRegExp(e))throw new TypeError("type RegExp expected");var r=F.replace.call(a(e)+(n||""),v,"");return i&&(r=F.replace.call(r,new RegExp("["+i+"]+","g"),"")),e=e.xregexp&&!e.xregexp.isNative?t(d(e.source,r),e.xregexp.captureNames?e.xregexp.captureNames.slice(0):null):t(new RegExp(e.source,r),null,!0)}function i(e,t){var a=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(t);for(;a--;)if(e[a]===t)return a;return-1}function r(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function s(e){return e=e||{},"all"===e||e.all?e={natives:!0,extensibility:!0}:r(e,"string")&&(e=d.forEach(e,/[^\s,]+/,function(e){this[e]=!0},{})),e}function o(e,t,a,n){var i,r,s=m.length,o=null;y=!0;try{for(;s--;)if(r=m[s],("all"===r.scope||r.scope===a)&&(!r.trigger||r.trigger.call(n))&&(r.pattern.lastIndex=t,i=D.exec.call(r.pattern,e),i&&i.index===t)){o={output:r.handler.call(n,i,a),match:i};break}}catch(l){throw l}finally{y=!1}return o}function l(e){d.addToken=u[e?"on":"off"],A.extensibility=e}function c(e){RegExp.prototype.exec=(e?D:F).exec,RegExp.prototype.test=(e?D:F).test,String.prototype.match=(e?D:F).match,String.prototype.replace=(e?D:F).replace,String.prototype.split=(e?D:F).split,A.natives=e}var d,u,p,A={natives:!1,extensibility:!1},F={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},D={},h={},m=[],C="default",E="class",f={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},B=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,v=/([\s\S])(?=[\s\S]*\1)/g,g=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,S=F.exec.call(/()??/,"")[1]===e,b=RegExp.prototype.sticky!==e,y=!1,T="gim"+(b?"y":"");return d=function(a,i){if(d.isRegExp(a)){if(i!==e)throw new TypeError("can't supply flags when constructing one RegExp from another");return n(a)}if(y)throw new Error("can't call the XRegExp constructor within token definition functions");var r,s,l,c=[],u=C,p={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return i.indexOf(e)>-1}},A=0;if(a=a===e?"":String(a),i=i===e?"":String(i),F.match.call(i,v))throw new SyntaxError("invalid duplicate regular expression flag");for(a=F.replace.call(a,/^\(\?([\w$]+)\)/,function(e,t){if(F.test.call(/[gy]/,t))throw new SyntaxError("can't use flag g or y in mode modifier");return i=F.replace.call(i+t,v,""),""}),d.forEach(i,/[\s\S]/,function(e){if(T.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])});A<a.length;)r=o(a,A,u,p),r?(c.push(r.output),A+=r.match[0].length||1):(s=F.exec.call(f[u],a.slice(A)),s?(c.push(s[0]),A+=s[0].length):(l=a.charAt(A),"["===l?u=E:"]"===l&&(u=C),c.push(l),++A));return t(new RegExp(c.join(""),F.replace.call(i,/[^gimy]+/g,"")),p.hasNamedCapture?p.captureNames:null)},u={on:function(e,t,a){a=a||{},e&&m.push({pattern:n(e,"g"+(b?"y":"")),handler:t,scope:a.scope||C,trigger:a.trigger||null}),a.customFlags&&(T=F.replace.call(T+a.customFlags,v,""))},off:function(){throw new Error("extensibility must be installed before using addToken")}},d.addToken=u.off,d.cache=function(e,t){var a=e+"/"+(t||"");return h[a]||(h[a]=d(e,t))},d.escape=function(e){return F.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},d.exec=function(e,t,a,i){var r,s=n(t,"g"+(i&&b?"y":""),i===!1?"y":"");return s.lastIndex=a=a||0,r=D.exec.call(s,e),i&&r&&r.index!==a&&(r=null),t.global&&(t.lastIndex=r?s.lastIndex:0),r},d.forEach=function(e,t,a,n){for(var i,r=0,s=-1;i=d.exec(e,t,r);)a.call(n,i,++s,e,t),r=i.index+(i[0].length||1);return n},d.globalize=function(e){return n(e,"g")},d.install=function(e){e=s(e),!A.natives&&e.natives&&c(!0),!A.extensibility&&e.extensibility&&l(!0)},d.isInstalled=function(e){return!!A[e]},d.isRegExp=function(e){return r(e,"regexp")},d.matchChain=function(e,t){return function a(e,n){var i,r=t[n].regex?t[n]:{regex:t[n]},s=[],o=function(e){s.push(r.backref?e[r.backref]||"":e[0])};for(i=0;i<e.length;++i)d.forEach(e[i],r.regex,o);return n!==t.length-1&&s.length?a(s,n+1):s}([e],0)},d.replace=function(t,a,i,r){var s,o=d.isRegExp(a),l=a;return o?(r===e&&a.global&&(r="all"),l=n(a,"all"===r?"g":"","all"===r?"":"g")):"all"===r&&(l=new RegExp(d.escape(String(a)),"g")),
s=D.replace.call(String(t),l,i),o&&a.global&&(a.lastIndex=0),s},d.split=function(e,t,a){return D.split.call(e,t,a)},d.test=function(e,t,a,n){return!!d.exec(e,t,a,n)},d.uninstall=function(e){e=s(e),A.natives&&e.natives&&c(!1),A.extensibility&&e.extensibility&&l(!1)},d.union=function(e,t){var a,n,i,s,o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=0,c=function(e,t,i){var r=n[l-a];if(t){if(++l,r)return"(?<"+r+">"}else if(i)return"\\"+(+i+a);return e},u=[];if(!r(e,"array")||!e.length)throw new TypeError("patterns must be a nonempty array");for(s=0;s<e.length;++s)i=e[s],d.isRegExp(i)?(a=l,n=i.xregexp&&i.xregexp.captureNames||[],u.push(d(i.source).source.replace(o,c))):u.push(d.escape(i));return d(u.join("|"),t)},d.version="2.0.0",D.exec=function(t){var n,r,s,o,l;if(this.global||(o=this.lastIndex),n=F.exec.apply(this,arguments)){if(!S&&n.length>1&&i(n,"")>-1&&(s=new RegExp(this.source,F.replace.call(a(this),"g","")),F.replace.call(String(t).slice(n.index),s,function(){var t;for(t=1;t<arguments.length-2;++t)arguments[t]===e&&(n[t]=e)})),this.xregexp&&this.xregexp.captureNames)for(l=1;l<n.length;++l)r=this.xregexp.captureNames[l-1],r&&(n[r]=n[l]);this.global&&!n[0].length&&this.lastIndex>n.index&&(this.lastIndex=n.index)}return this.global||(this.lastIndex=o),n},D.test=function(e){return!!D.exec.call(this,e)},D.match=function(e){if(d.isRegExp(e)){if(e.global){var t=F.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return D.exec.call(e,this)},D.replace=function(e,t){var a,n,s,o,l=d.isRegExp(e);return l?(e.xregexp&&(a=e.xregexp.captureNames),e.global||(o=e.lastIndex)):e+="",r(t,"function")?n=F.replace.call(String(this),e,function(){var n,i=arguments;if(a)for(i[0]=new String(i[0]),n=0;n<a.length;++n)a[n]&&(i[0][a[n]]=i[n+1]);return l&&e.global&&(e.lastIndex=i[i.length-2]+i[0].length),t.apply(null,i)}):(s=String(this),n=F.replace.call(s,e,function(){var e=arguments;return F.replace.call(String(t),B,function(t,n,r){var s;if(n){if(s=+n,s<=e.length-3)return e[s]||"";if(s=a?i(a,n):-1,0>s)throw new SyntaxError("backreference to undefined group "+t);return e[s+1]||""}if("$"===r)return"$";if("&"===r||0===+r)return e[0];if("`"===r)return e[e.length-1].slice(0,e[e.length-2]);if("'"===r)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(r=+r,!isNaN(r)){if(r>e.length-3)throw new SyntaxError("backreference to undefined group "+t);return e[r]||""}throw new SyntaxError("invalid token "+t)})})),l&&(e.global?e.lastIndex=0:e.lastIndex=o),n},D.split=function(t,a){if(!d.isRegExp(t))return F.split.apply(this,arguments);var n,i=String(this),r=t.lastIndex,s=[],o=0;return a=(a===e?-1:a)>>>0,d.forEach(i,t,function(e){e.index+e[0].length>o&&(s.push(i.slice(o,e.index)),e.length>1&&e.index<i.length&&Array.prototype.push.apply(s,e.slice(1)),n=e[0].length,o=e.index+n)}),o===i.length?(!F.test.call(t,"")||n)&&s.push(""):s.push(i.slice(o)),t.lastIndex=r,s.length>a?s.slice(0,a):s},p=u.on,p(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===C)return e[0];throw new SyntaxError("invalid escape "+e[0])},{scope:"all"}),p(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),p(/(?:\(\?#[^)]*\))+/,function(e){return F.test.call(g,e.input.slice(e.index+e[0].length))?"":"(?:)"}),p(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?i(this.captureNames,e[1])+1:+e[1],a=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(a===e.input.length||isNaN(e.input.charAt(a))?"":"(?:)")}),p(/(?:\s+|#.*)+/,function(e){return F.test.call(g,e.input.slice(e.index+e[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"}),p(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"}),p(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),p(/\\(\d+)/,function(e,t){if(!(t===C&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all"}),p(/\((?!\?)/,function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")},{customFlags:"n"}),"undefined"!=typeof exports&&(exports.XRegExp=d),d}(),function(e){"use strict";function t(e){return e.replace(/[- _]+/g,"").toLowerCase()}function a(e){return e.replace(/\w{4}/g,"\\u$&")}function n(e){for(;e.length<4;)e="0"+e;return e}function i(e){return parseInt(e,16)}function r(e){return parseInt(e,10).toString(16)}function s(t){var a,s=[],o=-1;return e.forEach(t,/\\u(\w{4})(?:-\\u(\w{4}))?/,function(e){a=i(e[1]),a>o+1&&(s.push("\\u"+n(r(o+1))),a>o+2&&s.push("-\\u"+n(r(a-1)))),o=i(e[2]||e[1])}),65535>o&&(s.push("\\u"+n(r(o+1))),65534>o&&s.push("-\\uFFFF")),s.join("")}function o(e){return l["^"+e]||(l["^"+e]=s(l[e]))}var l={};e.install("extensibility"),e.addUnicodePackage=function(n,i){var r;if(!e.isInstalled("extensibility"))throw new Error("extensibility must be installed before adding Unicode packages");if(n)for(r in n)n.hasOwnProperty(r)&&(l[t(r)]=a(n[r]));if(i)for(r in i)i.hasOwnProperty(r)&&(l[t(i[r])]=l[t(r)])},e.addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"},{L:"Letter"}),e.addToken(/\\([pP]){(\^?)([^}]*)}/,function(e,a){var n="P"===e[1]||e[2]?"^":"",i=t(e[3]);if("P"===e[1]&&e[2])throw new SyntaxError("invalid double negation \\P{^");if(!l.hasOwnProperty(i))throw new SyntaxError("invalid or unknown Unicode property "+e[0]);return"class"===a?n?o(i):l[i]:"["+n+l[i]+"]"},{scope:"all"})}(XRegExp),function(e){"use strict";if(!e.addUnicodePackage)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");e.install("extensibility"),e.addUnicodePackage({Ll:"0061-007A00B500DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F05210523052505270561-05871D00-1D2B1D6B-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7B2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2CF32D00-2D252D272D2DA641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA661A663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CA78EA791A793A7A1A7A3A7A5A7A7A7A9A7FAFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E05200522052405260531-055610A0-10C510C710CD1E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CED2CF2A640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA660A662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BA78DA790A792A7A0A7A2A7A4A7A6A7A8A7AAFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D6A1D781D9B-1DBF2071207F2090-209C2C7C2C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A7F8A7F9A9CFAA70AADDAAF3AAF4FF70FF9EFF9F",Lo:"00AA00BA01BB01C0-01C3029405D0-05EA05F0-05F20620-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150840-085808A008A2-08AC0904-0939093D09500958-09610972-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA10FD-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF11CF51CF62135-21382D30-2D672D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCAAE0-AAEAAAF2AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065F067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0859-085B08E4-08FE0900-0903093A-093C093E-094F0951-0957096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F8D-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135D-135F1712-17141732-1734175217531772177317B4-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAD1BE6-1BF31C24-1C371CD0-1CD21CD4-1CE81CED1CF2-1CF41DC0-1DE61DFC-1DFF20D0-20F02CEF-2CF12D7F2DE0-2DFF302A-302F3099309AA66F-A672A674-A67DA69FA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1AAEB-AAEFAAF5AAF6ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065F067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0859-085B08E4-08FE0900-0902093A093C0941-0948094D0951-095709620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F8D-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135D-135F1712-17141732-1734175217531772177317B417B517B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91BAB1BE61BE81BE91BED1BEF-1BF11C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1CF41DC0-1DE61DFC-1DFF20D0-20DC20E120E5-20F02CEF-2CF12D7F2DE0-2DFF302A-302D3099309AA66FA674-A67DA69FA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1AAECAAEDAAF6ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093B093E-09400949-094C094E094F0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1BAC1BAD1BE71BEA-1BEC1BEE1BF21BF31C24-1C2B1C341C351CE11CF21CF3302E302FA823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BAAEBAAEEAAEFAAF5ABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048920DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0B72-0B770BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293248-324F3251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19D91A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90B72-0B770BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F919DA20702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293248-324F3251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100A700AB00B600B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E085E0964096509700AF00DF40E4F0E5A0E5B0F04-0F120F140F3A-0F3D0F850FD0-0FD40FD90FDA104A-104F10FB1360-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A194419451A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601BFC-1BFF1C3B-1C3F1C7E1C7F1CC0-1CC71CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2D702E00-2E2E2E30-2E3B3001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFAAF0AAF1ABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A2E3A2E3B301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100A700B600B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E085E0964096509700AF00DF40E4F0E5A0E5B0F04-0F120F140F850FD0-0FD40FD90FDA104A-104F10FB1360-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A194419451A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601BFC-1BFF1C3B-1C3F1C7E1C7F1CC0-1CC71CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2D702E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E30-2E393001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFAAF0AAF1ABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A600A800A900AC00AE-00B100B400B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F60482058F0606-0608060B060E060F06DE06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0D790E3F0F01-0F030F130F15-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F1390-139917DB194019DE-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B9210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23F32400-24262440-244A249C-24E92500-26FF2701-27672794-27C427C7-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-324732503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FBB2-FBC1FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C21182140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5058F060B09F209F309FB0AF10BF90E3F17DB20A0-20B9A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFBB2-FBC1FF3EFF40FFE3",So:"00A600A900AE00B00482060E060F06DE06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0D790F01-0F030F130F15-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F1390-1399194019DE-19FF1B61-1B6A1B74-1B7C210021012103-210621082109211421162117211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23F32400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26FF2701-27672794-27BF2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-324732503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20528-05300557055805600588058B-058E059005C8-05CF05EB-05EF05F5-0605061C061D06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F085C085D085F-089F08A108AD-08E308FF097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B78-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D3B0D3C0D450D490D4F-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EE0-0EFF0F480F6D-0F700F980FBD0FCD0FDB-0FFF10C610C8-10CC10CE10CF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B135C137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BF4-1BFB1C38-1C3A1C4A-1C4C1C80-1CBF1CC8-1CCF1CF7-1CFF1DE7-1DFB1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F209D-209F20BA-20CF20F1-20FF218A-218F23F4-23FF2427-243F244B-245F27002B4D-2B4F2B5A-2BFF2C2F2C5F2CF4-2CF82D262D28-2D2C2D2E2D2F2D68-2D6E2D71-2D7E2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E3C-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31BB-31BF31E4-31EF321F32FF4DB6-4DBF9FCD-9FFFA48D-A48FA4C7-A4CFA62C-A63FA698-A69EA6F8-A6FFA78FA794-A79FA7AB-A7F7A82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAF7-AB00AB07AB08AB0FAB10AB17-AB1FAB27AB2F-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBC2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060406DD070F200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20528-05300557055805600588058B-058E059005C8-05CF05EB-05EF05F5-05FF0605061C061D070E074B074C07B2-07BF07FB-07FF082E082F083F085C085D085F-089F08A108AD-08E308FF097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B78-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D3B0D3C0D450D490D4F-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EE0-0EFF0F480F6D-0F700F980FBD0FCD0FDB-0FFF10C610C8-10CC10CE10CF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B135C137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BF4-1BFB1C38-1C3A1C4A-1C4C1C80-1CBF1CC8-1CCF1CF7-1CFF1DE7-1DFB1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F209D-209F20BA-20CF20F1-20FF218A-218F23F4-23FF2427-243F244B-245F27002B4D-2B4F2B5A-2BFF2C2F2C5F2CF4-2CF82D262D28-2D2C2D2E2D2F2D68-2D6E2D71-2D7E2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E3C-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31BB-31BF31E4-31EF321F32FF4DB6-4DBF9FCD-9FFFA48D-A48FA4C7-A4CFA62C-A63FA698-A69EA6F8-A6FFA78FA794-A79FA7AB-A7F7A82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAF7-AB00AB07AB08AB0FAB10AB17-AB1FAB27AB2F-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBC2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"},{Ll:"Lowercase_Letter",Lu:"Uppercase_Letter",Lt:"Titlecase_Letter",Lm:"Modifier_Letter",Lo:"Other_Letter",M:"Mark",Mn:"Nonspacing_Mark",Mc:"Spacing_Mark",Me:"Enclosing_Mark",N:"Number",Nd:"Decimal_Number",Nl:"Letter_Number",No:"Other_Number",P:"Punctuation",Pd:"Dash_Punctuation",Ps:"Open_Punctuation",Pe:"Close_Punctuation",Pi:"Initial_Punctuation",Pf:"Final_Punctuation",
Pc:"Connector_Punctuation",Po:"Other_Punctuation",S:"Symbol",Sm:"Math_Symbol",Sc:"Currency_Symbol",Sk:"Modifier_Symbol",So:"Other_Symbol",Z:"Separator",Zs:"Space_Separator",Zl:"Line_Separator",Zp:"Paragraph_Separator",C:"Other",Cc:"Control",Cf:"Format",Co:"Private_Use",Cs:"Surrogate",Cn:"Unassigned"})}(XRegExp),function(e){"use strict";if(!e.addUnicodePackage)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");e.install("extensibility"),e.addUnicodePackage({Arabic:"0600-06040606-060B060D-061A061E0620-063F0641-064A0656-065E066A-066F0671-06DC06DE-06FF0750-077F08A008A2-08AC08E4-08FEFB50-FBC1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFCFE70-FE74FE76-FEFC",Armenian:"0531-05560559-055F0561-0587058A058FFB13-FB17",Balinese:"1B00-1B4B1B50-1B7C",Bamum:"A6A0-A6F7",Batak:"1BC0-1BF31BFC-1BFF",Bengali:"0981-09830985-098C098F09900993-09A809AA-09B009B209B6-09B909BC-09C409C709C809CB-09CE09D709DC09DD09DF-09E309E6-09FB",Bopomofo:"02EA02EB3105-312D31A0-31BA",Braille:"2800-28FF",Buginese:"1A00-1A1B1A1E1A1F",Buhid:"1740-1753",Canadian_Aboriginal:"1400-167F18B0-18F5",Cham:"AA00-AA36AA40-AA4DAA50-AA59AA5C-AA5F",Cherokee:"13A0-13F4",Common:"0000-0040005B-0060007B-00A900AB-00B900BB-00BF00D700F702B9-02DF02E5-02E902EC-02FF0374037E038503870589060C061B061F06400660-066906DD096409650E3F0FD5-0FD810FB16EB-16ED173517361802180318051CD31CE11CE9-1CEC1CEE-1CF31CF51CF62000-200B200E-2064206A-20702074-207E2080-208E20A0-20B92100-21252127-2129212C-21312133-214D214F-215F21892190-23F32400-24262440-244A2460-26FF2701-27FF2900-2B4C2B50-2B592E00-2E3B2FF0-2FFB3000-300430063008-30203030-3037303C-303F309B309C30A030FB30FC3190-319F31C0-31E33220-325F327F-32CF3358-33FF4DC0-4DFFA700-A721A788-A78AA830-A839FD3EFD3FFDFDFE10-FE19FE30-FE52FE54-FE66FE68-FE6BFEFFFF01-FF20FF3B-FF40FF5B-FF65FF70FF9EFF9FFFE0-FFE6FFE8-FFEEFFF9-FFFD",Coptic:"03E2-03EF2C80-2CF32CF9-2CFF",Cyrillic:"0400-04840487-05271D2B1D782DE0-2DFFA640-A697A69F",Devanagari:"0900-09500953-09630966-09770979-097FA8E0-A8FB",Ethiopic:"1200-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A135D-137C1380-13992D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDEAB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2E",Georgian:"10A0-10C510C710CD10D0-10FA10FC-10FF2D00-2D252D272D2D",Glagolitic:"2C00-2C2E2C30-2C5E",Greek:"0370-03730375-0377037A-037D038403860388-038A038C038E-03A103A3-03E103F0-03FF1D26-1D2A1D5D-1D611D66-1D6A1DBF1F00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FC41FC6-1FD31FD6-1FDB1FDD-1FEF1FF2-1FF41FF6-1FFE2126",Gujarati:"0A81-0A830A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABC-0AC50AC7-0AC90ACB-0ACD0AD00AE0-0AE30AE6-0AF1",Gurmukhi:"0A01-0A030A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A3C0A3E-0A420A470A480A4B-0A4D0A510A59-0A5C0A5E0A66-0A75",Han:"2E80-2E992E9B-2EF32F00-2FD5300530073021-30293038-303B3400-4DB54E00-9FCCF900-FA6DFA70-FAD9",Hangul:"1100-11FF302E302F3131-318E3200-321E3260-327EA960-A97CAC00-D7A3D7B0-D7C6D7CB-D7FBFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Hanunoo:"1720-1734",Hebrew:"0591-05C705D0-05EA05F0-05F4FB1D-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FB4F",Hiragana:"3041-3096309D-309F",Inherited:"0300-036F04850486064B-0655065F0670095109521CD0-1CD21CD4-1CE01CE2-1CE81CED1CF41DC0-1DE61DFC-1DFF200C200D20D0-20F0302A-302D3099309AFE00-FE0FFE20-FE26",Javanese:"A980-A9CDA9CF-A9D9A9DEA9DF",Kannada:"0C820C830C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBC-0CC40CC6-0CC80CCA-0CCD0CD50CD60CDE0CE0-0CE30CE6-0CEF0CF10CF2",Katakana:"30A1-30FA30FD-30FF31F0-31FF32D0-32FE3300-3357FF66-FF6FFF71-FF9D",Kayah_Li:"A900-A92F",Khmer:"1780-17DD17E0-17E917F0-17F919E0-19FF",Lao:"0E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB90EBB-0EBD0EC0-0EC40EC60EC8-0ECD0ED0-0ED90EDC-0EDF",Latin:"0041-005A0061-007A00AA00BA00C0-00D600D8-00F600F8-02B802E0-02E41D00-1D251D2C-1D5C1D62-1D651D6B-1D771D79-1DBE1E00-1EFF2071207F2090-209C212A212B2132214E2160-21882C60-2C7FA722-A787A78B-A78EA790-A793A7A0-A7AAA7F8-A7FFFB00-FB06FF21-FF3AFF41-FF5A",Lepcha:"1C00-1C371C3B-1C491C4D-1C4F",Limbu:"1900-191C1920-192B1930-193B19401944-194F",Lisu:"A4D0-A4FF",Malayalam:"0D020D030D05-0D0C0D0E-0D100D12-0D3A0D3D-0D440D46-0D480D4A-0D4E0D570D60-0D630D66-0D750D79-0D7F",Mandaic:"0840-085B085E",Meetei_Mayek:"AAE0-AAF6ABC0-ABEDABF0-ABF9",Mongolian:"1800180118041806-180E1810-18191820-18771880-18AA",Myanmar:"1000-109FAA60-AA7B",New_Tai_Lue:"1980-19AB19B0-19C919D0-19DA19DE19DF",Nko:"07C0-07FA",Ogham:"1680-169C",Ol_Chiki:"1C50-1C7F",Oriya:"0B01-0B030B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3C-0B440B470B480B4B-0B4D0B560B570B5C0B5D0B5F-0B630B66-0B77",Phags_Pa:"A840-A877",Rejang:"A930-A953A95F",Runic:"16A0-16EA16EE-16F0",Samaritan:"0800-082D0830-083E",Saurashtra:"A880-A8C4A8CE-A8D9",Sinhala:"0D820D830D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60DCA0DCF-0DD40DD60DD8-0DDF0DF2-0DF4",Sundanese:"1B80-1BBF1CC0-1CC7",Syloti_Nagri:"A800-A82B",Syriac:"0700-070D070F-074A074D-074F",Tagalog:"1700-170C170E-1714",Tagbanwa:"1760-176C176E-177017721773",Tai_Le:"1950-196D1970-1974",Tai_Tham:"1A20-1A5E1A60-1A7C1A7F-1A891A90-1A991AA0-1AAD",Tai_Viet:"AA80-AAC2AADB-AADF",Tamil:"0B820B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BBE-0BC20BC6-0BC80BCA-0BCD0BD00BD70BE6-0BFA",Telugu:"0C01-0C030C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D-0C440C46-0C480C4A-0C4D0C550C560C580C590C60-0C630C66-0C6F0C78-0C7F",Thaana:"0780-07B1",Thai:"0E01-0E3A0E40-0E5B",Tibetan:"0F00-0F470F49-0F6C0F71-0F970F99-0FBC0FBE-0FCC0FCE-0FD40FD90FDA",Tifinagh:"2D30-2D672D6F2D702D7F",Vai:"A500-A62B",Yi:"A000-A48CA490-A4C6"})}(XRegExp),function(e){"use strict";if(!e.addUnicodePackage)throw new ReferenceError("Unicode Base must be loaded before Unicode Blocks");e.install("extensibility"),e.addUnicodePackage({InBasic_Latin:"0000-007F",InLatin_1_Supplement:"0080-00FF",InLatin_Extended_A:"0100-017F",InLatin_Extended_B:"0180-024F",InIPA_Extensions:"0250-02AF",InSpacing_Modifier_Letters:"02B0-02FF",InCombining_Diacritical_Marks:"0300-036F",InGreek_and_Coptic:"0370-03FF",InCyrillic:"0400-04FF",InCyrillic_Supplement:"0500-052F",InArmenian:"0530-058F",InHebrew:"0590-05FF",InArabic:"0600-06FF",InSyriac:"0700-074F",InArabic_Supplement:"0750-077F",InThaana:"0780-07BF",InNKo:"07C0-07FF",InSamaritan:"0800-083F",InMandaic:"0840-085F",InArabic_Extended_A:"08A0-08FF",InDevanagari:"0900-097F",InBengali:"0980-09FF",InGurmukhi:"0A00-0A7F",InGujarati:"0A80-0AFF",InOriya:"0B00-0B7F",InTamil:"0B80-0BFF",InTelugu:"0C00-0C7F",InKannada:"0C80-0CFF",InMalayalam:"0D00-0D7F",InSinhala:"0D80-0DFF",InThai:"0E00-0E7F",InLao:"0E80-0EFF",InTibetan:"0F00-0FFF",InMyanmar:"1000-109F",InGeorgian:"10A0-10FF",InHangul_Jamo:"1100-11FF",InEthiopic:"1200-137F",InEthiopic_Supplement:"1380-139F",InCherokee:"13A0-13FF",InUnified_Canadian_Aboriginal_Syllabics:"1400-167F",InOgham:"1680-169F",InRunic:"16A0-16FF",InTagalog:"1700-171F",InHanunoo:"1720-173F",InBuhid:"1740-175F",InTagbanwa:"1760-177F",InKhmer:"1780-17FF",InMongolian:"1800-18AF",InUnified_Canadian_Aboriginal_Syllabics_Extended:"18B0-18FF",InLimbu:"1900-194F",InTai_Le:"1950-197F",InNew_Tai_Lue:"1980-19DF",InKhmer_Symbols:"19E0-19FF",InBuginese:"1A00-1A1F",InTai_Tham:"1A20-1AAF",InBalinese:"1B00-1B7F",InSundanese:"1B80-1BBF",InBatak:"1BC0-1BFF",InLepcha:"1C00-1C4F",InOl_Chiki:"1C50-1C7F",InSundanese_Supplement:"1CC0-1CCF",InVedic_Extensions:"1CD0-1CFF",InPhonetic_Extensions:"1D00-1D7F",InPhonetic_Extensions_Supplement:"1D80-1DBF",InCombining_Diacritical_Marks_Supplement:"1DC0-1DFF",InLatin_Extended_Additional:"1E00-1EFF",InGreek_Extended:"1F00-1FFF",InGeneral_Punctuation:"2000-206F",InSuperscripts_and_Subscripts:"2070-209F",InCurrency_Symbols:"20A0-20CF",InCombining_Diacritical_Marks_for_Symbols:"20D0-20FF",InLetterlike_Symbols:"2100-214F",InNumber_Forms:"2150-218F",InArrows:"2190-21FF",InMathematical_Operators:"2200-22FF",InMiscellaneous_Technical:"2300-23FF",InControl_Pictures:"2400-243F",InOptical_Character_Recognition:"2440-245F",InEnclosed_Alphanumerics:"2460-24FF",InBox_Drawing:"2500-257F",InBlock_Elements:"2580-259F",InGeometric_Shapes:"25A0-25FF",InMiscellaneous_Symbols:"2600-26FF",InDingbats:"2700-27BF",InMiscellaneous_Mathematical_Symbols_A:"27C0-27EF",InSupplemental_Arrows_A:"27F0-27FF",InBraille_Patterns:"2800-28FF",InSupplemental_Arrows_B:"2900-297F",InMiscellaneous_Mathematical_Symbols_B:"2980-29FF",InSupplemental_Mathematical_Operators:"2A00-2AFF",InMiscellaneous_Symbols_and_Arrows:"2B00-2BFF",InGlagolitic:"2C00-2C5F",InLatin_Extended_C:"2C60-2C7F",InCoptic:"2C80-2CFF",InGeorgian_Supplement:"2D00-2D2F",InTifinagh:"2D30-2D7F",InEthiopic_Extended:"2D80-2DDF",InCyrillic_Extended_A:"2DE0-2DFF",InSupplemental_Punctuation:"2E00-2E7F",InCJK_Radicals_Supplement:"2E80-2EFF",InKangxi_Radicals:"2F00-2FDF",InIdeographic_Description_Characters:"2FF0-2FFF",InCJK_Symbols_and_Punctuation:"3000-303F",InHiragana:"3040-309F",InKatakana:"30A0-30FF",InBopomofo:"3100-312F",InHangul_Compatibility_Jamo:"3130-318F",InKanbun:"3190-319F",InBopomofo_Extended:"31A0-31BF",InCJK_Strokes:"31C0-31EF",InKatakana_Phonetic_Extensions:"31F0-31FF",InEnclosed_CJK_Letters_and_Months:"3200-32FF",InCJK_Compatibility:"3300-33FF",InCJK_Unified_Ideographs_Extension_A:"3400-4DBF",InYijing_Hexagram_Symbols:"4DC0-4DFF",InCJK_Unified_Ideographs:"4E00-9FFF",InYi_Syllables:"A000-A48F",InYi_Radicals:"A490-A4CF",InLisu:"A4D0-A4FF",InVai:"A500-A63F",InCyrillic_Extended_B:"A640-A69F",InBamum:"A6A0-A6FF",InModifier_Tone_Letters:"A700-A71F",InLatin_Extended_D:"A720-A7FF",InSyloti_Nagri:"A800-A82F",InCommon_Indic_Number_Forms:"A830-A83F",InPhags_pa:"A840-A87F",InSaurashtra:"A880-A8DF",InDevanagari_Extended:"A8E0-A8FF",InKayah_Li:"A900-A92F",InRejang:"A930-A95F",InHangul_Jamo_Extended_A:"A960-A97F",InJavanese:"A980-A9DF",InCham:"AA00-AA5F",InMyanmar_Extended_A:"AA60-AA7F",InTai_Viet:"AA80-AADF",InMeetei_Mayek_Extensions:"AAE0-AAFF",InEthiopic_Extended_A:"AB00-AB2F",InMeetei_Mayek:"ABC0-ABFF",InHangul_Syllables:"AC00-D7AF",InHangul_Jamo_Extended_B:"D7B0-D7FF",InHigh_Surrogates:"D800-DB7F",InHigh_Private_Use_Surrogates:"DB80-DBFF",InLow_Surrogates:"DC00-DFFF",InPrivate_Use_Area:"E000-F8FF",InCJK_Compatibility_Ideographs:"F900-FAFF",InAlphabetic_Presentation_Forms:"FB00-FB4F",InArabic_Presentation_Forms_A:"FB50-FDFF",InVariation_Selectors:"FE00-FE0F",InVertical_Forms:"FE10-FE1F",InCombining_Half_Marks:"FE20-FE2F",InCJK_Compatibility_Forms:"FE30-FE4F",InSmall_Form_Variants:"FE50-FE6F",InArabic_Presentation_Forms_B:"FE70-FEFF",InHalfwidth_and_Fullwidth_Forms:"FF00-FFEF",InSpecials:"FFF0-FFFF"})}(XRegExp),function(e){"use strict";if(!e.addUnicodePackage)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");e.install("extensibility"),e.addUnicodePackage({Alphabetic:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE03450370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705B0-05BD05BF05C105C205C405C505C705D0-05EA05F0-05F20610-061A0620-06570659-065F066E-06D306D5-06DC06E1-06E806ED-06EF06FA-06FC06FF0710-073F074D-07B107CA-07EA07F407F507FA0800-0817081A-082C0840-085808A008A2-08AC08E4-08E908F0-08FE0900-093B093D-094C094E-09500955-09630971-09770979-097F0981-09830985-098C098F09900993-09A809AA-09B009B209B6-09B909BD-09C409C709C809CB09CC09CE09D709DC09DD09DF-09E309F009F10A01-0A030A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A3E-0A420A470A480A4B0A4C0A510A59-0A5C0A5E0A70-0A750A81-0A830A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD-0AC50AC7-0AC90ACB0ACC0AD00AE0-0AE30B01-0B030B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D-0B440B470B480B4B0B4C0B560B570B5C0B5D0B5F-0B630B710B820B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BBE-0BC20BC6-0BC80BCA-0BCC0BD00BD70C01-0C030C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D-0C440C46-0C480C4A-0C4C0C550C560C580C590C60-0C630C820C830C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD-0CC40CC6-0CC80CCA-0CCC0CD50CD60CDE0CE0-0CE30CF10CF20D020D030D05-0D0C0D0E-0D100D12-0D3A0D3D-0D440D46-0D480D4A-0D4C0D4E0D570D60-0D630D7A-0D7F0D820D830D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60DCF-0DD40DD60DD8-0DDF0DF20DF30E01-0E3A0E40-0E460E4D0E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB90EBB-0EBD0EC0-0EC40EC60ECD0EDC-0EDF0F000F40-0F470F49-0F6C0F71-0F810F88-0F970F99-0FBC1000-10361038103B-103F1050-10621065-1068106E-1086108E109C109D10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A135F1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA16EE-16F01700-170C170E-17131720-17331740-17531760-176C176E-1770177217731780-17B317B6-17C817D717DC1820-18771880-18AA18B0-18F51900-191C1920-192B1930-19381950-196D1970-19741980-19AB19B0-19C91A00-1A1B1A20-1A5E1A61-1A741AA71B00-1B331B35-1B431B45-1B4B1B80-1BA91BAC-1BAF1BBA-1BE51BE7-1BF11C00-1C351C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF31CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E2160-218824B6-24E92C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2DE0-2DFF2E2F3005-30073021-30293031-30353038-303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA674-A67BA67F-A697A69F-A6EFA717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A827A840-A873A880-A8C3A8F2-A8F7A8FBA90A-A92AA930-A952A960-A97CA980-A9B2A9B4-A9BFA9CFAA00-AA36AA40-AA4DAA60-AA76AA7AAA80-AABEAAC0AAC2AADB-AADDAAE0-AAEFAAF2-AAF5AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABEAAC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1D-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Uppercase:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E05200522052405260531-055610A0-10C510C710CD1E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F21452160-216F218324B6-24CF2C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CED2CF2A640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA660A662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BA78DA790A792A7A0A7A2A7A4A7A6A7A8A7AAFF21-FF3A",Lowercase:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02B802C002C102E0-02E40345037103730377037A-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F05210523052505270561-05871D00-1DBF1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF72071207F2090-209C210A210E210F2113212F21342139213C213D2146-2149214E2170-217F218424D0-24E92C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7D2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2CF32D00-2D252D272D2DA641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA661A663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76F-A778A77AA77CA77FA781A783A785A787A78CA78EA791A793A7A1A7A3A7A5A7A7A7A9A7F8-A7FAFB00-FB06FB13-FB17FF41-FF5A",White_Space:"0009-000D0020008500A01680180E2000-200A20282029202F205F3000",Noncharacter_Code_Point:"FDD0-FDEFFFFEFFFF",Default_Ignorable_Code_Point:"00AD034F115F116017B417B5180B-180D200B-200F202A-202E2060-206F3164FE00-FE0FFEFFFFA0FFF0-FFF8",Any:"0000-FFFF",Ascii:"0000-007F",Assigned:"0000-0377037A-037E0384-038A038C038E-03A103A3-05270531-05560559-055F0561-05870589058A058F0591-05C705D0-05EA05F0-05F40600-06040606-061B061E-070D070F-074A074D-07B107C0-07FA0800-082D0830-083E0840-085B085E08A008A2-08AC08E4-08FE0900-09770979-097F0981-09830985-098C098F09900993-09A809AA-09B009B209B6-09B909BC-09C409C709C809CB-09CE09D709DC09DD09DF-09E309E6-09FB0A01-0A030A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A3C0A3E-0A420A470A480A4B-0A4D0A510A59-0A5C0A5E0A66-0A750A81-0A830A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABC-0AC50AC7-0AC90ACB-0ACD0AD00AE0-0AE30AE6-0AF10B01-0B030B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3C-0B440B470B480B4B-0B4D0B560B570B5C0B5D0B5F-0B630B66-0B770B820B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BBE-0BC20BC6-0BC80BCA-0BCD0BD00BD70BE6-0BFA0C01-0C030C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D-0C440C46-0C480C4A-0C4D0C550C560C580C590C60-0C630C66-0C6F0C78-0C7F0C820C830C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBC-0CC40CC6-0CC80CCA-0CCD0CD50CD60CDE0CE0-0CE30CE6-0CEF0CF10CF20D020D030D05-0D0C0D0E-0D100D12-0D3A0D3D-0D440D46-0D480D4A-0D4E0D570D60-0D630D66-0D750D79-0D7F0D820D830D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60DCA0DCF-0DD40DD60DD8-0DDF0DF2-0DF40E01-0E3A0E3F-0E5B0E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB90EBB-0EBD0EC0-0EC40EC60EC8-0ECD0ED0-0ED90EDC-0EDF0F00-0F470F49-0F6C0F71-0F970F99-0FBC0FBE-0FCC0FCE-0FDA1000-10C510C710CD10D0-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A135D-137C1380-139913A0-13F41400-169C16A0-16F01700-170C170E-17141720-17361740-17531760-176C176E-1770177217731780-17DD17E0-17E917F0-17F91800-180E1810-18191820-18771880-18AA18B0-18F51900-191C1920-192B1930-193B19401944-196D1970-19741980-19AB19B0-19C919D0-19DA19DE-1A1B1A1E-1A5E1A60-1A7C1A7F-1A891A90-1A991AA0-1AAD1B00-1B4B1B50-1B7C1B80-1BF31BFC-1C371C3B-1C491C4D-1C7F1CC0-1CC71CD0-1CF61D00-1DE61DFC-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FC41FC6-1FD31FD6-1FDB1FDD-1FEF1FF2-1FF41FF6-1FFE2000-2064206A-20712074-208E2090-209C20A0-20B920D0-20F02100-21892190-23F32400-24262440-244A2460-26FF2701-2B4C2B50-2B592C00-2C2E2C30-2C5E2C60-2CF32CF9-2D252D272D2D2D30-2D672D6F2D702D7F-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2DE0-2E3B2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB3000-303F3041-30963099-30FF3105-312D3131-318E3190-31BA31C0-31E331F0-321E3220-32FE3300-4DB54DC0-9FCCA000-A48CA490-A4C6A4D0-A62BA640-A697A69F-A6F7A700-A78EA790-A793A7A0-A7AAA7F8-A82BA830-A839A840-A877A880-A8C4A8CE-A8D9A8E0-A8FBA900-A953A95F-A97CA980-A9CDA9CF-A9D9A9DEA9DFAA00-AA36AA40-AA4DAA50-AA59AA5C-AA7BAA80-AAC2AADB-AAF6AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABEDABF0-ABF9AC00-D7A3D7B0-D7C6D7CB-D7FBD800-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1D-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBC1FBD3-FD3FFD50-FD8FFD92-FDC7FDF0-FDFDFE00-FE19FE20-FE26FE30-FE52FE54-FE66FE68-FE6BFE70-FE74FE76-FEFCFEFFFF01-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDCFFE0-FFE6FFE8-FFEEFFF9-FFFD"})}(XRegExp),function(e){"use strict";function t(e,t,a,n){return{value:e,name:t,start:a,end:n}}e.matchRecursive=function(a,n,i,r,s){r=r||"",s=s||{};var o,l,c,d,u,p=r.indexOf("g")>-1,A=r.indexOf("y")>-1,F=r.replace(/y/g,""),D=s.escapeChar,h=s.valueNames,m=[],C=0,E=0,f=0,B=0;if(n=e(n,F),i=e(i,F),D){if(D.length>1)throw new SyntaxError("can't use more than one escape character");D=e.escape(D),u=new RegExp("(?:"+D+"[\\S\\s]|(?:(?!"+e.union([n,i]).source+")[^"+D+"])+)+",r.replace(/[^im]+/g,""))}for(;;){if(D&&(f+=(e.exec(a,u,f,"sticky")||[""])[0].length),c=e.exec(a,n,f),d=e.exec(a,i,f),c&&d&&(c.index<=d.index?d=null:c=null),c||d)E=(c||d).index,f=E+(c||d)[0].length;else if(!C)break;if(A&&!C&&E>B)break;if(c)C||(o=E,l=f),++C;else{if(!d||!C)throw new Error("string contains unbalanced delimiters");if(!--C&&(h?(h[0]&&o>B&&m.push(t(h[0],a.slice(B,o),B,o)),h[1]&&m.push(t(h[1],a.slice(o,l),o,l)),h[2]&&m.push(t(h[2],a.slice(l,E),l,E)),h[3]&&m.push(t(h[3],a.slice(E,f),E,f))):m.push(a.slice(l,E)),B=f,!p))break}E===f&&++f}return p&&!A&&h&&h[0]&&a.length>B&&m.push(t(h[0],a.slice(B),B,a.length)),m}}(XRegExp),function(e){"use strict";function t(e){var t=/^(?:\(\?:\))?\^/,a=/\$(?:\(\?:\))?$/;return a.test(e.replace(/\\[\s\S]/g,""))?e.replace(t,"").replace(a,""):e}function a(t){return e.isRegExp(t)?t.xregexp&&!t.xregexp.isNative?t:e(t.source):e(t)}var n=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,i=e.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,n],"g");e.build=function(r,s,o){var l,c,d,u,p=/^\(\?([\w$]+)\)/.exec(r),A={},F=0,D=0,h=[0];p&&(o=o||"",p[1].replace(/./g,function(e){o+=o.indexOf(e)>-1?"":e}));for(u in s)s.hasOwnProperty(u)&&(d=a(s[u]),A[u]={pattern:t(d.source),names:d.xregexp.captureNames||[]});return r=a(r),c=r.xregexp.captureNames||[],r=r.source.replace(i,function(e,t,a,i,r){var s,o,d=t||a;if(d){if(!A.hasOwnProperty(d))throw new ReferenceError("undefined property "+e);return t?(s=c[D],h[++D]=++F,o="(?<"+(s||d)+">"):o="(?:",l=F,o+A[d].pattern.replace(n,function(e,t,a){if(t){if(s=A[d].names[F-l],++F,s)return"(?<"+s+">"}else if(a)return"\\"+(+a+l);return e})+")"}if(i){if(s=c[D],h[++D]=++F,s)return"(?<"+s+">"}else if(r)return"\\"+h[+r];return e}),e(r,o)}}(XRegExp),function(e){"use strict";function t(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])}t(e.prototype,{apply:function(e,t){return this.test(t[0])},call:function(e,t){return this.test(t)},forEach:function(t,a,n){return e.forEach(t,this,a,n)},globalize:function(){return e.globalize(this)},xexec:function(t,a,n){return e.exec(t,this,a,n)},xtest:function(t,a,n){return e.test(t,this,a,n)}})}(XRegExp),define("xregexp",function(e){return function(){var t;return t||e.XRegExp}}(this)),define("dataSource/util/settingsUtility",["require","underscore"],function(e){"use strict";var t=e("underscore");return{deepDefaults:function(e,a){return t.reduce(a,function(a,n,i){return a[i]=e[i]?t.defaults(e[i],n):n,a},{})}}}),define("dataSource/model/JdbcDriverModel",["require","backbone","underscore","xregexp","settings!dataSourcePatterns","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("xregexp"),i=e("settings!dataSourcePatterns"),r=e("dataSource/util/settingsUtility"),s=t.Model.extend({idAttribute:"jdbcDriverClass",defaults:{defaultValues:{},jdbcDriverClass:"",label:"",available:!1,isDefault:!1,jdbcUrl:"",uploaded:!1},initialize:function(e,t){var o=r.deepDefaults(t,{dataSourcePatterns:i});s.DYNAMIC_URL_PART_PATTERN=o.dataSourcePatterns.dynamicUrlPartPattern,s.VALIDATION_PATTERNS=a.reduce(o.dataSourcePatterns,function(e,t,a){return e[a]=n(t),e},{})},isOtherDriver:function(){return this.get("jdbcDriverClass")===s.OTHER_DRIVER},isUploadedDriver:function(){return this.get("uploaded")===!0},getCustomAttributes:function(){if(this.isOtherDriver())return[];var e=this._getRegExpFieldGroupsFromConnectionUrlTemplate(),t=[];return a.each(e,function(e){return t.push(e[1])}),t},convertUrlTemplateToRegex:function(){var e,t=this.get("jdbcUrl");t=t.replace(/\?/g,"\\?"),t=t.replace(/\[TMPDIR\/\]/g,"\\[TMPDIR/\\]");for(var a in s.VALIDATION_PATTERNS)e=new RegExp("\\$\\["+a+"\\]","g"),t=t.replace(e,s.DYNAMIC_URL_PART_PATTERN);return"^"+t},parse:function(e){return e.isDefault=e.isDefault?!0:!1,e.defaultValues&&(e.defaultValues=a.reduce(e.defaultValues,function(e,t){return e[t.key]=t.value,e},{})),e},_getRegExpFieldGroupsFromConnectionUrlTemplate:function(){for(var e,t=[],n=[];!a.isNull(e=s.FIELD_TEMPLATE_REGEXP.exec(this.get("jdbcUrl")));)a.isArray(e)&&2===e.length&&-1===n.indexOf(e[0])&&(t.push(e),n.push(e[0]));return t}},{FIELD_TEMPLATE_REGEXP:/\$\[([^\]]+)\]/g,OTHER_DRIVER:"other"});return s}),define("dataSource/collection/JdbcDriverCollection",["require","backbone","underscore","dataSource/model/JdbcDriverModel","jrs.configs"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("dataSource/model/JdbcDriverModel"),i=e("jrs.configs");return t.Collection.extend({model:n,url:i.contextPath+"/rest_v2/jdbcDrivers",initialize:function(e,t){this.options=t,this.driverUploadEnabled=!1},getDefaultDriver:function(){var e=this.find(function(e){return!a.isUndefined(e.get("isDefault"))&&e.get("isDefault")!==!1});return e?e:this.first()},set:function(e,n){return"undefined"==typeof n&&(n={}),a.extend(n,this.options),t.Collection.prototype.set.call(this,e,n)},getDriverByClass:function(e){var t=this.findWhere({jdbcDriverClass:e});return t?t:this.findWhere({jdbcDriverClass:n.OTHER_DRIVER})},getDriverByName:function(e){return this.findWhere({name:e})},getAllPossibleCustomAttributes:function(){return a.keys(n.VALIDATION_PATTERNS)},fetch:function(e){return a.defaults(e||(e={}),{headers:{Accept:"application/hal+json"}}),t.Collection.prototype.fetch.call(this,e)},parse:function(e){var a=t.Collection.prototype.parse.apply(this,arguments);return a._links&&a._links.create&&a._links.edit&&(this.driverUploadEnabled=!0),a.jdbcDrivers?a.jdbcDrivers:a},markDriverAsAvailable:function(e){var t=this.models.find(function(t){return t.id===e});t.set("available",!0)}})}),define("dataSource/model/JdbcDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/model/JdbcDriverModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","underscore","jquery","xregexp","bundle!jasperserver_messages","bi/repository/enum/repositoryResourceTypes","bundle!jasperserver_config"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),a=e("dataSource/model/JdbcDriverModel"),n=e("dataSource/collection/JdbcDriverCollection"),i=e("settings!dataSourcePatterns"),r=e("dataSource/enum/connectionTypes"),s=e("underscore"),o=e("jquery"),l=e("xregexp"),c=l(i.forbidWhitespacesPattern),d=e("bundle!jasperserver_messages"),u=e("bi/repository/enum/repositoryResourceTypes"),p=e("bundle!jasperserver_config"),A=function(){var e={};return s.extend(e,t.prototype.validation,{connectionUrl:[{required:!0,msg:d["ReportDataSourceValidator.error.not.empty.reportDataSource.connectionUrl"]},{fn:function(e,t,a){var n=this.drivers.getDriverByClass(a.selectedDriverClass).get("allowSpacesInDbName");return n||c.test(e)?void 0:d["ReportDataSourceValidator.error.invalid.chars.reportDataSource.connectionUrl"]}}]}),e}();return t.extend({JDBC_BUNDLE_PREFIX:"resource.dataSource.jdbc.",otherDriverIsPresent:!0,type:u.JDBC_DATA_SOURCE,defaults:function(){var e={};return s.extend(e,t.prototype.defaults,{driverClass:"",selectedDriverClass:"",username:"",password:"",timezone:"",connectionUrl:"",isOtherDriver:!1,connectionType:r.JDBC}),e}(),validation:function(){return s.extend({},A)}(),initialize:function(e,a){t.prototype.initialize.apply(this,arguments),this.initialization=o.Deferred(),this.drivers=new n([],this.options);var i=this;this.fetchDrivers().then(function(){i.isNew()?i.setCustomAttributesDefaultValues(i.drivers.getDefaultDriver()):(i.set("selectedDriverClass",i.get("driverClass")),i.set(i.getCustomAttributeValuesFromConnectionUrl()),i.set("password",p["input.password.substitution"]),i.extendValidation());var e=s.map(i.drivers.getAllPossibleCustomAttributes(),function(e){return"change:"+e}).join(" ");i.on(e,i.setConnectionUrlFromCustomAttributes),i.on("change:connectionUrl",i.setCustomAttributesFromConnectionUrl),i.on("change:selectedDriverClass",i.changeSelectedDriver),i.initialization.resolve()})},fetchDrivers:function(){var e=this;return this.drivers.fetch({reset:!0}).done(function(){var t=s.groupBy(e.drivers.models,function(e){return e.attributes.available});s.each(t,function(e,a){t[a]=s.sortBy(e,function(e){return e.attributes.label})});var n=[];t["true"]&&(n=n.concat(t["true"])),t["false"]&&(n=n.concat(t["false"])),e.drivers.models=n,e.drivers.driverUploadEnabled&&e.otherDriverIsPresent&&e.drivers.add({defaultValues:{},jdbcDriverClass:a.OTHER_DRIVER,label:d["resource.dataSource.jdbc.otherDriver"],available:!1,"default":!1,jdbcUrl:"",uploaded:!1})})},getCurrentDriver:function(){return this.drivers.getDriverByClass(this.get("selectedDriverClass"))},changeSelectedDriver:function(){var e=this.drivers.getDriverByClass(this.get("selectedDriverClass"));e&&(this.setCustomAttributesDefaultValues(e),this.setConnectionUrlFromCustomAttributes(),
this.trigger("driverClassChange",this))},setCustomAttributesFromConnectionUrl:function(){var e=this.getCustomAttributeValuesFromConnectionUrl();this.set(e,{silent:!0}),this.trigger("customAttributesUpdate",this)},setConnectionUrlFromCustomAttributes:function(){var e=this.getCurrentDriver(),t=e.getCustomAttributes(),a=this.pick(t),n=this.replaceConnectionUrlTemplatePlaceholdersWithValues(e.get("jdbcUrl"),a);this.set("connectionUrl",n,{silent:!0}),this.trigger("connectionUrlUpdate",this)},getAttributeValueFromUrl:function(e,t){var a=t.exec(e);return[].slice.call(a||[],1)},getCustomAttributeValuesFromConnectionUrl:function(){var e,t=this.getCurrentDriver(),a=this.get("connectionUrl"),n=l(t.convertUrlTemplateToRegex()),i=t.getCustomAttributes(),r={};return e=this.getAttributeValueFromUrl(a,n),s.each(e,function(e,t){r[i[t]]=e}),r},setCustomAttributesDefaultValues:function(e){this.unsetCustomAttributes();var t={};e.isOtherDriver()?(t.selectedDriverClass=e.get("jdbcDriverClass"),t.driverClass="",t.isOtherDriver=!0):(s.extend(t,e.get("defaultValues")),t.selectedDriverClass=e.get("jdbcDriverClass"),t.driverClass=e.get("jdbcDriverClass"),t.isOtherDriver=!1,t.connectionUrl=this.replaceConnectionUrlTemplatePlaceholdersWithValues(e.get("jdbcUrl"),e.get("defaultValues"))),this.set(t,{silent:!0}),this.extendValidation()},unsetCustomAttributes:function(){var e=this;s.each(this.drivers.getAllPossibleCustomAttributes(),function(t){e.unset(t,{silent:!0})})},replaceConnectionUrlTemplatePlaceholdersWithValues:function(e,t){var a=this.getRegExpFieldGroupsFromConnectionUrlTemplate(e);return s.each(a,function(a){e=e.replace(a[0],s.isUndefined(t[a[1]])?"":t[a[1]])}),e},getRegExpFieldGroupsFromConnectionUrlTemplate:function(e){for(var t,n=[];!s.isNull(t=a.FIELD_TEMPLATE_REGEXP.exec(e));)s.isArray(t)&&2===t.length&&n.push(t);return n},extendValidation:function(){var e=this,t={},n=this.getCurrentDriver().getCustomAttributes();s.extend(t,A),s.each(n,function(n){t[n]=[{xRegExpPattern:a.VALIDATION_PATTERNS[n],msg:d[e.JDBC_BUNDLE_PREFIX+"invalidField"].replace("{0}",d[e.JDBC_BUNDLE_PREFIX+n])}]}),this.validation=t},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.password===p["input.password.substitution"]&&(e.password=null),e}})}),define("text!dataSource/template/dialog/baseDialogTemplate.htm",[],function(){return'<div id="select" class="panel dialog select overlay moveable centered_horz centered_vert hidden">\n    <div class="sizer diagonal"></div>\n    <div class="content hasFooter">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body"></div>\n        <div class="footer ">\n            <button class="button action primary up"><span class="wrap">{{- primaryButtonLabel }}</span><span class="icon"></span></button>\n            <button class="button action up"><span class="wrap">{{- secondaryButtonLabel }}</span><span class="icon"></span></button>\n        </div>\n    </div>\n</div>'}),define("dataSource/view/dialog/BaseDialog",["require","backbone","underscore","jquery","components.dialogs","text!dataSource/template/dialog/baseDialogTemplate.htm"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("jquery"),i=e("components.dialogs"),r=e("text!dataSource/template/dialog/baseDialogTemplate.htm");return t.View.extend({events:{"click button.action.primary":"primaryButtonOnClick","click button.action:not(.primary)":"secondaryButtonOnClick"},isModal:!0,TITLE:"",PRIMARY_BUTTON_LABEL:"",SECONDARY_BUTTON_LABEL:"",el:function(){return a.template(r,{title:this.TITLE,primaryButtonLabel:this.PRIMARY_BUTTON_LABEL,secondaryButtonLabel:this.SECONDARY_BUTTON_LABEL})},initialize:function(){n("body").append(this.render().$el)},show:function(){i.popup.show(this.el,this.isModal)},hide:function(){i.popup.hide(this.el)},render:function(){return this},primaryButtonOnClick:function(){throw new Error("Method not implemented")},secondaryButtonOnClick:function(){this.hide()}})}),define("common/transport/AjaxFormSubmitter",["require","underscore","request","jquery"],function(e){function t(e){var t,n=null;return e.firstChild.innerText&&""!==e.firstChild.innerText&&e.body?(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e.firstChild.innerText.replace("\r\n-","\r\n"))):t=e,t.firstChild&&(n=t.firstChild.nodeName.toLowerCase()),n&&"html"!==n&&"#comment"!==n?a("xml"===t.firstChild.nodeName.toLowerCase()?t.firstChild.nextSibling:t.firstChild):{errorCode:"unexpected.error"}}function a(e){var t,n;if(e.children)t=e.children;else{t=[];for(var i=0,r=e.childNodes.length;r>i;i++)null===e.childNodes[i].nodeValue&&t.push(e.childNodes[i])}if(0===t.length&&1===e.childNodes.length)return e.childNodes[0].nodeValue;if(t.length>1&&t[0].nodeName===t[1].nodeName){n=[];for(var i=0,r=t.length;r>i;i++)n[i]=a(t[i])}else{n={};for(var i=0,r=t.length;r>i;i++)n[t[i].nodeName]=a(t[i])}return n}function n(e){var t=new o.Deferred;return e.submit(function(a){a.preventDefault(),s({url:e.attr("action"),type:e.attr("method"),data:new FormData(e[0]),cache:!1,contentType:!1,processData:!1,headers:{Accept:"application/json"}}).done(function(e){t.resolve(e)}).fail(function(e){e=e.responseJSON||e||{},r.defaults(e,{errorCode:"error.load.error"}),t.reject(e)}),e.unbind("submit")}),e.submit(),t}function i(e,a){var n=o.Deferred(),i=o("<iframe style='display:none' name='"+a+"'></iframe>");return e.append(i).attr("target",a),i.load(function(){try{n.resolve(t(this.contentWindow.document))}catch(e){n.reject({errorCode:"error.invalid.response"})}i.remove()}),i.on("abort",function(){n.reject({errorCode:"error.load.aborted"}),i.remove()}),i.on("error",function(){n.reject({errorCode:"error.load.error"}),i.remove()}),e.submit(),n}var r=e("underscore"),s=e("request"),o=e("jquery"),l=function(e,a,n,i){this.name=r.uniqueId("uploadTarget"),this.form=o(e),a&&this.form.attr("action",a),n&&this.form.attr("method",n),i&&this.form.attr("enctype",i),this.parceXmlDocToObject=t};return l.prototype.submit=function(){return window.FormData?n(this.form):i(this.form,this.name)},l}),define("text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm",[],function(){return'<form method="post" enctype="multipart/form-data" action="rest_v2/jdbcDrivers">\n    <input name="className" type="hidden" value="{{- className }}"/>\n    <div class="control groupBox fillParent">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body">\n                <ul title="Locate local file"></ul>\n                <div class="errorMessageContainer">\n                    <span class="message warning"></span>\n                </div>\n                <div class="hidden warningMessageContainer">\n                    <span class="message textAccent"></span>\n                </div>\n                <br/>\n                <a class="fsection" target="_blank" href="http://community.jaspersoft.com/wiki/downloading-and-installing-database-drivers">{{- i18n["resource.dataSource.jdbc.upload.downloading"]}}</a>\n            </div>\n        </div>\n    </div>\n</form>'}),define("text!dataSource/template/dialog/fileUploadTemplate.htm",[],function(){return'<li class="leaf">\n    <input type="file" name="file_{{- fileIndex}}" size="60" accept="jar/jar" />\n    <span class="message warning"></span>\n</li>'}),define("dataSource/view/dialog/UploadJdbcDriverDialog",["require","dataSource/view/dialog/BaseDialog","underscore","jquery","common/transport/AjaxFormSubmitter","components.dialogs","request","bundle!jasperserver_messages","text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm","text!dataSource/template/dialog/fileUploadTemplate.htm","utils.common"],function(e){"use strict";var t=e("dataSource/view/dialog/BaseDialog"),a=e("underscore"),n=e("jquery"),i=e("common/transport/AjaxFormSubmitter"),r=e("components.dialogs"),s=(e("request"),e("bundle!jasperserver_messages")),o=e("text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm"),l=e("text!dataSource/template/dialog/fileUploadTemplate.htm");return e("utils.common"),t.extend({TITLE:s["resource.dataSource.jdbc.selectDriverTitle"],PRIMARY_BUTTON_LABEL:s["button.upload"],SECONDARY_BUTTON_LABEL:s["button.cancel"],events:function(){return a.extend({},t.prototype.events,{"change input[type='file']":"onFileChange"})},initialize:function(e){this.driverClass=e.driverClass,this.driverAvailable=e.driverAvailable,this.fileIndex=0,t.prototype.initialize.apply(this,arguments)},onFileChange:function(e){var t=n(e.target),i=t.next(".message.warning");if(i.parent().removeClass("error"),t.val().match(/.jar$/)){if(t.is(this.$("input[type='file']:last-of-type"))){var r=0,o=this.$("input[type='file']");a.each(o,function(e,t){r+=t+1}),r>=o.length&&this.addFileInput(),this.$("button.primary").removeClass("disabled").attr("disabled",null)}}else i.text(s["resource.dataSource.jdbc.upload.wrongExtension"]).parent().addClass("error")},render:function(){var e=this;return this.$(".body").html(a.template(o,{className:this.driverClass,i18n:s})),a.defer(function(){e.addFileInput(),e.driverAvailable?e.$(".warningMessageContainer").removeClass("hidden").find(".message").text(s["resource.dataSource.jdbc.upload.overwriteWarning"]):e.$(".warningMessageContainer").addClass("hidden").find(".message").text("")}),this.$("button.primary").addClass("disabled").attr("disabled","disabled"),this},onSuccessCallback:function(e){this.trigger("driverUpload",e),this.hide(),r.systemConfirm.show(s["resource.dataSource.jdbc.upload.driverUploadSuccess"]),a.defer(a.bind(this.remove,this))},onErrorCallback:function(e){var t;e=e.responseJSON?e.responseJSON:e,"illegal.parameter.value.error"===e.errorCode&&e.parameters&&e.parameters.length&&"className"===e.parameters[0]?t=s["resource.dataSource.jdbc.classNotFound"].replace("{0}",this.driverClass):e.message?t=e.message:(t=e.errorCode,"error.invalid.response"===t&&(t="The required driver class ("+this.driverClass+") is not found in uploaded files")),this.$(".errorMessageContainer").addClass("error").find(".message").text(t)},addFileInput:function(){this.$("ul").append(a.template(l,{fileIndex:this.fileIndex})),this.fileIndex++},primaryButtonOnClick:function(){this.$(".errorMessageContainer").removeClass("error").find(".message").text("");var e=this.$("form"),t=this;new i(e[0]).submit().done(function(e){e.errorCode?t.onErrorCallback(e):t.onSuccessCallback(e)}).fail(function(e){t.onErrorCallback(e)})},secondaryButtonOnClick:function(){this.hide(),a.defer(a.bind(this.remove,this))}})}),define("text!dataSource/template/jdbcSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.selectDriverTitle\']}}" class="control select">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.driver\']}}:</span>\n        <select name="selectedDriverClass">\n            {{ _.each(drivers, function(driver) { }}\n                <option value="{{- driver.jdbcDriverClass }}"\n                {{ if (modelAttributes.selectedDriverClass === driver.jdbcDriverClass) { }}\n                    selected="selected"\n                {{ } }}>\n                    {{ if (!driver.available && driver.jdbcDriverClass !== otherDriverValue) { }}\n                        {{- i18n["resource.dataSource.jdbc.driverMissing"] }}\n                    {{ } }}\n                    {{- driver.label }}\n                    {{ if (driver.jdbcDriverClass !== otherDriverValue && typeof (driver.label) !== "undefined" && driver.label !== "") { }}\n                        ({{- driver.jdbcDriverClass }})\n                    {{ } else if (driver.jdbcDriverClass !== otherDriverValue && (typeof driver.label === "undefined" || driver.label === "")) { }}\n                        {{- driver.jdbcDriverClass }}\n                    {{ } }}\n                </option>\n            {{ }); }}\n        </select>\n\n        {{ if (driverUploadEnabled) { }}\n		<button class="button action up" id="driverUploadButton">\n			<span class="wrap">{{- i18n[\'resource.dataSource.jdbc.upload.editDriverButton\']}}</span>\n		</button>\n        {{ } }}\n    </label>\n\n    <div name="jdbcSpecificFieldsContainer"></div>\n\n    <label title="{{- i18n[\'resource.analysisConnection.url\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint2\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}}:</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/jdbcCustomFieldTemplate.htm",[],function(){return'<label class="control input text" title="{{- title}}">\n    <span class="wrap">{{- label}} ({{- i18n["required.field"] }}):</span>\n    <input name="{{- name}}" type="text" value="{{- value }}"/>\n    <span class="message warning"></span>\n    <span class="message hint">{{- hint }}</span>\n</label>'}),define("dataSource/view/JdbcDataSourceView",["require","underscore","jquery","dataSource/view/BaseDataSourceView","dataSource/model/JdbcDataSourceModel","dataSource/model/JdbcDriverModel","dataSource/view/dialog/UploadJdbcDriverDialog","text!dataSource/template/jdbcSpecificTemplate.htm","text!dataSource/template/jdbcCustomFieldTemplate.htm","core.events.bis","bundle!jasperserver_messages"],function(e){"use strict";var t=e("underscore"),a=(e("jquery"),e("dataSource/view/BaseDataSourceView")),n=e("dataSource/model/JdbcDataSourceModel"),i=e("dataSource/model/JdbcDriverModel"),r=e("dataSource/view/dialog/UploadJdbcDriverDialog"),s=e("text!dataSource/template/jdbcSpecificTemplate.htm"),o=e("text!dataSource/template/jdbcCustomFieldTemplate.htm"),l=e("core.events.bis"),c=e("bundle!jasperserver_messages");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jdbc.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jdbc.page.title.edit",modelConstructor:n,events:function(){var e={};return t.extend(e,a.prototype.events,{"keyup input[type='text'][name!='driverClass'], input[type='password'], textarea":"updateModelProperty","change input[type='text'][name!='driverClass'], input[type='password'], textarea, select":"updateModelProperty","keyup input[type='text'][name='driverClass']":"manuallySetDriverClass","change input[type='text'][name='driverClass']":"manuallySetDriverClass","click #driverUploadButton":"uploadDriver"}),e}(),initialize:function(e){a.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"connectionUrlUpdate",this.updateConnectionUrl),this.listenTo(this.model,"customAttributesUpdate",this.updateCustomAttributes),this.listenTo(this.model,"driverClassChange",this.changeDriver),this.listenTo(this.model.drivers,"change",this.updateDriverOption),this.listenTo(this.model.drivers,"add",this.addDriverOption)},updateDriverOption:function(e){var t=this.$("select[name='selectedDriverClass'] option[value='"+e.get("jdbcDriverClass")+"']"),a=e.get("label")+" ("+e.get("jdbcDriverClass")+")";e.get("available")||(a=c["resource.dataSource.jdbc.driverMissing"]+" "+a),t.text(a),this.model.getCurrentDriver()===e&&this.changeUploadDriverButtonState()},addDriverOption:function(e){if(!e.isOtherDriver){var a=this.$("select[name='selectedDriverClass'] option[value='"+i.OTHER_DRIVER+"']"),n=e.get("jdbcDriverClass"),r=this;e.get("available")||(n=c["resource.dataSource.jdbc.driverMissing"]+" "+n),a.before("<option value='"+e.get("jdbcDriverClass")+"'>"+n+"</option>"),t.defer(function(){r.$("select[name='selectedDriverClass']").val(e.get("jdbcDriverClass")),r.model.trigger("change:driverClass")})}},manuallySetDriverClass:function(){var e=this.$("input[type='text'][name='driverClass']").val(),t={driverClass:e};this.model.set(t,{silent:!0}),this.model.validate(t),this.changeUploadDriverButtonState()},updateConnectionUrl:function(){this.$("input[name='connectionUrl']").val(this.model.get("connectionUrl"));var e=this.model.getCurrentDriver();e.isOtherDriver()||e.isUploadedDriver()||this.model.validate({connectionUrl:this.model.get("connectionUrl")})},updateCustomAttributes:function(){var e=this,a=this.model.getCurrentDriver().getCustomAttributes();t.each(a,function(t){e.$("input[name='"+t+"']").val(e.model.get(t))});var n=this.model.pick(a);this.model.validate(n)},changeDriver:function(){this.renderDriverCustomAttributeFields(),this.changeUploadDriverButtonState()},changeUploadDriverButtonState:function(){var e=this.model.getCurrentDriver(),t=this.$("#driverUploadButton");l.enable(t[0]);var a=e.get("available")?c["resource.dataSource.jdbc.upload.editDriverButton"]:c["resource.dataSource.jdbc.upload.addDriverButton"];t.find(".wrap").text(a)},uploadDriver:function(){this.model.drivers.driverUploadEnabled&&this.model.get("driverClass")?(this.fieldIsValid(this,"driverClass","name"),this.driverUploadDialog&&this.stopListening(this.driverUploadDialog),delete this.driverUploadDialog,this.initDriverUploadDialog(),this.driverUploadDialog.show()):this.fieldIsInvalid(this,"driverClass",c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverClass"],"name")},initDriverUploadDialog:function(){this.driverUploadDialog=new r({driverAvailable:this.model.getCurrentDriver().get("available"),driverClass:this.model.get("isOtherDriver")?this.model.get("driverClass"):this.model.getCurrentDriver().get("jdbcDriverClass")}),this.listenTo(this.driverUploadDialog,"driverUpload",this._onDriverUploadFinished)},_onDriverUploadFinished:function(e){var a=this;this.model.fetchDrivers().then(function(){a.model.drivers.markDriverAsAvailable(e.jdbcDriverClass),t.defer(function(){a.model.validate(),a.render()})})},render:function(){return this.$el.empty(),this.renderJdbcSpecificSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this},templateData:function(){var e=a.prototype.templateData.apply(this,arguments);return t.extend(e,{drivers:this.model.drivers.toJSON(),otherDriverValue:i.OTHER_DRIVER,driverUploadEnabled:this.model.drivers.driverUploadEnabled}),e},renderJdbcSpecificSection:function(){this.$el.append(t.template(s,this.templateData())),this.renderDriverCustomAttributeFields(),this.changeUploadDriverButtonState()},renderDriverCustomAttributeFields:function(){var e=this,a="";if(this.model.get("isOtherDriver"))a+=t.template(o,{hint:c["resource.dataSource.jdbc.hint1"],label:c["resource.dataSource.jdbc.driver"],name:"driverClass",title:c["resource.analysisConnection.driver"],value:this.model.get("driverClass"),i18n:c});else{var n=this.model.getCurrentDriver().getCustomAttributes();t.each(n,function(n){a+=t.template(o,{hint:"",label:c["resource.dataSource.jdbc."+n],name:n,title:c["resource.dataSource.jdbc.requiredTitle"].replace("{0}",c["resource.dataSource.jdbc."+n].toLowerCase()),value:e.model.get(n),i18n:c})})}this.$("[name=jdbcSpecificFieldsContainer]").html(a)},remove:function(){this.driverUploadDialog&&this.driverUploadDialog.remove(),a.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/JndiDataSourceModel",["require","dataSource/model/BaseDataSourceModel","bi/repository/enum/repositoryResourceTypes","dataSource/enum/connectionTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),a=e("bi/repository/enum/repositoryResourceTypes"),n=e("dataSource/enum/connectionTypes"),i=e("underscore"),r=e("bundle!jasperserver_messages");return t.extend({type:a.JNDI_DATA_SOURCE,defaults:function(){var e={};return i.extend(e,t.prototype.defaults,{jndiName:"",timezone:"",connectionType:n.JNDI}),e}(),validation:function(){var e={};return i.extend(e,t.prototype.validation,{jndiName:[{required:!0,msg:r["ReportDataSourceValidator.error.not.empty.reportDataSource.jndiName"]}]}),e}()})}),define("text!dataSource/template/jndiSpecificTemplate.htm",[],function(){return'<fieldset class="group mediumFields">\n\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.analysisConnection.driver\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jndi.serviceName\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.jndiName }}" name="jndiName">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jndi.hint1\']}}</span>\n    </label>\n\n</fieldset>'}),define("dataSource/view/JndiDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/JndiDataSourceModel","text!dataSource/template/jndiSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/JndiDataSourceModel"),i=e("text!dataSource/template/jndiSpecificTemplate.htm");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jndi.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jndi.page.title.edit",modelConstructor:n,render:function(){return this.$el.empty(),this.renderJndiSpecificSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this},renderJndiSpecificSection:function(){this.$el.append(t.template(i,this.templateData()))}})}),define("dataSource/model/AwsDataSourceModel",["require","dataSource/model/JdbcDataSourceModel","dataSource/model/BaseDataSourceModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","jquery","bundle!jasperserver_messages","settings!awsSettings","bundle!jasperserver_config","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("dataSource/model/JdbcDataSourceModel"),a=e("dataSource/model/BaseDataSourceModel"),n=e("dataSource/collection/JdbcDriverCollection"),i=e("settings!dataSourcePatterns"),r=e("dataSource/enum/connectionTypes"),s=e("bi/repository/enum/repositoryResourceTypes"),o=e("underscore"),l=e("jquery"),c=e("bundle!jasperserver_messages"),d=e("settings!awsSettings"),u=e("bundle!jasperserver_config"),p=e("dataSource/util/settingsUtility"),A=t.extend({otherDriverIsPresent:!1,type:s.AWS_DATA_SOURCE,defaults:function(){var e={};return o.extend(e,t.prototype.defaults,{dbName:"",dbInstanceIdentifier:"",dbService:"",accessKey:"",secretKey:"",roleArn:"",region:"",credentialsType:"",connectionType:r.AWS}),e}(),validation:function(){var e={};return o.extend(e,{connectionUrl:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.connectionUrl"]},{xRegExpPattern:XRegExp(i.forbidWhitespacesPattern),msg:c["ReportDataSourceValidator.error.invalid.chars.reportDataSource.connectionUrl"]}],username:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.username"]}],driverClass:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverClass"]},{xRegExpPattern:XRegExp(i.forbidWhitespacesPattern),msg:c["ReportDataSourceValidator.error.invalid.chars.reportDataSource.driverClass"]},{fn:function(e,t,a){var n=new RegExp(i.attributePlaceholderPattern).test(e);if(!n){var r=this.drivers.getDriverByClass(e);if(!r||!r.get("available"))return c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverNotInstalled"]}}}],dbName:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.dbNameIsEmpty"]}],region:[{required:!0}],accessKey:[{fn:function(e,t,a){return a.credentialsType===A.credentialsType.AWS&&(o.isNull(e)||o.isUndefined(e)||o.isString(e)&&""===e)?c["fillParameters.error.mandatoryField"]:void 0}}],secretKey:[{fn:function(e,t,a){return a.credentialsType===A.credentialsType.AWS&&(o.isNull(e)||o.isUndefined(e)||o.isString(e)&&""===e)?c["fillParameters.error.mandatoryField"]:void 0}}]}),e}(),initialize:function(e,t){a.prototype.initialize.apply(this,arguments);var i=p.deepDefaults(t,{awsSettings:d});this.isNew()?this.set("region",o.first(i.awsSettings.awsRegions)):(this.set("password",u["input.password.substitution"]),this.set("secretKey",u["input.password.substitution"])),this.set("credentialsType",!i.awsSettings.isEc2Instance||i.awsSettings.suppressEc2CredentialsWarnings||""!==this.get("accessKey")?A.credentialsType.AWS:A.credentialsType.EC2),this.initialization=l.Deferred(),this.drivers=new n([],this.options);var r=this;this.drivers.fetch({reset:!0}).done(function(){r.initialization.resolve()}),this.on("change:dbName change:dbPort change:dbHost change:sName change:connectionUrlTemplate",this.updateConnectionUrl),this.on("change:credentialsType",this.changeCredentialsType)},updateConnectionUrl:function(){if(this.get("connectionUrlTemplate")){var e=this.pick(["dbName","dbPort","dbHost","sName"]);e.sName||(e.sName=e.dbName);var t=this.replaceConnectionUrlTemplatePlaceholdersWithValues(this.get("connectionUrlTemplate"),e);this.set("connectionUrl",t)}},changeCredentialsType:function(){var e=this.get("credentialsType")===A.credentialsType.EC2;e&&this.set({accessKey:"",secretKey:"",roleArn:""})},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.secretKey===u["input.password.substitution"]&&(e.secretKey=null),e},getFullDbTreePath:function(){return this.get("dbInstanceIdentifier")&&this.get("dbService")?"/"+this.get("dbService")+"/"+this.get("dbInstanceIdentifier"):null}},{credentialsType:{EC2:"ec2",AWS:"aws"}});return A}),define("text!dataSource/template/awsSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.aws.settings.title\']}}</span></legend>\n\n    <ul class="list inputSet">\n        <li class="leaf">\n            <div class="control radio">\n                <label title="{{- i18n[\'resource.dataSource.aws.option.useDefault.title\']}}" class="wrap">\n                    {{- i18n[\'resource.dataSource.aws.option.useDefault\']}}\n                </label>\n                <input type="radio" value="{{- credentialsType.EC2 }}" name="credentialsType" {{ if(modelAttributes.credentialsType === credentialsType.EC2) { }}checked{{ } }} {{ if (disableAwsDefaults) { }}disabled="disabled"{{ } }}>\n            </div>\n        </li>\n        <li class="leaf">\n            <div class="control radio">\n                <label title="{{- i18n[\'resource.dataSource.aws.option.userDefined.title\']}}" class="wrap">\n                   {{= i18n[\'resource.dataSource.aws.option.userDefined\'].replace(\'{0}\',i18n[\'resource.dataSource.aws.option.url\']) }}\n                </label>\n                <input type="radio" value="{{- credentialsType.AWS }}" name="credentialsType" {{ if(modelAttributes.credentialsType === credentialsType.AWS ) { }}checked{{ } }}>\n            </div>\n        </li>\n    </ul>\n\n    <fieldset class="group shortFields" id="aws_settings" {{ if (modelAttributes.credentialsType === credentialsType.EC2) { }}style="display: none;"{{ } }}>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.accessKey.title\']}}" class="control input text ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.accessKey\']}}:</span>\n            <input type="text" value="{{- modelAttributes.accessKey }}" name="accessKey">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.secretKey.title\']}}" class="control input password ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.secretKey\']}}:</span>\n            <input type="password" autocomplete="off" value="{{- modelAttributes.secretKey }}" name="secretKey">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.arn.title\']}}" class="control input text ">\n            <span disabled="disabled" class="wrap">{{- i18n[\'resource.dataSource.aws.setting.arn\']}}:</span>\n            <input type="text" value="{{- modelAttributes.roleArn }}" name="roleArn">\n            <span class="message warning"></span>\n            <span class="message hint">{{- i18n[\'resource.dataSource.aws.optional.arn\']}}</span>\n        </label>\n\n    </fieldset>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.aws.tree\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.aws.setting.region.title\']}}" class="control select " style="display: inline-block; margin-right: 6px; margin-top: 6px; width: 350px;">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.region\']}}:</span>\n        <select class="fnormal" name="region">\n            {{ _.each(awsRegions, function(region) { }}\n            <option value="{{- region }}" {{ if (region === modelAttributes.region) { }}selected="selected"{{ } }}>{{- i18n[region] }}</option>\n            {{ }); }}\n        </select>\n        <span class="message warning"></span>\n    </label>\n\n    <button class="button action" id="findAwsDataSources">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.updateTree\']}}<span class="icon"></span></span>\n    </button>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <div class="control groupBox" style="height: 150px; margin: 0; width: 538px;">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body" style="height: 137px; overflow: auto; padding: 6px;">\n                <ul class="list collapsible folders hideRoot" id="awsDataSourceTree" style="position: relative; height: 137px; overflow: auto; padding: 6px;"></ul>\n            </div>\n        </div>\n    </div>\n\n</fieldset>\n\n<fieldset class="group shortFields">\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.aws.database.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.database.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.dbName }}" name="dbName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n</fieldset>\n\n<fieldset class="group mediumFields">\n\n    <label title="{{- i18n[\'resource.analysisConnection.driver\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.driver\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input class="control inline" type="text" value="{{- modelAttributes.driverClass }}" name="driverClass">\n        {{ if (driverUploadEnabled) { }}\n        <button class="button action up" id="driverUploadButton">\n            <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.upload.addDriverButton\']}}</span>\n        </button>\n        {{ } }}\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint1\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.analysisConnection.requiredURL\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint2\']}}</span>\n    </label>\n\n</fieldset>';
}),define("dataSource/view/AwsDataSourceView",["require","underscore","common/component/dialog/AlertDialog","dataSource/view/JdbcDataSourceView","dataSource/view/BaseDataSourceView","dataSource/model/AwsDataSourceModel","dataSource/view/dialog/UploadJdbcDriverDialog","dynamicTree.utils","core.events.bis","bundle!jasperserver_messages","text!dataSource/template/awsSpecificTemplate.htm","settings!awsSettings","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("underscore"),a=e("common/component/dialog/AlertDialog"),n=e("dataSource/view/JdbcDataSourceView"),i=e("dataSource/view/BaseDataSourceView"),r=e("dataSource/model/AwsDataSourceModel"),s=e("dataSource/view/dialog/UploadJdbcDriverDialog"),o=e("dynamicTree.utils"),l=e("core.events.bis"),c=e("bundle!jasperserver_messages"),d=e("text!dataSource/template/awsSpecificTemplate.htm"),u=e("settings!awsSettings"),p=e("dataSource/util/settingsUtility");return n.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.aws.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.aws.page.title.edit",modelConstructor:r,events:function(){var e={};return t.extend(e,n.prototype.events),e["change input[name='credentialsType']"]="changeCredentialsType",e["click #findAwsDataSources"]="refreshAwsDataSourceTree",e},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.deepDefaults=p.deepDefaults(e,{awsSettings:u}),this.listenTo(this.model,"change:credentialsType",this.onCredentialsTypeChange),this.listenTo(this.model,"change:driverClass",this.changeUploadDriverButtonState),this.listenTo(this.model,"change",this.updateInput),this.listenTo(this.model.drivers,"change add",this.recheckDriver)},changeCredentialsType:function(){var e=this.$("input[name='credentialsType']:checked").val();this.model.set("credentialsType",e)},recheckDriver:function(){this.model.validate({driverClass:this.model.get("driverClass")}),this.changeUploadDriverButtonState()},changeUploadDriverButtonState:function(){var e=this.$("#driverUploadButton");if(""===this.model.get("driverClass"))l.disable(e[0]);else{l.enable(e[0]);var t=this.model.drivers.getDriverByClass(this.model.get("driverClass"));e.find(".wrap").text(c[t&&t.get("available")?"resource.dataSource.jdbc.upload.editDriverButton":"resource.dataSource.jdbc.upload.addDriverButton"])}},initDriverUploadDialog:function(){var e=this,a=this.model.drivers.getDriverByClass(this.model.get("driverClass"));this.driverUploadDialog=new s({driverAvailable:!(!a||!a.get("available")),driverClass:this.model.get("driverClass")}),this.driverUploadDialog.on("driverUpload",function(a){e.model.drivers.markDriverAsAvailable(a.jdbcDriverClass),t.defer(t.bind(e.model.validate,e.model))})},updateInput:function(){var e=t.keys(this.model.changedAttributes()),a=["accessKey","secretKey","roleArn","connectionUrl","driverClass","dbName"],n=this;t.each(t.intersection(e,a),function(e){var t=n.model.get(e),a=n.$("[name='"+e+"']").val();a!==t&&n.$("[name='"+e+"']").val(t)})},onCredentialsTypeChange:function(){var e=this.model.get("credentialsType")===r.credentialsType.EC2;this.$("#aws_settings")[e?"hide":"show"](),e&&this.showAwsDsTree(this.model.getFullDbTreePath())},refreshAwsDataSourceTree:function(e){e.preventDefault(),this.showAwsDsTree("/")},render:function(){return this.$el.empty(),this.renderTimezoneSection(),this.renderAwsSpecificSection(),this.renderTestConnectionSection(),this.initDataSourceTree(),(this.options.isEditMode||this.model.get("credentialsType")===r.credentialsType.EC2)&&this.showAwsDsTree(this.model.getFullDbTreePath()),this},showAwsDsTree:function(e){this.model.validate({accessKey:this.model.get("accessKey"),secretKey:this.model.get("secretKey")}),this.model.isValid("secretKey")&&this.model.isValid("accessKey")&&this.awsDataSourceTree.showTreePrefetchNodes(e||"/")},templateData:function(){var e=n.prototype.templateData.apply(this,arguments);return t.extend(e,{credentialsType:r.credentialsType,awsRegions:this.deepDefaults.awsSettings.awsRegions,disableAwsDefaults:!this.deepDefaults.awsSettings.isEc2Instance||this.deepDefaults.awsSettings.suppressEc2CredentialsWarnings}),e},renderAwsSpecificSection:function(){this.$el.append(t.template(d,this.templateData())),this.changeUploadDriverButtonState()},initDataSourceTree:function(){var e=this.options.isEditMode,t=this,n={hideLoader:!0,bShowRoot:!1,treeId:"awsDataSourceTree",providerId:"awsDataSourceTreeDataProvider",selectLeavesOnly:!0,additionalParams:function(){return{arn:t.model.get("roleArn"),awsAccessKey:t.model.get("accessKey"),awsSecretKey:t.model.get("secretKey"),region:t.model.get("region"),datasourceUri:t.model.get("uri")}}};this.awsDataSourceTree=o.createRepositoryTree("awsDataSourceTree",n),this.awsDataSourceTree.httpErrorHandler=function(e){var t,n=!1;return(-1!==e.responseText.indexOf("AWS Access Key is invalid")||-1!==e.responseText.indexOf("The security token included in the request is invalid"))&&(n=c["error.aws.key.is.invalid"]),n!==!1||-1===e.responseText.indexOf("AWS Secret Key is invalid")&&-1===e.responseText.indexOf("The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method")||(n=c["error.aws.secret.key.is.invalid"]),n===!1&&-1!==e.responseText.indexOf("is not authorized to perform")&&(n=c["error.aws.arn.is.invalid"]),n===!1&&-1!==e.responseText.indexOf("The security token included in the request is invalid")&&(n=c["error.security.token.is.invalid"]),n?(t=new a({modal:!0}),t.setMessage(n),t.open(),!0):!1},this.awsDataSourceTree.observe("leaf:selected",function(a){var n=a.memo.node.param;if("awsDb"===n.type&&!e){var i=n.extra,r=i.dbUri.split("/");t.model.set({connectionUrlTemplate:i.jdbcTemplate,driverClass:i.jdbcDriverClass,dbName:i.dBName,dbHost:i.dnsAddress,dbPort:i.dbPort,sName:i.dBName,dbService:r[1],dbInstanceIdentifier:r[2]}),t.model.validate({driverClass:t.model.get("driverClass")})}}),this.awsDataSourceTree.observe("tree:loaded",function(){t.model.getFullDbTreePath()&&t.awsDataSourceTree.openAndSelectNode(t.model.getFullDbTreePath(),function(){e=!1})})},remove:function(){this.awsDataSourceTree&&this.awsDataSourceTree.stopObserving(),n.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/AzureSqlDataSourceModel",["require","dataSource/model/JdbcDataSourceModel","dataSource/model/BaseDataSourceModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","jquery","bundle!jasperserver_messages","settings!awsSettings","bundle!jasperserver_config","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("dataSource/model/JdbcDataSourceModel"),a=e("dataSource/model/BaseDataSourceModel"),n=e("dataSource/collection/JdbcDriverCollection"),i=(e("settings!dataSourcePatterns"),e("dataSource/enum/connectionTypes")),r=e("bi/repository/enum/repositoryResourceTypes"),s=e("underscore"),o=e("jquery"),l=e("bundle!jasperserver_messages"),c=e("settings!awsSettings"),d=e("bundle!jasperserver_config"),u=e("dataSource/util/settingsUtility"),p=t.extend({otherDriverIsPresent:!1,type:r.AZURE_SQL_DATA_SOURCE,defaults:function(){var e={};return s.extend(e,t.prototype.defaults,{subscriptionId:"",keyStorePassword:"",keyStoreUri:"",serverName:"",dbName:"",selectedDriverClass:"",useMicrosoftDriver:!1,microsoftDriverAvailable:!1,connectionType:i.AZURE_SQL}),e}(),validation:function(){var e={};return s.extend(e,t.prototype.validation,{subscriptionId:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.subscriptionId"]}],keyStorePassword:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.keyStorePassword"]}],keyStoreUri:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.keyStoreUri"]}],serverName:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.serverName"]}],dbName:[{required:!0,msg:l["ReportDataSourceValidator.error.not.empty.reportDataSource.dbNameIsEmpty"]}],username:[{required:!0,msg:l["ReportDataSourceValidator.error.not.empty.reportDataSource.username"]}]}),e}(),initialize:function(e,t){a.prototype.initialize.apply(this,arguments);u.deepDefaults(t,{awsSettings:c});this.isNew()||(this.set("password",d["input.password.substitution"]),this.set("keyStorePassword",d["input.password.substitution"])),this.initialization=o.Deferred(),this.drivers=new n([],this.options);var i=this;this.drivers.fetch({reset:!0}).done(function(){i.isNew()?i.set("selectedDriverClass",i.drivers.getDriverByName("sqlserver").get("jdbcDriverClass")):i.set("selectedDriverClass",i.get("driverClass"));var e=i.drivers.getDriverByName("sqlserver_standard");null!=e&&(i.set("microsoftDriverAvailable",e.get("available")),i.set("useMicrosoftDriver",i.get("selectedDriverClass")===e.get("jdbcDriverClass"))),i.initialization.resolve()}),this.on("change:dbName change:serverName change:connectionUrlTemplate change:useMicrosoftDriver",this.updateConnectionUrl),this.on("change:useMicrosoftDriver",this.updateDriverClass)},updateConnectionUrl:function(){if(this.get("connectionUrlTemplate")){var e=this.pick(["dbName","serverName","dbPort"]);e.dbPort=1433;var t=this.drivers.getDriverByName("sqlserver_standard"),a=this.get("connectionUrlTemplate");this.get("useMicrosoftDriver")&&null!=t&&(e.serverName+=".database.windows.net",a=t.get("jdbcUrl")),e.dbHost=e.serverName;var n=this.replaceConnectionUrlTemplatePlaceholdersWithValues(a,e);this.set("connectionUrl",n)}},updateDriverClass:function(){var e=this.drivers.getDriverByName("sqlserver_standard"),t=this.get("useMicrosoftDriver")&&null!=e?"sqlserver_standard":"sqlserver",a=this.drivers.getDriverByName(t).get("jdbcDriverClass");this.set("selectedDriverClass",a),this.set("driverClass",a)},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.keyStorePassword===d["input.password.substitution"]&&(e.keyStorePassword=null),e},getFullDbTreePath:function(){return this.get("serverName")&&this.get("dbName")?"/"+this.get("serverName")+"/"+this.get("dbName"):null}});return p}),define("text!dataSource/template/azureSqlSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.azureSql.settings.title\']}}</span></legend>\n\n    <fieldset class="group shortFields" id="aws_settings">\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.subscriptionId.title\']}}" class="control input text ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.subscriptionId\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="text" value="{{- modelAttributes.subscriptionId }}" name="subscriptionId">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.keyStoreUri.title\']}}" class="control input text">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.keyStoreUri\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="text" value="{{- modelAttributes.keyStoreUri }}" name="keyStoreUri">\n            <button class="button action" type="button" name="repositoryBrowserButton">\n                <span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...<span class="icon"></span></span>\n            </button>\n            <span class="message warning"></span>\n            <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.optional.keyStoreUri\']}}</span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.keyStorePassword.title\']}}" class="control input password ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.keyStorePassword\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="password" autocomplete="off" value="{{- modelAttributes.keyStorePassword }}" name="keyStorePassword">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n    </fieldset>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.azureSql.tree\']}}</span></legend>\n\n    <button class="button action" id="updateDatabaseTree">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.updateTree\']}}<span class="icon"></span></span>\n    </button>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <div class="control groupBox" style="height: 150px; margin: 0; width: 538px;">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body" style="height: 137px; overflow: auto; padding: 6px;">\n                <ul class="list collapsible folders hideRoot" id="azureSqlDataSourceTree" style="position: relative; height: 137px; overflow: auto; padding: 6px;"></ul>\n            </div>\n        </div>\n    </div>\n\n</fieldset>\n\n<fieldset class="group shortFields">\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.server.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.server.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.serverName }}" name="serverName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.database.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.database.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.dbName }}" name="dbName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.database.username.hint\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.useMicrosoftDriver\']}}" class="control input checkBox">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.useMicrosoftDriver\']}}\n            {{ if (!modelAttributes.microsoftDriverAvailable) { }}\n                ({{- i18n["resource.dataSource.azureSql.microsoftDriverMissing"] }})\n            {{ } }}\n            </span>\n        <input type="checkbox" name="useMicrosoftDriver" value="{{- modelAttributes.useMicrosoftDriver }}"\n            {{ if (modelAttributes.useMicrosoftDriver) { }}checked="checked"{{ } }} \n            {{ if (!modelAttributes.microsoftDriverAvailable) { }}disabled="disabled"{{ } }}>\n    </label>\n\n\n</fieldset>\n\n<fieldset class="group mediumFields">\n\n    <label title="{{- i18n[\'resource.analysisConnection.requiredURL\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.connectionUrl.hint\']}}</span>\n    </label>\n\n</fieldset>'}),define("text!common/templates/components.pickers.htm",[],function(){return'<div class="panel dialog selectFromRepository overlay moveable sizeable centered_horz centered_vert hidden">\n	<div class="sizer diagonal"></div>\n	<div class="content hasFooter">\n		<div class="header mover">\n			<div class="title">\n			</div>\n		</div>\n		<div class="body">\n			<div class="control groupBox fillParent">\n				<div class="content">\n					<div class="header">\n						<div class="title">\n						</div>\n					</div>\n					<div class="body">\n						<ul id="selectFromRepoTree"></ul>\n					</div>\n				</div>\n			</div>\n		</div>\n		<div class="footer">\n			<button id="selectFromRepoBtnSelect" class="button action primary up"><span class="wrap">{{- i18n["button.select"] }}</span><span class="icon"></span></button>\n			<button id="selectFromRepoBtnCancel" class="button action up"><span class="wrap">{{- i18n["button.cancel"] }}</span><span class="icon"></span></button>\n		</div>\n	</div>\n</div>\n'});var resourceLocator={CONTENT_REPOSITORY:"CONTENT_REPOSITORY",LOCAL:"LOCAL",NONE:"NONE",FILE_SYSTEM:"FILE_SYSTEM",LOCATE_EVENT:"resource:locate",ALLOWED_FILE_RESOURCE_EXTENSIONS:["css","ttf","jpg","jpeg","gif","bmp","png","jar","jrxml","properties","jrtx","xml","agxml","docx","doc","ppt","pptx","xls","xlsx","ods","odt","odp","pdf","rtf","html"],initialize:function(e){var t=function(e){return _.isObject(e)?e:$(e)};this.resourceUri=t(e.resourceInput),this.browseButton=t(e.browseButton),this.filePath=t(e.fileUploadInput),this.fakeFilePath=t(e.fakeFileUploadInput),this.fakeFileInput=t(e.fakeFileUploadInputText),this.newResourceLink=t(e.newResourceLink);try{this._initFileSelector(e)}catch(a){}finally{this._initEvents(e)}return this},_initEvents:function(e){jQuery(document).on("click","#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL",this._clickHandler),"fileResourceTreeDataProvider"===e.providerId&&(jQuery("#next").on("click",resourceLocator._nextClickHandler),jQuery("#filePath").on("change",resourceLocator._uploadChangeHandler))},_nextClickHandler:function(e){jQuery("#fileUpload").hasClass("error")&&e.preventDefault()},_uploadChangeHandler:function(e){jQuery("#fileUpload").removeClass("error");var t=!0,a=jQuery("#filePath")[0].value;if(a){var n=jQuery("#filePath")[0].value.match(/.*\.([^\.]+)$/);if(n){var i=n[1];_.indexOf(resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS,i)<0&&(t=!1)}else t=!1}else t=!1;if(!t){var r=resource.messages["resource.report.unsupportedFileType.error"]+" "+resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(", ");jQuery("#fileUpload").addClass("error").find("span.warning").html(r)}},_clickHandler:function(e){resourceLocator._updateResourceSelectorState(e.target.id)},_updateResourceSelectorState:function(e){resource.switchButtonState(this.filePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFilePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFileInput,e===this.FILE_SYSTEM),resource.switchButtonState(this.browseButton,e===this.CONTENT_REPOSITORY),resource.switchDisableState(this.resourceUri,e!==this.CONTENT_REPOSITORY);var t=e===this.LOCAL?["disabled","launcher"]:["launcher","disabled"];this._switchElementClasses(this.newResourceLink,t)},_initFileSelector:function(e){this.fileSelector=new picker.FileSelector(_.extend({},e,{uriTextboxId:this.resourceUri,browseButtonId:this.browseButton,title:e.dialogTitle}))},remove:function(e){this.fileSelector.remove()},_switchElementClasses:function(e,t){e&&t&&e.removeClassName(t[0]).addClassName(t[1])}};define("resource.locate",["resource.base","jquery","components.pickers"],function(e){return function(){var t;return t||e.resourceLocator}}(this)),define("dataSource/view/AzureSqlDataSourceView",["require","underscore","common/component/dialog/AlertDialog","dataSource/view/JdbcDataSourceView","dataSource/view/BaseDataSourceView","dataSource/model/AzureSqlDataSourceModel","dataSource/view/dialog/UploadJdbcDriverDialog","dynamicTree.utils","core.events.bis","bundle!jasperserver_messages","bundle!jsexceptions_messages","text!dataSource/template/azureSqlSpecificTemplate.htm","text!common/templates/components.pickers.htm","settings!awsSettings","resource.locate","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("underscore"),a=e("common/component/dialog/AlertDialog"),n=e("dataSource/view/JdbcDataSourceView"),i=e("dataSource/view/BaseDataSourceView"),r=e("dataSource/model/AzureSqlDataSourceModel"),s=(e("dataSource/view/dialog/UploadJdbcDriverDialog"),e("dynamicTree.utils")),o=(e("core.events.bis"),e("bundle!jasperserver_messages")),l=e("bundle!jsexceptions_messages"),c=e("text!dataSource/template/azureSqlSpecificTemplate.htm"),d=e("text!common/templates/components.pickers.htm"),u=(e("settings!awsSettings"),e("resource.locate"));e("dataSource/util/settingsUtility");return n.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.aws.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.aws.page.title.edit",modelConstructor:r,events:function(){var e={};return t.extend(e,n.prototype.events),e["click #updateDatabaseTree"]="updateDatabaseTree",e},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.onModelChange)},onModelChange:function(){var e=t.keys(this.model.changedAttributes()),a=["serverName","dbName","connectionUrl"],n=this;t.each(t.intersection(e,a),function(e){n.$("[name='"+e+"']").val(n.model.get(e))})},updateDatabaseTree:function(e){e.preventDefault(),this.showAzureSqlDsTree("/")},render:function(){return this.$el.empty(),this.renderTimezoneSection(),this.renderAzureSqlSpecificSection(),this.renderTestConnectionSection(),this.initDataSourceTree(),this.options.isEditMode&&this.showAzureSqlDsTree(this.model.getFullDbTreePath()),this},showAzureSqlDsTree:function(e){this.model.validate({subscriptionId:this.model.get("subscriptionId"),keyStorePassword:this.model.get("keyStorePassword"),keyStoreUri:this.model.get("keyStoreUri")}),this.model.isValid("keyStorePassword")&&this.model.isValid("subscriptionId")&&this.azureSqlDataSourceTree.showTreePrefetchNodes(e||"/")},renderAzureSqlSpecificSection:function(){this.$el.append(t.template(c,this.templateData())),this.browseButton=u.initialize({i18n:o,template:d,resourceInput:this.$el.find("[name=keyStoreUri]")[0],browseButton:this.$el.find("[name=repositoryBrowserButton]")[0],providerId:"fileResourceBaseTreeDataProvider",dialogTitle:o["resource.Add.Files.Title"],selectLeavesOnly:!0,onChange:t.bind(function(e){this.model.set("keyStoreUri",e),this.model.validate({keyStoreUri:e})},this)})},initDataSourceTree:function(){var e=this.options.isEditMode,t=this,n={hideLoader:!0,bShowRoot:!1,treeId:"azureSqlDataSourceTree",providerId:"azureSqlDataSourceTreeDataProvider",selectLeavesOnly:!0,additionalParams:function(){return{subscriptionId:t.model.get("subscriptionId"),keyStorePassword:t.model.get("keyStorePassword"),keyStoreUri:t.model.get("keyStoreUri"),datasourceUri:t.model.get("uri")}}};this.azureSqlDataSourceTree=s.createRepositoryTree("azureSqlDataSourceTree",n),this.azureSqlDataSourceTree.httpErrorHandler=function(e){var t,n,i=!1,r=["azure.exception.datasource.recovery.public.ip.not.provided","azure.exception.datasource.recovery.firewall.rule.name.not.provided","azure.exception.datasource.recovery.server.name.not.provided","azure.exception.datasource.recovery.subscription.id.not.provided","azure.exception.datasource.recovery.key.store.file.not.provided","azure.exception.datasource.recovery.key.store.type.not.provided","azure.exception.datasource.key.error","azure.exception.datasource.auth.error","azure.exception.datasource.cannot.retrieve.database.list","azure.exception.datasource.cannot.ensure.firewall.rule","azure.exception.datasource.cannot.recover.datasource"];for(n=0;n<r.length;n++){var s=r[n];if(-1!==e.responseText.indexOf(s)){i=l[s];break}}return i?(t=new a({modal:!0}),t.setMessage(i),t.open(),!0):!1},this.azureSqlDataSourceTree.observe("leaf:selected",function(a){var n=a.memo.node.param;if("leaf"===n.type&&!e){var i=n.extra;t.model.set({serverName:i.serverName,dbName:i.dBName,connectionUrlTemplate:i.jdbcTemplate,driverClass:i.jdbcDriver})}}),this.azureSqlDataSourceTree.observe("tree:loaded",function(){t.model.getFullDbTreePath()&&t.azureSqlDataSourceTree.openAndSelectNode(t.model.getFullDbTreePath(),function(){e=!1;var a=t.azureSqlDataSourceTree.getSelectedNode();a&&a.param&&a.param.extra&&t.model.set({connectionUrlTemplate:a.param.extra.jdbcTemplate,dbHost:a.param.extra.dnsAddress,dbPort:a.param.extra.dbPort})})})},remove:function(){this.azureSqlDataSourceTree&&this.azureSqlDataSourceTree.stopObserving(),n.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/SubDataSourceModel",["require","backbone","underscore","bi/repository/model/RepositoryResourceModel","bundle!jasperserver_messages"],function(e){"use strict";var t=e("backbone"),a=(e("underscore"),e("bi/repository/model/RepositoryResourceModel")),n=e("bundle!jasperserver_messages");return t.Model.extend({defaults:{id:void 0,uri:"",name:"",readOnly:!1},idAttribute:"uri",validation:{id:[{required:!0,msg:n["ReportDataSourceValidator.error.not.empty.reportDataSource.name"]},{maxLength:a.settings.NAME_MAX_LENGTH,msg:n["ReportDataSourceValidator.error.too.long.reportDataSource.name"]},{startsWithLetter:!0,msg:n["ReportDataSourceValidator.error.invalid.chars.shouldStartWithLetter"]},{containsOnlyWordCharacters:!0,msg:n["ReportDataSourceValidator.error.invalid.chars.wordCharsOnly"]}]},initialize:function(e){this.set("name",/.*\/(.+)$/.exec(e.uri)[1])}})}),define("dataSource/collection/SubDataSourceCollection",["require","backbone","dataSource/model/SubDataSourceModel"],function(e){"use strict";var t=e("backbone"),a=e("dataSource/model/SubDataSourceModel");return t.Collection.extend({model:a,hasNonReadOnlyItems:function(){return this.some(function(e){return!e.get("readOnly")})}})}),define("dataSource/model/VirtualDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/collection/SubDataSourceCollection","bi/repository/enum/repositoryResourceTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),a=e("dataSource/collection/SubDataSourceCollection"),n=e("bi/repository/enum/repositoryResourceTypes"),i=e("underscore"),r=e("bundle!jasperserver_messages");return t.extend({type:n.VIRTUAL_DATA_SOURCE,defaults:function(){var e={};return i.extend(e,t.prototype.defaults,{subDataSources:[]}),e}(),validation:function(){var e={};return i.extend(e,t.prototype.validation,{subDataSources:[{arrayMinLength:1,msg:r["ReportDataSourceValidator.error.sub.datasources.needed"]},{fn:function(e,t,a){var n=i.map(e,function(e){return e.id.toLowerCase()}),s={},o=[];i.each(n,function(e){e in s?s[e]++:s[e]=1});for(var l in s)s[l]>1&&o.push(l);return o.length>0?r["ReportDataSourceValidator.error.sub.datasources.id.duplicates"].replace("{0}",o.join(", ")):void 0}},{fn:function(){for(var e=null,t=0;t<this.subDataSources.models.length;t++)this.subDataSources.models[t].isValid(!0)||(e=!0);return e}}]}),e}(),initialize:function(e,n){t.prototype.initialize.apply(this,arguments),this.subDataSources=new a(this.get("subDataSources")),this.listenTo(this.subDataSources,"change reset",this.updateSubDataSourcesArray),n.dependentResources&&n.dependentResources.length>0&&this.subDataSources.forEach(function(e){e.set("readOnly",!0)})},updateSubDataSourcesArray:function(){this.set("subDataSources",this.subDataSources.toJSON())}})}),dialogs.dependentResources={dependenciesPanel:null,show:function(e,t,a){this.dependenciesPanel=jQuery("#dependencies"),this._$title=this.dependenciesPanel.find(".content .header .title"),a.dialogTitle&&(this._titleBackup=this._$title.html(),this._$title.html(a.dialogTitle)),dialogs.popup.show(this.dependenciesPanel[0]),this._changeMessage(a),this._switchButtons(a);var n=this._initList(e);this.dependenciesPanel.on("click",function(e){var a=jQuery(e.target).closest("button").attr("id"),i=t&&t[a];_.include(["dependenciesBtnSave","dependenciesBtnSaveAs","dependenciesBtnOk","dependenciesBtnCancel"],a)&&(dialogs.dependentResources.hide(),n.setItems([]),e.stopPropagation(),i&&i())})},hide:function(){this.dependenciesPanel&&(this.dependenciesPanel.off("click"),dialogs.popup.hide(this.dependenciesPanel[0]),this.dependenciesPanel=null),this._titleBackup&&this._$title&&(this._$title.html(this._titleBackup),this._titleBackup=null)},_changeMessage:function(e){jQuery("#topMessage").html(e.topMessage),jQuery("#bottomMessage").html(e.bottomMessage)},_initList:function(e){var t=new dynamicList.List("dependenciesList",{listTemplateDomId:"tabular_oneColumn",itemTemplateDomId:"tabular_oneColumn:leaf"}),a=[];return e&&(a=e.collect(function(e){var t=new dynamicList.ListItem({cssClassName:layoutModule.LEAF_CLASS,value:e});return t.processTemplate=function(e){var t,a=e.select(".uri")[0];return t="string"==typeof this.getValue()?this.getValue():this.getValue().uristring?this.getValue().uristring:this.getValue().URIString,a.update(xssUtil.escape(t)),e},t})),t.setItems(a),t.show(),t},_switchButtons:function(e){var t,a={save:jQuery("#dependenciesBtnSave"),saveAs:jQuery("#dependenciesBtnSaveAs"),ok:jQuery("#dependenciesBtnOk"),cancel:jQuery("#dependenciesBtnCancel")};t=e.buttons?e.buttons:e.okOnly?["ok"]:e.canSave?["save","saveAs","cancel"]:["ok","cancel"],_.each(a,function(e,a){t.indexOf(a)<0?e.addClass("hidden"):e.removeClass("hidden")})}},define("components.dependent.dialog",["prototype","components.dialogs","jquery","components.list"],function(e){return function(){var t;return t||e.dialogs.dependentResources}}(this)),define("text!dataSource/template/virtualSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n    <input type="hidden" name="subDataSources" value=""/>\n    <span class="message warning"></span>\n</fieldset>\n<fieldset class="group">\n    <div style="position:relative" class="content" id="dataSourcesSelector">\n        <div class="body twoColumn_equal pickWells" id="subDsSelectionContainer">\n            <div class="moveButtons" id="moveButtons">\n                <button title="{{- i18n[\'resource.moveRight\'] }}" class="button action square move right up"\n                        disabled="disabled" name="toRight"><span class="wrap">{{- i18n["resource.moveRight"] }}<span\n                        class="icon"></span></span></button>\n                <button title="{{- i18n[\'resource.moveLeft\'] }}" class="button action square move left up"\n                        disabled="disabled" name="toLeft"><span class="wrap">{{- i18n["resource.moveLeft"] }}<span\n                        class="icon"></span></span></button>\n                <button title="{{- i18n[\'resource.moveAllLeft\'] }}" class="button action square move toLeft up"\n                        disabled="disabled" name="allToLeft"><span class="wrap">{{- i18n["resource.moveAllLeft"] }}<span\n                        class="icon"></span></span></button>\n            </div>\n\n            <div class="column secondary" id="availableDataSources">\n                <label for="subDataSourcesTree" class="control">\n                    <span class="wrap">{{- i18n["resource.dataSource.virtual.availableDataSources"] }}</span>\n                    <br>\n\n                    <div class="control groupBox">\n                        <div class="content ">\n                            <div class="header ">\n                                <div class="title"></div>\n                            </div>\n                            <div class="body  ">\n                                <ul class="list collapsible folders" id="subDataSourcesTree"></ul>\n                            </div>\n                        </div>\n                    </div>\n                </label>\n            </div>\n\n            <div class="column primary" id="selectedDataSources">\n                <label for="selectedSubDataSourcesList" class="control">\n                    <span class="wrap">{{- i18n["resource.dataSource.virtual.selectedDataSources"] }}</span>\n                    <br>\n\n                    <div class="content">\n                        <ul class="list tabular twoColumn header" id="selectedDataSourcesHeader">\n                            <li>\n                                <div class="wrap">\n                                    <div class="column one">\n                                        <p class="dataSourceName">{{- i18n["resource.dataSource.name"] }}</p>\n                                    </div>\n                                    <div class="column two">\n                                        <p class="dataSourceID">{{- i18n["resource.dataSource.virtual.subDsId"] }}</p>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                        <div id="selectedSubDataSourcesListContainer">\n                            <ol class="list tabular twoColumn" id="selectedSubDataSourcesList"></ol>\n                        </div>\n                    </div>\n                </label>\n            </div>\n        </div>\n    </div>\n</fieldset>';
}),define("text!dataSource/template/dialog/dependenciesTemplate.htm",[],function(){return'<div id="dependencies" class="panel dialog overlay dependencies sizeable moveable hidden centered_vert centered_horz">\r\n    <div class="sizer diagonal"></div>\r\n    <div class="content hasFooter ">\r\n        <div class="header mover">\r\n            <div class="title">{{- i18n["dialog.dependencies.title"] }}</div>\r\n        </div>\r\n        <div class="body">\r\n            <p id="topMessage"></p>\r\n\r\n            <div class="control groupBox">\r\n                <ul id="dependenciesList"></ul>\r\n            </div>\r\n            <p id="bottomMessage" class="saveMessage"></p>\r\n        </div>\r\n        <div class="footer ">\r\n            <button id="dependenciesBtnSave" class="button action primary up">\r\n                <span class="wrap">{{- i18n["button.save"] }}</span>\r\n                <span class="icon"></span>\r\n            </button>\r\n            <button id="dependenciesBtnSaveAs" class="button action primary up">\r\n                <span class="wrap">{{- i18n["button.saveAs"] }}</span>\r\n                <span class="icon"></span>\r\n            </button>\r\n            <button id="dependenciesBtnOk" class="button action primary up">\r\n                <span class="wrap">{{- i18n["button.ok"] }}</span>\r\n                <span class="icon"></span>\r\n            </button>\r\n            <button id="dependenciesBtnCancel" class="button action up">\r\n                <span class="wrap">{{- i18n["button.cancel"] }}</span>\r\n                <span class="icon"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!dataSource/template/subDataSourceItemTemplate.htm",[],function(){return'<li class="leaf">\n    <div class="wrap button {{ if (readOnly) { }}disabled{{ } }}">\n        <div class="column one">\n            <p class="dataSourceName">{{- name }}</p>\n        </div>\n        <div class="column two">\n            <input type="text" size="30" class="dataSourceID" value="{{- id }}" {{ if (readOnly) { }}readonly="true"{{ } }}>\n            <div class="wrap validatorMessageContainer">\n                <span class="message warning"></span>\n            </div>\n        </div>\n    </div>\n</li>'}),define("dataSource/view/SubDataSourceItemView",["require","backbone","jquery","underscore","core.layout","components.list","common/util/featureDetection","text!dataSource/template/subDataSourceItemTemplate.htm","backbone.validation"],function(e){"use strict";var t=e("backbone"),a=e("jquery"),n=(e("underscore"),e("core.layout")),i=e("components.list"),r=(e("common/util/featureDetection"),e("text!dataSource/template/subDataSourceItemTemplate.htm")),s=e("backbone.validation");return t.View.extend({events:{"keyup input[type='text']":"updateDataSourceId","change input[type='text']":"updateDataSourceId"},initialize:function(e){var t=this.model.toJSON();this._listItem=new i.UnderscoreTemplatedListItem({template:r,cssClassName:n.LEAF_CLASS,value:t,tooltipText:this.model.get("uri")}),s.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0})},updateDataSourceId:function(e){var t=this.$("input[type='text']"),n={};n.id=a.trim(t.val()),this.model.set(n),this.model.validate(n),this._listItem.setValue(this.model.toJSON())},getListItem:function(){return this._listItem},setRootElement:function(){this.setElement(this._listItem._getElement())},fieldIsValid:function(e,t,a){var n=e.$("input[type='text']").parent();n.removeClass("error"),n.find(".validatorMessageContainer").removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,a,n){var i=e.$("input[type='text']").parent();i.addClass("error"),i.find(".validatorMessageContainer").addClass("error"),i.find(".message.warning").text(a)}})}),define("text!dataSource/template/subDataSourcesListTemplate.htm",[],function(){return'<ul id="selectedDataSourcesTemplate" class="list tabular twoColumn"></ul>'}),define("dataSource/view/SubDataSourcesListView",["require","backbone","underscore","components.list","dataSource/view/SubDataSourceItemView","common/util/featureDetection","text!dataSource/template/subDataSourcesListTemplate.htm","utils.common"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("components.list"),i=e("dataSource/view/SubDataSourceItemView"),r=e("common/util/featureDetection"),s=e("text!dataSource/template/subDataSourcesListTemplate.htm");return e("utils.common"),t.View.extend({events:{"blur input.dataSourceID":"disableSelection","focus input.dataSourceID":"enableSelection"},initialize:function(e){this.options=e,this.subviews=[],this._list=new n.UnderscoreTemplatedList("selectedSubDataSourcesList",{template:s,dragPattern:"",multiSelect:!0,selectOnMousedown:!r.supportsTouch}),this._list.observe("item:unselected",a.bind(this._itemUnselected,this)),this._list.observe("item:selected",a.bind(this._itemSelected,this)),this.setElement("#selectedSubDataSourcesList",!1),this.listenTo(this.collection,"reset",this.render)},disableSelection:function(){disableSelectionWithoutCursorStyle(this._list._getElement())},enableSelection:function(){enableSelection(this._list._getElement())},_itemUnselected:function(e){var t=this.getSubviewByListItem(e.memo.item),a=t?t.model:null;this.trigger("item:unselected",a)},_itemSelected:function(e){var t=this.getSubviewByListItem(e.memo.item),a=t?t.model:null;this.trigger("item:selected",a)},render:function(e,t){this._list.resetSelected();var n=[],r=[],s=[],o=!1,l=this.collection.map(function(e){return e.get("uri")}),c=this;if(t&&t.previousModels&&(s=a.map(t.previousModels,function(e){return e.get("uri")}),a.each(t.previousModels,function(e){a.include(l,e.get("uri"))||r.push(e)}),o=!0),this.collection.forEach(function(e){a.include(s,e.get("uri"))||n.push(e)}),n.length){if(a.each(n,function(e){var t=new i({model:e});c.subviews.push(t),c._list.addItems([t.getListItem()]),c._list.show()}),this._list.show(),o){var d=a.compact(a.map(n,a.bind(c.getSubviewByModel,c)));a.each(d,function(e){c._list.selectItem(e.getListItem(),!0)})}a.each(this.subviews,function(e){a.defer(a.bind(e.setRootElement,e))})}return r.length&&(a.each(r,function(e){c.removeSubview(e)}),this._list.show()),this},getSubviewByModel:function(e){return a.find(this.subviews,function(t){return t.model===e})},getList:function(){return this._list},getListLength:function(){return this._list._items.length},getSelectedModels:function(){var e=this._list.getSelectedItems(),t=a.compact(a.map(e,a.bind(this.getSubviewByListItem,this)));return a.map(t,function(e){return e.model})},getSubviewByListItem:function(e){return a.find(this.subviews,function(t){return t.getListItem()===e})},removeSubview:function(e){var t=this.getSubviewByModel(e);t&&(this._list.removeItems([t.getListItem()]),t.remove(),this._list.show())},removeSubviews:function(){var e=a.map(this.subviews,function(e){return e.getListItem()});this._list.removeItems(e),a.invoke(this.subviews,"remove")},remove:function(){this.removeSubviews(),t.View.prototype.remove.apply(this,arguments)}})}),define("dataSource/view/VirtualDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/VirtualDataSourceModel","dataSource/model/SubDataSourceModel","dynamicTree.utils","components.dependent.dialog","common/util/featureDetection","bundle!jasperserver_messages","text!dataSource/template/virtualSpecificTemplate.htm","text!dataSource/template/dialog/dependenciesTemplate.htm","dataSource/view/SubDataSourcesListView"],function(e){"use strict";var t=e("underscore"),a=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/VirtualDataSourceModel"),i=e("dataSource/model/SubDataSourceModel"),r=e("dynamicTree.utils"),s=e("components.dependent.dialog"),o=(e("common/util/featureDetection"),e("bundle!jasperserver_messages")),l=e("text!dataSource/template/virtualSpecificTemplate.htm"),c=e("text!dataSource/template/dialog/dependenciesTemplate.htm"),d=e("dataSource/view/SubDataSourcesListView");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.virtual.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.virtual.page.title.edit",hasDependedResources:!1,modelConstructor:n,events:{"keyup input[type='text'][class!='dataSourceID'], textarea":"updateModelProperty","change input[type='text'][class!='dataSourceID'], textarea, select":"updateModelProperty","click [name=toRight]":"chooseTreeNodes","click [name=toLeft]":"removeSelectedSubDataSources","click [name=allToLeft]":"removeAllSubDataSources"},initialize:function(e){this.dependentResources=e.dependentResources,this._subDataSourcesHiddenNodes={},this.dependentResources&&this.dependentResources.length>0&&(this.hasDependedResources=!0),a.prototype.initialize.apply(this,arguments),this.showDependentResources(),this.listenTo(this.model.subDataSources,"reset",this.updateAllToLeftButtonState)},chooseTreeNodes:function(e){e.preventDefault(),this.$("[name=toRight]").attr("disabled","disabled").removeClass("over");var a=this.subDataSourcesTree.selectedNodes,n=t.compact(t.map(a,function(e){return e?new i({name:e.name,id:e.param.id,uri:e.param.uri,readOnly:!1}):null}));this.model.subDataSources.reset(this.model.subDataSources.models.concat(n));var r=t.map(a,function(e){return e.param.uri});this._hideAvailableSubDataSources(r)},removeAllSubDataSources:function(e){if(e.preventDefault(),!this.hasDependedResources){this.subDataSourcesTree._deselectAllNodes();var t=this;this.model.subDataSources.forEach(function(e){t._unhideAvailableSubDataSources(e.get("uri"))}),this.model.subDataSources.reset([]),this.updateRightButtonState()}},removeSelectedSubDataSources:function(e){e.preventDefault(),this.subDataSourcesTree._deselectAllNodes();var a=this.selectedSubDataSourcesList.getSelectedModels(),n=this,i=[];t.each(a,function(e){n._unhideAvailableSubDataSources(e.get("uri"))}),this.model.subDataSources.forEach(function(e){t.include(a,e)||i.push(e)}),this.model.subDataSources.reset(i),this.updateRightButtonState()},updateAllToLeftButtonState:function(){this.hasDependedResources||0===this.selectedSubDataSourcesList.getListLength()?this.$("[name=allToLeft]").attr("disabled","disabled").removeClass("over"):this.$("[name=allToLeft]").removeAttr("disabled")},updateRightButtonState:function(){for(var e=this.$("[name=toRight]"),t=this.subDataSourcesTree.selectedNodes,a=!1,n=!1,i=0;i<t.length;i++){if(t[i].isParent()||this.model.subDataSources.where({uri:t[i].param.uri}).length){n=!0;break}a=!0}a&&!n?e.removeAttr("disabled"):e.attr("disabled","disabled").removeClass("over")},updateLeftButtonState:function(){var e=this.selectedSubDataSourcesList.getSelectedModels(),t=this.$("[name=toLeft]");e.length>0?t.removeAttr("disabled"):t.attr("disabled","disabled").removeClass("over")},render:function(){return this.$el.empty(),this.renderVirtualSpecificSection(),this.updateAllToLeftButtonState(),this},showDependentResources:function(){this.hasDependedResources&&s.show(this.dependentResources,{},{canSave:!1,okOnly:!0,topMessage:o["resource.dataSource.virtual.dependencies.top.message"],bottomMessage:o["resource.dataSource.virtual.dependencies.bottom.message"]})},renderVirtualSpecificSection:function(){var e=this;this.$el.append(t.template(l,this.templateData())),this.$el.append(t.template(c,this.templateData())),this.selectedSubDataSourcesList=new d({collection:this.model.subDataSources}),this.listenTo(this.selectedSubDataSourcesList,"item:unselected item:selected",t.bind(this.updateLeftButtonState,this)),this.selectedSubDataSourcesList.render(),this.subDataSourcesTree=r.createRepositoryTree("subDataSourcesTree",{treeId:"subDataSourcesTree",providerId:"joinableDsTreeDataProvider",selectLeavesOnly:!0,multiSelectEnabled:!0}),this.subDataSourcesTree.observe("leaf:dblclick",t.bind(this.chooseTreeNodes,this)),this.subDataSourcesTree.observe("node:selected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("node:unselected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("leaf:selected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("leaf:unselected",t.bind(this.updateRightButtonState,this));var a=[];this.model.subDataSources.length&&(a=this.model.subDataSources.map(function(e){return e.get("uri")})),this.subDataSourcesTree.showTreePrefetchNodes(a.join(","),function(t){e._hideAvailableSubDataSources(a)})},_hideAvailableSubDataSources:function(e){var a=this;if(t.isArray(e))t.each(e,function(e){a._hideAvailableSubDataSources(e)});else{var n=this.subDataSourcesTree.findLastLoadedNode(e);this._subDataSourcesHiddenNodes[e]={parent:n.parent,child:n};var i=n.parent;i.removeChild(n),i.resortChilds()}},_unhideAvailableSubDataSources:function(e){function a(e,t){e.processNodePath(t,function(t){t.parent&&e.rootNode!=t.parent&&e.getState(t.parent.id)==r.TreeNode.State.CLOSED&&t.parent.handleNode()})}var n=this;if(t.isArray(e))t.each(e,function(e){n._unhideAvailableSubDataSources(e)});else{var i=this._subDataSourcesHiddenNodes[e];i&&(i.parent.addChild(i.child),i.parent.resortChilds(),i.parent.refreshNode(),a(this.subDataSourcesTree,e),i.child.select())}},remove:function(){this.selectedSubDataSourcesList&&this.selectedSubDataSourcesList.remove(),a.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/BeanDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),a=e("dataSource/enum/connectionTypes"),n=e("bi/repository/enum/repositoryResourceTypes"),i=e("underscore"),r=e("bundle!jasperserver_messages");return t.extend({type:n.BEAN_DATA_SOURCE,defaults:function(){var e={};return i.extend(e,t.prototype.defaults,{beanName:"",beanMethod:"",connectionType:a.BEAN}),e}(),validation:function(){var e={};return i.extend(e,t.prototype.validation,{beanName:[{required:!0,msg:r["ReportDataSourceValidator.error.not.empty.reportDataSource.beanName"]}],beanMethod:[{required:!0,msg:r["ReportDataSourceValidator.error.not.empty.reportDataSource.beanMethod"]}]}),e}()})}),define("text!dataSource/template/beanSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <legend class="offLeft"><span></span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.bean.name\'] }}" class="control input text">\n        <span class="wrap">{{- i18n["resource.dataSource.bean.name"]}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.beanName }}" name="beanName">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.bean.hint1"]}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.bean.method\'] }}" class="control input text">\n        <span class="wrap">{{- i18n["resource.dataSource.bean.method"]}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.beanMethod }}" name="beanMethod">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.bean.hint2"]}}</span>\n    </label>\n\n</fieldset>'}),define("dataSource/view/BeanDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/BeanDataSourceModel","text!dataSource/template/beanSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/BeanDataSourceModel"),i=e("text!dataSource/template/beanSpecificTemplate.htm");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.bean.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.bean.page.title.edit",modelConstructor:n,render:function(){return this.$el.empty(),this.renderBeanSpecificSection(),this.renderTestConnectionSection(),this},renderBeanSpecificSection:function(){this.$el.append(t.template(i,this.templateData()))}})}),define("text!dataSource/template/mongoDbSpecificTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n\n	<legend class="offLeft"><span>Access Properties</span></legend>\n\n\n\n\n	<label title="MongoDB URI (required)" class="control input text">\n		<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.mongoURI\'] }} ({{- i18n[\'required.field\']}}):</span>\n		<input name="mongoURI" type="text" size="40" class="fnormal" value="{{- modelAttributes.mongoURI }}">\n		<span class="message hint"></span>\n		<span class="message warning"></span>\n	</label>\n\n\n	<label title="User Name (optional)" class="control input text">\n		<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.username\'] }} ({{- i18n[\'optional.field\']}}):</span>\n		<input name="username" type="text" size="40" class="fnormal" value="{{- modelAttributes.username }}">\n		<span class="message hint"></span>\n		<span class="message warning"></span>\n	</label>\n\n	<label title="Password (optional)" class="control input text">\n		<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.password\'] }} ({{- i18n[\'optional.field\']}}):</span>\n		<input name="password" type="password" size="40" class="fnormal" value="{{- modelAttributes.password }}">\n		<span class="message hint"></span>\n		<span class="message warning"></span>\n	</label>\n\n</fieldset>'}),define("dataSource/view/MongoDbDataSourceView",["require","underscore","dataSource/view/CustomDataSourceView","text!dataSource/template/mongoDbSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("dataSource/view/CustomDataSourceView"),n=e("text!dataSource/template/mongoDbSpecificTemplate.htm");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.mongo.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.mongo.page.title.edit",render:function(){return this.$el.empty(),this.renderMongoDbSpecificSection(),this.renderTestConnectionSection(),this},renderMongoDbSpecificSection:function(){this.$el.append(t.template(n,this.templateData()))}})}),define("dataSource/enum/mongoJdbcFileSourceTypes",{REPOSITORY:{name:"repository",label:"resource.datasource.text.fileLocation.options.repository"},SERVER_FILE_SYSTEM:{name:"serverFileSystem",label:"resource.datasource.text.fileLocation.options.serverFileSystem"}}),define("restResource",["require","request","requestSettings","underscore","jrs.configs"],function(e){"use strict";var t=e("request"),a=e("requestSettings"),n=e("underscore"),i=e("jrs.configs"),r=i.contextPath+"/rest_v2/",s=function(e,i){var s=n.extend({},a,{type:"GET",dataType:"json",url:r+e});t(s).fail(function(){i(null)}).then(function(e){i(e)})};return s.load=function(e,t,a,n){return n.isBuild?void a():void s(e,a)},s}),define("dataSource/model/MongoDbJdbcDataSourceModel",["require","dataSource/model/CustomDataSourceModel","dataSource/enum/connectionTypes","dataSource/enum/mongoJdbcFileSourceTypes","bi/repository/enum/repositoryResourceTypes","restResource!hypermedia/workflows?parentName=admin","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/CustomDataSourceModel"),a=(e("dataSource/enum/connectionTypes"),e("dataSource/enum/mongoJdbcFileSourceTypes")),n=(e("bi/repository/enum/repositoryResourceTypes"),e("restResource!hypermedia/workflows?parentName=admin")),i=e("underscore"),r=e("bundle!jasperserver_messages"),s=t.extend({fileTypes:["pdf","config"],defaults:function(){var e={};return i.extend(e,t.prototype.defaults,{dataSourceName:"mongoDbJDBCDataSource",fileSourceType:"repository",timeZone:""}),e}(),validation:function(){var e={};return i.extend(e,t.prototype.validation,{serverAddress:[{required:!0,msg:r["ReportDataSourceValidator.error.not.empty.host"]}],portNumber:[{required:!0,msg:r["ReportDataSourceValidator.error.not.empty.server.port"]}],repositoryFileName:[{fn:function(e,t,a){return!a.autoSchemaDefinition&&"repository"===a.fileSourceType&&(i.isNull(e)||i.isUndefined(e)||i.isString(e)&&""===e)?r["fillParameters.error.mandatoryField"]:null}},{fn:function(e,t,a){return a.autoSchemaDefinition||"repository"!==a.fileSourceType||i.isString(e)&&""!==e&&0===e.indexOf("/")?null:r["resource.file.invalid.path"]}}],serverFileName:[{fn:function(e,t,a){return!a.autoSchemaDefinition&&"serverFileSystem"===a.fileSourceType&&(i.isNull(e)||i.isUndefined(e)||i.isString(e)&&""===e)?r["fillParameters.error.mandatoryField"]:null}}]}),e}(),isLocalFileSystemAccessAllowed:function(){return n&&n._embedded&&n._embedded.workflow&&i.find(n._embedded.workflow,function(e){return"serverSettings"===e.name})},parse:function(){var e=t.prototype.parse.apply(this,arguments);if(i.isString(e.fileName)){if(-1!==e.fileName.indexOf("repo:")){var n=e.fileName.split(":");e.fileSourceType=a.REPOSITORY.name,e.repositoryFileName=n[1]}else e.fileSourceType=a.SERVER_FILE_SYSTEM.name,e.serverFileName=e.fileName;delete e.fileName,e.autoSchemaDefinition=!1}else e.autoSchemaDefinition=!0;return e.timezone=e.timeZone,delete e.timeZone,e},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return e.fileName=e.serverFileName,e},customFieldsToJSON:function(e,n){return e.fileSourceType===a.REPOSITORY.name?e.fileName="repo:"+e.repositoryFileName:e.fileSourceType===a.SERVER_FILE_SYSTEM.name&&(e.fileName=e.serverFileName),delete e.repositoryFileName,delete e.serverFileName,e.autoSchemaDefinition&&(delete e.fileName,delete e.fileSourceType),delete e.autoSchemaDefinition,e.timeZone=e.timezone,delete e.timezone,e=t.prototype.customFieldsToJSON.call(this,e,n)},resetValidation:function(){this.validation=i.clone(s.prototype.validation)}});return s}),define("text!dataSource/template/mongoDbJdbcSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields mongoDbJdbcSpecificFields">\n\n	<legend class="offLeft"><span></span></legend>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.host\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.host"]}} ({{- i18n[\'required.field\']}}):</span>\n		<input type="text" value="{{- modelAttributes.serverAddress }}" name="serverAddress">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.port.number\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.port.number"]}} ({{- i18n[\'required.field\']}}):</span>\n		<input type="text" value="{{- modelAttributes.portNumber }}" name="portNumber">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.database.name\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.database.name"]}}:</span>\n		<input type="text" value="{{- modelAttributes.database }}" name="database">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.user.name\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.user.name"]}}:</span>\n		<input type="text" value="{{- modelAttributes.username }}" name="username">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.password\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.password"]}}:</span>\n		<input type="password" value="{{- modelAttributes.password }}" name="password">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<label title="{{- i18n[\'resource.datasource.mongoJdbc.connection.options\'] }}" class="control input text">\n		<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.connection.options"]}}:</span>\n		<input type="text" value="{{- modelAttributes.connectionOptions }}" name="connectionOptions">\n		<span class="message warning"></span>\n		<span class="message hint"></span>\n	</label>\n\n	<div class="control checkBox">\n		<label for="__jrs_autoSchemaDefinitionCheckbox" title="{{- i18n[\'resource.datasource.mongoJdbc.schema.auto.generate\']}}" class="wrap">\n			{{- i18n[\'resource.datasource.mongoJdbc.schema.auto.generate\']}}\n		</label>\n		<input type="checkbox" id="__jrs_autoSchemaDefinitionCheckbox" name="autoSchemaDefinition" {{ if (modelAttributes.autoSchemaDefinition) { }}checked{{ } }} {{- isEditMode ? \'disabled="disabled"\' : \'\'}} >\n	</div>\n\n	<div name="fileLocationContainer" class="section"></div>\n</fieldset>'}),define("text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm",[],function(){return'<div name="fileLocationContainer" class="">\n\n	{{ if (_.keys(fileSourceTypeOptions).length > 1) { }}\n	<div class="">\n		<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.source\'] }}" class="control select">\n			<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.source\'] }}:</span>\n			<select id="fileSourceSelect" name="fileSourceType" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled="disabled"\' : \'\'}}>\n			{{ _.each(fileSourceTypeOptions, function(item) { }}\n				<option value="{{- item.name }}" {{- (item.name == modelAttributes.fileSourceType) ? "selected=\'selected\'" : "" }} > {{- i18n[item.label] }}</option>\n			{{ }); }}\n			</select>\n			<span class="message warning"></span>\n		</label>\n	</div>\n    {{ } }}\n\n	{{ if (modelAttributes.fileSourceType === "repository") { }}\n\n	<div id="repositoryInput" class="">\n		<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.repository.fileLocation\']}}" class="control input text">\n			<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.repository.fileLocation\']}}{{ if (!modelAttributes.autoSchemaDefinition) { }} ({{- i18n[\'required.field\']}}){{ } }}:</span>\n			<input type="text" value="{{- modelAttributes.repositoryFileName }}" name="repositoryFileName" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled="disabled"\' : \'\'}}>\n			<button class="button action" type="button" name="repositoryBrowserButton"  {{- isEditMode || modelAttributes.autoSchemaDefinition ? \'disabled="disabled"\' : \'\'}}>\n			       <span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...<span class="icon"></span></span>\n			</button>\n			<span class="message warning"></span>\n		</label>\n	</div>\n\n	{{ } else { }}\n\n	<div id="serverInput" class="">\n		<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.serverFileSystem.fileLocation\']}}" class="control browser">\n			<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.serverFileSystem.fileLocation\']}}{{ if (!modelAttributes.autoSchemaDefinition) { }} ({{- i18n[\'required.field\']}}){{ } }}:</span>\n			<input type="text" value="{{- modelAttributes.serverFileName }}" name="serverFileName" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled="disabled"\' : \'\'}}>\n			<span class="message warning"></span>\n		</label>\n	</div>\n\n	{{ } }}\n</div>'}),define("dataSource/view/MongoDbJdbcDataSourceView",["require","underscore","jquery","bundle!all","resource.locate","dataSource/enum/mongoJdbcFileSourceTypes","dataSource/view/CustomDataSourceView","dataSource/model/MongoDbJdbcDataSourceModel","text!dataSource/template/mongoDbJdbcSpecificTemplate.htm","text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm","text!common/templates/components.pickers.htm"],function(e){"use strict";var t=e("underscore"),a=e("jquery"),n=e("bundle!all"),i=e("resource.locate"),r=e("dataSource/enum/mongoJdbcFileSourceTypes"),s=e("dataSource/view/CustomDataSourceView"),o=e("dataSource/model/MongoDbJdbcDataSourceModel"),l=e("text!dataSource/template/mongoDbJdbcSpecificTemplate.htm"),c=e("text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm"),d=e("text!common/templates/components.pickers.htm");return s.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.mongoJdbc.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.mongoJdbc.page.title.edit",modelConstructor:o,browseButton:!1,events:function(){var e=t.extend({},s.prototype.events);return e["change [name=fileSourceType]"]="changeFileSourceType",e["change [name=autoSchemaDefinition]"]="changeAutoSchemaDefinition",e},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:serverFileName",this.adjustFileSystemConnectButton)},changeFileSourceType:function(){t.defer(t.bind(function(){this.renderFileLocationSection()},this))},changeAutoSchemaDefinition:function(){t.defer(t.bind(function(){this.renderFileLocationSection()},this))},render:function(){return this.$el.empty(),this.renderMongoDbSpecificSection(),this.renderFileLocationSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this.$el.find("[name=serverAddress]").focus(),this},validationMethodOnSaveClick:function(e){!this.model.get("parentFolderUri")&&this.model.set("parentFolderUri","/"),!this.model.get("label")&&this.model.set("label",a("[name=dataSourceType] option:selected").text());var i=this;this.model.save({},{dryRun:!0}).fail(function(e){var a=!1;try{a=JSON.parse(e.responseText)}catch(r){}var s=t.isArray(a)?a:[a];t.each(s,function(e){e&&e.errorCode&&e.parameters&&("illegal.parameter.value.error"===e.errorCode&&"resourceReference.uri"===e.parameters[0]?i.fieldIsInvalid(i,"repositoryFileName",n["resource.file.invalid.path"],"name"):"invalid.server.file.system.path"===e.errorCode&&"textDataSource.propertyMap[fileName]"===e.parameters[0]&&i.fieldIsInvalid(i,"serverFileName",n["resource.file.invalid.path"],"name"))})}).done(e)},templateData:function(){var e=t.extend({},r);return this.model.isLocalFileSystemAccessAllowed()||delete e.SERVER_FILE_SYSTEM,t.extend(s.prototype.templateData.apply(this,arguments),{fileSourceTypeOptions:e})},renderMongoDbSpecificSection:function(){this.$el.append(t.template(l,this.templateData()))},renderFileLocationSection:function(){this.renderOrAddAnyBlock(this.$el.find("[name=fileLocationContainer]"),t.template(c,this.templateData())),this.browseButton&&(this.browseButton.remove(),this.browseButton=!1),"repository"!==this.model.get("fileSourceType")||this.model.get("autoSchemaDefinition")||(this.browseButton=i.initialize({i18n:n,template:d,resourceInput:this.$el.find("[name=repositoryFileName]")[0],browseButton:this.$el.find("[name=repositoryBrowserButton]")[0],providerId:"fileResourceBaseTreeDataProvider",dialogTitle:n["resource.Add.Files.Title"],selectLeavesOnly:!0,onChange:t.bind(function(e){this.model.set("repositoryFileName",e),this.model.validate({repositoryFileName:e})},this)}))}})}),define("text!dataSource/template/InternalDiagnosticTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n	{{- i18n["resource.datasource.internalDiagnostic.line1"] }}\n	<br/>\n	{{- i18n["resource.datasource.internalDiagnostic.line2"] }}\n	<br/>\n	{{- i18n["resource.datasource.internalDiagnostic.line3"] }}\n	<br/>\n	<br/>\n	<strong>{{- i18n["resource.datasource.internalDiagnostic.line4"] }}</strong>\n</fieldset>'}),define("dataSource/view/DiagnosticCustomDataSourceView",["require","dataSource/view/BaseDataSourceView","underscore","bundle!all","dataSource/model/CustomDataSourceModel","text!dataSource/template/InternalDiagnosticTemplate.htm"],function(e){"use strict";var t=e("dataSource/view/BaseDataSourceView"),a=e("underscore"),n=e("bundle!all"),i=e("dataSource/model/CustomDataSourceModel"),r=e("text!dataSource/template/InternalDiagnosticTemplate.htm");return t.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jndi.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jndi.page.title.edit",modelConstructor:i,render:function(){
return this.$el.empty(),this.renderBlankBody(),this},renderBlankBody:function(){this.$el.append(a.template(r,{i18n:n}))}})}),define("dataSource/factory/dataSourceViewFactory",["require","dataSource/view/CustomDataSourceView","dataSource/enum/dataSourceResourceTypes","dataSource/enum/customDataSourceTypes","dataSource/view/JdbcDataSourceView","dataSource/view/JndiDataSourceView","dataSource/view/AwsDataSourceView","dataSource/view/AzureSqlDataSourceView","dataSource/view/VirtualDataSourceView","dataSource/view/BeanDataSourceView","dataSource/view/MongoDbDataSourceView","dataSource/view/MongoDbJdbcDataSourceView","dataSource/view/DiagnosticCustomDataSourceView"],function(e){"use strict";var t=e("dataSource/view/CustomDataSourceView"),a=e("dataSource/enum/dataSourceResourceTypes"),n=e("dataSource/enum/customDataSourceTypes"),i=e("dataSource/view/JdbcDataSourceView"),r=e("dataSource/view/JndiDataSourceView"),s=e("dataSource/view/AwsDataSourceView"),o=e("dataSource/view/AzureSqlDataSourceView"),l=e("dataSource/view/VirtualDataSourceView"),c=e("dataSource/view/BeanDataSourceView"),d=e("dataSource/view/MongoDbDataSourceView"),u=e("dataSource/view/MongoDbJdbcDataSourceView"),p=e("dataSource/view/DiagnosticCustomDataSourceView"),A={};return A[a.JDBC.toLowerCase()]=i,A[a.JNDI.toLowerCase()]=r,A[a.AWS.toLowerCase()]=s,A[a.AZURE_SQL.toLowerCase()]=o,A[a.VIRTUAL.toLowerCase()]=l,A[a.BEAN.toLowerCase()]=c,A[a.MONGODB]=d,A[a.MONGODBJDBC]=u,A[n.DIAGNOSTIC]=p,{getView:function(e){var a;return e.dataSourceType?(a=A[e.dataSourceType],a||(a=t)):a=i,new a(e)},getViewType:function(e,t){var n=/application\/repository\.([^+]+)\+json/.exec(e),i=n&&n[1]?n[1].toLowerCase():e.toLowerCase();return a.CUSTOM.toLowerCase()===i&&(i=t.dataSourceName),i}}}),define("common/component/dialog/DialogWithModelInputValidation",["require","jquery","underscore","./Dialog","backbone.validation"],function(e){"use strict";var t=e("jquery"),a=e("underscore"),n=e("./Dialog"),i=e("backbone.validation");return n.extend({events:a.extend({"keyup input[type=text], textarea, select":"updateModelProperty","change input[type=text], input:checkbox, textarea, select":"updateModelProperty"},n.prototype.events),initialize:function(){this._bindEvents(),n.prototype.initialize.apply(this,arguments)},_bindEvents:function(){this.on("resize",this._getBaseHeight)},_unbindEvents:function(){this.off("resize",this._getBaseHeight)},updateModelProperty:function(e){var a={},n=t(e.target);"input"===n[0].tagName.toLowerCase()&&"text"===n.attr("type")||"select"===n[0].tagName.toLowerCase()&&"true"!==n.attr("multiple")||"textarea"===n[0].tagName.toLowerCase()?a[n.attr("name")]=t.trim(n.val()):"input"===n[0].tagName.toLowerCase()&&"checkbox"===n.attr("type")&&(a[n.attr("name")]=n.is(":checked")),this.beforeModelPropertySet&&this.beforeModelPropertySet(a),this.model.set(a),this.model.validate(a)},bindValidation:function(){i.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"})},unbindValidation:function(){i.unbind(this)},fieldIsValid:function(e,t,a){var n=e.$("["+a+'="'+t+'"]').parent();n.removeClass("error"),n.find(".message.warning").text(""),e._updateHeight()},fieldIsInvalid:function(e,t,a,n){var i=e.$("["+n+'="'+t+'"]').parent();i.addClass("error"),i.find(".message.warning").text(a.toString()),e._updateHeight()},validField:function(e){var t=this.$(e).parent();t.removeClass("error"),t.find(".message.warning").text("")},invalidField:function(e,t){var a=this.$(e).parent();a.addClass("error"),a.find(".message.warning").text(t.toString())},clearValidationErrors:function(){this.$("label").removeClass("error"),this.$(".message.warning").text(""),this._updateHeight()},remove:function(){this.unbindValidation(),this._unbindEvents(),n.prototype.remove.apply(this,arguments)},_updateHeight:function(){var e=this._getBaseHeight(this.$el.height()),t=this._getAllErrorsHeight();0!==t?this.$el.height(t+e):this.$el.height(e)},_getBaseHeight:function(e){var t=this._getAllErrorsHeight();return a.isNumber(e)&&a.isUndefined(this._previousHeight)?this._previousHeight=e:a.isObject(e)&&e.timeStamp&&(this._previousHeight=t?this.$el.height()-t:this.$el.height()),this._previousHeight},_getAllErrorsHeight:function(){var e=0;return this.$(".message.warning").each(function(){e+=t(this).height()}),e}})}),define("common/component/panel/trait/collapsiblePanelTrait",["require","underscore","jquery","./abstractPanelTrait"],function(e){"use strict";function t(e,t){!t&&e.stopPropagation(),this.onCollapseControlPressed?this.onCollapseControlPressed(e):this.toggleCollapsedState()}function a(){this.$collapser&&this.$collapser.off("mousedown"),this.$el&&this.$el.find(this.expandOnDblClickSelector).off("dblclick")}var n=e("underscore"),i=e("jquery"),r=e("./abstractPanelTrait");return n.extend({},r,{onConstructor:function(e){this.collapserClass=e.collapserClass||"buttonIconToggle",this.collapserSelector=e.collapserSelector||".buttonIconToggle",this.collapsiblePanelClass=e.collapsiblePanelClass||"collapsiblePanel",this.expandOnDblClickSelector=e.expandOnDblClickSelector||"> p:first",this.allowEventPropagation=!!e.allowMouseDownEventPropagation,this.onCollapseControlPressed=e.onCollapseControlPressed},beforeSetElement:function(){a.call(this)},afterSetElement:function(){this.$el.addClass(this.collapsiblePanelClass),this.$collapser=this.$(this.collapserSelector),this.$collapser.length||(this.$collapser=i("<button></button>").addClass(this.collapserClass),this.$("> .header").prepend(this.$collapser)),this.$collapser.on("mousedown",n.bind(t,this,this.allowEventPropagation)),this.$el.find(this.expandOnDblClickSelector).on("dblclick",n.bind(t,this))},onRemove:function(){a.call(this)}})}),define("common/component/tree/trait/addToSelectionModelTrait",["require","underscore","common/component/list/model/ScalableListModel"],function(e){"use strict";var t=e("underscore"),a=e("common/component/list/model/ScalableListModel");return{afterFetchComplete:function(e,n){a.prototype.afterFetchComplete.apply(this,arguments);var i,r;t.each(e,function(e,t){e.addToSelection&&(e.selected=!0,i=e.value,r=this.get("bufferStartIndex")+t,this.selectionContains&&!this.selectionContains(i,r)&&this.addValueToSelection(i,r),delete e.addToSelection)},this)}}}),define("common/component/tree/plugin/TreePlugin",["require","backbone"],function(e){"use strict";var t=e("backbone");return t.View.extend({dataLayerObtained:function(){},itemsRendered:function(){}},{processors:null,treeInitialized:function(){},treeRemoved:function(){}})}),define("text!common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("common/component/tooltip/Tooltip",["require","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(e){"use strict";var t=e("jquery"),a=e("underscore"),n=e("backbone"),i=e("text!./template/tooltipTemplate.htm");return n.View.extend({template:a.template(i),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(e){if(e||(e={}),!e.attachTo||0===t(e.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!e.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=t(e.attachTo),this.$attachTo[0].tooltip=this,e.delay&&(this.delay=e.delay),e.offset&&(this.offset=e.offset),e.attribute&&(this.attribute=e.attribute),e.cssClasses&&(this.cssClasses=e.cssClasses),this.contentTemplate=e.contentTemplate,this.i18n=e.i18n||{},!a.isUndefined(e.triggerEvents)&&(this.triggerEvents=e.triggerEvents),this.selector="["+this.attribute+"]",a.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.constructor.apply(this,arguments)},_render:function(e,t,i){if(this._event){e=e instanceof n.Model?e.toJSON():e;var r=a.template(this.contentTemplate)({model:e,i18n:this.i18n,options:t||{}});this.$el.find(".body").empty().append(r),this._showTooltip()}i.resolve()},show:function(e,n){var i=new t.Deferred;return this._timer=setTimeout(a.bind(this._render,this,e,n,i),this.delay),i},_showTooltip:function(){t("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var e=this.$el.innerHeight(),a=this.$el.innerWidth(),n=t(window).height(),i=t(window).width(),r=this.offset.y,s=this.offset.x;e+this._event.pageY+this.offset.y+3>=n&&(r=-this.offset.y-e),a+this._event.pageX+this.offset.x+3>=i&&(s=-this.offset.x-a),this.$el.css({top:this._event.pageY+r,left:this._event.pageX+s})},_onMouseMove:function(e){this._event=e},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.remove.apply(this,arguments)}},{attachTo:function(e,t){var a=this;return t||(t={}),t.attachTo=e||"body",new a(t)},detachFrom:function(e){e=t(e)[0],e.tooltip&&e.tooltip.remove()}})}),define("common/component/tree/plugin/TooltipPlugin",["require","./TreePlugin","underscore","common/component/tooltip/Tooltip"],function(e){"use strict";var t=e("./TreePlugin"),a=e("underscore"),n=e("common/component/tooltip/Tooltip");return t.extend({initialize:function(e){this.tooltip=n.attachTo(e.attachTo,a.omit(e,"el")),this.listensToList=!1,t.prototype.initialize.apply(this,arguments)},itemsRendered:function(e,t){var a=this;this.listensToList||(this.listensToList=!0,this.listenTo(t,"list:item:mouseover",function(e,t){a.tooltip.show(e)}),this.listenTo(t,"list:item:mouseout",function(){a.tooltip.hide()}))},remove:function(){n.detachFrom(this.$el),this.tooltip.remove(),t.prototype.remove.apply(this,arguments)}})}),define("common/component/tree/dataprovider/DataProviderWithSearchCache",["require","underscore","jquery"],function(e){"use strict";var t=e("underscore"),a=e("jquery"),n=999,i=50,r=50,s="criteria",o=2147483647,l=function(e){t.bindAll(this,"getData"),e=e||{},this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.pageSize=e.pageSize||n,this.criteriaKey=e.searchKey||s,this.maxSearchCacheSize=e.maxSearchCacheSize||i,this.getDataByCriteriaHolder={},this.controlGetTotal="undefined"!=typeof e.controlGetTotal?e.controlGetTotal:!1,this.dataConverter=e.dataConverter,this.saveLastCriteria="undefined"!=typeof e.saveLastCriteria?e.saveLastCriteria:!1,this.lastCriteria=null,this.serialRequestsDelay="undefined"!=typeof e.serialRequestsDelay?e.serialRequestsDelay:r,this.serialRequestsDelayedPromise=null,this.request=e.request};return t.extend(l.prototype,{getData:function(e){if(e=e||{},e[this.criteriaKey])return this._getDataByCriteria(e[this.criteriaKey])(e);if("undefined"==typeof e[this.criteriaKey]&&this.saveLastCriteria&&this.lastCriteria)return this._getDataByCriteria(this.lastCriteria)(e);this.lastCriteria=null;var t=a.Deferred(),n=this._getPagesToLoad(e);return n?this._requestData(e,n,t):this._resolveDeferredUsingDataFromCache(t,e),t.promise()},clear:function(){this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.getDataByCriteriaHolder={},this.lastCriteria=null},_requestData:function(e,a,n){var i=(a[a.length-1]-a[0]+1)*this.pageSize,r=t.extend({},e,{offset:a[0]*this.pageSize,limit:i});this.controlGetTotal&&(r.skipGetTotal=!0),i>=o/this.pageSize*this.pageSize&&delete r.limit,this.controlGetTotal&&"number"!=typeof this.dataCacheTotal&&delete r.skipGetTotal,this.serialRequestsDelay>0?(clearTimeout(this.deferredTimeout),this.deferredTimeout=setTimeout(t.bind(this._requestDataDeferred,this,e,r,n),this.serialRequestsDelay)):this._requestDataDeferred(e,r,n)},_requestDataDeferred:function(e,a,n){var i=this._getPagesToLoad(e);i?this.serialRequestsDelayedPromise&&t.isEqual(a,this.serialRequestsDelayedPromise.query)?this.serialRequestsDelayedPromise.promise.done(n.resolve).fail(n.reject):(this.serialRequestsDelayedPromise={promise:n.promise(),query:a},this.request(a).done(t.bind(this._requestDone,this,e,a,n)).fail(n.reject)):this._resolveDeferredUsingDataFromCache(n,e)},_requestDone:function(e,t,a,n){this._putDataToCache(t,n),this.serialRequestsDelayedPromise=null,this._resolveDeferredUsingDataFromCache(a,e)},_resolveDeferredUsingDataFromCache:function(e,t){var a=this._getDataFromCache(t);e.resolve({total:this.dataCacheTotal,data:a})},_getPagesToLoad:function(e){var t,a=this._convertLimitOffsetToFirstLast(e),n=this._findPageIndex(a.first),i=this._findPageIndex(a.last),r=[];for(t=n;i>=t;t++)if(!this.dataCachePages[t]){r.push(t);break}for(t=i;t>=n;t--)if(!this.dataCachePages[t]){r.push(t);break}return r.length>0?r:null},_findPageIndex:function(e){return Math.floor(e/this.pageSize)},_convertLimitOffsetToFirstLast:function(e){var t=e&&e.offset?e.offset:0,a=e&&e.limit?t+e.limit-1:this.dataCacheTotal?this.dataCacheTotal-1:o;return this.dataCacheTotal&&a>this.dataCacheTotal-1&&(a=this.dataCacheTotal-1),{first:t,last:a}},_getDataFromCache:function(e){e=t.defaults(e,{offset:0,limit:o});var a=Math.max(0,e.offset),n=Math.min(a+e.limit,this.dataCacheTotal);return this.dataCache.slice(a,n)},_putDataToCache:function(e,t){var a;for("undefined"!=typeof t.total&&(this.dataCacheTotal=t.total),e.limit=e.limit||o,a=0;a<t.data.length;a++)this.dataCache[a+e.offset]=this.dataConverter?this.dataConverter(t.data[a]):t.data[a];var n=e.offset/this.pageSize,i=Math.floor((Math.min(e.limit,t.data.length)+e.offset-1)/this.pageSize);for(a=n;i>=a;a++)this.dataCachePages[a]=!0},_getDataByCriteria:function(e){if(!this.getDataByCriteriaHolder[e]){var t,a=Number.MAX_VALUE,n=0,i=0;for(var r in this.getDataByCriteriaHolder)if(this.getDataByCriteriaHolder.hasOwnProperty(r)){i+=1;var s=this.getDataByCriteriaHolder[r];s.index<a&&(a=s.index,t=r),s.index>n&&(n=s.index)}i>=this.maxSearchCacheSize&&delete this.getDataByCriteriaHolder[t],this.getDataByCriteriaHolder[e]={getData:this._createDataProviderForCriteria(e),index:n+1}}return this.lastCriteria=e,this.getDataByCriteriaHolder[e].getData},_createDataProviderForCriteria:function(e){var a=this.request,n=this,i=new l({pageSize:this.pageSize,dataConverter:this.dataConverter,serialRequestsDelay:this.serialRequestsDelay,searchKey:this.criteriaKey,controlGetTotal:this.controlGetTotal,request:function(i){var r=t.extend({},i);return r[n.criteriaKey]=e,a(r)}}),r=i.getData;return i.getData=function(e){var a=t.extend({},e);return delete a[n.criteriaKey],r.call(i,a)},i.getData}}),l}),define("common/component/tree/TreeLevel",["require","underscore","common/component/panel/Panel","common/component/panel/trait/collapsiblePanelTrait","common/component/list/view/ListWithSelection","common/component/tree/trait/addToSelectionModelTrait","common/component/list/model/ListWithSelectionModel","common/component/tree/plugin/TooltipPlugin","./dataprovider/DataProviderWithSearchCache"],function(e){"use strict";function t(){this.$el.removeClass(this.loadingClass).addClass(this.openClass),l.invoke(this.plugins,"itemsRendered",this.list.model,this.list);var e=this.list.$("> .j-view-port-chunk > ul > li").addClass(this.cid).length,t=l.isFunction(this.levelHeight)?this.levelHeight():this.levelHeight;t&&e*this.listItemHeight>t?this.list.$el.css({height:t+"px","overflow-y":"auto"}):this.list.$el.css({height:"auto",overflow:"auto"}),this.list._calcViewPortHeight(),this._isReady=!0,this.trigger("ready",this)}function a(e,t){this.listRenderError=!0,this.trigger("listRenderError",e,t,this)}function n(e){var t=[];l.chain(e).keys(e).each(function(a){t.push(e[a])}),this.selection.multiple||o(this),this.trigger("selection:change",t,this,[])}function i(e){var t=[];l.chain(e).keys(e).each(function(a){t.push(e[a])}),this.selection.multiple||o(this),this.trigger("item:dblclick",t)}function r(e,t){for(var a=0;a<t.length;a++)if(t[a]===e)return!0}function s(e,t,a,n){a&&a.exclude&&l.isArray(a.exclude)&&r(e,a.exclude)||(void 0===n||n>0)&&l.chain(e.items).keys().each(function(i){a&&a.exclude&&l.isArray(a.exclude)&&r(e.items[i],a.exclude)||t.call(e.items[i],a),s(e.items[i],t,a,void 0===n?n:--n)})}function o(e,t){t=t&&{exclude:t.exclude},s(e,function(e){this.list.clearSelection(),this.list.model.selection=[]},t)}var l=e("underscore"),c=e("common/component/panel/Panel"),d=e("common/component/panel/trait/collapsiblePanelTrait"),u=e("common/component/list/view/ListWithSelection"),p=e("common/component/tree/trait/addToSelectionModelTrait"),A=e("common/component/list/model/ListWithSelectionModel").extend(p),F=(e("common/component/tree/plugin/TooltipPlugin"),e("./dataprovider/DataProviderWithSearchCache"));return c.extend({constructor:function(e){e||(e={}),l.extend(e,{traits:[d]}),c.prototype.constructor.call(this,e)},initialize:function(e){e||(e={}),this._isReady=!1,this.item=e.item||{},this.id=this.item.id,this.owner=e.owner,this.parent=e.parent,this.itemsTemplate=e.itemsTemplate,this.listItemHeight=e.listItemHeight,this.levelHeight=e.levelHeight,this.lazyLoad=!!e.lazyLoad,this.selection=e.selection||{allowed:!1,multiple:!1},this.resource=this.item.value,this.bufferSize=e.bufferSize,this.cache="undefined"!=typeof e.cache?e.cache:!1,this.allowMouseDownEventPropagation=e.allowMouseDownEventPropagation,this.items={},this.plugins=[];for(var t={el:this.el,model:this.model},a=0,n=e.plugins.length;n>a;a++){var i=e.plugins[a].constr;this.plugins.push(new i(l.extend({},t,e.plugins[a].options)))}this.dataLayer=this.owner.getDataLayer(this),l.invoke(this.plugins,"dataLayerObtained",this.dataLayer),c.prototype.initialize.apply(this,arguments)},render:function(){var e=new A({bufferSize:this.bufferSize,getData:this._getDataProvider(this.cache)});return this.list=new u({markerClass:"."+this.cid,eventListenerPattern:"."+this.cid+":not(.readonly) > p",el:this.$contentContainer,itemsTemplate:this.itemsTemplate,listItemHeight:this.listItemHeight,lazy:!0,selection:this.selection,allowMouseDownEventPropagation:this.allowMouseDownEventPropagation,model:e}),this.list.on("render:data",l.bind(t,this)),this.list.on("listRenderError",l.bind(a,this)),this.list.on("selection:change",l.bind(n,this)),this.list.on("item:dblclick",l.bind(i,this)),this.lazyLoad?this.on("open",this._onOpen,this):this.list.renderData(),this},_getDataProvider:function(e){var t=this,a=l.bind(function(e){return this.obtainData(e,t)},this.dataLayer),n={};return e&&("object"==typeof e&&(n=l.extend(n,e)),n.request=n.request||a,this.dataProvider=new F(n),a=this.dataProvider.getData),function(e){return e||(e={offset:0,limit:100}),e.id=t.id,a(l.extend({},t.owner.context,e),t)}},_onOpen:function(){this.$el.removeClass(this.openClass).addClass(this.loadingClass),this.list.renderData()},setElement:function(e){var t=c.prototype.setElement.apply(this,arguments);return this.list&&(this.list.setElement(this.$contentContainer),this.list.totalItems=-1),l.each(this.plugins,function(t){t.setElement(e)}),this.lazyLoad||this.list&&this.list.renderData(),this.collapsed||(this.open({silent:!0,depth:0}),this.lazyLoad&&this.list.renderData()),t},open:function(e){s(this,c.prototype.open,e,e?e.depth:0),c.prototype.open.call(this,e)},close:function(e){c.prototype.close.call(this,e),s(this,c.prototype.close,e,e?e.depth:void 0),o(this)},getLevel:function(e){return l(this.items).reduce(function(t,a){return t||(a.id===e?a:a.getLevel(e))},!1)},refresh:function(e){this.listRenderError||(this.lazyLoad&&!this.collapsed||!this.lazyLoad?(this.once("ready",l.bind(s,this,this,this.refresh,e,1)),this.list.model.fetch({top:0,bottom:this.list.model.bufferSize,force:!0}),this.list.scrollTo(0)):(this.list.model.set("bufferStartIndex",void 0,{silent:!0}),this.list.model.set("bufferEndIndex",void 0,{silent:!0}),this.list.model.set("total",void 0,{silent:!0}),s(this,this.refresh,e)))},fetch:function(e,t){this.list.fetch(t,e)},recalcConstraints:function(){this.list.resize()},fetchVisibleData:function(){this.list._fetchVisibleData()},resetSelection:function(e){o(this,e),e&&e.silent||this.trigger("selection:change",[])},hasItems:function(){return!!this.$("> .subcontainer > .j-view-port-chunk > ul > li").length},clearCache:function(){l.each(this.items,function(e){e.clearCache()}),this.dataProvider&&this.dataProvider.clear()},remove:function(){var e=this,t=-1;if(l.forEach(l.keys(this.items),function(t){e.items[t].remove()}),this.dataProvider&&this.dataProvider.clear(),this.list.remove(),this.parent){var a=this.parent.id,n=this.owner.getDataLayer(a);if(n&&n.predefinedData&&n.predefinedData[a]&&l.isArray(n.predefinedData[a])){for(var i=0;i<n.predefinedData[a].length;i++)if(n.predefinedData[a][i].id===this.id){t=i;break}t>-1&&(n.predefinedData[a].splice(t,1),delete n.predefinedData[this.id])}delete this.parent.items[this.id]}c.prototype.remove.apply(this,arguments)},isReady:function(){return this._isReady}})}),define("common/component/tree/TreeDataLayer",["require","underscore","jquery","common/util/classUtil","./TreeLevel","common/util/xssUtil","request"],function(e){"use strict";function t(e,t){return n.call(this,a.call(this,e),t)}function a(e){for(var t=0,a=e.length;a>t;t++)e[t]={id:this.extractId(e[t]),value:e[t]};return e}function n(e,t){var a,n;if(this.processors&&this.processors.length)for(var i=0,r=this.processors.length;r>i;i++){a=[];for(var s=0,o=e.length;o>s;s++)n=this.processors[i].processItem(e[s],t,this),n&&a.push(n);e=a}return e}var i=e("underscore"),r=e("jquery"),s=e("common/util/classUtil"),o=(e("./TreeLevel"),e("common/util/xssUtil")),l=e("request");return s.extend({constructor:function(e){this.requestType=e.requestType?e.requestType:"GET",e.getDataUri&&(this.getDataUri=e.getDataUri),this.getDataUri||(this.getDataUri=i.template(e.dataUriTemplate)),e.getDataArray&&(this.getDataArray=e.getDataArray),e.getDataSize&&(this.getDataSize=e.getDataSize),e.extractId&&(this.extractId=e.extractId),this.levelDataId=e.levelDataId?e.levelDataId:"id",this.processors=e.processors||[],this.initialize(e)},initialize:function(e){},extractId:function(e){return e[this.levelDataId]},getDataSize:function(e,t,a){return this.getDataArray(e,t,a).length},getDataArray:function(e,t,a){return e},obtainData:function(e,a){var n=new r.Deferred,i=this;return this.predefinedData&&this.predefinedData[e.id]?n.resolve({total:this.predefinedData[e.id].length,data:this.predefinedData[e.id]}):l({type:this.requestType,dataType:this.dataType||"json",headers:{Accept:this.accept||"application/json","Content-Type":this.contentType||void 0},cache:!1,data:this.data||void 0,url:this.getDataUri(e)}).done(function(){var a=o.escape(arguments[0],{softHTMLEscape:!0});i.dataSize=i.getDataSize.call(i,a,e,arguments[2]),n.resolve({total:i.dataSize,data:t.call(i,i.getDataArray.call(i,a,e,arguments[2]),e)})}).fail(function(e){n.reject(e.status,e.responseText)}),n},_process:t})}),define("text!common/component/tree/template/treeLevelListTemplate.htm",[],function(){return'<ul class="list collapsible folders" style="top: {{- top}}px; position: relative;">\n    {{ _.each(items, function(item){ }}\n    <li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n        <p class="wrap button draggable" data-tooltip="{{- item.value.label }}"><b class="icon"/> {{- item.value.label }} </p>\n        <div class="subcontainer" />\n    </li>\n    {{ }) }}\n</ul>\n'}),define("text!common/component/tree/template/treeLevelTemplate.htm",[],function(){return'<div>\n    <ul class="list collapsible folders">\n        <li class="node">\n            <p class="wrap button">\n                <b class="icon" id="handler2" title=""></b>root\n            </p>\n            <div class="subcontainer"/>\n        </li>\n    </ul>\n</div>'}),define("common/component/tree/Tree",["require","css!lists","jquery","underscore","backbone","./TreeLevel","./TreeDataLayer","text!./template/treeLevelListTemplate.htm","text!./template/treeLevelTemplate.htm"],function(e){"use strict";function t(e){var a=e.list.model.get("items"),i=this;a=n.where(a,{_node:!0}),e.$(".node").each(function(s,o){var l=a[s].id;e.items[l]?e.items[l].setElement(o):(e.items[l]=new r(n.extend({},i._options,{el:o,item:a[s],parent:e})),i.listenTo(e.items[l],"listRenderError",n.bind(function(e,t,a){this.trigger("levelRenderError",e,t,a)},i)),e.listenTo(e.items[l],"ready",n.bind(t,i)),e.listenTo(e.items[l],"selection:change",function(t,a,n){a&&n.push(a),e.list.model.clearSelection(),e.trigger("selection:change",t,e,n)}),e.listenTo(e.items[l],"item:dblclick",function(t){e.list.model.clearSelection(),e.trigger("item:dblclick",t)}),e.items[l].render())}).length&&e.$(".j-view-port-chunk").css({height:"auto"})}e("css!lists");var a=e("jquery"),n=e("underscore"),i=e("backbone"),r=e("./TreeLevel"),s=e("./TreeDataLayer"),o=e("text!./template/treeLevelListTemplate.htm"),l=e("text!./template/treeLevelTemplate.htm"),c={ADD:"add",UPDATE:"update"},d=i.View.extend({template:n.template(l),_plugins:[],el:function(){return this.template()},constructor:function(e){e||(e={}),this.defaultDataLayer=new s(e),this.customDataLayers=e.customDataLayers,e.type?(this._type=e.type,e.type=void 0):this._type="tree",e.collapserSelector||(e.collapserSelector="b.icon:eq(0)"),e.predefinedData?(this.defaultDataLayer.predefinedData=e.predefinedData,e.predefinedData=void 0):this.defaultDataLayer.predefinedData={},e.rootless&&(this.rootless=e.rootless,e.rootless=void 0),e.additionalCssClasses&&(this.additionalCssClasses=e.additionalCssClasses,e.additionalCssClasses=void 0),e.getDataLayer&&(this.getDataLayer=e.getDataLayer,e.getDataLayer=void 0),this._options=n.extend({itemsTemplate:o,plugins:this._plugins,owner:this},e),this.context=e.context||{};for(var t=0,a=this._plugins.length;a>t;t++)this._plugins[t].processors&&(this.processors=this.processors.concat(this._plugins[t].processors));i.View.apply(this,arguments)},initialize:function(e){this.rootLevel=new r(n.extend({},this._options,{levelHeight:e.rootLevelHeight},{el:this.$("li")[0]},{item:{id:"/",value:{id:"/",resourceType:"folder"}}})),this.rootless&&this.$el.find("ul:first").addClass("hideRoot"),this.additionalCssClasses&&this.$el.find("ul:first").addClass(this.additionalCssClasses),this.listenTo(this.rootLevel,"ready",n.bind(t,this)),this.listenTo(this.rootLevel,"selection:change",n.bind(function(e,t,a){t&&a&&n.isArray(a)&&(this.rootLevel.selection.multiple||this.rootLevel.resetSelection({silent:!0,exclude:[a[0]]})),this.trigger("selection:change",e)},this)),this.listenTo(this.rootLevel,"item:dblclick",n.bind(function(e){this.trigger("item:dblclick",e)},this));for(var a=0,i=this._plugins.length;i>a;a++)this._plugins[a].constr.treeInitialized.call(this,this._plugins[a].options);this.rootLevel.render(),e.collapsed&&e.lazyLoad&&this.rootless&&this.expand("/")},remove:function(){for(var e=0,t=this._plugins.length;t>e;e++)this._plugins[e].constr.treeRemoved.call(this);this.rootLevel.remove(),i.View.prototype.remove.apply(this,arguments)},expand:function(e,t){var a=this.getLevel(e);return a&&a.open(t),this},collapse:function(e,t){var a=this.getLevel(e);return a&&a.close(t),this},_getNodeById:function(e){var t,a,i=this.getLevel(e);if(i)return i.parent?(t=i.parent.list,{node:i.item,nodeElement:i.$el,itsList:t}):null;var r=!1;if("list"===this._type)r=this.rootLevel;else if("tree"===this._type){var s=e.split("/");if(s=s.slice(0,s.length-1).join("/"),""===s&&(s="@fakeRoot"),r=this.getLevel(s),!r)return null}return r?(t=r.list,a=n.find(t.model.get("items"),function(t){return t.id===e}),a?{node:a,nodeElement:t.$el.find("li.leaf.selected"),itsList:t}:null):null},select:function(e){var t=this._getNodeById(e);t&&(t.itsList.model.clearSelection().addValueToSelection(t.node.value,t.node.index),this.trigger("selection:change",t.itsList.getValue()))},deselect:function(e){},addItem:function(e,t){var a=this.getLevel(e),n=c.ADD;return a&&this._getNodeItems(e,a,t,n),this},updateItem:function(e,t){var a=t?this.getLevel(t):this.rootLevel;return a&&this._getNodeItems(a.id,a,e),this},resetSelection:function(e){return this.rootLevel.list.clearSelection(),this.rootLevel.list.model.selection=[],this.rootLevel.resetSelection(e),this},refresh:function(e){e&&(this.context=e),this.rootLevel.refresh()},recalcConstraints:function(){this.rootLevel.recalcConstraints()},fetchVisibleData:function(){this.rootLevel.fetchVisibleData()},clearCache:function(){this.rootLevel.clearCache()},getLevel:function(e){return this.rootLevel.id===e?this.rootLevel:this.rootLevel.getLevel(e)},getDataLayer:function(e){return this.customDataLayers&&this.customDataLayers[e.id]?this.customDataLayers[e.id]:this.defaultDataLayer},_addItem:function(e,t,a){return!n.findWhere(e,{id:a.id})&&e.push(a),e},_updateItem:function(e,t){return n.each(e,function(e){e.id===t.id&&n.extend(e,t)},this),e},_getNodeItems:function(e,t,a,i){var r,s=this.getDataLayer(t),o=t.list.model.get("items")?t.list.model.get("items"):[];s.predefinedData=s.predefinedData||{},r=i===c.ADD?this._addItem(o,e,a):this._updateItem(o,a),s.predefinedData[e]=n.sortBy(r,"label"),t.fetch({force:!0,keepPosition:!0})},_selectTreeNode:function(e,t){if(n.isString(e)&&""!==e){var i=n.bind(function(){var r=n.bind(function(){var a=e;if("/"===a&&(a="@fakeRoot"),this.expand(a),this.select(a),"list"===this._type)this.rootLevel.on("ready",i);else if("tree"===this._type&&t&&t.length){var n=this.$el,r=this._getNodeById(a);if(!r)return;var s=r.nodeElement;if(!s)return;var o=s.offset().top-n.offset().top-t.height()/2+s.height()/2;t.scrollTop(o)}},this);if("/"===e||"/public"===e||"list"===this._type)r();else{var s=e.replace(/\/$/,""),o=s.substr(0,s.lastIndexOf("/"));o=o||"/";var l=new a.Deferred;this._openPath(o,l,0),l.done(r)}},this);this.rootLevel.isReady()?i():this.rootLevel.on("ready",i)}},_openPath:function(e,t,a){if(!e)return t.resolve();var i,r,s,o=this;return"/"===e?r=["/"]:(r=e.split("/"),r[0]="/"),"/"===r[0]&&"public"===r[1]&&(r=n.union(["/public"],n.rest(r,2))),a=a||0,a===r.length?t.resolve():(i=n.first(r,a+1).join("/"),"/"===i&&(i="@fakeRoot"),i=i.replace(/\/\//g,"/"),s=this.getLevel(i),void(s&&(s.collapsed?(s.once("ready",function(){o._openPath(e,t,a+1)}),s.open()):this._openPath(e,t,a+1))))}},{instance:function(e){return new this(e)}});return{use:function(e,t){return function(e){return{use:function(t,a){return e.prototype._plugins.push({constr:t,options:a}),this},create:function(){return e}}}(d.extend({_plugins:[{constr:e,options:t}]}))},create:function(){return d}}}),define("common/component/tree/plugin/ContextMenuTreePlugin",["require","./TreePlugin","underscore","jquery"],function(e){"use strict";var t=e("./TreePlugin"),a=e("underscore"),n=(e("jquery"),a.memoize(function(e){var t=a.map(e.options,function(e){return e.model.get("action")});return t},function(e){return e.cid}));return t.extend({initialize:function(e){if(!e)throw new Error("Initialization error. Options required.");if(this.contextMenus=e.contextMenus,this.contextMenu=e.contextMenu,this.defaultSelectedItems=e.defaultSelectedItems||function(){},!this.contextMenus&&!this.contextMenu)throw new Error("contextMenu or contextMenus must be specified.");if(this.showContextMenuCondition=e.showContextMenuCondition,!this.showContextMenuCondition&&!this.contextMenu)throw new Error("contextMenu must be specified for default behaviour");!this.showContextMenuCondition&&(this.showContextMenuCondition=function(){return this.contextMenu}),this.model=e.model,t.prototype.initialize.apply(this,arguments);
},itemAction:function(e){var t=e.get("action");this.treeItem.action=t},itemsRendered:function(e,t){var a=this;this.listenTo(t,"list:item:contextmenu",function(e,t){if(this.currentContextMenu=a.showContextMenuCondition(e),this.lastContextMenu&&this.lastContextMenu.hide(),this.lastContextMenu=this.currentContextMenu,this.currentContextMenu){this.currentContextMenu.treeItem=e;var i=this.currentContextMenu.treeItem.action;i||(i=a.defaultSelectedItems.call(this.currentContextMenu,e,n(this.currentContextMenu)))?this.currentContextMenu.resetSelection([i]):this.currentContextMenu.resetSelection(),this.currentContextMenu.show({left:t.pageX,top:t.pageY}),this.listenTo(this.currentContextMenu.collection,"select",function(e,t){this.itemAction.call(this.currentContextMenu,t)},this)}},this)},remove:function(){this.stopListening(),this.contextMenu&&this.contextMenu.remove()}})}),define("text!bi/repository/repositoryFolderTree/template/repositoryFolderChooserDialogTooltipTemplate.htm",[],function(){return'<p class="message label">{{- model.i18n[\'tooltip.name\'] }}</p>\n<p class="message">{{- model.value.label }}</p>\n<p class="message label">{{- model.i18n[\'tooltip.path\'] }}</p>\n<p class="message">{{- model.value.uri }}</p>'}),define("text!bi/repository/repositoryFolderTree/template/repositoryFoldersTreeLevelTemplate.htm",[],function(){return'<ul class="list collapsible" style="top: {{- top}}px; position: relative;">\n	{{ _.each(items, function(item){ }}\n	<li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}} {{- item._readonly ? \'readonly\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n		<p class="wrap button draggable" data-tooltip=\'true\'><b class="icon"/> {{- item.value.label }} </p>\n		<div class="subcontainer" />\n	</li>\n	{{ }) }}\n</ul>\n'}),define("bi/repository/repositoryFolderTree/RepositoryFolderTree",["require","common/component/tree/Tree","jquery","underscore","jrs.configs","common/component/tree/TreeDataLayer","common/component/tree/plugin/TooltipPlugin","common/component/tree/plugin/ContextMenuTreePlugin","bi/repository/enum/repositoryResourceTypes","text!./template/repositoryFolderChooserDialogTooltipTemplate.htm","text!./template/repositoryFoldersTreeLevelTemplate.htm","bundle!all","settings/generalSettings"],function(e){"use strict";function t(e){var t=2;return e.isWritable&&(t=4|t),e.isRemovable&&(t=16|t),e.isAdministrable&&(t=1),t}var a=e("common/component/tree/Tree"),n=e("jquery"),i=e("underscore"),r=e("jrs.configs"),s=e("common/component/tree/TreeDataLayer"),o=e("common/component/tree/plugin/TooltipPlugin"),l=(e("common/component/tree/plugin/ContextMenuTreePlugin"),e("bi/repository/enum/repositoryResourceTypes")),c=e("text!./template/repositoryFolderChooserDialogTooltipTemplate.htm"),d=e("text!./template/repositoryFoldersTreeLevelTemplate.htm"),u=e("bundle!all"),p=e("settings/generalSettings"),A={folderTreeProcessor:{processItem:function(e){return e._node=!0,e._readonly=!(1==e.value.permissionMask||4&e.value.permissionMask),e}},filterPublicFolderProcessor:{processItem:function(e){return e.value.uri!==F.settings.publicFolderUri&&e.value.uri!==F.settings.tempFolderUri?e:void 0}},i18n:{processItem:function(e){return e.i18n=u,e}},tenantProcessor:{processItem:function(e){return e._node=!0,e.value.label=e.value.tenantName,e.value.uri=e.value.tenantUri,e}}},F=function(e){var p=e&&e.contextPath||r.contextPath,F=e&&e.tooltipTemplate||c,D=a.use(o,{i18n:u,contentTemplate:F}).create().instance({additionalCssClasses:"folders",dataUriTemplate:p+"/rest_v2/resources?{{= id != '@fakeRoot' ? 'folderUri=' + id : ''}}&recursive=false&type="+l.FOLDER+"&offset={{= offset }}&limit={{= limit }}",levelDataId:"uri",itemsTemplate:d,collapsed:!0,lazyLoad:!0,rootless:!0,selection:{allowed:!0,multiple:!1},customDataLayers:{"/":i.extend(new s({dataUriTemplate:p+"/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1",processors:i.chain(A).omit("filterPublicFolderProcessor","tenantProcessor").values().value(),getDataArray:function(e){e=JSON.parse(n(e).text());var a=i.find(e.children,function(e){return"/public"===e.uri}),r=[{id:"@fakeRoot",label:e.label,uri:"/",resourceType:"folder",permissionMask:t(e.extra),_links:{content:"@fakeContentLink"}}];return a&&r.push({id:"/public",label:a.label,uri:"/public",resourceType:"folder",permissionMask:t(a.extra),_links:{content:"@fakeContentLink"}}),r}}),{accept:"text/html",dataType:"text"})},processors:[A.i18n,A.folderTreeProcessor,A.filterPublicFolderProcessor],getDataArray:function(e,t,a){return e?e[l.RESOURCE_LOOKUP]:[]}});return D};return F.settings=p,F}),define("text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDialog.dataSourceNameTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.dataSourceName\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" value="{{- model.label }}" name="label">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.resourceIDTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.descriptionTitle\']}}" class="control textArea">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.description\']}}</span>\n	<textarea type="text" name="description">{{- model.description }}</textarea>\n	<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n	<div class="content">\n		<div class="header ">\n			<div class="title"></div>\n		</div>\n        <ul class="list collapsible folders"></ul>\n	</div>\n</div>\n\n<label class="control textArea">\n	<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n	<span class="message warning"></span>\n</label>\n{{ } }}\n'}),define("dataSource/saveDialog/BaseSaveDialogView",["require","underscore","bundle!all","common/util/browserDetection","bi/repository/model/RepositoryResourceModel","common/component/dialog/DialogWithModelInputValidation","bi/repository/repositoryFolderTree/RepositoryFolderTree","text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("bundle!all"),n=e("common/util/browserDetection"),i=e("bi/repository/model/RepositoryResourceModel"),r=e("common/component/dialog/DialogWithModelInputValidation"),s=e("bi/repository/repositoryFolderTree/RepositoryFolderTree"),o=e("text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm");return r.extend({theDialogIsOpen:!1,autoUpdateResourceID:!0,saveDialogTemplate:o,events:t.extend({resize:"_onDialogResize"},r.prototype.events),constructor:function(e){e||(e={}),this.options=e;var n=this.extendModel(this.options.model),i=this._getLabelForSaveButton(n),s="resource.datasource.saveDialog.cancel";this.autoUpdateResourceID=!this.options.isEditMode,this.preSelectedFolder=e.parentFolderUri,r.prototype.constructor.call(this,{skipLocation:!!e.skipLocation,modal:!0,model:n,resizable:!e.skipLocation,additionalCssClasses:"dataSourceSaveDialog"+(e.skipLocation?" no-minheight":""),title:a["resource.datasource.saveDialog.save"],content:t.template(this.saveDialogTemplate,{i18n:a,model:t.extend({},n.attributes),skipLocation:!!this.options.skipLocation,isEmbedded:this.options.isEmbedded,isEditMode:this.options.isEditMode}),buttons:[{label:a[i],action:"save",primary:!0},{label:a[s],action:"cancel",primary:!1}]}),this.on("button:save",t.bind(this._onSaveDialogSaveButtonClick,this)),this.on("button:cancel",t.bind(this._onSaveDialogCancelButtonClick,this))},initialize:function(e){r.prototype.initialize.apply(this,arguments),(t.isUndefined(this.preSelectedFolder)||!this.preSelectedFolder)&&(this.preSelectedFolder="/"),e.skipLocation||this.initializeTree(),this.listenTo(this.model,"change:label",this._onDataSourceNameChange),this.$contentContainer.find("[name=name]").change(t.bind(this._onResourceIDInputChange,this))},restoreModel:function(){this.originalModelValidation&&(this.model.validation=this.originalModelValidation)},extendModel:function(e){return this.originalModelValidation=e.validation,e.validation=t.extend({},i.prototype.validation,{label:[{required:!0,msg:a["resource.datasource.saveDialog.validation.not.empty.label"]},{maxLength:i.settings.LABEL_MAX_LENGTH,msg:a["resource.datasource.saveDialog.validation.too.long.label"]}],name:[{required:!0,msg:a["resource.datasource.saveDialog.validation.not.empty.name"]},{maxLength:i.settings.NAME_MAX_LENGTH,msg:a["resource.datasource.saveDialog.validation.too.long.name"]},{doesNotContainSymbols:i.settings.NAME_NOT_SUPPORTED_SYMBOLS,msg:a["resource.datasource.saveDialog.validation.invalid.chars.name"]}],description:[{required:!1},{maxLength:i.settings.DESCRIPTION_MAX_LENGTH,msg:a["resource.datasource.saveDialog.validation.too.long.description"]}],parentFolderUri:[{fn:function(e){if(!this.options.skipLocation){if(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===e)return a["resource.datasource.saveDialog.validation.not.empty.parentFolderIsEmpty"];if("/"!==e.slice(0,1))return a["resource.datasource.saveDialog.validation.folder.not.found"].replace("{0}",e)}}}]}),e},initializeTree:function(){this.foldersTree=s(),this.listenTo(this.foldersTree,"selection:change",function(e){var a;e&&t.isArray(e)&&e[0]&&e[0].uri&&(a=e[0].uri),a&&this.model.set("parentFolderUri",a)}),this.$el.find(".treeBox .folders").append(this.foldersTree.render().el);var e=this.foldersTree.$el.parent().parent().parent();this.foldersTree._selectTreeNode(this.preSelectedFolder,e)},startSaveDialog:function(){this._openDialog()},_openDialog:function(){if(!this.theDialogIsOpen){this.bindValidation(),r.prototype.open.apply(this,arguments),this.$contentContainer.find("[name=label]").focus(),this.theDialogIsOpen=!0;var e=t.bind(this._onDialogResize,this);n.isIE8()||n.isIE9()?setTimeout(e,1):e()}},_closeDialog:function(){this.theDialogIsOpen&&(this.unbindValidation(),this.clearValidationErrors(),r.prototype.close.apply(this,arguments),this.theDialogIsOpen=!1)},_getLabelForSaveButton:function(){return"resource.datasource.saveDialog.save"},_onDialogResize:function(){var e=this,t=73,a=this.$contentContainer.find(".control.groupBox.treeBox"),n=this.$contentContainer.closest(".jr-mDialog");this.$contentContainer.children().not(".control.groupBox.treeBox").each(function(){t+=e.$(this).outerHeight(!0)}),t+=this.$contentContainer.innerHeight()-this.$contentContainer.height(),a.height(n.outerHeight(!0)-t)},_onDataSourceNameChange:function(){if(this.autoUpdateResourceID){var e=i.generateResourceName(this.model.get("label"));this.model.set("name",e),this.$("input[name='name']").val(e)}},_onResourceIDInputChange:function(){this.autoUpdateResourceID=!1},_onSaveDialogCancelButtonClick:function(){this.restoreModel(),this._closeDialog()},_onSaveDialogSaveButtonClick:function(){this._onDialogResize(),this.model.isValid(!0)&&this.performSave()},performSave:function(){return this.options.saveFn?void this.options.saveFn(this.model.attributes,this.model):void this.model.save({},{success:t.bind(this._saveSuccessCallback,this),error:t.bind(this._saveErrorCallback,this)})},_saveSuccessCallback:function(e,a){this._closeDialog(),t.isFunction(this.options.success)&&this.options.success()},_saveErrorCallback:function(e,n,i){var r=this,s=!1,o=!1;try{s=JSON.parse(n.responseText)}catch(l){}t.isArray(s)||(s=[s]),t.each(s,function(e){var t=!1,n=!1;e&&(r.theDialogIsOpen&&("version.not.match"===e.errorCode?(t="name",n=a["resource.dataSource.resource.alreadyInUse"]):"mandatory.parameter.error"===e.errorCode?e.parameters&&e.parameters[0]&&(n=a["resource.datasource.saveDialog.parameterIsMissing"],t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1)):"illegal.parameter.value.error"===e.errorCode?e.parameters&&e.parameters[0]&&(t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1),n=a["resource.datasource.saveDialog.parameterIsWrong"]):"folder.not.found"===e.errorCode?(t="parentFolderUri",n=a["ReportDataSourceValidator.error.folder.not.found"].replace("{0}",e.parameters[0])):"access.denied"===e.errorCode&&(t="parentFolderUri",n=a["jsp.accessDenied.errorMsg"])),n&&t&&-1!==["label","name","description","parentFolderUri"].indexOf(t)&&(r.invalidField("[name="+t+"]",n),o=!0))}),o===!1&&t.isFunction(this.options.error)&&this.options.error(e,n,i)}})}),define("common/enum/javaTypeMapper",[],function(){return{"java.lang.Date":"javaTypes.java.lang.Date","java.lang.String":"javaTypes.java.lang.String","java.lang.Integer":"javaTypes.java.lang.Integer","java.lang.Boolean":"javaTypes.java.lang.Boolean","java.lang.Double":"javaTypes.java.lang.Double","java.sql.Timestamp":"javaTypes.java.sql.Timestamp","java.lang.Short":"javaTypes.java.lang.Short","java.math.BigDecimal":"javaTypes.java.math.BigDecimal","java.lang.Long":"javaTypes.java.lang.Long","java.sql.Time":"javaTypes.java.sql.Time"}}),define("dataSource/fileDataSource/enum/javaTypes",[],function(){return["java.lang.Date","java.lang.String","java.lang.Integer","java.lang.Boolean","java.lang.Double","java.sql.Timestamp","java.lang.Short","java.math.BigDecimal","java.lang.Long","java.sql.Time"]}),define("dataSource/fileDataSource/SimpleDomainModel",["require","jquery","underscore","request","jrs.configs","bi/repository/model/RepositoryResourceModel"],function(e){"use strict";var t=e("jquery"),a=e("underscore"),n=e("request"),i=e("jrs.configs"),r=e("bi/repository/model/RepositoryResourceModel");return r.extend({defaults:{uri:void 0,label:void 0,columns:[],dataSourceUri:void 0},validation:{columns:function(e){var t=[];return a.each(e,function(e,a){e.label||t.push({rowId:a,name:"label"})}),0!==t.length?this.trigger("validationFailed",t):this.trigger("validationPassed"),null}},type:"simpleDomain",url:function(){return i.contextPath+"/rest_v2/domains"},isNew:function(){return!0},constructor:function(e,t){r.prototype.constructor.apply(this,arguments),this.dataSource=t.dataSource,t.dataSource&&t.dataSource.uri&&this.set("dataSourceUri",t.dataSource.uri)},save:function(e,t){return a.defaults(t||(t={}),{headers:{Accept:"application/json","Content-Type":"application/simpleDomain+json; charset=UTF-8"}}),r.prototype.save.call(this,e,t)},parseMetadata:function(e){return a.each(e.columns,function(e){e.show=!0}),e},parse:function(e){var t=r.prototype.parse.apply(this,arguments);return t.dataSource&&(t.dataSourceUri=t.dataSource.dataSourceReference,delete t.dataSource),t.metadata&&(t.columns=t.metadata.columns,delete t.metadata),t},toJSON:function(){var e=r.prototype.toJSON.apply(this,arguments);return e.dataSource={dataSourceReference:e.dataSourceUri},e.metadata={columns:a.reduce(e.columns,function(e,t){return t.show&&e.push(t),e},[]),queryLanguage:"csv"},delete e.dataSourceUri,delete e.columns,e},fetchMetadata:function(){var e=this,a=t.Deferred();return n({type:"POST",url:i.contextPath+"/rest_v2/connections",dataType:"json",data:JSON.stringify(this.dataSource),headers:{"Content-Type":"application/repository.customDataSource+json",Accept:"application/table.metadata+json"}}).done(function(t){t=e.parseMetadata(t),e.set("columns",t.columns),a.resolve(t)}).fail(function(e){a.reject(e)}),a}})}),define("text!common/templates/standardConfirm.htm",[],function(){return'<div class="panel dialog overlay standardConfirm moveable centered_horz centered_vert">\n    <div class="content hasFooter ">\n        <div class="header mover">\n            <div class="title">\n                Confirm\n            </div>\n        </div>\n\n        <div class="body  ">\n        </div>\n\n        <div class="footer ">\n\n            <button class="button action primary up ok" name="buttonOK">\n                <span class="wrap">OK</span>\n                <span class="icon"></span>\n            </button>\n            <button class="button action up cancel" name="buttonCancel">\n                <span class="wrap">Cancel</span>\n                <span class="icon"></span>\n            </button>\n\n        </div>\n\n    </div>\n</div>'}),define("text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDomainDialog.domainNameTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.domainName\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" value="{{- model.label }}" name="label">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDomainDialog.resourceIDTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" {{ if (model.isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDomainDialog.descriptionTitle\']}}" class="control textArea">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.description\']}}</span>\n	<textarea type="text" name="description">{{- model.description }}</textarea>\n	<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n	<div class="content">\n		<div class="header ">\n			<div class="title"></div>\n		</div>\n        <ul class="list collapsible folders"></ul>\n	</div>\n</div>\n\n<label class="control textArea">\n	<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n	<span class="message warning"></span>\n</label>\n{{ } }}\n\n<!--\n<div class="control checkBox toggle">\n    <label for="__jrs_openInAdHocDesigner" class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.openInAdhoc\']}}</label>\n    <input type="checkbox" name="openInAdHocDesigner" id="__jrs_openInAdHocDesigner" {{ if (model.openInAdHocDesigner) { }}checked="checked"{{ } }} />\n</div>\n-->'}),define("dataSource/saveDialog/DomainSaveDialogView",["require","underscore","jquery","bundle!all","request","bi/repository/model/RepositoryResourceModel","dataSource/saveDialog/BaseSaveDialogView","text!common/templates/standardConfirm.htm","text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("jquery"),n=e("bundle!all"),i=(e("request"),e("bi/repository/model/RepositoryResourceModel")),r=e("dataSource/saveDialog/BaseSaveDialogView"),s=e("text!common/templates/standardConfirm.htm"),o=e("text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm");return r.extend({saveDialogTemplate:o,constructor:function(e){e||(e={}),this.options=e,r.prototype.constructor.call(this,e)},initialize:function(){this.preSelectedFolder=i.getParentFolderFromUri(this.options.dataSource.uri)||"/",r.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:openInAdHocDesigner",this._onOpenInAdHocDesignerChange)},extendModel:function(e){var a,s,o,l=r.prototype.extendModel.call(this,e),c=this;return l.set("openInAdHocDesigner",!1),a=e.dataSource.label,s=a+" Domain",o=i.generateResourceName(s),l.set("label",s),l.set("name",o),l.validation=t.extend({},i.prototype.validation,{label:[{required:!0,msg:n["resource.datasource.saveDomainDialog.validation.not.empty.label"]},{maxLength:i.settings.LABEL_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.label"]}],name:[{required:!0,msg:n["resource.datasource.saveDomainDialog.validation.not.empty.name"]},{maxLength:i.settings.NAME_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.name"]},{doesNotContainCharacters:i.settings.NAME_NOT_SUPPORTED_SYMBOLS,msg:n["resource.datasource.saveDomainDialog.validation.invalid.chars.name"]}],description:[{required:!1},{maxLength:i.settings.DESCRIPTION_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.description"]}],parentFolderUri:[{fn:function(e){if(!c.options.skipLocation){if(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===e)return n["resource.datasource.saveDomainDialog.validation.not.empty.parentFolderIsEmpty"];if("/"!==e.slice(0,1))return n["resource.datasource.saveDomainDialog.validation.folder.not.found"].replace("{0}",e)}}}]}),l},_onOpenInAdHocDesignerChange:function(){var e=this._getLabelForSaveButton();this.changeButtonLabel("save",n[e])},_getLabelForSaveButton:function(e){e=e||this.model;var t="resource.datasource.saveDialog.save";return e.get("openInAdHocDesigner")&&(t="resource.datasource.saveDomainDialog.saveAndOpenDesigner"),t},_onSaveDialogCancelButtonClick:function(){var e=this,n="You are about to cancel the creation of a new domain.<br/>If You wish to create a domain in the future,<br/>You will need to go through the regular Domain Designer.<br/>The data source, however, has successfully been saved.",i=a(s);i.find(".body").html(n),dialogs.popupConfirm.show(i.get(0),!0,{okButtonSelector:"[name=buttonOK]",cancelButtonSelector:"[name=buttonCancel]"}).done(function(){e._closeDialog(),t.isFunction(e.options.success)&&e.options.success()})},performSave:function(){var e=this;this.model.save().done(function(){e._closeDialog(),t.isFunction(e.options.success)&&e.options.success()})}})}),define("text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm",[],function(){return'<div class="usageTooltip">{{- i18n[\'resource.datasource.createDomain.useTooltip\']}}.</div>\n\n<div class="tableHolder">\n    <table class="table" unselectable="on" onselectstart="return false">\n        <tbody>\n\n        <tr class="header">\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.show\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.fieldName\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.displayLabel\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.type\']}}</div></td>\n        </tr>\n\n        {{_.each(columns, function(field, y) { }}\n        <tr class="bodyCell" data-fieldId="{{- y }}">\n            <td class="jrs-grid-cell cell_1">\n                <div class="jrs-grid-cell-content">\n                    <input type="checkbox" name="show" {{- field.show ? "checked" : "" }} />\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_2">\n                <div class="jrs-grid-cell-content">\n                    {{- field.name }}\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_3">\n                <div class="jrs-grid-cell-content">\n                    <input type="text" name="label" value="{{- field.label }}" />\n                    <span class="message warning"></span>\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_4">\n                <div class="jrs-grid-cell-content">\n                    <select name="javaType">\n                    {{ _.each(javaTypes, function(javaType) { }}\n                        <option value="{{- javaType }}" {{- javaType === field.javaType ? "selected" : ""}}>{{- i18n[javaTypeMapper[javaType]]}}</option>\n                    {{ }); }}\n                    </select>\n                </div>\n            </td>\n        </tr>\n        {{ }); }}\n        </tbody>\n    </table>\n</div>\n\n<div class="usageDescription">{{- i18n[\'resource.datasource.createDomain.useTooptip.firstPart\']}}.</div>\n\n<div class="usageDescription2">{{- i18n[\'resource.datasource.createDomain.useTooptip.secondPart\']}}.</div>\n'}),define("dataSource/fileDataSource/SimpleDomainView",["require","jquery","underscore","bundle!all","common/enum/javaTypeMapper","dataSource/fileDataSource/enum/javaTypes","jrs.configs","dataSource/fileDataSource/SimpleDomainModel","common/component/dialog/DialogWithModelInputValidation","dataSource/saveDialog/DomainSaveDialogView","text!common/templates/standardConfirm.htm","text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm"],function(e){"use strict";var t=e("jquery"),a=e("underscore"),n=e("bundle!all"),i=e("common/enum/javaTypeMapper"),r=e("dataSource/fileDataSource/enum/javaTypes"),s=e("jrs.configs"),o=e("dataSource/fileDataSource/SimpleDomainModel"),l=e("common/component/dialog/DialogWithModelInputValidation"),c=e("dataSource/saveDialog/DomainSaveDialogView"),d=e("text!common/templates/standardConfirm.htm"),u=e("text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm");return l.extend({hasChanges:!1,modelIsValid:!0,theDialogIsOpen:!1,constructor:function(e){e||(e={}),this.options=e,this.dataSource=e.dataSource?e.dataSource:{};var t="resource.datasource.createDomain.save",i="resource.datasource.createDomain.cancel";this.model=new o({},e),l.prototype.constructor.call(this,{modal:!0,model:this.model,width:400,additionalCssClasses:"dataSourceCreateNewDomainDialog",title:n["resource.datasource.createDomain.dialogTitle"],content:"",buttons:[{label:n[t],action:"save",primary:!0},{label:n[i],action:"cancel",primary:!1}]}),this.on("button:save",a.bind(this._onSaveButtonClick,this)),this.on("button:cancel",a.bind(this._onCancelButtonClick,this)),this.model.on("validationPassed",a.bind(this.clearValidationErrors,this)),this.model.on("validationFailed",a.bind(this.validationFailed,this))},initialize:function(e){l.prototype.initialize.apply(this,arguments)},updateModelProperty:function(e){var a,i,r=t(e.target),s=r.attr("type"),o=r.attr("name"),l=r.parents("tr").attr("data-fieldId");i="checkbox"===s||"radio"===s?r.is(":checked"):t.trim(r.val()),a=this.model.get("columns"),a[l][o]=i,this.model.set("columns",a),this.model.validate("columns"),this.hasChanges===!1&&this.changeButtonLabel("save",n["resource.datasource.createDomain.applyAndSave"]),this.hasChanges=!0},startDialog:function(){var e=this;this.theDialogIsOpen||(this.bindValidation(),this.model.fetchMetadata(this.dataSource).done(function(){l.prototype.open.apply(e,arguments);var t=a.template(u,{i18n:n,javaTypes:r,columns:e.model.get("columns"),javaTypeMapper:i});e.setContent(t),e._center()}),this.theDialogIsOpen=!0)},fieldIsValid:function(){},fieldIsInvalid:function(e){},clearValidationErrors:function(){this.$el.find(".error").removeClass("error"),this.modelIsValid=!0},validationFailed:function(e){var i=this;this.clearValidationErrors(),this.modelIsValid=!1,a.each(e,function(e){var a=t(i.$el.find("table tr").get(e.rowId+1));a.find("[name="+e.name+"]").parent().addClass("error"),a.find(".message").text(n["resource.datasource.createDomain.validation.missing.label"])})},_closeDialog:function(){this.theDialogIsOpen&&(this.unbindValidation(),this.clearValidationErrors(),l.prototype.close.apply(this,arguments),this.theDialogIsOpen=!1)},_onCancelButtonClick:function(){var e=this,a=n["resource.datasource.createDomain.cancelMessage"],i=t(d);i.find(".body").html(a),dialogs.popupConfirm.show(i.get(0),!0,{okButtonSelector:"[name=buttonOK]",cancelButtonSelector:"[name=buttonCancel]"}).done(function(){e._closeDialog(),e.options.cancel&&e.options.cancel()})},_onSaveButtonClick:function(){this.modelIsValid&&(this._closeDialog(),this.saveDialog=new c(a.extend({},this.options,{model:this.model,success:function(){redirectToUrl(s.contextPath+"/flow.html?_flowId=repositoryConfirmFlow&resourceType=dataSource&resourceType=domain")}})),this.saveDialog.startSaveDialog())}})}),define("text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDialog.dataSourceNameTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.dataSourceName\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" value="{{- model.label }}" name="label">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.resourceIDTitle\']}}" class="control input text ">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n	<input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n	<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.descriptionTitle\']}}" class="control textArea">\n	<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.description\']}}</span>\n	<textarea type="text" name="description">{{- model.description }}</textarea>\n	<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n	<div class="content">\n		<div class="header ">\n			<div class="title"></div>\n		</div>\n        <ul class="list collapsible folders"></ul>\n	</div>\n</div>\n\n<label class="control textArea">\n	<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n	<span class="message warning"></span>\n</label>\n{{ } }}\n\n{{ if (!(isEmbedded || isEditMode)) { }}\n<div class="control checkBox toggle">\n    <label for="__jrs_prepareDataForReporting" class="wrap">{{- i18n[\'resource.datasource.saveDialog.prepareData\']}}</label>\n    <input type="checkbox" name="prepareDataForReporting" id="__jrs_prepareDataForReporting" {{ if (model.prepareDataForReporting) { }}checked="checked"{{ } }} />\n</div>\n{{ } }}\n'}),define("dataSource/saveDialog/TextDataSourceSaveDialogView",["require","underscore","bundle!all","dataSource/fileDataSource/SimpleDomainView","dataSource/saveDialog/BaseSaveDialogView","text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm"],function(e){"use strict";var t=e("underscore"),a=e("bundle!all"),n=e("dataSource/fileDataSource/SimpleDomainView"),i=e("dataSource/saveDialog/BaseSaveDialogView"),r=e("text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm");return i.extend({saveDialogTemplate:r,constructor:function(e){e||(e={}),this.options=t.extend({},e),this.options.isEmbedded=!!this.options.saveFn,i.prototype.constructor.call(this,e)},initialize:function(){this.preSelectedFolder=this.options.model.options.parentFolderUri,i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:prepareDataForReporting",this._onPrepareDataForReportingChange)},extendModel:function(e){var t=i.prototype.extendModel.call(this,e);return t.set("prepareDataForReporting",!(this.options.isEmbedded||this.options.isEditMode)),t},_onPrepareDataForReportingChange:function(){var e=this._getLabelForSaveButton();this.changeButtonLabel("save",a[e])},_getLabelForSaveButton:function(e){e=e||this.model;var t="resource.datasource.saveDialog.save";return"textDataSource"===e.get("dataSourceName")&&e.get("prepareDataForReporting")&&(t="resource.datasource.saveDialog.saveAndCreateDomain"),t},_saveSuccessCallback:function(e,a){if(this.model.get("prepareDataForReporting")){var i=new n({cancel:this.options.success,dataSource:this.model.toJSON()});i.startDialog()}else t.isFunction(this.options.success)&&this.options.success();this._closeDialog()}})}),define("dataSource/factory/saveDialogViewFactory",["require","dataSource/saveDialog/BaseSaveDialogView","dataSource/saveDialog/TextDataSourceSaveDialogView","dataSource/saveDialog/DomainSaveDialogView"],function(e){"use strict";var t=e("dataSource/saveDialog/BaseSaveDialogView"),a=e("dataSource/saveDialog/TextDataSourceSaveDialogView"),n=e("dataSource/saveDialog/DomainSaveDialogView"),i={};
return i.textDataSource=a,i.domain=n,{getView:function(e){var a;return a=t,i[e]&&(a=i[e]),a}}}),define("text!dataSource/template/dataSourceMainTemplate.htm",[],function(){return'<div class="column decorated primary showingToolBar">\n    <div class="content hasFooter">\n        <div class="header">\n            <div class="title">\n                {{ if (isEditMode) { }}\n                    {{- i18n[\'resource.dataSource.title.edit\'] }}\n                {{ } else { }}\n                    {{- i18n[\'resource.dataSource.title.new\'] }}\n                {{ } }}\n            </div>\n        </div>\n        <div class="body {{ if (supportsTouch) { }}swipeScroll{{ } }}">\n            <div id="flowControls"></div>\n\n            <div id="stepDisplay">\n\n                <fieldset class="row instructions">\n                    <legend class="offLeft"><span>{{- i18n["resource.dataSource.instructions"] }}</span></legend>\n                    <h2 class="textAccent02">{{- i18n["resource.dataSource.instructions1"] }}</h2>\n                    <h4>{{- i18n["resource.dataSource.instructions2"] }}</h4>\n                </fieldset>\n\n                <fieldset class="row inputs oneColumn">\n                    <legend class="offLeft"><span>{{- i18n["resource.dataSource.inputs"] }}</span></legend>\n                    <div class="column primary">\n                        <div class="content">\n                            <div class="header">\n                                <div class="title">{{- i18n["resource.dataSource.type"] }}</div>\n                                <label class="control select inline" title="{{- i18n[\'resource.dataSource.dsType\'] }}">\n                                    <span class="wrap offLeft">{{- i18n[\'resource.dataSource.dsType\'] }}</span>\n                                    <select name="dataSourceType" {{ if (isEditMode) { }}disabled="disabled"{{ } }}>\n                                        {{ _.each(dataSourceTypeOptions, function(option) { }}\n                                        <option value="{{- option.value }}">{{- option.label }}</option>\n                                        {{ }); }}\n                                    </select>\n                                    <span class="message warning"></span>\n                                </label>\n                            </div>\n                            <div class="body dataSourceBody"></div>\n                        </div>\n                    </div>\n                </fieldset>\n            </div>\n        </div>\n        <div class="footer ">\n            <fieldset id="wizardNav">\n                <button class="button primary action up" id="saveBtn"><span class="wrap">{{- i18n[\'resource.datasource.saveDialog.save\'] }}</span><span class="icon"></span></button>\n                <button class="button up action" id="cancelBtn"><span class="wrap">{{- i18n[\'resource.datasource.saveDialog.cancel\'] }}</span><span class="icon"></span></button>\n            </fieldset>\n        </div>\n    </div>\n</div>'}),define("dataSource/collection/CustomDataSourceCollection",["require","backbone","underscore","jrs.configs"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("jrs.configs");return t.Collection.extend({url:n.contextPath+"/rest_v2/customDataSources",parse:function(e){var t=[];return e.definition&&a.each(e.definition,function(e){t.push({id:e})}),t}})}),define("dataSource/DataSourceController",["require","backbone","underscore","jquery","bundle!all","dataSource/model/BaseDataSourceModel","touchcontroller","common/util/featureDetection","util/historyHelper","dataSource/factory/dataSourceViewFactory","dataSource/enum/dataSourceResourceTypes","dataSource/factory/saveDialogViewFactory","text!dataSource/template/dataSourceMainTemplate.htm","jrs.configs","dataSource/collection/CustomDataSourceCollection","settings!awsSettings","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("backbone"),a=e("underscore"),n=e("jquery"),i=e("bundle!all"),r=e("dataSource/model/BaseDataSourceModel"),s=e("touchcontroller"),o=e("common/util/featureDetection"),l=e("util/historyHelper"),c=e("dataSource/factory/dataSourceViewFactory"),d=e("dataSource/enum/dataSourceResourceTypes"),u=e("dataSource/factory/saveDialogViewFactory"),p=e("text!dataSource/template/dataSourceMainTemplate.htm"),A=e("jrs.configs"),F=e("dataSource/collection/CustomDataSourceCollection"),D=e("settings!awsSettings"),h=e("dataSource/util/settingsUtility");return t.View.extend({dataSourceType:!1,dataSourceView:!1,saveDialog:!1,events:{"change select[name='dataSourceType']":"onDataSourceTypeChange","click #saveBtn":"onSaveClick","click #cancelBtn":"onCancelClick"},historyBackToken:"DataSourceControllerHistory",constructor:function(e){e=n.extend(!0,{},e),arguments[0]=e,this.isEditMode=e.isEditMode,t.View.apply(this,arguments)},initialize:function(e){this.options=e,this.dataSourceType=void 0,o.supportsTouch&&this.initSwipeScroll(),l.saveReferrer(this.historyBackToken),this.fetchingCustomDataSourcesDeferred=n.Deferred(),this.fetchingTheModelDeferred=n.Deferred(),this.customDataSourceCollection=new F,this.customDataSourceCollection.fetch().done(a.bind(function(){this.renderDataSourceContainer()},this));var t=h.deepDefaults(e,{awsSettings:D});if(this.options.resourceUri){var i=this,s=new r({uri:this.options.resourceUri});s.fetch().then(function(e,t,a){i.dataSource=s.attributes,i.dataSourceType=c.getViewType(a.getResponseHeader("Content-Type"),i.dataSource),i.fetchingTheModelDeferred.resolve()})}else this.options.dataSource&&this.options.dataSourceClientType?(this.dataSource=this.options.dataSource,this.dataSourceType=c.getViewType(this.options.dataSourceClientType,this.options.dataSource),this.fetchingTheModelDeferred.resolve()):(t.awsSettings.productTypeIsEc2&&(this.dataSourceType=c.getViewType(d.AWS,null)),this.fetchingTheModelDeferred.resolve())},renderDataSourceContainer:function(){var e={AZURE_SQL:"AzureSql",AWS:"Aws",BEAN:"Bean",JDBC:"JDBC",JNDI:"JNDI",VIRTUAL:"Virtual"},t=a.chain(e).map(function(e,t){return{value:d[t].toLowerCase(),label:i["resource.dataSource.dstype"+e]}}).value();this.customDataSourceCollection.forEach(function(e){var a=e.get("id");t.push({value:a,label:i[a+".name"]?i[a+".name"]:a})}),t=a.sortBy(t,function(e){return e.label.toLowerCase()}),this.$el.append(a.template(p,{dataSourceTypeOptions:t,i18n:i,supportsTouch:o.supportsTouch,isEditMode:this.isEditMode})),this.fetchingCustomDataSourcesDeferred.resolve()},initSwipeScroll:function(){var e=this.$("#stepDisplay");e.length&&new s(e.parent()[0],e.parent().parent()[0],{})},render:function(){n.when(this.fetchingCustomDataSourcesDeferred,this.fetchingTheModelDeferred).done(a.bind(function(){this._render()},this))},_render:function(){var e={};return this.dataSourceView&&(e={label:this.dataSourceView.model.get("label"),name:this.dataSourceView.model.get("name"),description:this.dataSourceView.model.get("description")}),this.dataSourceView&&this.dataSourceView.remove(),delete this.dataSourceView,0===this.$(".row.inputs .body:eq(0)").length&&this.$(".row.inputs > .column > .content").append("<div class='body dataSourceBody'></div>"),this.dataSourceType||(this.dataSourceType=d.JDBC.toLowerCase()),this.dataSourceView=c.getView(a.extend(this.options,{dataSourceType:this.dataSourceType,dataSource:a.extend({},this.dataSource,e),el:this.$(".row.inputs .body:eq(0)")})),this.$(".dataSourceBody").attr("dstype",this.dataSourceType.toLowerCase()),this.$("select[name='dataSourceType']").val(this.dataSourceType),this},onDataSourceTypeChange:function(e){var t=n(e.target).val();this.dataSourceType!=t&&(this.dataSourceType=t,this.render())},_prepareSaveDialog:function(){this.saveDialog&&this.saveDialog.remove();var e=u.getView(this.dataSourceType);this.saveDialog=new e(a.extend({},this.options,{model:this.dataSourceView.model,saveFn:this.options.saveFn,success:a.bind(this._onSaveDone,this),error:a.bind(this._onSaveFail,this)}))},onSaveClick:function(){if(this.dataSourceView.model.isValid(!0)){var e=this,t=function(){e._prepareSaveDialog(),e.saveDialog.startSaveDialog()};return a.isUndefined(this.dataSourceView.model.validationMethodOnSaveClick)?a.isUndefined(this.dataSourceView.validationMethodOnSaveClick)?void t():void this.dataSourceView.validationMethodOnSaveClick(t):void this.dataSourceView.model.validationMethodOnSaveClick(t)}},_onSaveDone:function(){redirectToUrl(A.contextPath+"/flow.html?_flowId=repositoryConfirmFlow&resourceType=dataSource")},_onSaveFail:function(e,t){this.saveDialog&&(this.saveDialog.close(),this.saveDialog.remove());var n,r=this,s=!1,o=!1;try{s=JSON.parse(t.responseText)}catch(l){}a.isArray(s)||(s=[s]),a.each(s,function(e){var t=!1,a=!1;e&&("mandatory.parameter.error"===e.errorCode?e.parameters&&e.parameters[0]&&(a=i["resource.datasource.saveDialog.parameterIsMissing"],t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1)):"illegal.parameter.value.error"===e.errorCode&&e.parameters&&e.parameters[0]&&(t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1),a=i["resource.datasource.saveDialog.parameterIsWrong"]),"ConnectionUrl"===t&&(t="connectionUrl"),a&&t&&(r.dataSourceView.invalidField("[name="+t+"]",a),o=!0))}),o===!1&&(n="Failed to save data source.",s[0]&&s[0].errorCode?n+="<br/>The reason is: "+s[0].errorCode:s.message&&(n+="<br/>The reason is: "+s.message),n+="<br/><br/>The full response from the server is: "+t.responseText,dialogs.errorPopup.show(n))},onCancelClick:function(){this.options.cancelFn?this.options.cancelFn():l.restore(this.historyBackToken)}})});var resourceQuery={STEP1_PAGE_ID:"addResource_query_step1",STEP2_PAGE_ID:"addResource_locateDataSource",STEP3_PAGE_ID:"addResource_query_step3",LABEL_ID:"query.label",RESOURCE_ID_ID:"query.name",DESCRIPTION_ID:"query.description",JUMP_TO_PAGE_ID:"jumpToPage",DONE_BUTTON_ID:"done",NEXT_BUTTON_ID:"next",JUMP_TO_BUTTON_ID:"jumpButton",NEW_DATA_SOURCE_LINK_ID:"newDataSourceLink",LOCAL_DATA_SOURCE_ID:"LOCAL",RESOURCE_URI_INPUT_ID:"resourceUri",QUERY_SQL:"query.sql",_canGenerateId:!0,initialize:function(e){this._step1Page=$(this.STEP1_PAGE_ID),this._step2Page=$(this.STEP2_PAGE_ID),this._step3Page=$(this.STEP3_PAGE_ID),this._step1Page&&(this._form=$(document.body).select("form")[0],this._label=$(this.LABEL_ID),this._resourceId=$(this.RESOURCE_ID_ID),this._description=$(this.DESCRIPTION_ID),this._label.validator=resource.labelValidator.bind(this),this._resourceId.validator=resource.resourceIdValidator.bind(this),this._description.validator=resource.descriptionValidator.bind(this)),this._step2Page&&(this._form=$(document.body).select("form")[0],this._dataSourceUri=$(this.RESOURCE_URI_INPUT_ID),this._dataSourceUri.validator=resource.dataSourceValidator.bind(this)),this._step3Page&&(this._form=$(document.body).select("form")[0],this._query=$(this.QUERY_SQL),this._query.validator=resource.queryValidator.bind(this)),this._nextButton=$(this.NEXT_BUTTON_ID),this._doneButton=$(this.DONE_BUTTON_ID),this._jumpToPage=$(this.JUMP_TO_PAGE_ID),this._jumpButton=$(this.JUMP_TO_BUTTON_ID),this._newDataSourceLink=$(this.NEW_DATA_SOURCE_LINK_ID),this._localDataSource=$(this.LOCAL_DATA_SOURCE_ID),this._isEditMode=e?e.isEditMode:!1,window.resourceLocator&&resourceLocator.initialize({resourceInput:"resourceUri",browseButton:"browser_button",newResourceLink:"newDataSourceLink",treeId:"queryTreeRepoLocation",providerId:"dsTreeDataProvider",dialogTitle:resource.messages["resource.Query.Title"],selectLeavesOnly:!0}),this._initEvents()},_initEvents:function(){if(this._nextButton.observe("click",function(e){this._isDataValid()||e.stop(),this._localDataSource&&this._localDataSource.checked&&(e.stop(),this._newDataSourceLink.click())}.bindAsEventListener(this)),this._doneButton.observe("click",function(e){this._isDataValid()||e.stop()}.bindAsEventListener(this)),this._form.observe("keyup",function(e){var t=e.element();t==this._resourceId&&this._resourceId.getValue()!=resource.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(resource.generateResourceId(this._label.getValue())),ValidationModule.validate(resource.getValidationEntries([this._resourceId])))}.bindAsEventListener(this)),this._newDataSourceLink){var e=this;this._newDataSourceLink.observe("click",function(t){e._localDataSource.checked&&require(["dataSource/DataSourceController","jrs.configs","jquery","underscore"],function(t,a,n,i){var r=a.addDataSource?i.clone(a.addDataSource.initOptions):{};r.saveFn=function(t,a){t.type=a.type;var n=document.createElement("input");n.type="hidden",n.name="dataSourceJson",n.value=JSON.stringify(a.toJSON()),e._form.appendChild(n),n=document.createElement("input"),n.type="hidden",n.name="dataSourceType",n.value=a.type,e._form.appendChild(n),n=document.createElement("input"),n.type="hidden",n.name="_eventId_saveDatasource",e._form.appendChild(n),e._form.submit()},r.cancelFn=function(){e._form.submit()},r.skipLocation=!0,localContext&&localContext.initOptions&&localContext.initOptions&&(localContext.initOptions.dataSourceJson?(r.isEditMode=!0,r.dataSource=localContext.initOptions.dataSourceJson,r.dataSourceClientType=localContext.initOptions.dataSourceJson.type):localContext.initOptions.dataSourceUri&&(r.isEditMode=!0,r.resourceUri=localContext.initOptions.dataSourceUri));var s=new t(r);n("#display").append(s.$el),n("#selectFromRepository").remove(),s.render()})}.bindAsEventListener(this))}},_isDataValid:function(){var e=!0;return this._label&&(e=e&&ValidationModule.validate(resource.getValidationEntries([this._label]))),this._resourceId&&(this._resourceId.getValue()!=resource.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(resource.generateResourceId(this._label.getValue())),e=e&&ValidationModule.validate(resource.getValidationEntries([this._resourceId])))),this._description&&(e=e&&ValidationModule.validate(resource.getValidationEntries([this._description]))),this._dataSourceUri&&!this._dataSourceUri.disabled&&(e=e&&ValidationModule.validate(resource.getValidationEntries([this._dataSourceUri]))),this._query&&(e=e&&ValidationModule.validate(resource.getValidationEntries([this._query]))),e},jumpTo:function(e){return this._jumpToPage.setValue(e),this._jumpButton.click(),!1}};"undefined"==typeof require&&document.observe("dom:loaded",function(){resourceQuery.initialize(localContext.initOptions)}),define("resource.query",["resource.base","prototype","utils.common"],function(e){return function(){var t;return t||e.resourceQuery}}(this)),define("addResource/query/addQueryWithResourceLocatorMain",["require","!domReady","resource.query","underscore","jquery","jrs.configs","resource.base","utils.common","resource.locate"],function(e){"use strict";var t=e("!domReady"),a=e("resource.query"),n=e("underscore"),i=e("jquery"),r=e("jrs.configs"),s=e("resource.base");e("utils.common"),e("resource.locate"),t(function(){var e=r.addQuery.localContext.initOptions;n.extend(window.localContext,r.addQuery.localContext),n.extend(s.messages,r.addQuery.resource.messages),a.initialize(e),r.addQuery.buttonFlowControls&&(i("#steps1_2").on("click",function(){return a.jumpTo("reportNaming")}),i("#step3").on("click",function(){return a.jumpTo("resources")}),i("#step4").on("click",function(){return a.jumpTo("dataSource")}),i("#step5").on("click",function(){return a.jumpTo("query")}),i("#step6").on("click",function(){return a.jumpTo("customization")})),isIPad()&&s.initSwipeScroll()})});