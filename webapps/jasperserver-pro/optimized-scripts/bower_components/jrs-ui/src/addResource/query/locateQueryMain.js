var resourceLocator={CONTENT_REPOSITORY:"CONTENT_REPOSITORY",LOCAL:"LOCAL",NONE:"NONE",FILE_SYSTEM:"FILE_SYSTEM",LOCATE_EVENT:"resource:locate",ALLOWED_FILE_RESOURCE_EXTENSIONS:["css","ttf","jpg","jpeg","gif","bmp","png","jar","jrxml","properties","jrtx","xml","agxml","docx","doc","ppt","pptx","xls","xlsx","ods","odt","odp","pdf","rtf","html"],initialize:function(e){var r=function(e){return _.isObject(e)?e:$(e)};this.resourceUri=r(e.resourceInput),this.browseButton=r(e.browseButton),this.filePath=r(e.fileUploadInput),this.fakeFilePath=r(e.fakeFileUploadInput),this.fakeFileInput=r(e.fakeFileUploadInputText),this.newResourceLink=r(e.newResourceLink);try{this._initFileSelector(e)}catch(t){}finally{this._initEvents(e)}return this},_initEvents:function(e){jQuery(document).on("click","#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL",this._clickHandler),"fileResourceTreeDataProvider"===e.providerId&&(jQuery("#next").on("click",resourceLocator._nextClickHandler),jQuery("#filePath").on("change",resourceLocator._uploadChangeHandler))},_nextClickHandler:function(e){jQuery("#fileUpload").hasClass("error")&&e.preventDefault()},_uploadChangeHandler:function(e){jQuery("#fileUpload").removeClass("error");var r=!0,t=jQuery("#filePath")[0].value;if(t){var o=jQuery("#filePath")[0].value.match(/.*\.([^\.]+)$/);if(o){var i=o[1];_.indexOf(resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS,i)<0&&(r=!1)}else r=!1}else r=!1;if(!r){var s=resource.messages["resource.report.unsupportedFileType.error"]+" "+resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(", ");jQuery("#fileUpload").addClass("error").find("span.warning").html(s)}},_clickHandler:function(e){resourceLocator._updateResourceSelectorState(e.target.id)},_updateResourceSelectorState:function(e){resource.switchButtonState(this.filePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFilePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFileInput,e===this.FILE_SYSTEM),resource.switchButtonState(this.browseButton,e===this.CONTENT_REPOSITORY),resource.switchDisableState(this.resourceUri,e!==this.CONTENT_REPOSITORY);var r=e===this.LOCAL?["disabled","launcher"]:["launcher","disabled"];this._switchElementClasses(this.newResourceLink,r)},_initFileSelector:function(e){this.fileSelector=new picker.FileSelector(_.extend({},e,{uriTextboxId:this.resourceUri,browseButtonId:this.browseButton,title:e.dialogTitle}))},remove:function(e){this.fileSelector.remove()},_switchElementClasses:function(e,r){e&&r&&e.removeClassName(r[0]).addClassName(r[1])}};define("resource.locate",["resource.base","jquery","components.pickers"],function(e){return function(){var r;return r||e.resourceLocator}}(this));var resourceQueryLocate={messages:[],initialize:function(){resourceLocator.initialize({resourceInput:"resourceUri",browseButton:"browser_button",newResourceLink:"newQueryLink",treeId:"queryTreeRepoLocation",providerId:"queryTreeDataProvider",dialogTitle:resourceQueryLocate.messages["resource.QueryLocate.Title"],selectLeavesOnly:!0});var e=$("newQueryLink");e&&e.observe("click",function(){$("LOCAL").checked&&$("next").click()})},jumpTo:function(e){return $("jumpToPage").setValue(e),$("jumpButton").click(),!1}};"undefined"==typeof require&&document.observe("dom:loaded",function(){resourceQueryLocate.initialize()}),define("resource.query.locate",["resource.locate","prototype"],function(e){return function(){var r;return r||e.resourceQueryLocate}}(this)),define("addResource/query/locateQueryMain",["require","!domReady","resource.query.locate","underscore","jrs.configs","resource.base","jquery"],function(e){"use strict";var r=e("!domReady"),t=e("resource.query.locate"),o=e("underscore"),i=e("jrs.configs"),s=e("resource.base"),n=e("jquery");r(function(){o.extend(t.messages,i.addJasperReport.resourceQueryLocate.messages),t.initialize(),isIPad()&&s.initSwipeScroll(),n("#steps1_2").on("click",function(){return t.jumpTo("reportNaming")}),n("#step3").on("click",function(){return t.jumpTo("resources")}),n("#step4").on("click",function(){return t.jumpTo("dataSource")}),n("#step5").on("click",function(){return t.jumpTo("query")}),n("#step6").on("click",function(){return t.jumpTo("customization")})})});