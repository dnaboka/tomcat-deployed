define(["require","underscore","backbone.epoxy","common/component/colorPicker/SimpleAttachableColorPicker","./dateTimePickerEpoxyBindingHandler"],function(t){"use strict";var e=t("underscore"),i=t("backbone.epoxy"),n=t("common/component/colorPicker/SimpleAttachableColorPicker"),a=t("./dateTimePickerEpoxyBindingHandler");return i.View.extend({constructor:function(t){this.i18n=t.i18n,i.View.prototype.constructor.call(this,t)},bindingHandlers:{radioDiv:{init:function(t,i,n,a){var r=t.data("model-attr");this.$el=t,this.callback=function(t){n[r](this.$el.data("value"))},this.$el.on("click",e.bind(this.callback,this))},set:function(t,e){var i=t.siblings("div[data-bind*='radioDiv']");t.data("value")===e&&(t.addClass("selected"),i.removeClass("selected"))},clean:function(){this.$el.off("click",e.bind(this.callback,this))}},checkboxDiv:{init:function(t,i,n,a){var r=t.data("model-attr");this.$el=t,this.isTrippleState=!!this.$el.data("tripplestate"),this.callback=function(t){n[r](this._get(this.$el))},this.$el.on("click",e.bind(this.callback,this))},set:function(t,e){e===!0?t.removeClass("unchanged").addClass("selected"):e===!1?t.removeClass("unchanged").removeClass("selected"):t.removeClass("selected").addClass("unchanged")},_get:function(t){return this.isTrippleState?t.is(".unchanged")?!0:t.is(".selected")?!1:null:t.is(".selected")?!1:!0},clean:function(){this.$el.off("click",e.bind(this.callback,this))}},colorpicker:{init:function(t,i,a,r){var c=!!t.data("showTransparentInput"),s=!!t.data("showNoneInput"),o=t.data("label"),l=t.data("model-attr");this.attachableColorPicker=new n(t,{top:5,left:5},{label:o,showTransparentInput:c,showNoneInput:s}),this.callback=function(t){a[l](this.rgb2hex(t))},this.attachableColorPicker.on("color:selected",e.bind(this.callback,this))},set:function(t,e){var i;e?(i="transparent"===e?e:"#"+e,t.removeClass("unchanged"),t.find("div.colorpick").css("background-color",i)):(t.addClass("unchanged"),t.find("div.colorpick").css("background-color","transparent")),this.attachableColorPicker.highlightColor(this.hex2rgb(e))},clean:function(){this.attachableColorPicker.off("color:selected",e.bind(this.callback,this)),this.attachableColorPicker.remove()},rgb2hex:function(t){if("rgba(0, 0, 0, 0)"===t)return"transparent";if(t&&0===t.indexOf("rgb(")){var i=t.substring(4,t.length-1).split(","),n="";return e.each(i,function(t){n+=("0"+parseInt(t).toString(16)).slice(-2)}),n}return t},hex2rgb:function(t){if("transparent"===t)return"rgba(0, 0, 0, 0)";if(t&&6==t.length){var e=t.substring(0,2),i=t.substring(2,4),n=t.substring(4,6);return"rgb("+parseInt(e,16).toString(10)+", "+parseInt(i,16).toString(10)+", "+parseInt(n,16).toString(10)+")"}return t}},dateTimePicker:a}})});