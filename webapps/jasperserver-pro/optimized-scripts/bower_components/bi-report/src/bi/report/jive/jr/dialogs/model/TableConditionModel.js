define(["require","backbone.epoxy","underscore","bi/report/jive/util/jiveDataConverter","common/util/parse/NumberUtils"],function(e){"use strict";function t(){var e,t=this.get("value"),i=this.get("operator");e=i&&-1!=i.toLowerCase().indexOf("between"),e===!0?n.isArray(t)||this.set({value:[t]},{silent:!0}):e===!1&&n.isArray(t)&&this.set({value:t[0]},{silent:!0})}function i(e,t,i,r,a){var u,s,c;if(null===r||void 0===r)u="No value supplied!";else if("datetime"===e)try{void 0===l.jQueryUiTimestampToIsoTimestamp(r,i)&&(u="Unparsable date: "+r+" !")}catch(p){u=p}else if("time"===e)try{void 0===l.jQueryUiTimeToIsoTime(r,i)&&(u="Unparsable time: "+r+" !")}catch(p){u=p}else"numeric"===e&&l.DURATION_PATTERN===t&&(s=n.trim(r),s.length>0?(c=s.split(":"),c.length>3?u="Unparsable duration: "+r+" !":(void 0===o.parseNumber(c[0])||c.length>1&&(void 0===o.parseNumber(c[1])||o.parseNumber(c[1])>59)||c.length>2&&(void 0===o.parseNumber(c[2])||o.parseNumber(c[2])>59))&&(u="Unparsable duration: "+r+" !")):u="Empty value supplied!");return this.trigger("validate:"+a,this,a,u),u}var r=e("backbone.epoxy"),n=e("underscore"),l=e("bi/report/jive/util/jiveDataConverter"),a=e("common/util/parse/NumberUtils"),o=new a;return r.Model.extend({defaults:function(){return{operator:null,value:null,backgroundColor:null,font:{bold:null,italic:null,underline:null,color:null}}},computeds:function(){var e={};return n.each(this.defaults().font,function(t,i){e["font"+i.charAt(0).toUpperCase()+i.substring(1,i.length)]={deps:["font"],get:function(e){return e[i]},set:function(e){return this.modifyObject("font",i,e),e}}}),e.isMultiValueOperator=function(){var e=this.get("operator");return e&&-1!=e.toLowerCase().indexOf("between")?!0:!1},e},initialize:function(){this.on("change:operator",n.bind(t,this)),r.Model.prototype.initialize.apply(this,arguments)},reset:function(){return this.set(this.defaults(),{silent:!0}),this},validate:function(e,t){var r,a,o=e.value,u=e.operator,s=l.dataTypeToSchemaFormat[this.collection.dataType],c=this.collection.conditionPattern,p=this.collection.genericProperties;if(("IS_TRUE"===u||"IS_NOT_FALSE"===u||"IS_NOT_TRUE"===u||"IS_FALSE"===u)&&(o="true/false"),(null===o||void 0===o)&&this.get("isMultiValueOperator")&&(o=[null,null]),n.isArray(o)){if(r=i.call(this,s,c,p,o[0],"valueStart"),a=i.call(this,s,c,p,o[1],"valueEnd"),r||a)return"Invalid value supplied!"}else if(i.call(this,s,c,p,o,"valueStart"))return"Invalid value supplied!"},remove:function(){}})});