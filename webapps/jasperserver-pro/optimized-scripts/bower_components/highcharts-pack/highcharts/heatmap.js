!function(t,i){"use strict";"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(["highcharts"],t):t(i.Highcharts)}(function(t){function i(t,o){var e,s,r=t&&t.length;return r?(e=["plotX","plotY"][o%2],t.sort(function(t,i){return t[e]-i[e]}),s=Math.floor(r/2),{point:t[s],left:i(t.slice(0,s),o+1),right:i(t.slice(s+1),o+1)}):void 0}function o(t,i,e){var s,r,a,n,l,h=i.point,p=["plotX","plotY"][e%2],c=h;return h.dist=Math.pow(t.plotX-h.plotX,2)+Math.pow(t.plotY-h.plotY,2),s=t[p]-h[p],r=0>s?"left":"right",i[r]&&(n=o(t,i[r],e+1),c=n.dist<c.dist?n:h,a=0>s?"right":"left",i[a]&&Math.abs(s)<c.dist&&(l=o(t,i[a],e+1),c=l.dist<c.dist?l:c)),c}var e,s=t.Axis,r=t.Chart,a=t.Color,n=t.Legend,l=t.LegendSymbolMixin,h=t.Series,p=t.Point,c=t.getOptions(),d=t.each,f=t.extend,u=t.extendClass,g=t.merge,m=t.pick,x=t.seriesTypes,y=t.wrap,b=function(){},v=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};f(v.prototype,s.prototype),f(v.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify",rotation:0},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,i){var o,e="vertical"!==t.options.legend.layout;o=g(this.defaultColorAxisOptions,{side:e?2:1,tickPixelInterval:e?100:72,reversed:!e},i,{opposite:!e,showEmpty:!1,title:null,isColor:!0}),s.prototype.init.call(this,t,o),i.dataClasses&&this.initDataClasses(i),this.initStops(i),this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,o){var e,s;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,e=1!==i[3]||1!==t[3],s=(e?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-o))+","+Math.round(i[1]+(t[1]-i[1])*(1-o))+","+Math.round(i[2]+(t[2]-i[2])*(1-o))+(e?","+(i[3]+(t[3]-i[3])*(1-o)):"")+")"):s=i.input||"none",s},initDataClasses:function(t){var i,o=this,e=this.chart,s=0,r=this.options,n=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],d(t.dataClasses,function(t,l){var h;t=g(t),i.push(t),t.color||("category"===r.dataClassColor?(h=e.options.colors,t.color=h[s++],s===h.length&&(s=0)):t.color=o.tweenColors(a(r.minColor),a(r.maxColor),2>n?.5:l/(n-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],d(this.stops,function(t){t.color=a(t[1])})},setOptions:function(t){s.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,o,e,s=this.legendSymbol,r=this.chart;s&&(this.left=t=s.attr("x"),this.top=i=s.attr("y"),this.width=o=s.attr("width"),this.height=e=s.attr("height"),this.right=r.chartWidth-t-o,this.bottom=r.chartHeight-i-e,this.len=this.horiz?o:e,this.pos=this.horiz?t:i)},toColor:function(t,i){var o,s,r,a,n,l,h=this.stops,p=this.dataClasses;if(p){for(l=p.length;l--;)if(n=p[l],s=n.from,r=n.to,(s===e||t>=s)&&(r===e||r>=t)){a=n.color,i&&(i.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),l=h.length;l--&&!(o>h[l][0]););s=h[l]||h[l+1],r=h[l+1]||s,o=1-(r[0]-o)/(r[0]-s[0]||1),a=this.tweenColors(s.color,r.color,o)}return a},getOffset:function(){var t=this.legendGroup,i=this.chart.axisOffset[this.side];t&&(this.axisParent=t,s.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)},setLegendColor:function(){var t,i=this.horiz,o=this.options,e=this.reversed,s=e?1:0,r=e?0:1;t=i?[s,0,r,0]:[0,r,0,s],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:o.stops||[[0,o.minColor],[1,o.maxColor]]}},drawLegendSymbol:function(t,i){var o=t.padding,e=t.options,s=this.horiz,r=m(e.symbolWidth,s?200:12),a=m(e.symbolHeight,s?12:200),n=m(e.labelPadding,s?16:30),l=m(e.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,r,a).attr({zIndex:1}).add(i.legendGroup),this.legendItemWidth=r+o+(s?l:n),this.legendItemHeight=a+o+(s?n:0)},setState:b,visible:!0,setVisible:b,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,i){var o,e=i&&i.plotX,r=i&&i.plotY,a=this.pos,n=this.len;i&&(o=this.toPixels(i[i.series.colorKey]),a>o?o=a-2:o>a+n&&(o=a+n+2),i.plotX=o,i.plotY=this.len-o,s.prototype.drawCrosshair.call(this,t,i),i.plotX=e,i.plotY=r,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,i,o,e,r){return"number"==typeof r?this.horiz?["M",r-4,this.top-6,"L",r+4,this.top-6,r,this.top,"Z"]:["M",this.left,r,"L",this.left-6,r+6,this.left-6,r-6,"Z"]:s.prototype.getPlotLinePath.call(this,t,i,o,e)},update:function(t,i){var o=this.chart,e=o.legend;d(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&e.allItems&&(d(e.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),o.isDirtyLegend=!0),o.options[this.coll]=g(this.userOptions,t),s.prototype.update.call(this,t,i),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var i,o=this,s=this.chart,r=this.legendItems,a=s.options.legend,n=a.valueDecimals,h=a.valueSuffix||"";return r.length||d(this.dataClasses,function(a,p){var c=!0,u=a.from,g=a.to;i="",u===e?i="< ":g===e&&(i="> "),u!==e&&(i+=t.numberFormat(u,n)+h),u!==e&&g!==e&&(i+=" - "),g!==e&&(i+=t.numberFormat(g,n)+h),r.push(f({chart:s,name:i,options:{},drawLegendSymbol:l.drawRectangle,visible:!0,setState:b,isDataClass:!0,setVisible:function(){c=this.visible=!c,d(o.series,function(t){d(t.points,function(t){t.dataClass===p&&t.setVisible(c)})}),s.legend.colorizeItem(this,c)}},a))}),r},name:""}),d(["fill","stroke"],function(i){t.Fx.prototype[i+"Setter"]=function(){this.elem.attr(i,v.prototype.tweenColors(a(this.start),a(this.end),this.pos))}}),y(r.prototype,"getAxes",function(t){var i=this.options,o=i.colorAxis;t.call(this),this.colorAxis=[],o&&new v(this,o)}),y(n.prototype,"getAllItems",function(t){var i=[],o=this.chart.colorAxis[0];return o&&(o.options.dataClasses?i=i.concat(o.getDataClassLegendSymbols()):i.push(o),d(o.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var C={setVisible:function(t){var i=this,o=t?"show":"hide";d(["graphic","dataLabel"],function(t){i[t]&&i[t][o]()})}},w={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:b,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,o=this.colorAxis,e=this.colorKey;d(this.data,function(s){var r,a=s[e];r=s.options.color||(null===a?i:o&&void 0!==a?o.toColor(a,s):s.color||t.color),r&&(s.color=r)})}};return c.plotOptions.heatmap=g(c.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),x.heatmap=u(x.scatter,g(w,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:u(p,C),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;x.scatter.prototype.init.apply(this,arguments),t=this.options,t.pointRange=m(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1;var i=jQuery(this.chart.container),o=i.find("#jasper_highcharts_css");if(this.chart.options.chart.isHeatMapTimeSeriesChart){if(0===o.length){var e=jQuery("<style type='text/css'>.highcharts-tooltip>span {background: rgba(255,255,255,0.85);border: 1px solid silver;border-radius: 3px;box-shadow: 1px 1px 2px #888;padding: 8px;z-index: 2;}.highcharts-button>span {background: rgba(255,255,255,0.85);border: 1px solid silver;border-radius: 3px;padding: 5px;z-index: 2;cursor: pointer;}.highcharts-button>span:hover {background: -moz-linear-gradient(top, #ffffff 0%, #aaccff 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#aaccff));background: -webkit-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: -o-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: -ms-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: linear-gradient(to bottom, #ffffff 0%,#aaccff 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#aaccff',GradientType=0 );}</style>");e.attr("id","jasper_highcharts_css"),i.append(e)}}else o.length&&o.remove()},translate:function(){var t=this,i=t.options,o=t.xAxis,e=t.yAxis,s=function(t,i,o){return Math.min(Math.max(i,t),o)};t.generatePoints(),d(t.points,function(t){var r=(i.colsize||1)/2,a=(i.rowsize||1)/2,n=s(Math.round(o.len-o.translate(t.x-r,0,1,0,1)),0,o.len),l=s(Math.round(o.len-o.translate(t.x+r,0,1,0,1)),0,o.len),h=s(Math.round(e.translate(t.y-a,0,1,0,1)),0,e.len),p=s(Math.round(e.translate(t.y+a,0,1,0,1)),0,e.len);t.plotX=t.clientX=(n+l)/2,t.plotY=(h+p)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(n,l),y:Math.min(h,p),width:Math.abs(l-n),height:Math.abs(p-h)}}),t.translateColors(),this.chart.hasRendered&&d(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:function(){var i;this.chart.renderer.forExport||!this.chart.options.chart.isHeatMapTimeSeriesChart?x.column.prototype.drawPoints.call(this):(i=this.getContext())?(i.canvas.height=this.chart.renderer.plotBox.height,i.canvas.width=this.chart.renderer.plotBox.width,t.each(this.points,function(t){var o,e=t.plotY;void 0===e||isNaN(e)||null===t.y||(o=t.shapeArgs,i.fillStyle=t.pointAttr[""].fill,i.fillRect(o.x,o.y,o.width,o.height))})):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")},animate:b,getBox:b,drawLegendSymbol:l.drawRectangle,getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,h.prototype.getExtremes.call(this)},getContext:function(){var t;return this.ctx||(t=document.createElement("canvas"),t.setAttribute("width",this.chart.plotWidth),t.setAttribute("height",this.chart.plotHeight),t.style.position="absolute",t.style.left=this.group.translateX+"px",t.style.top=this.group.translateY+"px",t.style.zIndex=0,t.style.cursor="crosshair",this.chart.container.appendChild(t),t.getContext&&(this.ctx=t.getContext("2d"))),this.ctx},setTooltipPoints:function(){var t=this;this.tree=null,setTimeout(function(){t.tree=i(t.points,0)})},getNearest:function(t){return this.tree?o(t,this.tree,0):void 0}})),t.wrap(t.Pointer.prototype,"runPointActions",function(i,o){var e=this.chart;i.call(this,o),this.chart.options.chart.isHeatMapTimeSeriesChart&&t.each(e.series,function(t){var i;t.getNearest&&(i=t.getNearest({plotX:o.chartX-e.plotLeft,plotY:o.chartY-e.plotTop}),i&&i.onMouseOver(o))})}),t},this);