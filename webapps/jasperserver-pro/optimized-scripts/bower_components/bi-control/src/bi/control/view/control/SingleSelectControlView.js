define(["require","exports","module","../BaseInputControlView","jquery","underscore","logger","components/singleSelect/view/SingleSelect","components/singleSelect/dataprovider/CacheableDataProvider","mustache","../../util/inputControlHelpers","text!../../template/singleSelectTemplate.htm"],function(e,t,i){"use strict";var s=e("../BaseInputControlView"),n=e("jquery"),l=(e("underscore"),e("logger").register(i),e("components/singleSelect/view/SingleSelect")),o=e("components/singleSelect/dataprovider/CacheableDataProvider"),a=e("mustache"),c=e("../../util/inputControlHelpers"),r=e("text!../../template/singleSelectTemplate.htm");return s.extend({template:r,renderStructure:function(){this.singleSelect||(this.dataProvider=new o,this.singleSelect=new l({getData:this.dataProvider.getData}).setDisabled(this.model.get("readOnly"))),this.template&&(this.singleSelect.undelegateEvents(),this.setElement(n(a.to_html(this.template,this.model.toJSON()))),this.singleSelect.renderData(),this.singleSelect.$el.insertBefore(this.$el.find(".jr-mInput-alert")),this.singleSelect.delegateEvents(),this.updateOptionsSelection())},updateOptionsSelection:function(){var e=this.model.state.options.toJSON();this.dataProvider.setData(e);var t=this;this.singleSelect.fetch(function(){t.singleSelect.setValue(c.extractSelection(e,!0),{silent:!0})})},bindCustomEventListeners:function(){var e=this;this.singleSelect.off("selection:change").on("selection:change",function(e){this.model.changeState(e)},this),this.model.state.options.on("reset",this.updateOptionsSelection,this),this.model.state.options.on("change:selected",this.updateOptionsSelection,this),this.$el.on("click",".jr-mInput-label",function(){e.singleSelect.$input.focus()})},remove:function(){this.$el.off("change","input"),this.$el.off("click","a"),this.$el.off("click",".jr-mInput-label"),this.singleSelect.remove(),this.model.state.options.off("reset",this.updateOptionsSelection,this),this.model.state.options.off("change:selected",this.updateOptionsSelection,this),s.prototype.remove.call(this)}})});