define(["require","./DashletModel","../../enum/dashboardComponentTypes","../../enum/dashboardWiringStandardIds","bundle!DashboardBundle","common/util/i18nMessage","dashboard/dashboardSettings","backbone","jquery","underscore"],function(e){"use strict";function r(e){var r=this.get("parameters"),n={},t=this;r&&r.length&&d.each([a.REFRESH_SLOT,a.APPLY_SLOT].concat(d.pluck(r,"id")),function(e){n[e]=function(e){return function(r,n){(t.lastPayload||(t.lastPayload={}))[e]=r,(t.lastSender||(t.lastSender={}))[e]=n,t.trigger("signal",{name:e,value:r},n)}}(e)}),e.register(this,{signals:[],slots:n})}var n=e("./DashletModel"),t=e("../../enum/dashboardComponentTypes"),a=e("../../enum/dashboardWiringStandardIds"),s=e("bundle!DashboardBundle"),i=e("common/util/i18nMessage").extend({bundle:s}),o=e("dashboard/dashboardSettings"),d=(e("backbone"),e("jquery"),e("underscore"));return n.extend({componentName:s["dashboard.component.web.page.component.name"],defaults:d.extend({},n.prototype.defaults,{type:t.WEB_PAGE_VIEW,timeout:void 0,url:o.DASHLET_WEBPAGE_VIEW_DEFAULT_URL,autoRefresh:o.DASHLET_AUTO_REFRESH,refreshInterval:o.DASHLET_REFRESH_INTERVAL_TIME_UNIT_DEFAULT_MINUTES,refreshIntervalUnit:o.DASHBOARD_REFRESH_INTERVAL_UNIT,scroll:o.DASHLET_SCROLL,showTitleBar:o.DASHLET_SHOW_TITLE_BAR,showRefreshButton:o.DASHLET_SHOW_REFRESH_BUTTON,showMaximizeButton:o.DASHLET_SHOW_MAXIMIZE_BUTTON}),validation:d.extend({},n.prototype.validation,{url:[{required:!0,msg:new i("dashboard.component.error.url.required")}],refreshInterval:[{required:!0,msg:new i("dashboard.error.web.page.view.refreshInterval.required")},{integerNumber:!0,msg:new i("dashboard.error.web.page.view.refreshInterval.integer")},{fn:function(e,r,n){var t=n.refreshIntervalUnit,a={second:o.DASHLET_REFRESH_INTERVAL_TIME_UNIT_SECONDS,minute:o.DASHLET_REFRESH_INTERVAL_TIME_UNIT_MINUTES};return e<a[t]?"Value must be bigger than "+a[t]:void 0},msg:new i("dashboard.error.web.page.view.refreshInterval.min",o.DASHLET_REFRESH_INTERVAL_TIME_UNIT_MINUTES,o.DASHLET_REFRESH_INTERVAL_TIME_UNIT_SECONDS)}],refreshIntervalUnit:[{required:!0,msg:new i("dashboard.error.web.page.view.refreshIntervalUnit.required")},{oneOf:["second","minute"],msg:new i("dashboard.error.web.page.view.refreshIntervalUnit.oneOf",s["dashboard.dialog.properties.refresh.interval.second"],s["dashboard.dialog.properties.refresh.interval.minute"])}]}),initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:autoRefresh",function(){this.get("autoRefresh")||this.isValid(["refreshInterval","refreshIntervalUnit"])||this.set({refreshInterval:this.defaults.refreshInterval,refreshIntervalUnit:this.defaults.refreshIntervalUnit})},this)},acceptWiringVisitor:function(e){this.on("parameters:set",d.bind(r,this,e)),r.call(this,e)}})});