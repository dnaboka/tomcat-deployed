define(["require","exports","module","jquery","underscore.string","underscore","./DashboardComponentModel","../../dashboardSettings"],function(t,e,i){"use strict";var o=t("jquery"),a=t("underscore.string"),h=t("underscore"),s=t("./DashboardComponentModel"),r=t("../../dashboardSettings");return s.extend({defaults:h.extend({},s.prototype.defaults,{x:0,y:0,width:0,height:0,maximized:!1}),toJSON:function(){var t=s.prototype.toJSON.apply(this,arguments);return delete t.x,delete t.y,delete t.width,delete t.height,delete t.maximized,delete t.showPaginationControl,delete t.isAdhocChart,t},toDashboardComponentObject:function(){var t=s.prototype.toDashboardComponentObject.apply(this,arguments);return t.maximized=this.get("maximized"),t.position=this.pick("x","y","width","height"),this.has("showTitleBar")&&(t.toolbar=this.get("showTitleBar")===!1?!1:{maximize:this.get("showMaximizeButton"),refresh:this.get("showRefreshButton")}),this.has("showPaginationControl")&&(t.pagination=this.get("showPaginationControl")),t},updateFromDashboardComponentObject:function(t){var e=h.omit(t,"id","name","type","position","resource");this.has("showTitleBar")&&e.hasOwnProperty("toolbar")&&null!==e.toolbar&&(h.isObject(e.toolbar)?(e.showTitleBar=!0,e.showMaximizeButton=e.toolbar.maximize,e.showRefreshButton=e.toolbar.refresh):e.showTitleBar=e.toolbar),this.has("showPaginationControl")&&e.hasOwnProperty("pagination")&&null!==e.pagination&&(e.showPaginationControl=e.pagination),null===e.maximized&&delete e.maximized,delete e.pagination,delete e.toolbar,this.set(e,{validate:!0})},toHTML:function(t){var e=a.sprintf(r.DASHLET_TEMPLATE.replace(/\(\\d\+\)/g,"%d").replace(/\(\[\\w\\d\]\+\)/g,"%s"),this.get("id"),this.get("x")||0,this.get("y")||0,this.get("width")||0,this.get("height")||0);return t===!0&&(e=o(e).css(this.getCssPosition())[0].outerHTML),e},getCssPosition:function(){return{left:100*this.get("x")/r.GRID_WIDTH+"%",top:100*this.get("y")/r.GRID_HEIGHT+"%",width:100*this.get("width")/r.GRID_WIDTH+"%",height:100*this.get("height")/r.GRID_HEIGHT+"%"}},getPositionObject:function(){return{x:this.get("x"),y:this.get("y"),width:this.get("width"),height:this.get("height")}}},{htmlToPositionObject:function(t){var e=o(t),i={};return i.id=e.attr(r.COMPONENT_ID_ATTRIBUTE),i.x=1*e.attr("data-x"),i.y=1*e.attr("data-y"),i.width=1*e.attr("data-width"),i.height=1*e.attr("data-height"),i}})});