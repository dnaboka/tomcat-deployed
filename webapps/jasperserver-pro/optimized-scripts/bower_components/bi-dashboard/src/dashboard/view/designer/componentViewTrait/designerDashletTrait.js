define(["require","exports","module","../../base/componentViewTrait/dashletTrait","dashboard/dashboardSettings","dashboard/view/designer/propertiesDialog/PropertiesDialogController","dashboard/enum/dashboardComponentTypes","common/component/menu/ContextMenu","underscore","jquery","logger"],function(e,t,o){"use strict";function i(e,t){var o=["x","y","width","height"];a.each(o,function(o){e.attr("data-"+o,t.get(o))}),e.attr(s.COMPONENT_ID_ATTRIBUTE,t.id)}var n=e("../../base/componentViewTrait/dashletTrait"),s=e("dashboard/dashboardSettings"),a=(e("dashboard/view/designer/propertiesDialog/PropertiesDialogController"),e("dashboard/enum/dashboardComponentTypes"),e("common/component/menu/ContextMenu"),e("underscore")),r=(e("jquery"),e("logger").register(o));return a.extend({},n,{_onViewInitialize:function(){n._onViewInitialize.apply(this,arguments),this.listenTo(this.model,"change:x change:y",this._onComponentMove),this.listenTo(this.model,"change:width change:height",this._onComponentResize)},_onViewRemove:function(){n._onViewRemove.apply(this,arguments),this.$content.off("mousedown")},_onComponentResize:function(){this.$el.parent().css(this.model.getCssPosition()),i(this.$el.parent(),this.model),this.resize(),r.debug("resized dashlet "+this.model.id)},_onComponentMove:function(){this.$el.parent().css(this.model.getCssPosition()),i(this.$el.parent(),this.model),r.debug("moved dashlet "+this.model.id)},_onDashboardPropertiesChange:function(e){var t=e.changedAttributes();t&&("showDashletBorders"in t||"dashletPadding"in t||"titleBarColor"in t||"titleTextColor"in t||"dashletMargin"in t)&&(this._setDashletVisualAppearance(),this.resize())},_toggleDashletToolbarButtons:function(){this.toolbar&&(this.toolbar.getOptionView("refresh").disable(),this.toolbar.getOptionView("maximize").disable(),this.toolbar.getOptionView("export").disable(),this.toolbar.getOptionView("export").enable=this.toolbar.getOptionView("export").disable)},updateTitle:function(){this.toolbar&&this.toolbar.$(".innerLabel > p").text(this.model.get("name"))}})});