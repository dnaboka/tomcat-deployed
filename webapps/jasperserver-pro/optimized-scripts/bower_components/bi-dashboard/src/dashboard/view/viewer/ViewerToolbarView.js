define(["require","backbone","underscore","common/component/menu/HoverMenu","bundle!DashboardBundle","common/component/dialog/Dialog","text!dashboard/template/toolbarTemplate.htm","css!dashboard/toolbar.css"],function(t){"use strict";var e=t("backbone"),o=t("underscore"),i=t("common/component/menu/HoverMenu"),n=t("bundle!DashboardBundle"),s=(t("common/component/dialog/Dialog"),t("text!dashboard/template/toolbarTemplate.htm"));return t("css!dashboard/toolbar.css"),e.View.extend({el:o.template(s,{i18n:n}),events:{"click #undo":"runUndo","click #undoAll":"runUndoAll","click #redo":"runRedo","click #filterPopup":"toggleFilterPopupDialog","click #back":"goBack"},initialize:function(){this.exportMenu=new i([{label:"PNG",action:"png"},{label:"PDF",action:"pdf"},{label:"DOCX",action:"docx"},{label:"ODT",action:"odt"},{label:"PPTX",action:"pptx"}],this.$("#export")),this.listenTo(this.exportMenu,"all",function(t){0===t.indexOf("option:")&&(this.exportMenu.hide(),this.exportDashboard(t.substring("option:".length)))},this),this.filterPopupIsVisible=!1,this.listenTo(this,"filterButtonStyle:open",this.openFilterPopupDialog),this.listenTo(this,"filterButtonStyle:close",this.closeFilterPopupDialog),this.setVisibility({back:/dashboard\/viewer/.test(window.location.href)&&/_ddHyperlink=\d+/.test(window.location.href)&&!/noReturn=true/.test(window.location.href)})},remove:function(){this.exportMenu.remove(),e.View.prototype.remove.apply(this,arguments)},setTitle:function(t){this.$(".header .title").text(t)},toggleFilterPopupDialog:function(){this.trigger("button:filterPopup"),this.filterPopupIsVisible?this.closeFilterPopupDialog():this.openFilterPopupDialog()},goBack:function(){this.trigger("button:back")},openFilterPopupDialog:function(){this.$("#filterPopup").addClass("pressed").addClass("down"),this.filterPopupIsVisible=!0},closeFilterPopupDialog:function(){this.$("#filterPopup").removeClass("pressed").removeClass("down"),this.filterPopupIsVisible=!1},setVisibility:function(t){var e=this;o.each(o.keys(t),function(o){var i=e.$("#"+o),n=i.parent().prev();i[t[o]?"removeClass":"addClass"]("hidden"),n.hasClass("separator")&&n[t[o]?"show":"hide"]()})},setEnabled:function(t){var e=this;o.each(o.keys(t),function(o){t[o]?e.$("#"+o).attr("disabled",!1):e.$("#"+o).removeClass("over").attr("disabled",!0)})},exportDashboard:function(t){this.trigger("button:export",t)},runUndo:function(){this.trigger("button:undo")},runUndoAll:function(){this.trigger("button:undoAll")},runRedo:function(){this.trigger("button:redo")}})});