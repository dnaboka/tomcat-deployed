define(["require","jquery","dashboard/enum/dashboardWiringStandardIds","common/component/webPageView/WebPageView"],function(e){"use strict";function t(e){e.name===o.REFRESH_SLOT?this.applyUrl(!0):e.name===o.APPLY_SLOT&&this.applyUrl(!1)}var n=e("jquery"),o=e("dashboard/enum/dashboardWiringStandardIds"),s=e("common/component/webPageView/WebPageView");return{_initComponent:function(){if(this.component=new s({url:this.model.get("url"),scrolling:this.model.get("scroll")}),this.$el.addClass("dashboardVisualization"),this.listenTo(this.component,"load",function(){this.$el.addClass("rendered")},this),this.listenTo(this.model,"signal",t),this.model.lastPayload)for(var e in this.model.lastPayload)t.call(this,{name:e,value:this.model.lastPayload[e]},this.model.lastSender[e]);this.listenTo(this.model,"change:url",this.applyUrl,this)},_renderComponent:function(){this.component.render(this.$content),this.trigger("componentRendered",this)},_onComponentPropertiesChange:function(){var e=this.model.changedAttributes();e&&"scroll"in e&&(this.component.setScrolling(this.model.get("scroll")),this.refresh())},_removeComponent:function(){this.component.remove()},refresh:function(){return this.component.refresh(),n.Deferred().resolve()},applyUrl:function(e){try{var t=this.model.getParametrizationResult("url",this.paramsModel.attributes);this.component.url!==t?(this.hideMessage(),this.component.setUrl(t),this.component.$el.show()):e&&this.component.refresh()}catch(n){this.showMessage({errorCode:"parameter.not.specified"}),this.component.$el.hide()}}}});