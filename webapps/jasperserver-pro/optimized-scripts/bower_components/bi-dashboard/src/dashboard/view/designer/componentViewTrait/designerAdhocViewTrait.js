define(["require","underscore","./../../base/componentViewTrait/reportTrait","../../../collection/ReportsParametersCollection"],function(e){"use strict";function r(e,r){var n=t.filter(e,function(e){return!e.parametrizeProperty}),o=t.pluck(n,"id"),i=t.pluck(r,"id"),a=t.difference(o,i),l=t.difference(i,o);return a.length||l.length}var t=e("underscore"),n=e("./../../base/componentViewTrait/reportTrait"),o=e("../../../collection/ReportsParametersCollection").instance,i=n._initComponent;return t.extend({},n,{_initComponent:function(){var e=this;return o.getReportParameters(this.model.resource.resource.get("uri")).done(function(n,o){if(r(e.model.get("parameters"),n)||r(e.model.get("outputParameters"),o))e.model.set({parameters:n,outputParameters:o});else{var i,a=e.model.get("outputParameters");if(a)for(i=0;i<o.length;i++)t.findWhere(a,{id:o[i].id}).label=o[i].label;if(a=e.model.get("parameters"))for(i=0;i<n.length;i++)t.findWhere(a,{id:n[i].id}).label=n[i].label}}),i.apply(this,arguments)}})});