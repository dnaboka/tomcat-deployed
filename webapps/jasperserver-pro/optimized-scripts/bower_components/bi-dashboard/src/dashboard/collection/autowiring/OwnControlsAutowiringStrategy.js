define(["require","underscore","./BaseAutowiringStrategy","../../enum/dashboardComponentTypes","../../enum/dashboardWiringStandardIds"],function(e){"use strict";function r(e,r,n,t){var u=r.reduce(function(e,r){return r.component.get("ownerResourceId")===n.resource.id&&e.push(r),e},[]),s=n.get("parameters")||[];o.each(u,function(e){var t=o.find(s,function(r){return e.component.resource.id===r.uri||e.component.getOwnerUri()===r.uri&&e.component.getOwnerParameterName()===r.id||e.component.resource.id===r.uri+"_files/"+r.id});e.consumers.add({consumer:n.id+":"+t.id}),r.get(e.component.get("parentId")+":"+c.REFRESH_SIGNAL).consumers.add({consumer:n.id+":"+c.APPLY_SLOT})})}function n(e,r,n,t){var u=r.find(function(e){return e.component.resource&&e.component.resource.id===n.resource.id}),s=n.collection.find(function(e){return e.resource&&e.resource.id===n.get("ownerResourceId")});s&&o.each(s.get("parameters"),function(e){n.getOwnerParameterName()===e.id&&(u.consumers.add({consumer:s.id+":"+e.id}),u.component.get("parentId")&&r.get(u.component.get("parentId")+":"+c.REFRESH_SIGNAL).consumers.add({consumer:s.id+":"+c.APPLY_SLOT}))})}var o=e("underscore"),t=e("./BaseAutowiringStrategy"),u=e("../../enum/dashboardComponentTypes"),c=e("../../enum/dashboardWiringStandardIds");return t.extend({autowire:function(e,o,t){o.resource&&o.resource.resource&&(o.resource.resource.type===u.REPORT||o.resource.resource.type===u.ADHOC_VIEW)&&r(this,e,o,t),o.resource&&o.resource.resource&&o.resource.resource.type===u.INPUT_CONTROL&&n(this,e,o,t)}})});