define(["require","jquery","underscore","dashboard/dashboardSettings","dashboard/enum/dashboardComponentTypes","bi/repository/enum/repositoryResourceTypes","./BasicHelper"],function(e){"use strict";var r=e("jquery"),t=e("underscore"),o=(e("dashboard/dashboardSettings"),e("dashboard/enum/dashboardComponentTypes")),i=(e("bi/repository/enum/repositoryResourceTypes"),e("./BasicHelper"));return i.extend({init:function(e){this.container=e,this.helper=r("<div>").addClass("helper filter-dialog-drop").appendTo(r("body#dashboard")).hide(),this.helper.position={}},drag:function(e,i){if(this.strategy.model.currentFoundation.components.getDashboardPropertiesComponent().get("dashletFilterShowPopup")){var n=(i?i.componentId:void 0,r(e.toElement||e.originalEvent.target)),s=r(".filterGroup.dialog.open");if(i.resourceType===o.INPUT_CONTROL&&(n.is(this.helper)||n.parents(".dashboardCanvas").length||n.is(".filterGroup.dialog.open")||n.parents(".filterGroup.dialog.open").length)){if(!s.length)return void this.strategy.model.currentFoundation.trigger("open:filterDialog");var d=s[0].getBoundingClientRect();this.helper.element=s,this.helper.css(t.extend({zIndex:parseInt(s.css("zIndex"))+2},t.pick(d,["top","left","width","height"]))),this.helper.show()}else this.helper.hide()}},stop:function(){this.helper.hide()}})});