function isMacOS(){return isOS("mac")}function isWindowsOS(){return isOS("win")}function isLinuxOS(){return isOS("linux")}function isOS(e){return navigator.appVersion.toLowerCase().include(e)}function isSupportsTouch(){return isIPad()||isAndroid()}function isMozilla(){return"Netscape"===navigator.appName}function isFirefox(){return navigator.userAgent.toLowerCase().include("firefox")}function isWebKitEngine(){return Prototype.Browser.WebKit}function isChrome(){return navigator.userAgent.toLowerCase().include("chrome")}function isIPad(){return"iPad"==navigator.platform}function isAndroid(){return navigator.userAgent.toLowerCase().include("android")}function isIE(){return"Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.indexOf("Trident/")>=0}function isIE6(){return isIEVersion(6)}function isIE7(){return isIEVersion(7)}function isIE8(){return isIEVersion(8)}function isIE9(){return isIEVersion(9)}function isIE10(){return isIEVersion(10)}function isIE11(){return isIEVersion(11)}function isIEVersion7Upwards(){return getIEVersion()>=7}function isIEVersion(e){return getIEVersion()===e}function getIEVersion(){var e=0;if(getIEVersion.version>=0)return getIEVersion.version;if(isIE())if("Netscape"===navigator.appName){var t=navigator.userAgent,n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}else{var i=navigator.appVersion.split("MSIE")[1];e=parseFloat(i)}return getIEVersion.version=e,e}function doNothing(){}function addDataToForm(e,t){var n=function(t,n){var i=jQuery("<input>").attr("type","hidden").attr("name",t).val(n);jQuery(e).append(jQuery(i))};_.each(t,function(e,t){_.isArray(e)?_.each(e,function(e){n(t,e)}):n(t,e)})}function updateYearMonth(e,t,n){return e&&(e.setFullYear(t),e.setMonth(n),e.getMonth()!==n&&e.setMonth(n)),e}function getTZOffset(e,t){if(!e)return 0;var n,i={"africa/abidjan":{utc:0,utc_dst:0},"africa/accra":{utc:0,utc_dst:0},"africa/addis_ababa":{utc:3,utc_dst:3},"africa/algiers":{utc:1,utc_dst:1},"africa/asmara":{utc:3,utc_dst:3},"africa/asmera":{utc:3,utc_dst:3},"africa/bamako":{utc:0,utc_dst:0},"africa/bangui":{utc:1,utc_dst:1},"africa/banjul":{utc:0,utc_dst:0},"africa/bissau":{utc:0,utc_dst:0},"africa/blantyre":{utc:2,utc_dst:2},"africa/brazzaville":{utc:1,utc_dst:1},"africa/bujumbura":{utc:2,utc_dst:2},"africa/cairo":{utc:2,utc_dst:2},"africa/casablanca":{utc:0,utc_dst:1},"africa/ceuta":{utc:1,utc_dst:2},"africa/conakry":{utc:0,utc_dst:0},"africa/dakar":{utc:0,utc_dst:0},"africa/dar_es_salaam":{utc:3,utc_dst:3},"africa/djibouti":{utc:3,utc_dst:3},"africa/douala":{utc:1,utc_dst:1},"africa/el_aaiun":{utc:0,utc_dst:0},"africa/freetown":{utc:0,utc_dst:0},"africa/gaborone":{utc:2,utc_dst:2},"africa/harare":{utc:2,utc_dst:2},"africa/johannesburg":{utc:2,utc_dst:2},"africa/juba":{utc:3,utc_dst:3},"africa/kampala":{utc:3,utc_dst:3},"africa/khartoum":{utc:3,utc_dst:3},"africa/kigali":{utc:2,utc_dst:2},"africa/kinshasa":{utc:1,utc_dst:1},"africa/lagos":{utc:1,utc_dst:1},"africa/libreville":{utc:1,utc_dst:1},"africa/lome":{utc:0,utc_dst:0},"africa/luanda":{utc:1,utc_dst:1},"africa/lubumbashi":{utc:2,utc_dst:2},"africa/lusaka":{utc:2,utc_dst:2},"africa/malabo":{utc:1,utc_dst:1},"africa/maputo":{utc:2,utc_dst:2},"africa/maseru":{utc:2,utc_dst:2},"africa/mbabane":{utc:2,utc_dst:2},"africa/mogadishu":{utc:3,utc_dst:3},"africa/monrovia":{utc:0,utc_dst:0},"africa/nairobi":{utc:3,utc_dst:3},"africa/ndjamena":{utc:1,utc_dst:1},"africa/niamey":{utc:1,utc_dst:1},"africa/nouakchott":{utc:0,utc_dst:0},"africa/ouagadougou":{utc:0,utc_dst:0},"africa/porto-novo":{utc:1,utc_dst:1},"africa/sao_tome":{utc:0,utc_dst:0},"africa/timbuktu":{utc:0,utc_dst:0},"africa/tripoli":{utc:2,utc_dst:2},"africa/tunis":{utc:1,utc_dst:1},"africa/windhoek":{utc:1,utc_dst:2},akst9akdt:{utc:-9,utc_dst:-8},"america/adak":{utc:-10,utc_dst:-9},"america/anchorage":{utc:-9,utc_dst:-8},"america/anguilla":{utc:-4,utc_dst:-4},"america/antigua":{utc:-4,utc_dst:-4},"america/araguaina":{utc:-3,utc_dst:-3},"america/argentina/buenos_aires":{utc:-3,utc_dst:-3},"america/argentina/catamarca":{utc:-3,utc_dst:-3},"america/argentina/comodrivadavia":{utc:-3,utc_dst:-3},"america/argentina/cordoba":{utc:-3,utc_dst:-3},"america/argentina/jujuy":{utc:-3,utc_dst:-3},"america/argentina/la_rioja":{utc:-3,utc_dst:-3},"america/argentina/mendoza":{utc:-3,utc_dst:-3},"america/argentina/rio_gallegos":{utc:-3,utc_dst:-3},"america/argentina/salta":{utc:-3,utc_dst:-3},"america/argentina/san_juan":{utc:-3,utc_dst:-3},"america/argentina/san_luis":{utc:-3,utc_dst:-3},"america/argentina/tucuman":{utc:-3,utc_dst:-3},"america/argentina/ushuaia":{utc:-3,utc_dst:-3},"america/aruba":{utc:-4,utc_dst:-4},"america/asuncion":{utc:-4,utc_dst:-3},"america/atikokan":{utc:-5,utc_dst:-5},"america/atka":{utc:-10,utc_dst:-9},"america/bahia":{utc:-3,utc_dst:-2},"america/bahia_banderas":{utc:-6,utc_dst:-5},"america/barbados":{utc:-4,utc_dst:-4},"america/belem":{utc:-3,utc_dst:-3},"america/belize":{utc:-6,utc_dst:-6},"america/blanc-sablon":{utc:-4,utc_dst:-4},"america/boa_vista":{utc:-4,utc_dst:-4},"america/bogota":{utc:-5,utc_dst:-5},"america/boise":{utc:-7,utc_dst:-6},"america/buenos_aires":{utc:-3,utc_dst:-3},"america/cambridge_bay":{utc:-7,utc_dst:-6},"america/campo_grande":{utc:-4,utc_dst:-3},"america/cancun":{utc:-6,utc_dst:-5},"america/caracas":{utc:-4.5,utc_dst:-4.5},"america/catamarca":{utc:-3,utc_dst:-3},"america/cayenne":{utc:-3,utc_dst:-3},"america/cayman":{utc:-5,utc_dst:-5},"america/chicago":{utc:-6,utc_dst:-5},"america/chihuahua":{utc:-7,utc_dst:-6},"america/coral_harbour":{utc:-5,utc_dst:-5},"america/cordoba":{utc:-3,utc_dst:-3},"america/costa_rica":{utc:-6,utc_dst:-6},"america/creston":{utc:-7,utc_dst:-7},"america/cuiaba":{utc:-4,utc_dst:-3},"america/curacao":{utc:-4,utc_dst:-4},"america/danmarkshavn":{utc:0,utc_dst:0},"america/dawson":{utc:-8,utc_dst:-7},"america/dawson_creek":{utc:-7,utc_dst:-7},"america/denver":{utc:-7,utc_dst:-6},"america/detroit":{utc:-5,utc_dst:-4},"america/dominica":{utc:-4,utc_dst:-4},"america/edmonton":{utc:-7,utc_dst:-6},"america/eirunepe":{utc:-4,utc_dst:-4},"america/el_salvador":{utc:-6,utc_dst:-6},"america/ensenada":{utc:-8,utc_dst:-7},"america/fort_wayne":{utc:-5,utc_dst:-4},"america/fortaleza":{utc:-3,utc_dst:-3},"america/glace_bay":{utc:-4,utc_dst:-3},"america/godthab":{utc:-3,utc_dst:-2},"america/goose_bay":{utc:-4,utc_dst:-3},"america/grand_turk":{utc:-5,utc_dst:-4},"america/grenada":{utc:-4,utc_dst:-4},"america/guadeloupe":{utc:-4,utc_dst:-4},"america/guatemala":{utc:-6,utc_dst:-6},"america/guayaquil":{utc:-5,utc_dst:-5},"america/guyana":{utc:-4,utc_dst:-4},"america/halifax":{utc:-4,utc_dst:-3},"america/havana":{utc:-5,utc_dst:-4},"america/hermosillo":{utc:-7,utc_dst:-7},"america/indiana/indianapolis":{utc:-5,utc_dst:-4},"america/indiana/knox":{utc:-6,utc_dst:-5},"america/indiana/marengo":{utc:-5,utc_dst:-4},"america/indiana/petersburg":{utc:-5,utc_dst:-4},"america/indiana/tell_city":{utc:-6,utc_dst:-5},"america/indiana/vevay":{utc:-5,utc_dst:-4},"america/indiana/vincennes":{utc:-5,utc_dst:-4},"america/indiana/winamac":{utc:-5,utc_dst:-4},"america/indianapolis":{utc:-5,utc_dst:-4},"america/inuvik":{utc:-7,utc_dst:-6},"america/iqaluit":{utc:-5,utc_dst:-4},"america/jamaica":{utc:-5,utc_dst:-5},"america/jujuy":{utc:-3,utc_dst:-3},"america/juneau":{utc:-9,utc_dst:-8},"america/kentucky/louisville":{utc:-5,utc_dst:-4},"america/kentucky/monticello":{utc:-5,utc_dst:-4},"america/knox_in":{utc:-6,utc_dst:-5},"america/kralendijk":{utc:-4,utc_dst:-4},"america/la_paz":{utc:-4,utc_dst:-4},"america/lima":{utc:-5,utc_dst:-5},"america/los_angeles":{utc:-8,utc_dst:-7},"america/louisville":{utc:-5,utc_dst:-4},"america/lower_princes":{utc:-4,utc_dst:-4},"america/maceio":{utc:-3,utc_dst:-3},"america/managua":{utc:-6,utc_dst:-6},"america/manaus":{utc:-4,utc_dst:-4},"america/marigot":{utc:-4,utc_dst:-4},"america/martinique":{utc:-4,utc_dst:-4},"america/matamoros":{utc:-6,utc_dst:-5},"america/mazatlan":{utc:-7,utc_dst:-6},"america/mendoza":{utc:-3,utc_dst:-3},"america/menominee":{utc:-6,utc_dst:-5},"america/merida":{utc:-6,utc_dst:-5},"america/metlakatla":{utc:-8,utc_dst:-8},"america/mexico_city":{utc:-6,utc_dst:-5},"america/miquelon":{utc:-3,utc_dst:-2},"america/moncton":{utc:-4,utc_dst:-3},"america/monterrey":{utc:-6,utc_dst:-5},"america/montevideo":{utc:-3,utc_dst:-2},"america/montreal":{utc:-5,utc_dst:-4},"america/montserrat":{utc:-4,utc_dst:-4},"america/nassau":{utc:-5,utc_dst:-4},"america/new_york":{utc:-5,utc_dst:-4},"america/nipigon":{utc:-5,utc_dst:-4},"america/nome":{utc:-9,utc_dst:-8},"america/noronha":{utc:-2,utc_dst:-2},"america/north_dakota/beulah":{utc:-6,utc_dst:-5},"america/north_dakota/center":{utc:-6,utc_dst:-5},"america/north_dakota/new_salem":{utc:-6,utc_dst:-5},"america/ojinaga":{utc:-7,utc_dst:-6},"america/panama":{utc:-5,utc_dst:-5},"america/pangnirtung":{utc:-5,utc_dst:-4},"america/paramaribo":{utc:-3,utc_dst:-3},"america/phoenix":{utc:-7,utc_dst:-7},"america/port_of_spain":{utc:-4,utc_dst:-4},"america/port-au-prince":{utc:-5,utc_dst:-4},"america/porto_acre":{utc:-4,utc_dst:-4},"america/porto_velho":{utc:-4,utc_dst:-4},"america/puerto_rico":{utc:-4,utc_dst:-4},"america/rainy_river":{utc:-6,utc_dst:-5},"america/rankin_inlet":{utc:-6,utc_dst:-5},"america/recife":{utc:-3,utc_dst:-3},"america/regina":{utc:-6,utc_dst:-6},"america/resolute":{utc:-6,utc_dst:-5},"america/rio_branco":{utc:-4,utc_dst:-4},"america/rosario":{utc:-3,utc_dst:-3},"america/santa_isabel":{utc:-8,utc_dst:-7},"america/santarem":{utc:-3,utc_dst:-3},"america/santiago":{utc:-4,utc_dst:-3},"america/santo_domingo":{utc:-4,utc_dst:-4},"america/sao_paulo":{utc:-3,utc_dst:-2},"america/scoresbysund":{utc:-1,utc_dst:0},"america/shiprock":{utc:-7,utc_dst:-6},"america/sitka":{utc:-9,utc_dst:-8},"america/st_barthelemy":{utc:-4,utc_dst:-4},"america/st_johns":{utc:-3.5,utc_dst:-2.5},"america/st_kitts":{utc:-4,utc_dst:-4},"america/st_lucia":{utc:-4,utc_dst:-4},"america/st_thomas":{utc:-4,utc_dst:-4},"america/st_vincent":{utc:-4,utc_dst:-4},"america/swift_current":{utc:-6,utc_dst:-6},"america/tegucigalpa":{utc:-6,utc_dst:-6},"america/thule":{utc:-4,utc_dst:-3},"america/thunder_bay":{utc:-5,utc_dst:-4},"america/tijuana":{utc:-8,utc_dst:-7},"america/toronto":{utc:-5,utc_dst:-4},"america/tortola":{utc:-4,utc_dst:-4},"america/vancouver":{utc:-8,utc_dst:-7},"america/virgin":{utc:-4,utc_dst:-4},"america/whitehorse":{utc:-8,utc_dst:-7},"america/winnipeg":{utc:-6,utc_dst:-5},"america/yakutat":{utc:-9,utc_dst:-8},"america/yellowknife":{utc:-7,utc_dst:-6},"antarctica/casey":{utc:11,utc_dst:8},"antarctica/davis":{utc:5,utc_dst:7},"antarctica/dumontdurville":{utc:10,utc_dst:10},"antarctica/macquarie":{utc:11,utc_dst:11},"antarctica/mawson":{utc:5,utc_dst:5},"antarctica/mcmurdo":{utc:12,utc_dst:13},"antarctica/palmer":{utc:-4,utc_dst:-3},"antarctica/rothera":{utc:-3,utc_dst:-3},"antarctica/south_pole":{utc:12,utc_dst:13},"antarctica/syowa":{utc:3,utc_dst:3},"antarctica/vostok":{utc:6,utc_dst:6},"arctic/longyearbyen":{utc:1,utc_dst:2},"asia/aden":{utc:3,utc_dst:3},"asia/almaty":{utc:6,utc_dst:6},"asia/amman":{utc:2,utc_dst:3},"asia/anadyr":{utc:12,utc_dst:12},"asia/aqtau":{utc:5,utc_dst:5},"asia/aqtobe":{utc:5,utc_dst:5},"asia/ashgabat":{utc:5,utc_dst:5},"asia/ashkhabad":{utc:5,utc_dst:5},"asia/baghdad":{utc:3,utc_dst:3},"asia/bahrain":{utc:3,utc_dst:3},"asia/baku":{utc:4,utc_dst:5},"asia/bangkok":{utc:7,utc_dst:7},"asia/beirut":{utc:2,utc_dst:3},"asia/bishkek":{utc:6,utc_dst:6},"asia/brunei":{utc:8,utc_dst:8},"asia/calcutta":{utc:5.5,utc_dst:5.5},"asia/choibalsan":{utc:8,utc_dst:8},"asia/chongqing":{utc:8,utc_dst:8},"asia/chungking":{utc:8,utc_dst:8},"asia/colombo":{utc:5.5,utc_dst:5.5},"asia/dacca":{utc:6,utc_dst:6},"asia/damascus":{utc:2,utc_dst:3},"asia/dhaka":{utc:6,utc_dst:6},"asia/dili":{utc:9,utc_dst:9},"asia/dubai":{utc:4,utc_dst:4},"asia/dushanbe":{utc:5,utc_dst:5},"asia/gaza":{utc:2,utc_dst:3},"asia/harbin":{utc:8,utc_dst:8},"asia/hebron":{utc:2,utc_dst:3},"asia/ho_chi_minh":{utc:7,utc_dst:7},"asia/hong_kong":{utc:8,utc_dst:8},"asia/hovd":{utc:7,utc_dst:7},"asia/irkutsk":{utc:9,utc_dst:9},"asia/istanbul":{utc:2,utc_dst:3},"asia/jakarta":{utc:7,utc_dst:7},"asia/jayapura":{utc:9,utc_dst:9},"asia/jerusalem":{utc:2,utc_dst:3},"asia/kabul":{utc:4.5,utc_dst:4.5},"asia/kamchatka":{utc:12,utc_dst:12},"asia/karachi":{utc:5,utc_dst:5},"asia/kashgar":{utc:8,utc_dst:8},"asia/kathmandu":{utc:5.75,utc_dst:5.75},"asia/katmandu":{utc:5.75,utc_dst:5.75},"asia/kolkata":{utc:5.5,utc_dst:5.5},"asia/krasnoyarsk":{utc:8,utc_dst:8},"asia/kuala_lumpur":{utc:8,utc_dst:8},"asia/kuching":{utc:8,utc_dst:8},"asia/kuwait":{utc:3,utc_dst:3},"asia/macao":{utc:8,utc_dst:8},"asia/macau":{utc:8,utc_dst:8},"asia/magadan":{utc:12,utc_dst:12},"asia/makassar":{utc:8,utc_dst:8},"asia/manila":{utc:8,utc_dst:8},"asia/muscat":{utc:4,utc_dst:4},"asia/nicosia":{utc:2,utc_dst:3},"asia/novokuznetsk":{utc:7,utc_dst:7},"asia/novosibirsk":{utc:7,utc_dst:7},"asia/omsk":{utc:7,utc_dst:7},"asia/oral":{utc:5,utc_dst:5},"asia/phnom_penh":{utc:7,utc_dst:7},"asia/pontianak":{utc:7,utc_dst:7},"asia/pyongyang":{utc:9,utc_dst:9},"asia/qatar":{utc:3,utc_dst:3},"asia/qyzylorda":{utc:6,utc_dst:6},"asia/rangoon":{utc:6.5,utc_dst:6.5},"asia/riyadh":{utc:3,utc_dst:3},"asia/saigon":{utc:7,utc_dst:7},"asia/sakhalin":{utc:11,utc_dst:11},"asia/samarkand":{utc:5,utc_dst:5},"asia/seoul":{utc:9,utc_dst:9},"asia/shanghai":{utc:8,utc_dst:8},"asia/singapore":{utc:8,utc_dst:8},"asia/taipei":{utc:8,utc_dst:8},"asia/tashkent":{utc:5,utc_dst:5},"asia/tbilisi":{utc:4,utc_dst:4},"asia/tehran":{utc:3.5,utc_dst:4.5},"asia/tel_aviv":{utc:2,utc_dst:3},"asia/thimbu":{utc:6,utc_dst:6},"asia/thimphu":{utc:6,utc_dst:6},"asia/tokyo":{utc:9,utc_dst:9},"asia/ujung_pandang":{utc:8,utc_dst:8},"asia/ulaanbaatar":{utc:8,utc_dst:8},"asia/ulan_bator":{utc:8,utc_dst:8},"asia/urumqi":{utc:8,utc_dst:8},"asia/vientiane":{utc:7,utc_dst:7},"asia/vladivostok":{utc:11,utc_dst:11},"asia/yakutsk":{utc:10,utc_dst:10},"asia/yekaterinburg":{utc:6,utc_dst:6},"asia/yerevan":{utc:4,utc_dst:4},"atlantic/azores":{utc:-1,utc_dst:0},"atlantic/bermuda":{utc:-4,utc_dst:-3},"atlantic/canary":{utc:0,utc_dst:1},"atlantic/cape_verde":{utc:-1,utc_dst:-1},"atlantic/faeroe":{utc:0,utc_dst:1},"atlantic/faroe":{utc:0,utc_dst:1},"atlantic/jan_mayen":{utc:1,utc_dst:2},"atlantic/madeira":{utc:0,utc_dst:1},"atlantic/reykjavik":{utc:0,utc_dst:0},"atlantic/south_georgia":{utc:-2,utc_dst:-2},"atlantic/st_helena":{utc:0,utc_dst:0},"atlantic/stanley":{utc:-3,utc_dst:-3},"australia/act":{utc:10,utc_dst:11},"australia/adelaide":{utc:9.5,utc_dst:10.5},"australia/brisbane":{utc:10,utc_dst:10},"australia/broken_hill":{utc:9.5,utc_dst:10.5},"australia/canberra":{utc:10,utc_dst:11},"australia/currie":{utc:10,utc_dst:11},"australia/darwin":{utc:9.5,utc_dst:9.5},"australia/eucla":{utc:8.75,utc_dst:8.75},"australia/hobart":{utc:10,utc_dst:11},"australia/lhi":{utc:10.5,utc_dst:11},"australia/lindeman":{utc:10,utc_dst:10},"australia/lord_howe":{utc:10.5,utc_dst:11},"australia/melbourne":{utc:10,utc_dst:11},"australia/north":{utc:9.5,utc_dst:9.5},"australia/nsw":{utc:10,utc_dst:11},"australia/perth":{utc:8,utc_dst:8},"australia/queensland":{utc:10,utc_dst:10},"australia/south":{utc:9.5,utc_dst:10.5},"australia/sydney":{utc:10,utc_dst:11},"australia/tasmania":{utc:10,utc_dst:11},"australia/victoria":{utc:10,utc_dst:11},"australia/west":{utc:8,utc_dst:8},"australia/yancowinna":{utc:9.5,utc_dst:10.5},"brazil/acre":{utc:-4,utc_dst:-4},"brazil/denoronha":{utc:-2,utc_dst:-2},"brazil/east":{utc:-3,utc_dst:-2},"brazil/west":{utc:-4,utc_dst:-4},"canada/atlantic":{utc:-4,utc_dst:-3},"canada/central":{utc:-6,utc_dst:-5},"canada/eastern":{utc:-5,utc_dst:-4},"canada/east-saskatchewan":{utc:-6,utc_dst:-6},"canada/mountain":{utc:-7,utc_dst:-6},"canada/newfoundland":{utc:-3.5,utc_dst:-2.5},"canada/pacific":{utc:-8,utc_dst:-7},"canada/saskatchewan":{utc:-6,utc_dst:-6},"canada/yukon":{utc:-8,utc_dst:-7},cet:{utc:1,utc_dst:2},"chile/continental":{utc:-4,utc_dst:-3},"chile/easterisland":{utc:-6,utc_dst:-5},cst6cdt:{utc:-6,utc_dst:-5},cuba:{utc:-5,utc_dst:-4},eet:{utc:2,utc_dst:3},egypt:{utc:2,utc_dst:2},eire:{utc:0,utc_dst:1},est:{utc:-5,utc_dst:-5},est5edt:{utc:-5,utc_dst:-4},"etc/gmt":{utc:0,utc_dst:0},"etc/gmt+0":{utc:0,utc_dst:0},"etc/uct":{utc:0,utc_dst:0},"etc/universal":{utc:0,utc_dst:0},"etc/utc":{utc:0,utc_dst:0},"etc/zulu":{utc:0,utc_dst:0},"europe/amsterdam":{utc:1,utc_dst:2},"europe/andorra":{utc:1,utc_dst:2},"europe/athens":{utc:2,utc_dst:3},"europe/belfast":{utc:0,utc_dst:1},"europe/belgrade":{utc:1,utc_dst:2},"europe/berlin":{utc:1,utc_dst:2},"europe/bratislava":{utc:1,utc_dst:2},"europe/brussels":{utc:1,utc_dst:2},"europe/bucharest":{utc:2,utc_dst:3},"europe/budapest":{utc:1,utc_dst:2},"europe/chisinau":{utc:2,utc_dst:3},"europe/copenhagen":{utc:1,utc_dst:2},"europe/dublin":{utc:0,utc_dst:1},"europe/gibraltar":{utc:1,utc_dst:2},"europe/guernsey":{utc:0,utc_dst:1},"europe/helsinki":{utc:2,utc_dst:3},"europe/isle_of_man":{utc:0,utc_dst:1},"europe/istanbul":{utc:2,utc_dst:3},"europe/jersey":{utc:0,utc_dst:1},"europe/kaliningrad":{utc:3,utc_dst:3},"europe/kiev":{utc:2,utc_dst:3},"europe/lisbon":{utc:0,utc_dst:1},"europe/ljubljana":{utc:1,utc_dst:2},"europe/london":{utc:0,utc_dst:1},"europe/luxembourg":{utc:1,utc_dst:2},"europe/madrid":{utc:1,utc_dst:2},"europe/malta":{utc:1,utc_dst:2},"europe/mariehamn":{utc:2,utc_dst:3},"europe/minsk":{utc:3,utc_dst:3},"europe/monaco":{utc:1,utc_dst:2},"europe/moscow":{utc:4,utc_dst:4},"europe/nicosia":{utc:2,utc_dst:3},"europe/oslo":{utc:1,utc_dst:2},"europe/paris":{utc:1,utc_dst:2},"europe/podgorica":{utc:1,utc_dst:2},"europe/prague":{utc:1,utc_dst:2},"europe/riga":{utc:2,utc_dst:3},"europe/rome":{utc:1,utc_dst:2},"europe/samara":{utc:4,utc_dst:4},"europe/san_marino":{utc:1,utc_dst:2},"europe/sarajevo":{utc:1,utc_dst:2},"europe/simferopol":{utc:2,utc_dst:3},"europe/skopje":{utc:1,utc_dst:2},"europe/sofia":{utc:2,utc_dst:3},"europe/stockholm":{utc:1,utc_dst:2},"europe/tallinn":{utc:2,utc_dst:3},"europe/tirane":{utc:1,utc_dst:2},"europe/tiraspol":{utc:2,utc_dst:3},"europe/uzhgorod":{utc:2,utc_dst:3},"europe/vaduz":{utc:1,utc_dst:2},"europe/vatican":{utc:1,utc_dst:2},"europe/vienna":{utc:1,utc_dst:2},"europe/vilnius":{utc:2,utc_dst:3},"europe/volgograd":{utc:4,utc_dst:4},"europe/warsaw":{utc:1,utc_dst:2},"europe/zagreb":{utc:1,utc_dst:2},"europe/zaporozhye":{utc:2,utc_dst:3},"europe/zurich":{utc:1,utc_dst:2},gb:{utc:0,utc_dst:1},"gb-eire":{utc:0,utc_dst:1},gmt:{utc:0,utc_dst:0},"gmt+0":{utc:0,utc_dst:0},gmt0:{utc:0,utc_dst:0},"gmt-0":{utc:0,utc_dst:0},greenwich:{utc:0,utc_dst:0},hongkong:{utc:8,utc_dst:8},hst:{utc:-10,utc_dst:-10},iceland:{utc:0,utc_dst:0},"indian/antananarivo":{utc:3,utc_dst:3},"indian/chagos":{utc:6,utc_dst:6},"indian/christmas":{utc:7,utc_dst:7},"indian/cocos":{utc:6.5,utc_dst:6.5},"indian/comoro":{utc:3,utc_dst:3},"indian/kerguelen":{utc:5,utc_dst:5},"indian/mahe":{utc:4,utc_dst:4},"indian/maldives":{utc:5,utc_dst:5},"indian/mauritius":{utc:4,utc_dst:4},"indian/mayotte":{utc:3,utc_dst:3},"indian/reunion":{utc:4,utc_dst:4},iran:{utc:3.5,utc_dst:4.5},israel:{utc:2,utc_dst:3},jamaica:{utc:-5,utc_dst:-5},japan:{utc:9,utc_dst:9},"jst-9":{utc:9,utc_dst:9},kwajalein:{utc:12,utc_dst:12},libya:{utc:2,utc_dst:2},met:{utc:1,utc_dst:2},"mexico/bajanorte":{utc:-8,utc_dst:-7},"mexico/bajasur":{utc:-7,utc_dst:-6},"mexico/general":{utc:-6,utc_dst:-5},mst:{utc:-7,utc_dst:-7},mst7mdt:{utc:-7,utc_dst:-6},navajo:{utc:-7,utc_dst:-6},nz:{utc:12,utc_dst:13},"nz-chat":{utc:12.75,utc_dst:13.75},"pacific/apia":{utc:13,utc_dst:14},"pacific/auckland":{utc:12,utc_dst:13},"pacific/chatham":{utc:12.75,utc_dst:13.75},"pacific/chuuk":{utc:10,utc_dst:10},"pacific/easter":{utc:-6,utc_dst:-5},"pacific/efate":{utc:11,utc_dst:11},"pacific/enderbury":{utc:13,utc_dst:13},"pacific/fakaofo":{utc:13,utc_dst:13},"pacific/fiji":{utc:12,utc_dst:13},"pacific/funafuti":{utc:12,utc_dst:12},"pacific/galapagos":{utc:-6,utc_dst:-6},"pacific/gambier":{utc:-9,utc_dst:-9},"pacific/guadalcanal":{utc:11,utc_dst:11},"pacific/guam":{utc:10,utc_dst:10},"pacific/honolulu":{utc:-10,utc_dst:-10},"pacific/johnston":{utc:-10,utc_dst:-10},"pacific/kiritimati":{utc:14,utc_dst:14},"pacific/kosrae":{utc:11,utc_dst:11},"pacific/kwajalein":{utc:12,utc_dst:12},"pacific/majuro":{utc:12,utc_dst:12},"pacific/marquesas":{utc:-9.5,utc_dst:-9.5},"pacific/midway":{utc:-11,utc_dst:-11},"pacific/nauru":{utc:12,utc_dst:12},"pacific/niue":{utc:-11,utc_dst:-11},"pacific/norfolk":{utc:11.5,utc_dst:11.5},"pacific/noumea":{utc:11,utc_dst:11},"pacific/pago_pago":{utc:-11,utc_dst:-11},"pacific/palau":{utc:9,utc_dst:9},"pacific/pitcairn":{utc:-8,utc_dst:-8},"pacific/pohnpei":{utc:11,utc_dst:11},"pacific/ponape":{utc:11,utc_dst:11},"pacific/port_moresby":{utc:10,utc_dst:10},"pacific/rarotonga":{utc:-10,utc_dst:-10},"pacific/saipan":{utc:10,utc_dst:10},"pacific/samoa":{utc:-11,utc_dst:-11},"pacific/tahiti":{utc:-10,utc_dst:-10},"pacific/tarawa":{utc:12,utc_dst:12},"pacific/tongatapu":{utc:13,utc_dst:13},"pacific/truk":{utc:10,utc_dst:10},"pacific/wake":{utc:12,utc_dst:12},"pacific/wallis":{utc:12,utc_dst:12},"pacific/yap":{utc:10,utc_dst:10},poland:{utc:1,utc_dst:2},portugal:{utc:0,utc_dst:1},prc:{utc:8,utc_dst:8},pst8pdt:{utc:-8,utc_dst:-7},roc:{utc:8,utc_dst:8},rok:{utc:9,utc_dst:9},singapore:{utc:8,utc_dst:8},turkey:{utc:2,utc_dst:3},uct:{utc:0,utc_dst:0},universal:{utc:0,utc_dst:0},"us/alaska":{utc:-9,utc_dst:-8},"us/aleutian":{utc:-10,utc_dst:-9},"us/arizona":{utc:-7,utc_dst:-7},"us/central":{utc:-6,utc_dst:-5},"us/eastern":{utc:-5,utc_dst:-4},"us/east-indiana":{utc:-5,utc_dst:-4},"us/hawaii":{utc:-10,utc_dst:-10},"us/indiana-starke":{utc:-6,utc_dst:-5},"us/michigan":{utc:-5,utc_dst:-4},"us/mountain":{utc:-7,utc_dst:-6},"us/pacific":{utc:-8,utc_dst:-7},"us/pacific-new":{utc:-8,utc_dst:-7},"us/samoa":{utc:-11,utc_dst:-11},utc:{utc:0,utc_dst:0},wet:{utc:0,utc_dst:1},"w-su":{utc:4,utc_dst:4},zulu:{utc:0,utc_dst:0}};if(e=e.toLowerCase(),"undefined"==typeof i[e])return 0;n=i[e].utc;var r=require("moment");return r(t).isDST()&&(n=i[e].utc_dst),n}function exists(e){return!Object.isUndefined(e)}function isArray(e){return Object.isArray(e)}function isNumber(e){return Object.isNumber(e)}function isNotNullORUndefined(e){return"undefined"!=typeof e&&null!=e}function hasDisabledAttributeSet(e){var t=e.getAttribute("disabled");return isNotNullORUndefined(t)?"0"==t||"false"==t?!1:!0:!1}function getParentDiv(e){return e.up("div")}function getParentRow(e){return elem.up("tr")}function getParentCell(e){return elem.up("td")}function getParentTable(e){return elem.up("table")}function getAbsoluteParent(e){for(var t=e;!t.style||"absolute"!==t.style.position;){if("body"===t.tagName.toLowerCase())return null;t=t.up()}return t}function getElementWithIdAndTagAndParent(e,t,n){for(var i=n.getElementsByTagName(t),r=0;r<i.length;r++)if(i[r].getAttribute("id")===e)return i[r];return null}function getClosestAncestor(e,t){for(var n;!n;)if(n=$(e).up(t),!n&&(e=e.parentNode,!e||"DIV"!==e.tagName))return null;return n}function isDescendantOf(e,t){for(;"BODY"!=e.tagName;){if(e==t)return!0;e=e.parentNode}return!1}function getCellIndex(e){return e.cellIndex}function getRowIndex(e){return e.rowIndex}function isDisabled(e){if(!e.readAttribute)return!1;if(Draggables&&Draggables.activeDraggable&&Draggables.activeDraggable.dragging&&matchAny(Draggables.activeDraggable.element,[".sizer.dragging"],!1))return!1;var t=!!e.readAttribute("disabled")||e.ancestors().any(function(e){return e.readAttribute("disabled")}),n=matchAny(e,[".disabled"],!0);return t||n}function matchAny(e,t,n){if(!e)return null;for(var i=0;i<t.length;++i)if(e.match&&e.match(t[i]))return e;if(n)for(var i=0;i<t.length;++i){var r=e.up&&e.up(t[i]);if(r)return r}return null}function matchMeOrUp(e,t){for(var n;e&&!n;)n=e.match&&e.match(t)&&e,e=e.parentNode;return n}function stylesMatch(e,t,n){return $(e).getStyle(n)===$(t).getStyle(n)}function getNextMatchingSibling(e,t){for(;e=e.nextSibling;)if(e.match&&e.match(t))return e;return null}function getNextNonMatchingSibling(e,t){for(;e=e.nextSibling;)if(e.match&&!e.match(t))return e;return null}function getPreviousMatchingSibling(e,t){for(;e=e.previousSibling;)if(e.match&&e.match(t))return e;return null}function getPreviousNonMatchingSibling(e,t){for(;e=e.previousSibling;)if(e.match&&!e.match(t))return e;return null}function getAbsoluteOffsets(e){for(var t=e.offsetLeft,n=e.offsetTop,i=e.offsetParent;"BODY"!=i.tagName.toUpperCase()&&"absolute"!=i.style.position;){var t=t+i.offsetLeft,n=n+i.offsetTop;i=i.offsetParent}return"absolute"==i.style.position&&(t+=i.offsetLeft,n+=i.offsetTop),isIE()&&(n+=1),new Array(t,n,t+e.offsetWidth,n+e.offsetHeight)}function getAbsoluteTopOffset(e){for(var t=e.offsetTop,n=e.offsetParent;"BODY"!=n.tagName.toUpperCase()&&"absolute"!=n.style.position;){var t=t+n.offsetTop;n=n.offsetParent}return"absolute"==n.style.position&&(t+=n.offsetTop),isIE()&&(t+=1),t}function getBoxOffsets(e,t){var n=$(e).cumulativeOffset(),i=n[0],r=n[1];if(t){var o=$(e).cumulativeScrollOffset();i-=o[0],r-=o[1]}return new Array(i,r)}function getInnerText(e){return isNotNullORUndefined(e.innerText)?e.innerText:e.textContent}function isPointOverlayingObject(e,t,n){return Position.within(n,e,t)}function boxesOverlap(e,t,n,i,r,o,a,s){return!(t>s||o>i||e>a||r>n)}function boxesOverlapVertically(e,t,n,i){return!(e>=i||n>=t)}function boxesOverlapHorizontally(e,t,n,i){return!(e>=i||n>=t)}function getOuterHeight(e){return e.clientHeight?new Number(e.getStyle("height").replace(/[^\d\.]/g,""))+getBufferHeight(e,!0):0}function getOuterWidth(e){return e.clientWidth?new Number(e.getStyle("width").replace(/[^\d\.]/g,""))+getBufferWidth(e,!0):0}function getBufferHeight(e,t){if(!e.visible())return 0;var n=0,i=/[^\d\.]/g;if(t){var r=e.getStyle("marginTop"),o=e.getStyle("marginBottom");r=null==r?"0px":r,o=null==o?"0px":o,r=r.replace(i,""),o=o.replace(i,""),n=new Number(r).ceil()+new Number(o).ceil()}return n+=new Number(e.getStyle("borderBottomWidth").replace(i,"")).ceil()+new Number(e.getStyle("borderTopWidth").replace(i,"")).ceil()+new Number(e.getStyle("paddingTop").replace(i,"")).ceil()+new Number(e.getStyle("paddingBottom").replace(i,"")).ceil()}function getBufferWidth(e,t){if(!e.visible())return 0;var n=0,i=/[^\d\.]/g;if(t){var r=e.getStyle("marginLeft"),o=e.getStyle("marginRight");r=null==r?"0px":r,o=null==o?"0px":o,r=r.replace(i,""),o=o.replace(i,""),n=new Number(r).ceil()+new Number(o).ceil()}return n+=new Number(e.getStyle("borderLeftWidth").replace(i,"")).ceil()+new Number(e.getStyle("borderRightWidth").replace(i,"")).ceil()+new Number(e.getStyle("paddingLeft").replace(i,"")).ceil()+new Number(e.getStyle("paddingRight").replace(i,"")).ceil()}function getDimensionInPx(e,t){var n={left:"width",right:"width",width:"width",top:"height",bottom:"height",height:"height"},i=e.getStyle(t);if(i.include("%")){var r=e.parentNode,o=r.getStyle(n[t]);if(!o.include("px"))throw"cannot convert to px , because parent dimension not measured in px";return parseInt(i)*parseInt(o)/100}if(i.include("px"))return parseInt(i);throw"cannot convert to px, because unit is neither px or %"}function getActualDimension(e,t){var n={width:"clientWidth",height:"clientHeight"};return e[n[t]]}function purgeChildElements(e){try{var t=e&&e.children;if(!t)return;for(var n=0,i=t.length;i>n;n++)purge(t[n]),purgeChildElements(t[n]),t[n]=null,t[n]=e.removeChild(t[n]);return 0==e.children.length}catch(r){}}function purge(e){var t,n,i,r=e.attributes;if(r)for(n=r.length,t=0;n>t;t+=1)i=r[t].name,"function"==typeof e[i]&&(e[i]=null);if(r=e.childNodes)for(n=r.length,t=0;n>t;t+=1)purge(e.childNodes[t])}function getCaret(e){if(!e)return 0;if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange(),i=n.duplicate();return n.moveToBookmark(t.getBookmark()),i.setEndPoint("EndToStart",n),i.text.length}return 0}function isAlmostInView(e,t){var n=parseInt(getBoxOffsets(e)[1]),i=$(e).cumulativeScrollOffset()[1],r=getWindowHeight();return i+r+t>n}function getTouchedElement(e){var t=e.changedTouches;return t&&t.length>0?$(document.elementFromPoint(t[0].clientX,t[0].clientY)):e.element()}function centerLayer(e){e.style.left=parseInt((getWindowWidth()-parseInt(e.clientWidth))/2+getScrollLeft())+"px",e.style.top=parseInt((getWindowHeight()-parseInt(e.clientHeight))/2+getScrollTop())+"px"}function centerElement(e,t){if(e){if(e.jquery&&(e=$(e.get(0))),t.horz){if(!e.hasClassName("centered_horz"))throw"Element's className "+e.className+" must include 'centered_horz' for function centerLayer to work with these arguments";var n=e.getWidth()||e.getStyle("min-width");if(n){var i=parseInt(n),r=i+getBufferWidth(e,!0),o=e.up().getWidth();o>r&&(e.style.marginLeft=-(i/2)+"px",e.style.left="50%")}}if(t.vert){if(!e.hasClassName("centered_vert"))throw"Element's className "+e.className+" must include 'centered_vert' for function centerLayer to work with these arguments";var a=e.getHeight()||e.getStyle("min-height");if(a){var s=parseInt(a),u=s+getBufferHeight(e,!0),l=e.up().getHeight();l>u&&(e.style.marginTop=-(s/2)+"px",e.style.top="50%")}}}}function parseFunc(e,t){var n=e.className,i=n.indexOf(t);if(i>-1){var r=n.substring(i).split(" ");if(r.length>0){var o=r[0].replace(t,"");return"function"==typeof window[o]?window[o]:null}}return null}function cascadeElement(e,t){var n=parseInt(e.getStyle("width")),i=n+getBufferWidth(e,!0),r=e.up().getWidth(),o=-(t.horzOffset*t.number/2)+t.position*t.horzOffset;r>i&&(e.style.left=(r-i)/2+o+"px");var a=parseInt(e.getStyle("height")),s=a+getBufferHeight(e,!0),u=e.up().getHeight(),l=-(t.vertOffset*t.number/2)+t.position*t.vertOffset;u>s&&(e.style.top=(u-s)/2+l+"px")}function fitObjectIntoScreen(e,t,n,i,r){var o=t?parseInt(t):parseInt(e.offsetLeft),a=n?parseInt(n):parseInt(e.offsetTop),s=i?parseInt(i):parseInt(e.clientWidth),u=r?parseInt(r):parseInt(e.clientHeight),l=getScrollLeft(),c=getScrollTop(),d=getWindowWidth(),p=getWindowHeight();s+=20,u+=20,a+u>c+p&&(a=c+p-u),c>a&&(a=c),o+s>l+d&&(o=l+d-s),l>o&&(o=l),e.style.left=o+"px",e.style.top=a+"px"}function focusOn(e){$(e).focus()}function selectAndFocusOn(e){var t=$(e);t.select(),t.focus()}function renderHazeLayer(e,t){var n=document.body;return renderOverlay(e,t,n.scrollWidth,n.scrollHeight,"haze")}function renderOverlay(e,t,n,i,r){var o=document.createElement("DIV");return o.className=r,o.style.position="absolute",o.style.left=e,o.style.top=t,o.style.width=n,o.style.height=i,document.body.appendChild(o),o}function removeOverlay(e){e&&e.parentNode&&e.parentNode.removeChild(e),e&&(e=null)}function reParent(e,t){e&&(e.parentNode&&e.parentNode==t||t.appendChild(e))}function getScrollLeftForAbsoluteParent(e){return isIE()?e.scrollLeft:0}function getScrollTopForAbsoluteParent(e){return isIE()?e.scrollTop:0}function renderTransparentIFrame(e,t,n,i){var r=5,o=document.createElement("IFRAME");return o.frameBorder=0,o.style.filter="alpha(opacity=0)",o.style.position="absolute",o.style.left=e-r,o.style.top=t-r,o.style.width=n-2*r,o.style.height=i-2*r,document.body.appendChild(o),o}function pushOverlayObject(e,t,n){var i=getAbsoluteOffsets($(e));pushOverlayObjectAtOffsets(i,t,n)}function pushTotalOverlayObject(e,t){var n=new Array(0,0,document.body.scrollWidth,document.body.scrollHeight);pushOverlayObjectAtOffsets(n,e,t)}function pushOverlayObjectAtOffsets(e,t,n){if(isIE()){var i=renderTransparentIFrame(e[0],e[1],e[2]-e[0],e[3]-e[1]);overlayObjectStack.push(i)}var r=renderOverlay(e[0],e[1],e[2]-e[0],e[3]-e[1],t);n&&(r.style.zIndex=n),overlayObjectStack.push(r)}function popOverlayObject(){if(overlayObjectStack.length>0){var e=overlayObjectStack.pop();removeOverlay(e),isIE()&&overlayObjectStack.length>0&&removeOverlay(overlayObjectStack.pop())}}function popAllOverlayObjects(){for(;overlayObjectStack.length>0;){var e=overlayObjectStack.pop();removeOverlay(e)}}function disableSelection(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){
return e.stopPropagation(),!1}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="-moz-none"),e.style.cursor="default")}function disableSelectionWithoutCursorStyle(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){return e.stopPropagation(),!1}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="-moz-none"))}function enableSelection(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){return e.stopPropagation(),!0}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!0}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="text"),e.style.cursor="default")}function setCursor(e){document.body.style.cursor=e}function cursorDefault(){setCursor("default")}function cursorPointer(){setCursor("pointer")}function cursorWait(){setCursor("wait")}function getCellAtColumn(e,t){for(columnCount=0,i=0;i<e.length;i++)if(columnCount+=e.colspan,columnCount>=t)return e[i];return null}function getCellAtRow(e,t,n){for(rowCount=0,i=0;i<e.length;i++){var r=e[i].cells[t];rowCount+=r.rowspan,rowCount>=n}return null}function copyTable(e,t,n,i){var r=i?e:$(e).select("tbody")[0],o=i?t:$(t).select("tbody.copyTo")[0];n&&clearTable(t);try{o.insert(r.innerHTML)}catch(a){}}function copyTableJquery(e,t,n,i){var r=i?e:e.find("tbody:first"),o=i?t:jQuery("tobody.copyTo:first",t);n&&clearTable(t);try{jQuery(o).append(r.html())}catch(a){}}function clearTable(e){if(document.all)for(;e.rows[0];)e.deleteRow(0);else e.innerHTML=""}function getWindowWidth(){var e=jQuery(window).width();return isIE9()&&(e+=17),e}function getWindowHeight(){var e=jQuery(window).height();return isIE9()&&(e+=17),e}function getScrollLeft(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft}function getScrollTop(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop}function scrollXToMiddle(e){var t=e.scrollWidth-getWindowWidth();t>0&&(e.scrollLeft=t/2)}function launchNewWindow(e){window.open(e)}function getIFrameDocument(e){var t=e.contentWindow||e.contentDocument;return t.document&&(t=t.document),t}function getEvent(e){return e?e:window.event}function popEvent(e){cancelEventBubbling(e?e:event)}function triggerNativeEvent(e,t){var n,i=isIE();t=t||(i?document.documentElement:window),document.createEvent?(n=document.createEvent("Event"),n.initEvent(e,!0,!0),t.dispatchEvent(n)):t.fireEvent("on"+e,document.createEventObject())}function relatedTargetInElementSubtree(e,t){return e.relatedTarget?t===e.relatedTarget?!0:e.relatedTarget.descendantOf(t):!1}function cancelEventBubbling(e){e=getEvent(e),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}function cancelEventAndPreventDefault(e){e.preventDefault(),e.stop()}function enterKeyHit(e){var t=whichKeyHit(e);return 13==t||3==t}function whichKeyHit(e){e=getEvent(e);var t=e.charCode?e.charCode:e.which?e.which:e.keyCode;return t}function isCtrlHeld(e){return e=getEvent(e),!(!e||!e.ctrlKey)}function isShiftHeld(e){return e=getEvent(e),!(!e||!e.shiftKey)}function getEventTarget(e){return e=getEvent(e),e&&(e.target||e.srcElement)}function isNavigationInput(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which;return t==Keys.DOM_VK_LEFT||t==Keys.DOM_VK_RIGHT||t==Keys.DOM_VK_TAB||t==Keys.DOM_VK_BACK_SPACE||t==Keys.DOM_VK_ENTER}function verifyIsDigitInput(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which;return t>=Keys.DOM_VK_0&&t<=Keys.DOM_VK_9||isNavigationInput(e)}function verifyIsInputNumericGroupSeparator(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which,n=String.fromCharCode(t);return n===groupingSeparator}function verifyIsInputNumericDecimalSeparator(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which,n=String.fromCharCode(t);return n===decimalSeparator}function numberOfDecimals(e){for(var t=e.length,n=0,i=0;t>i;i++)e.charAt(i)===decimalSeparator&&n++;return n}function macOSKeyboardRightClick(e){var e=getEvent(e);return e.ctrlKey?0==e.button||1==e.button||2==e.button:!1}function macOSMouseRightClick(e){var e=getEvent(e),t=!1;return e=e||window.event,e.which?t=3==e.which:e.button&&(t=2==e.button),t}function isRightClick(e){if(isMacOS()){var t=macOSKeyboardRightClick(e),n=macOSMouseRightClick(e);return t||n}return Event.isRightClick(e)}function isLeftClick(e){return Event.isLeftClick(e)}function isMetaHeld(e,t){var e=getEvent(e);return getEvent(e)?isMacOS()?t?e.altKey:e.metaKey:isCtrlHeld(e):!1}function trim(e){return e.strip()}function startsWith(e,t){return e.startsWith(t)}function getTextAfterUnderscore(e){return getTextAfterSubstring(e,"_")}function getTextBeforeUnderscore(e){return getTextBeforeSubstring(e,"_")}function extractNumber(e){var t=e.match(/\d/g);return t=t.join("")}function getTextAfterSubstring(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());return-1==n?null:e.substring(n+t.length)}function getTextBeforeSubstring(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());return-1==n?e:e.substring(0,n)}function removeTrailingSlash(e){var t=e.substring(e.length-1);return"/"==t?e.substring(0,e.length-1):e}function removeTrailingPound(e){var t=e.substring(e.length-1);return"#"==t?e.substring(0,e.length-1):e}function removeChars(e,t){var n=0;for(n;n<t.length;n++)for(;e.indexOf(t[n])>-1;)e=e.replace(t[n],"");return e}function replaceAll(e,t,n){e.gsub(t,n)}function jsHash(){var e=new Array;e.clazz="Hash";for(var t=0;t<arguments.length;t+=2)"undefined"!=typeof arguments[t+1]&&(e[arguments[t]]=arguments[t+1],e.push(arguments[t]));return e}function textCounter(e,t){return e.value.length>t?(e.value=e.value.substring(0,t),!1):!0}function saveAndClear(e,t){e=t,t=""}function escapeString(e,t,n){if(!e||!t||void 0===n||null===n)return e;var i="string"==typeof n||Object.isArray(n)&&n.length<t.length,r=Object.isArray(n)?n.first():n;return Object.isArray(t)?(t.each(function(t,o){var a=i?r:n[o];e=e.replace(t,a)}),e):e.replace(t,r)}function formatString(e){var t,n,i,r=Array.prototype.slice.call(arguments,1),o=[];if(r.length<3){for(var a=0;a<r.length;a++)e=e.replace("{"+a+"}",r[a]);return e}if(t=(e||"").match(/[{]\d+[}]/g),!t)return e;n=e.split(/[{]\d+[}]/);for(var s=0;s<n.length;s+=1)i=s<t.length?r[t[s].slice(1,-1)]:"",o.push(n[s],i);return o.join("")}function removeWhitespacesFromTable(e){return e.replace(/>\s+<\/table/g,"></table").replace(/>\s+<thead/g,"><thead").replace(/>\s+<\/thead/g,"></thead").replace(/>\s+<tbody/g,"><tbody").replace(/>\s+<\/tbody/g,"></tbody").replace(/>\s+<caption/g,"><caption").replace(/>\s+<\/caption/g,"></caption").replace(/>\s+<tr/g,"><tr").replace(/>\s+<\/tr/g,"></tr").replace(/>\s+<th/g,"><th").replace(/>\s+<\/th/g,"></th").replace(/>\s+<td/g,"><td").replace(/>\s+<\/td/g,"></td")}function splitText(e,t){var n={left:"",right:e};return t=parseInt(t,10),_.isNaN(t)?n:0===t?n:(n.left=e.substr(0,t),n.right=e.substr(t),n)}function redirectToUrl(e){if(isIE8()){var t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click()}else window.location.href=e}function checkURLProtocol(e,t){if(!t)return e;if(startsWith(e,"/"))return e;for(var n=new Array("http://","https://","file://","mailto://","ftp://"),i=0;i<n.length;i++)if(startsWith(e,n[i]))return e;return n[0]+e}function getSymbolToAppendNextParam(e){var t=e.substring(e.length-1);return"?"==t||"&"==t?"":e.indexOf("?")>-1?"&":"?"}function showBusyCursor(){theBody.style.cursor="wait"}function restoreDefaultCursor(){theBody.style.cursor=""}function encodeText(e){return encodeURIComponent(encodeURIComponent(e))}function decodeText(e){return decodeURIComponent(e)}function constrain(e,t,n){return e>n?n:t>e?t:e}function deepClone(e){if(null==e)return null;if("object"!=typeof e)return e;var t=Object.isArray(e)?[]:{};for(var n in e)"object"==typeof e[n]?t[n]=deepClone(e[n]):t[n]=e[n];return t}function cloneCustomAttributes(e,t){var n=e?e.attributes:{};for(var i in n){var r=n[i]&&n[i].name;r&&r.startsWith("data")&&$(t).writeAttribute(r,$(e).readAttribute(r))}}function initLog(){log=""}function logIt(e){log=log+"||"+e+"-"+(new Date).getTime()}function debug(e){window.console&&window.console.debug(e)}function startTimer(e){window.console&&window.console.time?console.time(e):timer[e]=+new Date}function stopTimer(e){if(window.console&&window.console.timeEnd)console.timeEnd(e);else if(timer[e]){var t=e+": "+(+new Date-timer[e]);timer[e]=void 0,window.console?console.log(t):window.status=t}}function toBlockNotation(e){return e?e.split(".").map(function(e){return"['"+e+"']"}).join(""):""}function toFunction(theFunction){if("string"!=typeof theFunction)return theFunction;var blockReference=toBlockNotation(theFunction);return eval("window"+blockReference)}function BusyMonitor(e,t){this.waitTime=e,this.theFunction=t,this.timer=null}function InPlaceEditor(e){this.elem=$(e),this.id=e.identify(),this.editing=!1,this.value=getInnerText(e)}function evaluateScripts(e){var t;t=e?$(e):document;var n=t.getElementsByTagName("SCRIPT");if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];r&&r.text&&globalEval(r.text)}}function evaluateScript(e){var t=$(e);t&&t.text&&globalEval(t.text)}function globalEval(e){window.eval.call(window,e)}function loadJSFiles(e){e&&Object.isArray(e)&&e.each(function(e){loadJSFile(e)})}function loadJSFile(e){$(e)&&$(e).parentNode.removeChild($(e));var t=new Element("script");t.setAttribute("id",e),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),$$("head")[0].appendChild(t)}function unloadAllScripts(){var e=document.getElementsByTagName("SCRIPT");if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];n.parentNode.removeChild(n)}}function loadCSSFiles(e,t){e&&Object.isArray(e)&&e.each(function(e){loadCSSFile(e,t)})}function loadCSSFile(e,t){unloadCSSFile(e);var n=new Element("link");n.setAttribute("id",escape(e)),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t&&document.body?document.body.appendChild(n):$$("head")[0].insert(n,"bottom")}function unloadCSSFiles(e){e&&Object.isArray(e)&&e.each(function(e){unloadCSSFile(e)})}function unloadCSSFile(e){if($(escape(e)))try{$(escape(e)).parentNode.removeChild($(escape(e)))}catch(t){alert(t)}}function createCSSRule(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}function getFirstMatch(e){return $$(e)[0]}function dialogOnMouseDown(e){var t=null!=e?e:window.event;cancelEventDragTarget&&cancelEventDragTarget==getEventTarget(t)||new Dragger(t,[getAbsoluteParent(window.event?t.srcElement:t.target)],!0,!0,2,new DragListener)}function cancelEventDrag(e){cancelEventDragTarget=getEventTarget(e)}function encodeUriParameter(e){return encodeURIComponent(encodeURIComponent(e))}function replaceHTML(e,t){if(isIE())return void(e.innerHTML=t);var e=$(e),n=e.nextSibling,i=e.parentNode;i.removeChild(e),e.innerHTML=t,n?i.insertBefore(e,n):i.appendChild(e)}function gotoDefaultLocation(e){window.location.href="flow.html?_flowId=searchFlow"+(e?"&"+e:"")}function gotoFolderExplorer(e){window.location.href="flow.html?_flowId=searchFlow",document.location="flow.html?_flowId=searchFlow&showFolder="+e}function switchDesign(e){var t=document.location.href,n=t.include("&decorator");"old"===e?n?t=t.replace("main","mainOld"):t+="&decorator=mainOld&confirm=true":n?t=t.replace("mainOld","main"):t+="&decorator=main&confirm=true",redirectToUrl(t)}function showDiv(e){var t=document.getElementById(e),n=(document.body.clientWidth,document.body.clientHeight,t.style.zIndex);t.style.zIndex=-100,t.style.display="block",centerLayer(t),t.style.zIndex=n}function hideDiv(e){var t=document.getElementById(e);return t.style.display="none",!0}function borderImage(e,t){(document.all||document.getElementById)&&(e.style.borderColor=t)}function resetRadio(e){var t=!1;if(e.length)for(var n=0;n<e.length;++n)e[n].checked&&(e[n].checked=!1,t=!0);else e.checked&&(e.checked=!1,t=!0);return t}function launchAboutDlg(){var e=document.getElementById("about");e.style.display="block",centerLayer(e)}function hideAboutDlg(){var e=document.getElementById("about");e.style.display="none"}function unescapeBackslash(e){return e?e.replace(/\\\\/g,"\\"):e}function ajaxIframeDownload(e,t){var n=$("ajax-download-iframe");t&&(n.onload=t.onload),n.src=e}function parseAsDate(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}function parseAsDateTime(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}function padNumber(e){var t=String(e);return 1===t.length&&(t="0"+t),t}function toTimestampString(e){return e.getUTCFullYear()+"-"+padNumber(e.getMonth()+1)+"-"+padNumber(e.getDate())+" "+padNumber(e.getHours())+":"+padNumber(e.getMinutes())+":"+padNumber(e.getSeconds())}function moveTo(e,t,n,i){new Effect.Move($(e),{sync:!1,x:t,y:n,mode:"absolute",duration:i?i:.2})}function move(e,t,n,i){new Effect.Move($(e),{sync:!1,x:t,y:n,mode:"relative",duration:i?i:.2})}function moveMany(e,t,n,i){for(var r=[],o=0;o<e.length;++o)r[o]=new Effect.Move(e[o],{sync:!0,x:t,y:n,mode:"relative"});new Effect.Parallel(r,{duration:i?i:1})}function fade(e,t,n){$(e).fade({duration:t?t:1,from:1,to:n?n:0})}function fadeMany(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=new Effect.Fade(e[r],{sync:!0,from:1,to:n?n:0});new Effect.Parallel(i,{duration:t?t:1})}function appear(e,t,n){$(e).appear({duration:t?t:1,from:0,to:n?n:1})}function appearMany(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=new Effect.Appear(e[r],{sync:!0,from:0,to:n?n:1});new Effect.Parallel(i,{duration:t?t:1})}function pulsate(e,t,n){var i=$(e).identify();Effect.Pulsate(i,{pulses:t?t:5,duration:n?n:2})}function renderImageOverMousePointer(e,t){var e=$(e);return e.show(),e.style.left=t.clientX,e.style.top=t.clientY,e}function JSTooltip(e,t){if(e){if(this.srcElement=e,t&&(this.label=t.label,this.text=t.text,this.offsets=t.offsets,this.showBelow=!!t.showBelow,this.templateId=t.templateId,this.loadTextCallback=t.loadTextCallback,this.loadTextExecuted=!1),this.disabled=!1,this.removed=!1,this.templateId)this._toAttribute(this.TOOLTIP_TEMPLATE,this.templateId);else{var n=this._fromAttribute(this.TOOLTIP_TEMPLATE);this.templateId=n&&n.length>0?n:this.TOOLTIP_TEMPLATE_ID}this.label?this._toAttribute(this.TOOLTIP_LABEL,this.label):this.label=this._fromAttribute(this.TOOLTIP_LABEL),this.text?this._toAttribute(this.TOOLTIP_TEXT,this.text):this.text=this._fromAttribute(this.TOOLTIP_TEXT),this.label&&(this.label=this._escapeText(this.label)),this.text&&(this.text=this._escapeText(this.text)),this.srcElement.jsTooltip=this,tooltipModule.tooltips.push(this)}}function isProVersion(){return __jrsConfigs__.isProVersion}function AjaxRequester(e,t,n,i){this.url=e||document.location.toString(),this.params=t,this.xmlhttp=getXMLHTTP();var r=this.processResponse(this);this.xmlhttp.onreadystatechange=r,this.postData=n,this.async=!i,this.requestTime=+new Date}function handleResponse(e){checkForErrors(e)||e.responseHandler(e),ajaxRequestEnded(e),JRS&&JRS.vars&&(JRS.vars.ajax_in_progress=!1),document.getElementById("mainTableContainerOverlay")&&(document.getElementById("mainTableContainerOverlay").className="hidden")}function targettedResponseHandler(e){var t=e.xmlhttp,n=e.params[0],i=e.params[1],r=e.params[2],o=(e.params[3],$(n));if(i)o.innerHTML="",updateUsingResponseSubset(t,i,o);else{var a=t.responseText.trim();if(0===a.indexOf("<div")){var s=a.substring(0,a.indexOf(">")+1),u=a.substring(a.indexOf(">")+1,a.lastIndexOf("</")),l=a.substring(a.lastIndexOf("</")),c=jQuery(s+l);c.text(xssUtil.escape(u)),jQuery(o).html(c)}else jQuery(o).html(xssUtil.escape(a,{softHTMLEscape:!0}))}invokeCallbacks(r,o)}function cumulativeResponseHandler(e){var t=e.xmlhttp,n=e.params[0],i=e.params[1],r=e.params[2],o=$(n);i?updateUsingResponseSubset(t,i,o):o.insert(xssUtil.escape(t.responseText,{softHTMLEscape:!0}),{position:"after"}),invokeCallbacks(r)}function rowCopyResponseHandler(e){var t=e.xmlhttp,n=e.params[0],i=e.params[2],r=$(n);if("TABLE"!==r.tagName)return void alert("Ajax Exception: rowCopyResponseHandler will not work for container "+r.tagName);var o=Builder.node("DIV");o.innerHTML=xssUtil.escape(t.responseText,{softHTMLEscape:!0}),copyTable(o.getElementsByTagName("table")[0],r,!1,!1),invokeCallbacks(i)}function updateUsingResponseSubset(e,t,n){function i(){if(!(c>=l)){var e=jQuery(u.get(c));e.attr("src")?(c++,r(e.attr("data-custname"),e.attr("src"),i)):(c++,o(e.html(),i))}}function r(e,t,n){var i=n||!1,r=document.createElement("script");window.jr_scripts||(window.jr_scripts={}),window.jr_scripts[e]||"jr_jq_min"===e?i&&n():(r.setAttribute("type","text/javascript"),r.readyState?r.onreadystatechange=function(){("loaded"===r.readyState||"complete"===r.readyState)&&(r.onreadystatechange=null,i&&n())}:r.onload=function(){i&&n()},r.src=t,document.getElementsByTagName("head")[0].appendChild(r),window.jr_scripts[e]=t)}function o(e,t){var n=t||!1;if(e){var i=e.match(/^.*((\r\n|\n|\r)|$)/gm);window.eval(i.join("\n")),n&&t()}}var a=jQuery(e.responseText),s=a.filter("#"+t);if("TABLE"==n.tagName&&"TABLE"==$(t).tagName?copyTableJquery(s,n,!0):jQuery(n).append(s.html()),"undefined"!=typeof jQuery){var u=a.filter("script.jasperreports"),l=u.size(),c=0;i()}}function invokeCallbacks(callback,customArg){callback&&("string"==typeof callback?eval(callback):callback(customArg))}function ajaxClobberredUpdate(e,t){t.responseHandler=clobberingResponseHandler,ajaxUpdate(e,t)}function ajaxTargettedUpdate(url,options){var responseHandler;responseHandler=options.mode==AjaxRequester.prototype.CUMULATIVE_UPDATE?cumulativeResponseHandler:options.mode==AjaxRequester.prototype.ROW_COPY_UPDATE?rowCopyResponseHandler:options.mode==AjaxRequester.prototype.EVAL_JSON?evalJSONResponseHandler:targettedResponseHandler,options.responseHandler=function(requester,params){options.preFillAction?"string"==typeof options.preFillAction?eval(options.preFillAction):options.preFillAction(responseHandler(requester,params)):responseHandler(requester,options.params)},ajaxUpdate(url,options)}function ajaxNonReturningUpdate(e,t){t.responseHandler=null,ajaxUpdate(e,t)}function ajaxClobberedFormSubmit(e,t,n){var i=getPostData(e,extraPostData);n.postData=appendPostData(i,extraPostData),n.responseHandler=clobberingResponseHandler,ajaxUpdate(t,n)}function ajaxTargettedFormSubmit(e,t,n){var i=getPostData(e,n.extraPostData);n.postData=appendPostData(i,n.extraPostData),n.responseHandler=targettedResponseHandler,ajaxUpdate(t,n)}function ajaxErrorHandler(){showMessageDialog(ajaxError,ajaxErrorHeader)}function doNothing(){}function ajaxUpdate(e,t){var n=!0,i=new AjaxRequester(e,[t.fillLocation,t.fromLocation,t.callback,t.isAutomaticRefresh],t.postData,t.synchronous);isIPad()&&"adhoc"==JRS.vars.current_flow&&(JRS.vars.ajax_in_progress||(JRS.vars.ajax_in_progress=!0)),n&&(i.busyCursor=!t.silent,i.showLoading=!t.silent&&!t.hideLoader,i.responseHandler=t.responseHandler||doNothing,i.responseHandler!=doNothing&&ajaxRequestStarted(i),t.errorHandler&&(i.errorHandler=t.errorHandler),i.xmlhttp&&(t.postData?i.doPost():i.doGet()))}function checkForErrors(e){var t=e.errorHandler;return t(e.xmlhttp)}function getPostData(e,t){"string"==typeof e&&(e=document.forms[e]);for(var n="",i=0;i<e.elements.length;++i){var r=e.elements[i];!r.name||t&&t[r.name]||(n=appendFormInput(n,r))}return n}function appendPostData(e,t){for(var n in t)e=appendFormValue(e,n,t[n]);return e}function appendFormInput(e,t){if(t.name){var n,i=!1;switch(t.type){case"checkbox":case"radio":i=t.checked,n=t.value;break;case"hidden":case"password":case"text":case"Textarea":i=!0,n=t.value;break;case"select-one":case"select-multiple":n=[];for(var r=0;r<t.options.length;++r){var o=t.options[r];o.selected&&(i=!0,n.push(o.value))}}if(i)if(n.shift)for(;n.length>0;)e=appendFormValue(e,t.name,n.shift());else e=appendFormValue(e,t.name,n)}return e}function appendFormValue(e,t,n){return e.length>0&&(e+="&"),e+=t+"="+encodeURIComponent(n)}function baseErrorHandler(e){if(500==e.status)return showErrorPopup(e.responseText),!0;var t=e.getResponseHeader("LoginRequested");if(t){var n=".";return document.location=n,!0}var i=e.getResponseHeader("JasperServerError");if(i){var r=e.getResponseHeader("SuppressError");if(!r){var o=jQuery(".dashboardViewFrame");if(1==o.length){document.body.innerHTML=xssUtil.escape(e.responseText,{softHTMLEscape:!0});var a=jQuery("#"+JRS.fid,window.parent.document);a.removeClass("hidden").show()}else showErrorPopup(e.responseText)}return!0}return!1}function showErrorPopup(e,t){(e&&e.indexOf("sessionAttributeMissingException"))>-1?dialogs.clusterErrorPopup.show(e):dialogs.errorPopup.show(e,!1,t)}function hideErrorPopup(){popOverlayObject();var e=document.getElementById(ERROR_POPUP_DIV);e.style.display="none"}function ajaxRequestStarted(e){++ajax.ajaxRequestCount,e.busyCursor&&(document.body.style.cursor="wait"),!isIPad()&&e.showLoading&&e.startResponseTimer()}function ajaxRequestEnded(e){e.cancelResponseTimer(),ajax.ajaxRequestCount<=1?(document.body.style.cursor="auto",ajax.ajaxRequestCount=0,dialogs.popup.hide($(ajax.LOADING_ID))):ajax.ajaxRequestCount--}function isValidJsonResponse(e){var t=e.getResponseHeader("Content-Type");return 200==e.status&&null!=t&&t.indexOf("application/json")>=0}function getXMLHTTP(){var e,t;if(!t&&!e)try{t=new XMLHttpRequest}catch(n){alert("You need a browser which supports an XMLHttpRequest Object.\nMozilla build 0.9.5 has this Object and IE5 and above, others may do, I don't know, any info jim@jibbering.com")}return t}(function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}function t(e,t){for(var n=e.criteria,i=t.criteria,r=-1,o=n.length;++r<o;){var a=n[r],s=i[r];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.index-t.index}function n(e){return"\\"+Pt[e]}function i(){return ht.pop()||[]}function r(e){e.length=0,ht.length<_t&&ht.push(e)}function o(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}function a(e){return e instanceof a?e:new s(e)}function s(e,t){this.__chain__=!!t,this.__wrapped__=e}function u(e){function t(){if(i){var e=o(i);Yt.apply(e,arguments)}if(this instanceof t){var a=c(n.prototype),s=n.apply(a,e||arguments);return H(s)?s:a}return n.apply(r,e||arguments)}var n=e[0],i=e[2],r=e[4];return t}function l(e,t,n,a,s){if(n){var u=n(e);if("undefined"!=typeof u)return u}var c=H(e);if(!c)return e;var d=Kt.call(e);if(!Dt[d])return e;var p=an[d];switch(d){case xt:case At:return new p(+e);case It:case Mt:return new p(e);case Ct:return u=p(e.source,yt.exec(e)),u.lastIndex=e.lastIndex,u}var f=un(e);if(t){var h=!a;a||(a=i()),s||(s=i());for(var m=a.length;m--;)if(a[m]==e)return s[m];u=f?p(e.length):{}}else u=f?o(e):O({},e);return f&&(Xt.call(e,"index")&&(u.index=e.index),Xt.call(e,"input")&&(u.input=e.input)),t?(a.push(e),s.push(u),(f?oe:gn)(e,function(e,i){u[i]=l(e,t,n,a,s)}),h&&(r(a),r(s)),u):u}function c(e,t){return H(e)?Qt(e):{}}function d(e,t,n){if("function"!=typeof e)return Ze;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return ze(e,t)}function p(e){function t(){var e=l?s:this;if(r){var g=o(r);Yt.apply(g,arguments)}if((a||f)&&(g||(g=o(arguments)),a&&Yt.apply(g,a),f&&g.length<u))return i|=16,p([n,h?i:-4&i,g,null,s,u]);if(g||(g=arguments),d&&(n=e[m]),this instanceof t){e=c(n.prototype);var v=n.apply(e,g);return H(v)?v:e}return n.apply(e,g)}var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],u=e[5],l=1&i,d=2&i,f=4&i,h=8&i,m=n;return t}function f(e,t){for(var n=-1,i=S(),r=e?e.length:0,o=[];++n<r;){var a=e[n];i(t,a)<0&&o.push(a)}return o}function h(e,t,n,i){for(var r=(i||0)-1,o=e?e.length:0,a=[];++r<o;){var s=e[r];if(s&&"object"==typeof s&&"number"==typeof s.length&&(un(s)||A(s))){t||(s=h(s,t,n));var u=-1,l=s.length,c=a.length;for(a.length+=l;++u<l;)a[c++]=s[u]}else n||a.push(s)}return a}function m(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;var r=typeof e,o=typeof t;if(!(e!==e||e&&Rt[r]||t&&Rt[o]))return!1;if(null==e||null==t)return e===t;var s=Kt.call(e),u=Kt.call(t);if(s!=u)return!1;switch(s){case xt:case At:return+e==+t;case It:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Ct:case Mt:return e==String(t)}var l=s==wt;if(!l){var c=e instanceof a,d=t instanceof a;if(c||d)return m(c?e.__wrapped__:e,d?t.__wrapped__:t,n,i);if(s!=Nt)return!1;var p=e.constructor,f=t.constructor;if(p!=f&&!(B(p)&&p instanceof p&&B(f)&&f instanceof f)&&"constructor"in e&&"constructor"in t)return!1}n||(n=[]),i||(i=[]);for(var h=n.length;h--;)if(n[h]==e)return i[h]==t;var g=!0,v=0;if(n.push(e),i.push(t),l){if(v=t.length,g=v==e.length)for(;v--&&(g=m(e[v],t[v],n,i)););}else mn(t,function(t,r,o){return Xt.call(o,r)?(v++,!(g=Xt.call(e,r)&&m(e[r],t,n,i))&&gt):void 0}),g&&mn(e,function(e,t,n){return Xt.call(n,t)?!(g=--v>-1)&&gt:void 0});return n.pop(),i.pop(),g}function g(e,t,n,i,r){(un(t)?oe:gn)(t,function(t,o){var a,s,u=t,l=e[o];if(t&&((s=un(t))||vn(t))){for(var c=i.length;c--;)if(a=i[c]==t){l=r[c];break}if(!a){var d;n&&(u=n(l,t),(d="undefined"!=typeof u)&&(l=u)),d||(l=s?un(l)?l:[]:vn(l)?l:{}),i.push(t),r.push(l),d||g(l,t,n,i,r)}}else n&&(u=n(l,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(l=u);e[o]=l})}function v(e,t){return e+qt(on()*(t-e+1))}function _(e,t,n){for(var i=-1,r=S(),o=e?e.length:0,a=[],s=n?[]:a;++i<o;){var u=e[i],l=n?n(u,i,e):u;(t?!i||s[s.length-1]!==l:r(s,l)<0)&&(n&&s.push(l),a.push(u))}return a}function y(e){return function(t,n,i){var r={};n=Qe(n,i,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a;){var s=t[o];e(r,s,n(s,o,t),t)}else gn(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function b(e,t,n,i,r,o){var a=2&t,s=16&t,l=32&t;if(!a&&!B(e))throw new TypeError;s&&!n.length&&(t&=-17,s=n=!1),l&&!i.length&&(t&=-33,l=i=!1);var c=1==t||17===t?u:p;return c([e,t,n,i,r,o])}function E(e){return dn[e]}function S(){var t=(t=a.indexOf)===xe?e:t;return t}function T(e){return"function"==typeof e&&Vt.test(e)}function w(e){var t,n;return e&&Kt.call(e)==Nt&&(t=e.constructor,!B(t)||t instanceof t)?(mn(e,function(e,t){n=t}),"undefined"==typeof n||Xt.call(e,n)):gt}function x(e){return pn[e]}function A(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Kt.call(e)==Tt||!1}function O(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var r in i)e[r]=i[r]}return e}function I(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),l(e,t,"function"==typeof n&&d(n,i,1))}function N(e,t,n){return l(e,!0,"function"==typeof t&&d(t,n,1))}function C(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var r in i)"undefined"==typeof e[r]&&(e[r]=i[r])}return e}function M(e){var t=[];return mn(e,function(e,n){B(e)&&t.push(n)}),t.sort()}function D(e,t){return e?Xt.call(e,t):!1}function R(e){for(var t=-1,n=cn(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function P(e){return e===!0||e===!1||e&&"object"==typeof e&&Kt.call(e)==xt||!1}function L(e){return e&&"object"==typeof e&&Kt.call(e)==At||!1}function j(e){return e&&1===e.nodeType||!1}function k(e){if(!e)return!0;if(un(e)||q(e))return!e.length;for(var t in e)if(Xt.call(e,t))return!1;return!0}function F(e,t){return m(e,t)}function z(e){return Zt(e)&&!en(parseFloat(e))}function B(e){return"function"==typeof e}function H(e){return!(!e||!Rt[typeof e])}function U(e){return V(e)&&e!=+e}function K(e){return null===e}function V(e){return"number"==typeof e||e&&"object"==typeof e&&Kt.call(e)==It||!1}function $(e){return e&&Rt[typeof e]&&Kt.call(e)==Ct||!1}function q(e){return"string"==typeof e||e&&"object"==typeof e&&Kt.call(e)==Mt||!1}function W(e){return"undefined"==typeof e}function X(e){var t=arguments,n=2;if(!H(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var a=d(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(a=t[--n]);for(var s=o(arguments,1,n),u=-1,l=i(),c=i();++u<n;)g(e,s[u],a,l,c);return r(l),r(c),e}function Y(e){var t=[];mn(e,function(e,n){t.push(n)}),t=f(t,h(arguments,!0,!1,1));for(var n=-1,i=t.length,r={};++n<i;){var o=t[n];r[o]=e[o]}return r}function G(e){for(var t=-1,n=cn(e),i=n.length,r=Array(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function Q(e){for(var t=-1,n=h(arguments,!0,!1,1),i=n.length,r={};++t<i;){var o=n[t];o in e&&(r[o]=e[o])}return r}function J(e,t,n,i){var r=un(e);if(null==n)if(r)n=[];else{var o=e&&e.constructor,a=o&&o.prototype;n=c(a)}return t&&(t=Qe(t,i,4),(r?oe:gn)(e,function(e,i,r){return t(n,e,i,r)===!1&&gt})),n}function Z(e){for(var t=-1,n=cn(e),i=n.length,r=Array(i);++t<i;)r[t]=e[n[t]];return r}function ee(e,t){var n=S(),i=e?e.length:0,r=!1;return i&&"number"==typeof i?r=n(e,t)>-1:gn(e,function(e){return(r=e===t)&&gt}),r}function te(e,t,n){var i=!0;t=Qe(t,n,3);var r=-1,o=e?e.length:0;if("number"==typeof o)for(;++r<o&&(i=!!t(e[r],r,e)););else gn(e,function(e,n,r){return!(i=!!t(e,n,r))&&gt});return i}function ne(e,t,n){var i=[];t=Qe(t,n,3);var r=-1,o=e?e.length:0;if("number"==typeof o)for(;++r<o;){var a=e[r];t(a,r,e)&&i.push(a)}else gn(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function ie(e,t,n){t=Qe(t,n,3);var i=-1,r=e?e.length:0;if("number"!=typeof r){var o;return gn(e,function(e,n,i){return t(e,n,i)?(o=e,gt):void 0}),o}for(;++i<r;){var a=e[i];if(t(a,i,e))return a}}function re(e,t){return be(e,t,!0)}function oe(e,t,n){var i=-1,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:d(t,n,3),"number"==typeof r)for(;++i<r&&t(e[i],i,e)!==gt;);else gn(e,t)}function ae(e,t){var n=e?e.length:0;if("number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var i=cn(e);n=i.length,gn(e,function(e,r,o){return r=i?i[--n]:--n,t(o[r],r,o)===!1&&gt})}}function se(e,t){var n=o(arguments,2),i=-1,r="function"==typeof t,a=e?e.length:0,s=Array("number"==typeof a?a:0);return oe(e,function(e){s[++i]=(r?t:e[t]).apply(e,n)}),s}function ue(e,t,n){var i=-1,r=e?e.length:0;if(t=Qe(t,n,3),"number"==typeof r)for(var o=Array(r);++i<r;)o[i]=t(e[i],i,e);else o=[],gn(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function le(e,t,n){var i=-(1/0),r=i;"function"!=typeof t&&n&&n[t]===e&&(t=null);var o=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++o<a;){var s=e[o];s>r&&(r=s)}else t=Qe(t,n,3),oe(e,function(e,n,o){var a=t(e,n,o);a>i&&(i=a,r=e)});return r}function ce(e,t,n){var i=1/0,r=i;"function"!=typeof t&&n&&n[t]===e&&(t=null);var o=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++o<a;){var s=e[o];r>s&&(r=s)}else t=Qe(t,n,3),oe(e,function(e,n,o){var a=t(e,n,o);i>a&&(i=a,r=e)});return r}function de(e,t,n,i){if(!e)return n;var r=arguments.length<3;t=Qe(t,i,4);var o=-1,a=e.length;if("number"==typeof a)for(r&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);else gn(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function pe(e,t,n,i){var r=arguments.length<3;return t=Qe(t,i,4),ae(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function fe(e,t,n){return t=Qe(t,n,3),ne(e,function(e,n,i){return!t(e,n,i)})}function he(e,t,n){if(e&&"number"!=typeof e.length&&(e=Z(e)),null==t||n)return e?e[v(0,e.length-1)]:ft;var i=me(e);return i.length=rn(nn(0,t),i.length),i}function me(e){var t=-1,n=e?e.length:0,i=Array("number"==typeof n?n:0);return oe(e,function(e){var n=v(0,++t);i[t]=i[n],i[n]=e}),i}function ge(e){var t=e?e.length:0;return"number"==typeof t?t:cn(e).length}function ve(e,t,n){var i;t=Qe(t,n,3);var r=-1,o=e?e.length:0;if("number"==typeof o)for(;++r<o&&!(i=t(e[r],r,e)););else gn(e,function(e,n,r){return(i=t(e,n,r))&&gt});return!!i}function _e(e,n,i){var r=-1,o=e?e.length:0,a=Array("number"==typeof o?o:0);for(n=Qe(n,i,3),oe(e,function(e,t,i){
a[++r]={criteria:[n(e,t,i)],index:r,value:e}}),o=a.length,a.sort(t);o--;)a[o]=a[o].value;return a}function ye(e){return un(e)?o(e):e&&"number"==typeof e.length?ue(e):Z(e)}function be(e,t,n){return n&&k(t)?ft:(n?ie:ne)(e,t)}function Ee(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function Se(e){return f(e,h(arguments,!0,!0,1))}function Te(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=Qe(t,n,3);++a<r&&t(e[a],a,e);)i++}else if(i=t,null==i||n)return e?e[0]:ft;return o(e,0,rn(nn(0,i),r))}function we(e,t){return h(e,t)}function xe(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?nn(0,r+i):i||0}else if(i){var o=De(t,n);return t[o]===n?o:-1}return e(t,n,i)}function Ae(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=r;for(t=Qe(t,n,3);a--&&t(e[a],a,e);)i++}else i=null==t||n?1:t||i;return o(e,0,rn(nn(0,r-i),r))}function Oe(){for(var e=[],t=-1,n=arguments.length;++t<n;){var i=arguments[t];(un(i)||A(i))&&e.push(i)}var r=e[0],o=-1,a=S(),s=r?r.length:0,u=[];e:for(;++o<s;)if(i=r[o],a(u,i)<0){for(var t=n;--t;)if(a(e[t],i)<0)continue e;u.push(i)}return u}function Ie(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=r;for(t=Qe(t,n,3);a--&&t(e[a],a,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:ft;return o(e,nn(0,r-i))}function Ne(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?nn(0,i+n):rn(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function Ce(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var i=-1,r=nn(0,$t((t-e)/n)),o=Array(r);++i<r;)o[i]=e,e+=n;return o}function Me(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,a=e?e.length:0;for(t=Qe(t,n,3);++r<a&&t(e[r],r,e);)i++}else i=null==t||n?1:nn(0,t);return o(e,i)}function De(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?Qe(n,i,1):Ze,t=n(t);o>r;){var a=r+o>>>1;n(e[a])<t?r=a+1:o=a}return r}function Re(){return _(h(arguments,!0,!0))}function Pe(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=Qe(n,i,3)),_(e,t,n)}function Le(e){return f(e,o(arguments,1))}function je(){for(var e=-1,t=le(En(arguments,"length")),n=Array(0>t?0:t);++e<t;)n[e]=En(arguments,e);return n}function ke(e,t){var n=-1,i=e?e.length:0,r={};for(t||!i||un(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Fe(e,t){if(!B(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function ze(e,t){return arguments.length>2?b(e,17,o(arguments,2),null,t):b(e,1,null,null,t)}function Be(e){for(var t=arguments.length>1?h(arguments,!0,!1,1):M(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=b(e[r],1,null,null,e)}return e}function He(){for(var e=arguments,t=e.length;t--;)if(!B(e[t]))throw new TypeError;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Ue(e,t,n){var i,r,o,a,s,u,l,c=0,d=!1,p=!0;if(!B(e))throw new TypeError;if(t=nn(0,t)||0,n===!0){var f=!0;p=!1}else H(n)&&(f=n.leading,d="maxWait"in n&&(nn(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var h=function(){var n=t-(Sn()-a);if(0>=n){r&&clearTimeout(r);var d=l;r=u=l=ft,d&&(c=Sn(),o=e.apply(s,i),u||r||(i=s=null))}else u=setTimeout(h,n)},m=function(){u&&clearTimeout(u),r=u=l=ft,(p||d!==t)&&(c=Sn(),o=e.apply(s,i),u||r||(i=s=null))};return function(){if(i=arguments,a=Sn(),s=this,l=p&&(u||!f),d===!1)var n=f&&!u;else{r||f||(c=a);var g=d-(a-c),v=0>=g;v?(r&&(r=clearTimeout(r)),c=a,o=e.apply(s,i)):r||(r=setTimeout(m,g))}return v&&u?u=clearTimeout(u):u||t===d||(u=setTimeout(h,t)),n&&(v=!0,o=e.apply(s,i)),!v||u||r||(i=s=null),o}}function Ke(e){if(!B(e))throw new TypeError;var t=o(arguments,1);return setTimeout(function(){e.apply(ft,t)},1)}function Ve(e,t){if(!B(e))throw new TypeError;var n=o(arguments,2);return setTimeout(function(){e.apply(ft,n)},t)}function $e(e,t){var n={};return function(){var i=t?t.apply(this,arguments):vt+arguments[0];return Xt.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}}function qe(e){var t,n;if(!B(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function We(e){return b(e,16,o(arguments,1))}function Xe(e,t,n){var i=!0,r=!0;if(!B(e))throw new TypeError;return n===!1?i=!1:H(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),n={},n.leading=i,n.maxWait=t,n.trailing=r,Ue(e,t,n)}function Ye(e,t){return b(t,16,[e])}function Ge(e){return function(){return e}}function Qe(e,t,n){var i=typeof e;if(null==e||"function"==i)return d(e,t,n);if("object"!=i)return nt(e);var r=cn(e);return function(t){for(var n=r.length,i=!1;n--&&(i=t[r[n]]===e[r[n]]););return i}}function Je(e){return null==e?"":String(e).replace(hn,E)}function Ze(e){return e}function et(e){oe(M(e),function(t){var n=a[t]=e[t];a.prototype[t]=function(){var e=[this.__wrapped__];Yt.apply(e,arguments);var t=n.apply(a,e);return this.__chain__?new s(t,!0):t}})}function tt(){return Lt._=Ut,this}function nt(e){return function(t){return t[e]}}function it(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+qt(on()*(t-e+1))}function rt(e,t){if(e){var n=e[t];return B(n)?e[t]():n}}function ot(e,t,i){var r=a,o=r.templateSettings;e=String(e||""),i=C({},i,o);var s=0,u="__p += '",l=i.variable,c=RegExp((i.escape||Et).source+"|"+(i.interpolate||Et).source+"|"+(i.evaluate||Et).source+"|$","g");e.replace(c,function(t,i,r,o,a){return u+=e.slice(s,a).replace(St,n),i&&(u+="' +\n_.escape("+i+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),r&&(u+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=a+t.length,t}),u+="';\n",l||(l="obj",u="with ("+l+" || {}) {\n"+u+"\n}\n"),u="function("+l+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var d=Function("_","return "+u)(r)}catch(p){throw p.source=u,p}return t?d(t):(d.source=u,d)}function at(e,t,n){e=(e=+e)>-1?e:0;var i=-1,r=Array(e);for(t=d(t,n,1);++i<e;)r[i]=t(i);return r}function st(e){return null==e?"":String(e).replace(fn,x)}function ut(e){var t=++mt+"";return e?e+t:t}function lt(e){return e=new s(e),e.__chain__=!0,e}function ct(e,t){return t(e),e}function dt(){return this.__chain__=!0,this}function pt(){return this.__wrapped__}var ft,ht=[],mt=0,gt={},vt=+new Date+"",_t=40,yt=/\w*$/,bt=/<%=([\s\S]+?)%>/g,Et=/($^)/,St=/['\n\r\t\u2028\u2029\\]/g,Tt="[object Arguments]",wt="[object Array]",xt="[object Boolean]",At="[object Date]",Ot="[object Function]",It="[object Number]",Nt="[object Object]",Ct="[object RegExp]",Mt="[object String]",Dt={};Dt[Ot]=!1,Dt[Tt]=Dt[wt]=Dt[xt]=Dt[At]=Dt[It]=Dt[Nt]=Dt[Ct]=Dt[Mt]=!0;var Rt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Pt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Lt=Rt[typeof window]&&window||this,jt=Rt[typeof exports]&&exports&&!exports.nodeType&&exports,kt=Rt[typeof module]&&module&&!module.nodeType&&module,Ft=kt&&kt.exports===jt&&jt,zt=Rt[typeof global]&&global;!zt||zt.global!==zt&&zt.window!==zt||(Lt=zt);var Bt=[],Ht=Object.prototype,Ut=Lt._,Kt=Ht.toString,Vt=RegExp("^"+String(Kt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),$t=Math.ceil,qt=Math.floor,Wt=T(Wt=Object.getPrototypeOf)&&Wt,Xt=Ht.hasOwnProperty,Yt=Bt.push,Gt=Ht.propertyIsEnumerable,Qt=T(Qt=Object.create)&&Qt,Jt=T(Jt=Array.isArray)&&Jt,Zt=Lt.isFinite,en=Lt.isNaN,tn=T(tn=Object.keys)&&tn,nn=Math.max,rn=Math.min,on=Math.random,an={};an[wt]=Array,an[xt]=Boolean,an[At]=Date,an[Ot]=Function,an[Nt]=Object,an[It]=Number,an[Ct]=RegExp,an[Mt]=String,s.prototype=a.prototype;var sn={};!function(){var e={0:1,length:1};sn.spliceObjects=(Bt.splice.call(e,0,1),!e[0])}(1),a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:bt,variable:""},Qt||(c=function(){function e(){}return function(t){if(H(t)){e.prototype=t;var n=new e;e.prototype=null}return n||Lt.Object()}}()),A(arguments)||(A=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Xt.call(e,"callee")&&!Gt.call(e,"callee")||!1});var un=Jt||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Kt.call(e)==wt||!1},ln=function(e){var t,n=e,i=[];if(!n)return i;if(!Rt[typeof e])return i;for(t in n)Xt.call(n,t)&&i.push(t);return i},cn=tn?function(e){return H(e)?tn(e):[]}:ln,dn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},pn=R(dn),fn=RegExp("("+cn(pn).join("|")+")","g"),hn=RegExp("["+cn(dn).join("")+"]","g"),mn=function(e,t){var n,i=e,r=i;if(!i)return r;if(!Rt[typeof i])return r;for(n in i)if(t(i[n],n,e)===gt)return r;return r},gn=function(e,t){var n,i=e,r=i;if(!i)return r;if(!Rt[typeof i])return r;for(n in i)if(Xt.call(i,n)&&t(i[n],n,e)===gt)return r;return r};B(/x/)&&(B=function(e){return"function"==typeof e&&Kt.call(e)==Ot});var vn=Wt?function(e){if(!e||Kt.call(e)!=Nt)return!1;var t=e.valueOf,n=T(t)&&(n=Wt(t))&&Wt(n);return n?e==n||Wt(e)==n:w(e)}:w,_n=y(function(e,t,n){Xt.call(e,n)?e[n]++:e[n]=1}),yn=y(function(e,t,n){(Xt.call(e,n)?e[n]:e[n]=[]).push(t)}),bn=y(function(e,t,n){e[n]=t}),En=ue,Sn=T(Sn=Date.now)&&Sn||function(){return(new Date).getTime()};a.after=Fe,a.bind=ze,a.bindAll=Be,a.chain=lt,a.compact=Ee,a.compose=He,a.constant=Ge,a.countBy=_n,a.debounce=Ue,a.defaults=C,a.defer=Ke,a.delay=Ve,a.difference=Se,a.filter=ne,a.flatten=we,a.forEach=oe,a.functions=M,a.groupBy=yn,a.indexBy=bn,a.initial=Ae,a.intersection=Oe,a.invert=R,a.invoke=se,a.keys=cn,a.map=ue,a.max=le,a.memoize=$e,a.merge=X,a.min=ce,a.omit=Y,a.once=qe,a.pairs=G,a.partial=We,a.pick=Q,a.pluck=En,a.range=Ce,a.reject=fe,a.rest=Me,a.shuffle=me,a.sortBy=_e,a.tap=ct,a.throttle=Xe,a.times=at,a.toArray=ye,a.transform=J,a.union=Re,a.uniq=Pe,a.values=Z,a.where=be,a.without=Le,a.wrap=Ye,a.zip=je,a.collect=ue,a.drop=Me,a.each=oe,a.extend=O,a.methods=M,a.object=ke,a.select=ne,a.tail=Me,a.unique=Pe,a.clone=I,a.cloneDeep=N,a.contains=ee,a.escape=Je,a.every=te,a.find=ie,a.has=D,a.identity=Ze,a.indexOf=xe,a.isArguments=A,a.isArray=un,a.isBoolean=P,a.isDate=L,a.isElement=j,a.isEmpty=k,a.isEqual=F,a.isFinite=z,a.isFunction=B,a.isNaN=U,a.isNull=K,a.isNumber=V,a.isObject=H,a.isRegExp=$,a.isString=q,a.isUndefined=W,a.lastIndexOf=Ne,a.mixin=et,a.noConflict=tt,a.random=it,a.reduce=de,a.reduceRight=pe,a.result=rt,a.size=ge,a.some=ve,a.sortedIndex=De,a.template=ot,a.unescape=st,a.uniqueId=ut,a.all=te,a.any=ve,a.detect=ie,a.findWhere=re,a.foldl=de,a.foldr=pe,a.include=ee,a.inject=de,a.first=Te,a.last=Ie,a.sample=he,a.take=Te,a.head=Te,et(a),a.VERSION="2.4.1",a.prototype.chain=dt,a.prototype.value=pt,oe(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Bt[e];a.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),sn.spliceObjects||0!==e.length||delete e[0],this}}),oe(["concat","join","slice"],function(e){var t=Bt[e];a.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new s(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Lt._=a,define("lodash.custom",[],function(){return a})):jt&&kt?Ft?(kt.exports=a)._=a:jt._=a:Lt._=a}).call(this),define("jrs.configs",[],function(){return"undefined"!=typeof __jrsConfigs__?__jrsConfigs__:{contextPath:"",userLocale:"en"}}),define("common/util/xssUtil",["require","jrs.configs"],function(e){var t=e("jrs.configs"),n="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,button,caption,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",i={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},o=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(r(n));return t},a=function(){var e,t={"&#111;":"o","&#110;":"n","&#115;":"s","&#114;":"r","&#99;":"c","&amp;":"&"};for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[i[e]]=e);return t}(),s=RegExp("(?:"+o(i).join("|")+")","g"),u=/(?:\)|\()/g,l=/\bjavascript:/gi,c=/\bon(\w+?)\s*=/gi,d=/\bsrcdoc\s*=/gi,p=function(e,r){if(e=null==e?"":e,r=r||{},!("string"==typeof e||e instanceof String))return e;if(e.indexOf(t.xssNonce)>=0)return e;if(r.softHTMLEscape){if(e=u.test(e)?e.replace(u,function(e){return i[e]}):e,r.whiteList&&r.whiteList instanceof Array&&r.whiteList.length>0){var o=RegExp("<(?!/|"+r.whiteList.join("\\b|")+")","ig");e=o.test(e)?e.replace(o,"&lt;"):e;var a=RegExp("</(?!"+r.whiteList.join("\\b|")+")","ig");e=a.test(e)?e.replace(a,"&lt;/"):e}else{var p=n;if(r.escapeTags&&r.escapeTags instanceof Array)for(var f=0;f<r.escapeTags.length;++f)p=n.replace(r.escapeTags[f]+",","");var h=RegExp("<(?!/|"+p.replace(/,/g,"\\b|")+")","ig");e=h.test(e)?e.replace(h,"&lt;"):e;var m=RegExp("</(?!"+p.replace(/,/g,"\\b|")+")","ig");e=m.test(e)?e.replace(m,"&lt;/"):e}e=l.test(e)?e.replace(l,""):e,e=c.test(e)?e.replace(c,"&#111;&#110;$1="):e,e=d.test(e)?e.replace(d,"&#115;&#114;&#99;doc="):e}else e=s.test(e)?e.replace(s,function(e){return i[e]}):e;return e},f=RegExp("(?:"+o(a).join("|")+")","ig"),h=function(e){return e=null==e?"":e,"string"==typeof e||e instanceof String?e.indexOf(t.xssNonce)>=0?e:f.test(e)?e.replace(f,function(e){return a[e]}):e:e};return xssUtil={escape:p,unescape:h,noConflict:function(){}},xssUtil}),!function(e,t){"use strict";var n=t.prototype.trim,i=t.prototype.trimRight,r=t.prototype.trimLeft,o=function(e){return 1*e||0},a=function(e,t){if(1>t)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n},s=[].slice,u=function(e){return null==e?"\\s":e.source?e.source:"["+f.escapeRegExp(e)+"]"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},c={};for(var d in l)c[l[d]]=d;var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=a,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,r){var o,a,s,u,l,c,d,f=1,h=i.length,m="",g=[];for(a=0;h>a;a++)if(m=e(i[a]),"string"===m)g.push(i[a]);else if("array"===m){if(u=i[a],u[2])for(o=r[f],s=0;s<u[2].length;s++){if(!o.hasOwnProperty(u[2][s]))throw new Error(p('[_.sprintf] property "%s" does not exist',u[2][s]));o=o[u[2][s]]}else o=u[1]?r[u[1]]:r[f++];if(/[^s]/.test(u[8])&&"number"!=e(o))throw new Error(p("[_.sprintf] expecting number but found %s",e(o)));switch(u[8]){case"b":o=o.toString(2);break;case"c":o=t.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=u[7]?o.toExponential(u[7]):o.toExponential();break;case"f":o=u[7]?parseFloat(o).toFixed(u[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=t(o))&&u[7]?o.substring(0,u[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(u[8])&&u[3]&&o>=0?"+"+o:o,c=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",d=u[6]-t(o).length,l=u[6]?n(c,d):"",g.push(u[5]?o+l:l+o)}return g.join("")},i.cache={},i.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");o.push(s[1])}n[2]=o}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}t=t.substring(n[0].length)}return i},i}(),f={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return null==e?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return f.strip(e).replace(/\s+/g," ")},count:function(e,n){return null==e||null==n?0:t(e).split(n).length-1},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+c[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,n){var i;return n in l?l[n]:(i=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(i[1],16)):(i=n.match(/^#(\d+)$/))?t.fromCharCode(~~i[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,i){var r=f.chars(e);return r.splice(~~t,~~n,i),r.join("")},insert:function(e,t,n){return f.splice(e,t,0,n)},include:function(e,n){return""===n?!0:null==e?!1:-1!==t(e).indexOf(n)},join:function(){var e=s.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return f.chars(e).reverse().join("")},startsWith:function(e,n){return""===n?!0:null==e||null==n?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return""===n?!0:null==e||null==n?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return f.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return f.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return f.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return f.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return f.capitalize(f.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,i){return null==e?"":!i&&n?n.call(e):(i=u(i),t(e).replace(new RegExp("^"+i+"+|"+i+"+$","g"),""))},ltrim:function(e,n){return null==e?"":!n&&r?r.call(e):(n=u(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return null==e?"":!n&&i?i.call(e):(n=u(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,i){return null==e?"":(e=t(e),i=i||"...",n=~~n,e.length>n?e.slice(0,n)+i:e)},prune:function(e,n,i){if(null==e)return"";if(e=t(e),n=~~n,i=null!=i?t(i):"...",e.length<=n)return e;var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):f.rtrim(o.slice(0,o.length-1)),(o+i).length>e.length?e:e.slice(0,o.length)+i},words:function(e,t){return f.isBlank(e)?[]:f.trim(e,t).split(t||/\s+/)},pad:function(e,n,i,r){e=null==e?"":t(e),n=~~n;var o=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",r){case"right":return o=n-e.length,e+a(i,o);case"both":return o=n-e.length,a(i,Math.ceil(o/2))+e+a(i,Math.floor(o/2));default:return o=n-e.length,a(i,o)+e}},lpad:function(e,t,n){return f.pad(e,t,n)},rpad:function(e,t,n){return f.pad(e,t,n,"right")},lrpad:function(e,t,n){return f.pad(e,t,n,"both")},sprintf:p,vsprintf:function(e,t){return t.unshift(e),p.apply(null,t)},toNumber:function(e,n){if(null==e||""==e)return 0;e=t(e);var i=o(o(e).toFixed(~~n));return 0!==i||e.match(/^0+$/)?i:Number.NaN},numberFormat:function(e,t,n,i){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),i=i||",";var r=e.split("."),o=r[0],a=r[1]?(n||".")+r[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+a},strRight:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var i=n?e.indexOf(n):-1;return~i?e.slice(i+n.length,e.length):e},strRightBack:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var i=n?e.lastIndexOf(n):-1;return~i?e.slice(i+n.length,e.length):e},strLeft:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var i=n?e.indexOf(n):-1;return~i?e.slice(0,i):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,i){t=t||", ",n=n||" and ";var r=e.slice(),o=r.pop();return e.length>2&&i&&(n=f.rtrim(t)+n),r.length?r.join(t)+n+o:o},toSentenceSerial:function(){var e=s.call(arguments);return e[3]=!0,f.toSentence.apply(f,e)},slugify:function(e){if(null==e)return"";var n="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0107\u0119\xe8\xe9\xeb\xea\xec\xed\xef\xee\u0142\u0144\xf2\xf3\xf6\xf4\xf5\xf8\xf9\xfa\xfc\xfb\xf1\xe7\u017c\u017a",i="aaaaaaaaceeeeeiiiilnoooooouuuunczz",r=new RegExp(u(n),"g");return e=t(e).toLowerCase().replace(r,function(e){var t=n.indexOf(e);return i.charAt(t)||"-"}),f.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return f.surround(e,'"')},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,n,i){if(null==e)return"";if(n=~~n,null==i)return a(t(e),n);for(var r=[];n>0;r[--n]=e);return r.join(i)},levenshtein:function(e,n){if(null==e&&null==n)return 0;if(null==e)return t(n).length;if(null==n)return t(e).length;e=t(e),n=t(n);for(var i,r,o=[],a=0;a<=n.length;a++)for(var s=0;s<=e.length;s++)r=a&&s?e.charAt(s-1)===n.charAt(a-1)?i:Math.min(o[s],o[s-1],i)+1:a+s,i=o[s],o[s]=r;return o.pop()}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return f}):(e._=e._||{},e._.string=e._.str=f)}(this,String),define("underscore",["require","lodash.custom","common/util/xssUtil","underscore.string"],function(e){"use strict";var t=e("lodash.custom"),n=e("common/util/xssUtil");t.str=e("underscore.string"),t.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},t.mixin(t.str.exports()),t.xssEscape=n.escape;var i=t.template;return t.template=function(e,n,r){var o=t.templateSettings,a=/($^)/;e=String(e||""),r=t.defaults({},r,o);var s=RegExp((r.escape||a).source+"|$","g");return e=e.replace(s,"{{ print(_.xssEscape($1)); }}"),i.call(t,e,n,r)},t});var log="";Function.prototype.addMethod=function(e,t){return this.prototype[e]=t,this},Function.prototype.addVar=function(e,t){return this.prototype[e]=t,this},Function.prototype.compose=function(e){var t=this;return function(){return t.call(this,e.apply(this,arguments))}};var overlayObjectStack=new Array;"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.strip()});var timer={},inspect=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+" = "+e[n]);return t.join("\n")},getAsFunction=function(e){return toFunction(e)||toFunction("localContext."+e)};BusyMonitor.prototype.run=function(){var e=arguments;null!=this.timer&&clearTimeout(this.timer);var t=function(){this.theFunction.apply(null,e)};this.timer=setTimeout(t.bind(this),this.waitTime)},BusyMonitor.prototype.cancel=function(){this.timer&&clearTimeout(this.timer)},InPlaceEditor.prototype.makeEditable=function(e){var t=this,n=this.elem.id+"Input",i=this.value,r=Builder.node("input",{className:"control input text",id:n,value:i});this.elem.update(r),this.editing=!0;var o=jQuery("#"+n);if(isIE()){var a=!1;o.hover(function(){!a&&i&&i===this.value&&(this.select(),this.focus(),a=!0)},function(){})}if(o.focus(),o.select(),e){if(e.blur&&($(n).onblur=function(n){n=n?n:window.event;var i=e.blur,r=getAsFunction(i);r.call(t,n)}),(e.onEnter||e.onTab)&&($(n).onkeypress=function(n){var i=null,r=null;n=n?n:window.event,enterKeyHit(n)?(i=e.onEnter,r=getAsFunction(i),r.call(t,n)):n.keyCode==Event.KEY_TAB&&(i=e.onTab,r=getAsFunction(i),r.call(t,n))}),e.onMouseup){var s=function(i){if(i=i?i:window.event,$(Event.element(i))!=$(n)){var r=e.onMouseup,o=getAsFunction(r);o.call(t,i)}};isIPad()?document.body.ontouchend=s:document.body.onmousedown=s}e.onEsc&&(document.body.onkeydown=function(n){if(n=n?n:window.event,n.keyCode==Event.KEY_ESC){var i=e.onEsc,r=getAsFunction(i);r.call(t,n)}})}},InPlaceEditor.prototype.makeNonEditable=function(){if(this.elem&&this.elem.firstDescendant()&&this.editing){var e=this.elem.firstDescendant().value;this.elem.update(xssUtil.escape(e)),this.editing=!1}},InPlaceEditor.prototype.revertEdit=function(){this.elem.update(this.value),this.editing=!1};var cancelEventDragTarget=null;String.prototype.times=function(e){return 1>e?"":new Array(e+1).join(this)};var tracer={nativeCodeEx:/\[native code\]/,indentCount:-4,tracing:[],traceMe:function(e,t){var n=function(){var n=+new Date,i=" ".times(tracer.indentCount+=4);console.info(i+t+"("+Array.prototype.slice.call(arguments).join(", ")+")");var r=e.apply(this,arguments);return console.info(i+t,"-> ",r,"(",new Date-n,"ms",")"),tracer.indentCount-=4,r};n.traceOff=e;for(var i in e)n[i]=e[i];return console.log("tracing "+t),n},traceAll:function(e,t){if(e!=window&&("object"==typeof e||"function"==typeof e))for(var n in e)if(e.hasOwnProperty(n)&&e[n]!=e){var i=e[n];"function"==typeof i&&(this==e||i.traceOff||this.nativeCodeEx.test(i)||(e[n]=this.traceMe(e[n],n),this.tracing.push({obj:e,methodName:n}))),t&&this.traceAll(i,!0)}},untraceAll:function(){for(var e=0;e<this.tracing.length;++e){var t=this.tracing[e];t.obj[t.methodName]=t.obj[t.methodName].traceOff}console.log("tracing disabled"),tracer.tracing=[]}},ValidationModule={validate:function(e,t){var n=this;if(!isArray(e))return this.validateEntry(e,t);var i=!0;return _.each(e,function(e){i=n.validateEntry(e,t)&&i}),i},validateEntry:function(e,t){if(e.validator)return this.validateLegacy(e,t);if(!e.selector){var n=this._validateElement(e.element,e,t);return null==n}for(var i=jQuery(e.element).find(e.selector),r=!0,o=0;o<i.length;o++){var n=this._validateElement(i[o],e,t);r=r&&null==n}return r},_validateElement:function(e,t,n){var i;if(t.method)i=this._runValidatorOnElement(t.method,e,t.messages,t.options);else for(var r=t.validators,o=0;o<r.length;o++){var a=r[o];if(i=this._runValidatorOnElement(a.method,e,a.messages,a.options),null!=i)break}return n!==!1&&(i?this.showError(e,i):this.hideError(e)),i},_runValidatorOnElement:function(e,t,n,i){_.isString(e)&&(e=this.methods[e]);var r=e.call(this,t.value,n,i);return _.isObject(r)?r.isValid?null:r.errorMessage:r},attachOnEvent:function(e,t){_.isArray(t)||(t=[t]),_.each(t,function(t){jQuery(t.element).on(e,function(e){ValidationModule.validateEntry(t)})})},_getMessage:function(e,t,n,i){(_.isArray(n)||void 0===n)&&(i=n,n=this.defaultMessages);var r=null;return t&&(r=t[e]),!r&&n&&(r=n[e]),r&&i&&(r=this.fillPlaceholders(r,i)),r||e},fillPlaceholders:function(e,t){for(var n=0;n<t.length;n++)e=e.replace("{"+n+"}",t[n]);return e},defaultMessages:{mandatory:"Field is mandatory",tooSmall:"Value is too small, at least {0} required",tooBig:"Value is too big, at most {0} allowed",tooShort:"Value is too short, at least {0} characters required",tooLong:"Value is too long, at most {0} characters allowed",wordInvalidChars:"Value should contain only word characters (letters, digits and underscore)",shouldStartWithLetter:"Value should start with letter"},methods:{mandatory:function(e,t){return jQuery.trim(e)?null:this._getMessage("mandatory",t)},minMax:function(e,t,n){var i=jQuery.trim(e);if(!i)return null;var i=parseFloat(i);return isNaN(i)?this._getMessage("notANumber",t):void 0!==n.min&&i<n.min?this._getMessage("tooSmall",t,[n.min]):void 0!==n.max&&i>n.max?this._getMessage("tooBig",t,[n.max]):void 0},minMaxLength:function(e,t,n){return n.minLength&&e.length<n.minLength?this._getMessage("tooShort",t,[n.minLength]):n.maxLength&&e.length>n.maxLength?this._getMessage("tooLong",t,[n.maxLength]):void 0},resourceIdChars:function(e,t){if(!localContext||!localContext.initOptions||!localContext.initOptions.resourceIdNotSupportedSymbols)throw"There is no resourceIdNotSupportedSymbols property in init options.";return new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e)?this._getMessage("resourceIdInvalidChars",t):void 0},wordChars:function(e,t){return e.search(/\W/)>=0?this._getMessage("wordInvalidChars",t):void 0},startsWithLetter:function(e,t){return e.substr(0,1).match(/[A-Za-z]/)?void 0:this._getMessage("shouldStartWithLetter",t)},isDecimal:function(e){return _.isNumber(e)||_.isString(e)&&!isNaN(Number(e))?null:"defaultErrorMessage"},isInteger:function(e){return _.isNumber(e)||_.isString(e)&&/^[-+]?\d+$/.test(e)?null:"defaultErrorMessage"}},validateLegacy:function(e,t){var n=!0,i=[];return e=isArray(e)?e:[e],t=t!==!1,e.each(function(e){var r=e.validator.call(ValidationModule,e.element.getValue());r.isValid?e.onValid&&e.onValid(e):e.onInvalid&&e.onInvalid(e),r.isValid||i.include(e.element)?i.include(e.element)||t&&ValidationModule.hideError(e.element,!0):(i.push(e.element),t&&ValidationModule.showError(e.element,r.errorMessage),n=!1)}),n},_showMessage:function(e,t,n,i){var r=e.validatorMessageContainer||e.parentNode,o=$(r).select(i)[0];o=o||$(r).select(layoutModule.MESSAGE_PATTERN)[0],o||(o=document.createElement("span"),r.appendChild(o)),o.className="";for(var a=i.split("."),s=0;s<a.length;s++)o.addClassName(a[s].trim());0==o.children.length?o.update(t):o.children[0].update(t),r.addClassName(n)},showError:function(e,t,n){this._showMessage(e,t,layoutModule.ERROR_CLASS,layoutModule.MESSAGE_WARNING_PATTERN);var i=e.validatorMessageContainer||e.parentNode;if(n){var r=$(i).select(layoutModule.DETAILS_PATTERN)[0];r&&r.stopObserving("click").observe("click",function(){dialogs.errorPopup.show(n,!0)}.bindAsEventListener(this))}else{var o=$(i).select(layoutModule.MESSAGE_WARNING_DETAILS_PATTERN)[0];o&&$(o).hide()}},showSuccess:function(e,t){this._showMessage(e,t,layoutModule.SUCCESS_CLASS,layoutModule.MESSAGE_SUCCESS_PATTERN)},hideError:function(e,t){var n=e.validatorMessageContainer||e.parentNode;if($(n).removeClassName(layoutModule.ERROR_CLASS),t){var i=$(n).select(layoutModule.MESSAGE_WARNING_PATTERN)[0]||$(n).select(layoutModule.MESSAGE_PATTERN)[0];i&&i.update("")}},hideSuccess:function(e){var t=e.validatorMessageContainer||e.parentNode;$(t).removeClassName(layoutModule.SUCCESS_CLASS)}},ClassNameBuilder=function(e){return this.element=$(e),this.element.classNameBuilder?this.element.classNameBuilder:(this.names=this.element.className.split(" "),this.names=this.names.compact().uniq(),void(this.element.classNameBuilder=this))};ClassNameBuilder.addMethod("add",function(e){var t=[];if(Object.isString(e))t=e.split(" ");else{if(!isArray(e))return this;t=e}return t.each(function(e){this.names.include(e)||this.names.push(e)}.bind(this)),this}).addMethod("remove",function(e){return this.names=this.names.without(e),this}).addMethod("clean",function(){return this.names=[],this}).addMethod("toClassName",function(){return this.element.className=this.names.join(" "),this.element.className});var JSCookie=function(e,t,n){if(!Object.isString(e))throw"Invalid name";this.name=e,this.value=t,Object.isUndefined(t)?this.value=this._getCookies()[e]:this._setCookie(this.name,this.value,n)};JSCookie.addVar("daysToExpiration",30),JSCookie.addVar("getCookieTemplate",function(){return _.template("{{- name}}={{- value}}; expires={{- expires}}; path=/;")}),JSCookie.addMethod("_getCookies",function(){var e={};return document.cookie.split(";").invoke("strip").each(function(t){var n=t.split("=");e[n[0].strip()]=decodeURI(n[1])}),e}),JSCookie.addMethod("set",function(e,t){this.value=e,this._setCookie(this.name,this.value,t);
}),JSCookie.addMethod("get",function(){return this.value}),JSCookie.addMethod("_setCookie",function(e,t,n){document.cookie=this.getCookieTemplate()({name:e,value:encodeURI(new String(t)),expires:this._getExpiresDate(n).toGMTString()})}),JSCookie.addMethod("_getExpiresDate",function(e){var t=new Date;return t.setTime(t.getTime()+(e?e:24*this.daysToExpiration*60*60*1e3)),t});var sessionManager={RESET_SESSION_MIN_TIME:1e3,resetSession:function(e){var t=(new Date).getTime();if(!(this._lastSessionResetTime&&t-this._lastSessionResetTime<this.RESET_SESSION_MIN_TIME)){this._lastSessionResetTime=t;var n=buildActionUrl({flowExecutionKey:e,eventId:"resetSession"}),i={errorHandler:this.errorHandler};ajaxNonReturningUpdate(n,i)}},errorHandler:function(e){var t=e.getResponseHeader("LoginRequested");return t?(document.location=urlContext,!0):void 0}},buildActionUrl=function(e){if(e){var t=deepClone(e);return $w("flowId flowExecutionKey eventId").each(function(e){t[e]&&(t["_"+e]=t[e],delete t[e])}),"flow.html?"+Object.toQueryString(t)}},pageDimmer={DOM_ID:"#pageDimmer",show:function(e){if(jQuery(this.DOM_ID).removeClass("hidden"),e&&e.match(layoutModule.DIALOG_PATTERN)){var t=e.getStyle("zIndex");t=t?parseInt(t,10):0,t>0&&this.setZindex(t-1)}},hide:function(){jQuery(this.DOM_ID).addClass("hidden")},setZindex:function(e){jQuery(this.DOM_ID).css({zIndex:e})}},fileSender={};fileSender.upload=function(e,t,n,i){return fileSender.uploadMultiple([e],t,n,i)},fileSender.uploadMultiple=function(e,t,n,i){for(var r=Builder.node("FORM",{action:"flow.html?_flowId="+t,method:"post",enctype:"multipart/form-data"}),o=0;o<e.length;o++){var a=e[o],s=a.cloneNode(!0);a.writeAttribute("id",null),a.addClassName("hidden"),r.file&&r.file.remove(),fileSender.moveEventHandlers(a,s),a.insert({after:s}),a.remove(),r.insert(a);for(var u in n){var l=Builder.node("INPUT",{type:"hidden",name:u,value:n[u]});r.insert(l)}}return r.addClassName("hidden"),document.body.insert(r),fileSender.submit(r,{onStart:null,onComplete:i}),r.submit(),r},fileSender.moveEventHandlers=function(e,t){var n=Event.cache,i=fileSender.getUniqueElementID(e),r=n[i];delete n[i],r&&(_.each(r,function(e,n){"element"!==n&&_.each(e,function(e){t.observe(n,e.handler)})}),r=null)},fileSender.getUniqueElementID=function(e){return e===window?0:"uniqueID"in document.createElement("div")?e==document?1:e.uniqueID:("undefined"==typeof e._prototypeUID&&(e._prototypeUID=Element.Storage.UID++),e._prototypeUID)},fileSender.frame=function(e){var t="f"+Math.floor(99999*Math.random()),n=$("ajax-upload-iframe").cloneNode(!0);n.writeAttribute("id",t),n.writeAttribute("name",t),document.body.insert(n);var i=function(){fileSender.loaded(t)};return n.observe("load",i),e&&"function"==typeof e.onComplete&&(n.onComplete=e.onComplete),t},fileSender.form=function(e,t){e.setAttribute("target",t)},fileSender.submit=function(e,t){return fileSender.form(e,fileSender.frame(t)),t&&"function"==typeof t.onStart?t.onStart():!0},fileSender.loaded=function(e){var t,n=document.getElementById(e);t=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:window.frames[e].document,"about:blank"!=t.location.href&&(fileSender.sessionTimeoutHandler(t)||"function"==typeof n.onComplete&&n.onComplete(t.body.innerHTML))},fileSender.sessionTimeoutHandler=function(e){for(var t=e.getElementsByTagName("meta"),n=0;n<t.length;n++)if("pageHeading"==t[n].name&&"LOGIN PAGE"==t[n].content)return document.location=".",!0;return!1},Keys=new Object,Keys.DOM_VK_BACK_SPACE=8,Keys.DOM_VK_ENTER=13,Keys.DOM_VK_PAGE_UP=33,Keys.DOM_VK_DOWN=40,Keys.DOM_VK_INSERT=45,Keys.DOM_VK_DELETE=46,Keys.DOM_VK_0=48,Keys.DOM_VK_9=57,Keys.DOM_VK_NUMPAD0=96,Keys.DOM_VK_NUMPAD9=105,Keys.DOM_VK_DECIMAL=110,Keys.DOM_VK_COMMA=188,Keys.DOM_VK_PERIOD=190,Keys.DOM_VK_CANCEL=3,Keys.DOM_VK_HELP=6,Keys.DOM_VK_TAB=9,Keys.DOM_VK_CLEAR=12,Keys.DOM_VK_RETURN=13,Keys.DOM_VK_SHIFT=16,Keys.DOM_VK_CONTROL=17,Keys.DOM_VK_ALT=18,Keys.DOM_VK_PAUSE=19,Keys.DOM_VK_CAPS_LOCK=20,Keys.DOM_VK_ESCAPE=27,Keys.DOM_VK_SPACE=32,Keys.DOM_VK_PAGE_DOWN=34,Keys.DOM_VK_END=35,Keys.DOM_VK_HOME=36,Keys.DOM_VK_LEFT=37,Keys.DOM_VK_UP=38,Keys.DOM_VK_RIGHT=39,Keys.DOM_VK_PRINTSCREEN=44,Keys.DOM_VK_1=49,Keys.DOM_VK_2=50,Keys.DOM_VK_3=51,Keys.DOM_VK_4=52,Keys.DOM_VK_5=53,Keys.DOM_VK_6=54,Keys.DOM_VK_7=55,Keys.DOM_VK_8=56,Keys.DOM_VK_SEMICOLON=59,Keys.DOM_VK_EQUALS=61,Keys.DOM_VK_A=65,Keys.DOM_VK_B=66,Keys.DOM_VK_C=67,Keys.DOM_VK_D=68,Keys.DOM_VK_E=69,Keys.DOM_VK_F=70,Keys.DOM_VK_G=71,Keys.DOM_VK_H=72,Keys.DOM_VK_I=73,Keys.DOM_VK_J=74,Keys.DOM_VK_K=75,Keys.DOM_VK_L=76,Keys.DOM_VK_M=77,Keys.DOM_VK_N=78,Keys.DOM_VK_O=79,Keys.DOM_VK_P=80,Keys.DOM_VK_Q=81,Keys.DOM_VK_R=82,Keys.DOM_VK_S=83,Keys.DOM_VK_T=84,Keys.DOM_VK_U=85,Keys.DOM_VK_V=86,Keys.DOM_VK_W=87,Keys.DOM_VK_X=88,Keys.DOM_VK_Y=89,Keys.DOM_VK_Z=90,Keys.DOM_VK_CONTEXT_MENU=93,Keys.DOM_VK_NUMPAD1=97,Keys.DOM_VK_NUMPAD2=98,Keys.DOM_VK_NUMPAD3=99,Keys.DOM_VK_NUMPAD4=100,Keys.DOM_VK_NUMPAD5=101,Keys.DOM_VK_NUMPAD6=102,Keys.DOM_VK_NUMPAD7=103,Keys.DOM_VK_NUMPAD8=104,Keys.DOM_VK_MULTIPLY=106,Keys.DOM_VK_ADD=107,Keys.DOM_VK_SEPARATOR=108,Keys.DOM_VK_SUBTRACT=109,Keys.DOM_VK_SUBTRACT_UNDERSCORE_IE=189,Keys.DOM_VK_DIVIDE=111,Keys.DOM_VK_F1=112,Keys.DOM_VK_F2=113,Keys.DOM_VK_F3=114,Keys.DOM_VK_F4=115,Keys.DOM_VK_F5=116,Keys.DOM_VK_F6=117,Keys.DOM_VK_F7=118,Keys.DOM_VK_F8=119,Keys.DOM_VK_F9=120,Keys.DOM_VK_F10=121,Keys.DOM_VK_F11=122,Keys.DOM_VK_F12=123,Keys.DOM_VK_F13=124,Keys.DOM_VK_F14=125,Keys.DOM_VK_F15=126,Keys.DOM_VK_F16=127,Keys.DOM_VK_F17=128,Keys.DOM_VK_F18=129,Keys.DOM_VK_F19=130,Keys.DOM_VK_F20=131,Keys.DOM_VK_F21=132,Keys.DOM_VK_F22=133,Keys.DOM_VK_F23=134,Keys.DOM_VK_F24=135,Keys.DOM_VK_NUM_LOCK=144,Keys.DOM_VK_SCROLL_LOCK=145,Keys.DOM_VK_SLASH=191,Keys.DOM_VK_BACK_QUOTE=192,Keys.DOM_VK_OPEN_BRACKET=219,Keys.DOM_VK_BACK_SLASH=220,Keys.DOM_VK_CLOSE_BRACKET=221,Keys.DOM_VK_QUOTE=222,Keys.DOM_VK_META=224,compileTemplate=function(e){if(e){var t=_.templateSettings;_.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g};var n=_.template(jQuery(e).html());return _.templateSettings=t,n}},define("utils.common",["prototype","jquery","underscore"],function(e){return function(){var t;return t||e.jQuery}}(this)),String.prototype.parseColor=function(){var e="#";if("rgb("==this.slice(0,4)){var t=this.slice(4,this.length-1).split(","),n=0;do e+=parseInt(t[n]).toColorPart();while(++n<3)}else if("#"==this.slice(0,1)){if(4==this.length)for(var n=1;4>n;n++)e+=(this.charAt(n)+this.charAt(n)).toLowerCase();7==this.length&&(e=this.toLowerCase())}return 7==e.length?e:arguments[0]||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""}).flatten().join("")},Element.setContentZoom=function(e,t){return e=$(e),e.setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(n){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){var e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4;return e>1?1:e},wobble:function(e){return-Math.cos(e*Math.PI*(9*e))/2+.5},pulse:function(e,t){return-Math.cos(e*((t||5)-.5)*2*Math.PI)/2+.5},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)},none:function(e){return 0},full:function(e){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(e){var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),e=$(e),$A(e.childNodes).each(function(n){3==n.nodeType&&(n.nodeValue.toArray().each(function(i){e.insertBefore(new Element("span",{style:t}).update(" "==i?String.fromCharCode(160):i),n)}),Element.remove(n))})},multiple:function(e,t){var n;n=("object"==typeof e||Object.isFunction(e))&&e.length?e:$(e).childNodes;var i=Object.extend({speed:.1,delay:0},arguments[2]||{}),r=i.delay;$A(n).each(function(e,n){new t(e,Object.extend(i,{delay:n*i.speed+r}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t,n){return e=$(e),t=(t||"appear").toLowerCase(),Effect[Effect.PAIRS[t][e.visible()?1:0]](e,Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},n||{}))}};if(Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime(),n=Object.isString(e.options.queue)?e.options.queue:e.options.queue.position;switch(n){case"front":this.effects.findAll(function(e){return"idle"==e.state}).each(function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn});break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject(function(t){return t==e}),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var e=(new Date).getTime(),t=0,n=this.effects.length;n>t;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return Object.isString(e)?this.instances.get(e)||this.instances.set(e,new Effect.ScopedQueue):e}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(e){e&&e.transition===!1&&(e.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),e||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,this.render=function(){function e(e,t){e.options[t+"Internal"]&&e.options[t+"Internal"](e),e.options[t]&&e.options[t](e)}return function(t){"idle"===this.state&&(this.state="running",e(this,"beforeSetup"),this.setup&&this.setup(),e(this,"afterSetup")),"running"===this.state&&(t=this.options.transition(t)*this.fromToDelta+this.options.from,this.position=t,e(this,"beforeUpdate"),this.update&&this.update(t),e(this,"afterUpdate"))}}(),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn){if(e>=this.finishOn)return this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),void this.event("afterFinish");var t=(e-this.startOn)/this.totalTime,n=(t*this.totalFrames).round();n>this.currentFrame&&(this.render(t),this.currentFrame=n)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)Object.isFunction(this[property])||e.set(property,this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(e){this.effects=e||[],this.start(arguments[1])},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each(function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")})}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(e,t,n){e=Object.isString(e)?$(e):e;var i=$A(arguments),r=i.last(),o=5==i.length?i[3]:null;this.method=Object.isFunction(r)?r.bind(e):Object.isFunction(e[r])?e[r].bind(e):function(t){e[r]=t},this.start(Object.extend({from:t,to:n},o||{}))},update:function(e){this.method(e)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var t=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(t)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(e){this.element.setStyle({left:(this.options.x*e+this.originalLeft).round()+"px",top:(this.options.y*e+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(e,t,n){return new Effect.Move(e,Object.extend({x:n,y:t},arguments[3]||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var n=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},arguments[2]||{});this.start(n)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){e.indexOf(t)>0&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){var t=this.options.scaleFrom/100+this.factor*e;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*t+this.fontSizeType}),this.setDimensions(this.dims[0]*t,this.dims[1]*t)},finish:function(e){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var n={};if(this.options.scaleX&&(n.width=t.round()+"px"),this.options.scaleY&&(n.height=e.round()+"px"),this.options.scaleFromCenter){var i=(e-this.dims[0])/2,r=(t-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(n.top=this.originalTop-i+"px"),this.options.scaleX&&(n.left=this.originalLeft-r+"px")):(this.options.scaleY&&(n.top=-i+"px"),this.options.scaleX&&(n.left=-r+"px"))}this.element.setStyle(n)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(t)},setup:function(){return"none"==this.element.getStyle("display")?void this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(2*e+1,2*e+3),16)}.bind(this)),void(this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(2*e+1,2*e+3),16)-this._base[e]}.bind(this))))},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,n,i){return t+(this._base[i]+this._delta[i]*e).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(e){var t=arguments[1]||{},n=document.viewport.getScrollOffsets(),i=$(e).cumulativeOffset();return t.offset&&(i[1]+=t.offset),new Effect.Tween(null,n.top,i[1],t,function(e){scrollTo(n.left,e.round())})},Effect.Fade=function(e){e=$(e);var t=e.getInlineOpacity(),n=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){0==e.options.to&&e.element.hide().setStyle({opacity:t})}},arguments[1]||{});return new Effect.Opacity(e,n)},Effect.Appear=function(e){e=$(e);var t=Object.extend({from:"none"==e.getStyle("display")?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},arguments[1]||{});return new Effect.Opacity(e,t)},Effect.Puff=function(e){e=$(e);var t={opacity:e.getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(t)}},arguments[1]||{}))},Effect.BlindUp=function(e){return e=$(e),e.makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(e){e=$(e);var t=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:t.height,originalWidth:t.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(e){e=$(e);var t=e.getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:t})}})}},arguments[1]||{}))},Effect.DropOut=function(e){e=$(e);var t={top:e.getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(t)}},arguments[1]||{}))},Effect.Shake=function(e){e=$(e);var t=Object.extend({distance:20,duration:.5},arguments[1]||{}),n=parseFloat(t.distance),i=parseFloat(t.duration)/10,r={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:n,y:0,duration:i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-n,y:0,duration:i,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(r)}})}})}})}})}})}})},Effect.SlideDown=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom"),n=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.SlideUp=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom"),n=e.getDimensions();return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e){e=$(e);var t,n,i,r,o=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),a={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},s=e.getDimensions();switch(o.direction){case"top-left":t=n=i=r=0;break;case"top-right":t=s.width,n=r=0,i=-s.width;break;case"bottom-left":t=i=0,n=s.height,r=-s.height;break;case"bottom-right":t=s.width,n=s.height,i=-s.width,r=-s.height;break;case"center":t=s.width/2,n=s.height/2,i=-s.width/2,r=-s.height/2}return new Effect.Move(e,{x:t,y:n,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:o.opacityTransition}),new Effect.Move(e.element,{x:i,y:r,sync:!0,transition:o.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:s.height,originalWidth:s.width},sync:!0,scaleFrom:window.opera?1:0,transition:o.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(a)}},o))}})},Effect.Shrink=function(e){e=$(e);var t,n,i=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),r={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},o=e.getDimensions();switch(i.direction){case"top-left":t=n=0;break;case"top-right":t=o.width,n=0;break;case"bottom-left":t=0,n=o.height;break;case"bottom-right":t=o.width,n=o.height;break;case"center":t=o.width/2,n=o.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:i.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:i.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:t,y:n,sync:!0,transition:i.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(r)}},i))},Effect.Pulsate=function(e){e=$(e);var t=arguments[1]||{},n=e.getInlineOpacity(),i=t.transition||Effect.Transitions.linear,r=function(e){return 1-i(-Math.cos(e*(t.pulses||5)*2*Math.PI)/2+.5)};return new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:n})}},t),{transition:r}))},Effect.Fold=function(e){e=$(e);var t={top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(n){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(t)}})}},arguments[1]||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({style:{}},arguments[1]||{});if(Object.isString(t.style))if(t.style.include(":"))this.style=t.style.parseStyle();else{this.element.addClassName(t.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(t.style);var n=this.element.getStyles();this.style=this.style.reject(function(e){return e.value==n[e.key]}),t.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each(function(t){e.element.style[t.style]=""})}}else this.style=$H(t.style);this.start(t)},setup:function(){function e(e){return(!e||["rgba(0, 0, 0, 0)","transparent"].include(e))&&(e="#ffffff"),e=e.parseColor(),$R(0,2).map(function(t){return parseInt(e.slice(2*t+1,2*t+3),16)})}this.transforms=this.style.map(function(t){var n=t[0],i=t[1],r=null;if("#zzzzzz"!=i.parseColor("#zzzzzz"))i=i.parseColor(),r="color";else if("opacity"==n)i=parseFloat(i),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(i)){var o=i.match(/^([\+\-]?[0-9\.]+)(.*)$/);i=parseFloat(o[1]),r=3==o.length?o[2]:null}var a=this.element.getStyle(n);return{style:n.camelize(),originalValue:"color"==r?e(a):parseFloat(a||0),targetValue:"color"==r?e(i):i,unit:r}}.bind(this)).reject(function(e){return e.originalValue==e.targetValue||"color"!=e.unit&&(isNaN(e.originalValue)||isNaN(e.targetValue))})},update:function(e){for(var t,n={},i=this.transforms.length;i--;)n[(t=this.transforms[i]).style]="color"==t.unit?"#"+Math.round(t.originalValue[0]+(t.targetValue[0]-t.originalValue[0])*e).toColorPart()+Math.round(t.originalValue[1]+(t.targetValue[1]-t.originalValue[1])*e).toColorPart()+Math.round(t.originalValue[2]+(t.targetValue[2]-t.originalValue[2])*e).toColorPart():(t.originalValue+(t.targetValue-t.originalValue)*e).toFixed(3)+(null===t.unit?"":t.unit);this.element.setStyle(n,!0)}}),Effect.Transform=Class.create({initialize:function(e){this.tracks=[],this.options=arguments[1]||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){e=$H(e);var t=e.values().first();this.tracks.push($H({ids:e.keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(e){var t=e.get("ids"),n=e.get("effect"),i=e.get("options"),r=[$(t)||$$(t)].flatten();return r.map(function(e){return new n(e,Object.extend({sync:!0},i))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var e,t=$H();return Prototype.Browser.WebKit?e=new Element("div",{style:this}).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',e=String.__parseStyleElement.childNodes[0].style),Element.CSS_PROPERTIES.each(function(n){e[n]&&t.set(n,e[n])}),Prototype.Browser.IE&&this.include("opacity")&&t.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),t},document.defaultView&&document.defaultView.getComputedStyle?Element.getStyles=function(e){var t=document.defaultView.getComputedStyle($(e),null);return Element.CSS_PROPERTIES.inject({},function(e,n){return e[n]=t[n],e})}:Element.getStyles=function(e){e=$(e);var t,n=e.currentStyle;return t=Element.CSS_PROPERTIES.inject({},function(e,t){return e[t]=n[t],e}),t.opacity||(t.opacity=e.getOpacity()),t},Effect.Methods={morph:function(e,t){return e=$(e),new Effect.Morph(e,Object.extend({style:t},arguments[2]||{})),e},visualEffect:function(e,t,n){e=$(e);var i=t.dasherize().camelize(),r=i.charAt(0).toUpperCase()+i.substring(1);return new Effect[r](e,n),e},highlight:function(e,t){return e=$(e),new Effect.Highlight(e,t),e}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(e){Effect.Methods[e]=function(t,n){return t=$(t),Effect[e.charAt(0).toUpperCase()+e.substring(1)](t,n),t}}),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(e){Effect.Methods[e]=Element[e]}),Element.addMethods(Effect.Methods),define("effects",["prototype"],function(e){return function(){var t;return t||e.Effect}}(this)),define("utils.animation",["prototype","effects"],function(e){return function(){var t;return t||e.jQuery}}(this)),Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";var Droppables={drops:[],remove:function(e){this.drops=this.drops.reject(function(t){return t.element==$(e)})},add:function(e){e=$(e);var t=Object.extend({greedy:!0,hoverclass:null,tree:!1},arguments[1]||{});if(t.containment){t._containers=[];var n=t.containment;Object.isArray(n)?n.each(function(e){t._containers.push($(e))}):t._containers.push($(n))}t.accept&&(t.accept=[t.accept].flatten()),Element.makePositioned(e),t.element=e,this.drops.push(t)},findDeepestChild:function(e){for(deepest=e[0],i=1;i<e.length;++i)Element.isParent(e[i].element,deepest.element)&&(deepest=e[i]);return deepest},isContained:function(e,t){var n;return n=t.tree?e.treeNode:e.parentNode,t._containers.detect(function(e){return n==e})},isAffected:function(e,t,n){return n.element!=t&&(!n._containers||this.isContained(t,n))&&(!n.accept||Element.classNames(t).detect(function(e){return n.accept.include(e)}))&&Position.within(n.element,e[0],e[1])},deactivate:function(e){e.hoverclass&&Element.removeClassName(e.element,e.hoverclass),this.last_active=null},activate:function(e){e.hoverclass&&Element.addClassName(e.element,e.hoverclass),this.last_active=e},show:function(e,t){if(this.drops.length){var n,i=[];this.drops.each(function(n){Droppables.isAffected(e,t,n)&&i.push(n)}),i.length>0&&(n=Droppables.findDeepestChild(i)),this.last_active&&this.last_active!=n&&this.deactivate(this.last_active),n&&(Position.within(n.element,e[0],e[1]),
n.onHover&&n.onHover(t,n.element,Position.overlap(n.overlap,n.element)),n!=this.last_active&&Droppables.activate(n))}},fire:function(e,t){if(this.last_active){var n;return Position.prepare(),n=Draggables.supportsTouch?Draggables._lastPointer:[Event.pointerX(e),Event.pointerY(e)],this.isAffected(n,t,this.last_active)&&this.last_active.onDrop?(this.last_active.onDrop(t,this.last_active.element,e),!0):void 0}},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={DEFAULT_TOLERANCE:window.Prototype.BrowserFeatures.SupportsTouch?2:1,drags:[],observers:[],supportsTouch:window.Prototype.BrowserFeatures.SupportsTouch,register:function(e){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),Draggables.supportsTouch?(Event.observe(document,"touchend",this.eventMouseUp),Event.observe(document,"touchmove",this.eventMouseMove)):Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"keypress",this.eventKeypress)),this.drags.push(e)},unregister:function(e){this.drags=this.drags.reject(function(t){return t==e}),0==this.drags.length&&(Draggables.supportsTouch?(Event.stopObserving(document,"touchend",this.eventMouseUp),Event.stopObserving(document,"touchmove",this.eventMouseMove)):Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(e){Draggables.supportsTouch||Event.observe(document,"mousemove",this.eventMouseMove),e.options.delay?this._timeout=setTimeout(function(){Draggables._timeout=null,window.focus(),Draggables.activeDraggable=e}.bind(this),e.options.delay):(window.focus(),this.activeDraggable=e)},deactivate:function(){Draggables.supportsTouch||Event.stopObserving(document,"mousemove",this.eventMouseMove),this.activeDraggable=null},updateDrag:function(e){if(this.activeDraggable){var t=[Event.pointerX(e),Event.pointerY(e)];this.pointerInRadius(t)||(this._lastPointer=t,this.activeDraggable.updateDrag(e,t))}},pointerInRadius:function(e,t){return t=t||2,this._lastPointer&&Math.abs(this._lastPointer[0]-e[0])<=t&&Math.abs(this._lastPointer[1]-e[1])<=t},endDrag:function(e){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.activeDraggable&&(Draggables.supportsTouch||(this._lastPointer=null),this.activeDraggable.endDrag(e),this.activeDraggable=null)},keyPress:function(e){this.activeDraggable&&this.activeDraggable.keyPress(e)},addObserver:function(e){this.observers.push(e),this._cacheObserverCallbacks()},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t.element==e||t.element&&e&&t.element.id==e.id}),this._cacheObserverCallbacks()},notify:function(e,t,n){this[e+"Count"]>0&&this.observers.each(function(i){i[e]&&i[e](e,t,n)}),t.options[e]&&t.options[e](t,n)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(e){Draggables[e+"Count"]=Draggables.observers.select(function(t){return t[e]}).length})}},Draggable=Class.create({initialize:function(e){var t={handle:!1,reverteffect:function(e,t,n){var i=.02*Math.sqrt(Math.abs(2^t)+Math.abs(2^n));new Effect.Move(e,{x:-n,y:-t,duration:i,queue:{scope:"_draggable",position:"end"}})},endeffect:function(e){Draggable._dragging[e]=!1},zindex:1e3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};(!arguments[1]||Object.isUndefined(arguments[1].endeffect))&&Object.extend(t,{starteffect:function(e){e._opacity=Element.getOpacity(e),Draggable._dragging[e]=!0}});var n=Object.extend(t,arguments[1]||{});this.element=$(e),n.handle&&Object.isString(n.handle)&&(this.handle=this.element.down("."+n.handle,0)),this.handle||(this.handle=$(n.handle)),this.handle||(this.handle=this.element),!n.scroll||n.scroll.scrollTo||n.scroll.outerHTML||(n.scroll=$(n.scroll),this._isScrollChild=Element.childOf(this.element,n.scroll)),Element.makePositioned(this.element),this.options=n,this.dragging=!1,this.eventMouseDown=this.initDrag.bindAsEventListener(this),Draggables.supportsTouch?Event.observe(this.handle,"touchstart",this.eventMouseDown):Event.observe(this.handle,"mousedown",this.eventMouseDown),Draggables.register(this)},destroy:function(){Draggables.supportsTouch?Event.stopObserving(this.handle,"touchstart",this.eventMouseDown):Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),Draggables.unregister(this)},currentDelta:function(){var e=Element.getStyle(this.element,"left")||"",t=Element.getStyle(this.element,"top")||"";return e.include("%")&&(e=this.element.parentNode.getWidth()*parseInt(e)/100),t.include("%")&&(t=this.element.parentNode.getHeight()*parseInt(t)/100),[parseInt(e)||"0",parseInt(t)||"0"]},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&(Event.isLeftClick(e)||Draggables.supportsTouch&&e.touches&&1==e.touches.length)){var t=Event.element(e);if((tag_name=t.tagName.toUpperCase())&&("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))return;var n=[Event.pointerX(e),Event.pointerY(e)],i=this.element.cumulativeOffset();this.offset=[0,1].map(function(e){return n[e]-i[e]}),Draggables.activate(this),this.countdown=Draggables.DEFAULT_TOLERANCE,Event.stop(e),Draggables.supportsTouch?this.handle.fire("drag:"+e.type,{targetEvent:e}):this.handle.fire("drag:mousedown",{targetEvent:e})}},startDrag:function(e){if(this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this._originallyAbsolute="absolute"==this.element.getStyle("position"),this._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element),"TR"===this.element.parentNode.tagName&&document.body.appendChild(this.element)),this.options.scroll)if(this.options.scroll==window){var t=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=t.left,this.originalScrollTop=t.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(event,pointer){if(!this.dragging)if(Draggables.supportsTouch){if(!isIE7()&&this.countdown&&this.countdown--)return;this.startDrag(event)}else{if(this.countdown&&this.countdown--)return;this.startDrag(event)}if(Draggables.supportsTouch&&event.touches.length>1&&this.endDrag(event),this.options.quiet||(Position.prepare(),Droppables.show(pointer,this.element)),Draggables.notify("onDrag",this,event),this.draw(pointer),this.options.change&&this.options.change(this),this.options.scroll){this.stopScrolling();var p;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))p=[left,top,left+width,top+height];else p=Position.page(this.options.scroll).toArray(),p[0]+=this.options.scroll.scrollLeft+Position.deltaX,p[1]+=this.options.scroll.scrollTop+Position.deltaY,p.push(p[0]+this.options.scroll.offsetWidth),p.push(p[1]+this.options.scroll.offsetHeight);var speed=[0,0];pointer[0]<p[0]+this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)),pointer[1]<p[1]+this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)),pointer[0]>p[2]-this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)),pointer[1]>p[3]-this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)),this.startScrolling(speed)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(event)},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare();var n=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(n,this.element)}this.options.ghosting&&(this._originallyAbsolute||(Position.relativize(this.element),"TR"===this._clone.parentNode.tagName&&this._clone.parentNode.insertBefore(this.element,this._clone)),delete this._originallyAbsolute,Element.remove(this._clone),this._clone=null);var i=!1;t&&(i=Droppables.fire(e,this.element),i?Draggables.supportsTouch&&(Draggables._lastPointer=null):i=!1),i&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var r=this.options.revert;r&&Object.isFunction(r)&&(r=r(this.element));var o=this.currentDelta();r&&this.options.reverteffect?(0==i||"failure"!=r)&&this.options.reverteffect(this.element,o[1]-this.delta[1],o[0]-this.delta[0]):this.delta=o,this.options.zindex&&(this.element.style.zIndex=this.originalZ),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},keyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.finishDrag(e,!1),Event.stop(e))},endDrag:function(e){this.dragging&&(this.stopScrolling(),this.finishDrag(e,!0),Event.stop(e))},draw:function(e){var t=this.element.cumulativeOffset();if(this.options.ghosting){var n=Position.realOffset(this.element);t[0]+=n[0]-Position.deltaX,t[1]+=n[1]-Position.deltaY}var i=this.currentDelta();t[0]-=i[0],t[1]-=i[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop);var r=[0,1].map(function(n){return e[n]-t[n]-this.offset[n]}.bind(this));this.options.snap&&(r=Object.isFunction(this.options.snap)?this.options.snap(r[0],r[1],this):Object.isArray(this.options.snap)?r.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):r.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var o=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(o.left=r[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(o.top=r[1]+"px"),"hidden"==o.visibility&&(o.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(e){(e[0]||e[1])&&(this.scrollSpeed=[e[0]*this.options.scrollSpeed,e[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10))},scroll:function(){var current=new Date,delta=current-this.lastScrolled;if(this.lastScrolled=current,this.options.scroll==window){with(this._getWindowScroll(this.options.scroll))if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1e3;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1e3;Position.prepare(),Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1e3,Draggables._lastScrollPointer[0]<0&&(Draggables._lastScrollPointer[0]=0),Draggables._lastScrollPointer[1]<0&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},_getWindowScroll:function(w){var T,L,W,H;with(w.document)w.document.documentElement&&documentElement.scrollTop?(T=documentElement.scrollTop,L=documentElement.scrollLeft):w.document.body&&(T=body.scrollTop,L=body.scrollLeft),w.innerWidth?(W=w.innerWidth,H=w.innerHeight):w.document.documentElement&&documentElement.clientWidth?(W=documentElement.clientWidth,H=documentElement.clientHeight):(W=body.offsetWidth,H=body.offsetHeight);return{top:T,left:L,width:W,height:H}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(e,t){this.element=$(e),this.observer=t,this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark(),this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(e){for(;"BODY"!=e.tagName.toUpperCase();){if(e.id&&Sortable.sortables[e.id])return e;e=e.parentNode}},options:function(e){return(e=Sortable._findRootElement($(e)))?Sortable.sortables[e.id]:void 0},destroy:function(e){e=$(e);var t=Sortable.sortables[e.id];t&&(Draggables.removeObserver(t.element),t.droppables.each(function(e){Droppables.remove(e)}),t.draggables.invoke("destroy"),delete Sortable.sortables[t.element.id])},create:function(e){e=$(e);var t=Object.extend({element:e,tag:"li",dropOnEmpty:!1,accept:[],tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:e,handle:!1,only:!1,delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onDrop:Prototype.emptyFunction,onHover:Sortable.onHover,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},arguments[1]||{});this.destroy(e);var n={revert:!0,quiet:t.quiet,scroll:t.scroll,scrollSpeed:t.scrollSpeed,scrollSensitivity:t.scrollSensitivity,delay:t.delay,ghosting:t.ghosting,constraint:t.constraint,onStart:t.onStart,handle:t.handle};t.starteffect&&(n.starteffect=t.starteffect),t.reverteffect?n.reverteffect=t.reverteffect:t.ghosting&&(n.reverteffect=function(e){e.style.top=0,e.style.left=0}),t.endeffect&&(n.endeffect=t.endeffect),t.zindex&&(n.zindex=t.zindex);var i={overlap:t.overlap,containment:t.containment,tree:t.tree,hoverclass:t.hoverclass,onHover:t.onHover,onDrop:t.onDrop},r={onHover:t.onEmptyHover||Sortable.onEmptyHover,overlap:t.overlap,containment:t.containment,hoverclass:t.hoverclass,accept:t.accept,onDrop:t.onDrop};Element.cleanWhitespace(e),t.draggables=[],t.droppables=[],(t.dropOnEmpty||t.tree)&&(Droppables.add(e,r),t.droppables.push(e)),(t.elements||this.findElements(e,t)||[]).each(function(r,o){var a=t.handles?$(t.handles[o]):t.handle?$(r).select("."+t.handle)[0]:r;t.draggables.push(new Draggable(r,Object.extend(n,{handle:a}))),Droppables.add(r,i),t.tree&&(r.treeNode=e),t.droppables.push(r)}),t.tree&&(Sortable.findTreeElements(e,t)||[]).each(function(n){Droppables.add(n,r),n.treeNode=e,t.droppables.push(n)}),this.sortables[e.identify()]=t,Draggables.addObserver(new SortableObserver(e,t.onUpdate))},findElements:function(e,t){return Element.findChildren(e,t.only,t.tree?!0:!1,t.tag)},findTreeElements:function(e,t){return Element.findChildren(e,t.only,t.tree?!0:!1,t.treeTag)},onHover:function(e,t,n){var i=null,r=null;if(!(Element.isParent(t,e)||n>.33&&.66>n&&Sortable.options(t).tree))if(n>.5)Sortable.mark(t,"before"),t.previousSibling!=e&&(i=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,t),t.parentNode!=i&&(r=Sortable.options(i),r&&r.onChange(e)),Sortable.options(t.parentNode).onChange(e));else{Sortable.mark(t,"after");var o=t.nextSibling||null;o!=e&&(i=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,o),t.parentNode!=i&&(r=Sortable.options(i),r&&r.onChange(e)),Sortable.options(t.parentNode).onChange(e))}},onEmptyHover:function(e,t,n){var i=e.parentNode,r=Sortable.options(t);if(!Element.isParent(t,e)){var o,a=Sortable.findElements(t,{tag:r.tag,only:r.only}),s=null;if(a){var u,l=null,c=Element.offsetSize(t,r.overlap)*(1-n);for(o=0;o<a.length;o+=1)if(l=Element.offsetSize(a[o],r.overlap),u=a[o].cumulativeOffset().top,Position.ycomp>=u&&Position.ycomp<u+a[o].offsetHeight){if(!(c-l>=0)){if(c-l/2>=0){s=o+1<a.length?a[o+1]:null;break}s=a[o];break}c-=l}}t.insertBefore(e,s);var d=Sortable.options(i);d&&d.onChange(e),r.onChange(e)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(e,t){var n=Sortable.options(e.parentNode);if(!n||n.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var i=e.cumulativeOffset();Sortable._marker.setStyle({left:i[0]+"px",top:i[1]+"px"}),"after"==t&&("horizontal"==n.overlap?Sortable._marker.setStyle({left:i[0]+e.clientWidth+"px"}):Sortable._marker.setStyle({top:i[1]+e.clientHeight+"px"})),Sortable._marker.show()}},_tree:function(e,t,n){for(var i=Sortable.findElements(e,t)||[],r=0;r<i.length;++r){var o=i[r].id.match(t.format);if(o){var a={id:encodeURIComponent(o?o[1]:null),element:e,parent:n,children:[],position:n.children.length,container:$(i[r]).down(t.treeTag)};a.container&&this._tree(a.container,t,a),n.children.push(a)}}return n},tree:function(e){e=$(e);var t=this.options(e),n=Object.extend({tag:t.tag,treeTag:t.treeTag,only:t.only,name:e.id,format:t.format},arguments[1]||{}),i={id:null,parent:null,children:[],container:e,position:0};return Sortable._tree(e,n,i)},_constructIndex:function(e){var t="";do e.id&&(t="["+e.position+"]"+t);while(null!=(e=e.parent));return t},sequence:function(e){e=$(e);var t=Object.extend(this.options(e),arguments[1]||{});return $(this.findElements(e,t)||[]).map(function(e){return e.id.match(t.format)?e.id.match(t.format)[1]:""})},setSequence:function(e,t){e=$(e);var n=Object.extend(this.options(e),arguments[2]||{}),i={};this.findElements(e,n).each(function(e){e.id.match(n.format)&&(i[e.id.match(n.format)[1]]=[e,e.parentNode]),e.parentNode.removeChild(e)}),t.each(function(e){var t=i[e];t&&(t[1].appendChild(t[0]),delete i[e])})},serialize:function(e){e=$(e);var t=Object.extend(Sortable.options(e),arguments[1]||{}),n=encodeURIComponent(arguments[1]&&arguments[1].name?arguments[1].name:e.id);return t.tree?Sortable.tree(e,arguments[1]).children.map(function(e){return[n+Sortable._constructIndex(e)+"[id]="+encodeURIComponent(e.id)].concat(e.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(e,arguments[1]).map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}};Element.isParent=function(e,t){return e.parentNode&&e!=t?e.parentNode==t?!0:Element.isParent(e.parentNode,t):!1},Element.findChildren=function(e,t,n,i){if(!e.hasChildNodes())return null;i=i.toUpperCase(),t&&(t=[t].flatten());var r=[];return $A(e.childNodes).each(function(e){if(!e.tagName||e.tagName.toUpperCase()!=i||t&&!Element.classNames(e).detect(function(e){return t.include(e)})||r.push(e),n){var o=Element.findChildren(e,t,n,i);o&&r.push(o)}}),r.length>0?r.flatten():[]},Element.offsetSize=function(e,t){return e["offset"+("vertical"==t||"height"==t?"Height":"Width")]},define("dragdrop",["prototype","effects"],function(e){return function(){var t;return t||e.Draggable}}(this)),Draggable.prototype.startDrag=function(e){this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this.element._originallyAbsolute="absolute"==this.element.getStyle("position"),this.element._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element));var t=jQuery("body"),n=jQuery(this.element),i=n.offset();if(this._sizes={window:{w:t.outerWidth(!0),h:t.outerHeight(!0)},element:{w:n.outerWidth(),h:n.outerHeight()},mouseOffset:{left:Event.pointerX(e)-i.left,top:Event.pointerY(e)-i.top}},this.options.superghosting){Position.prepare();var r=[Event.pointerX(e),Event.pointerY(e)];body=document.getElementsByTagName("body")[0],me=this.element,this._clone=me.cloneNode(!0),me.parentNode.insertBefore(this._clone,me),me.id="clone_"+me.id,me.hide(),Position.absolutize(me),me.parentNode.removeChild(me),body.appendChild(me),("0px"==me.style.width||"0px"==me.style.height)&&(me.style.width=Element.getWidth(this._clone)+"px",me.style.height=Element.getHeight(this._clone)+"px"),this.originalScrollTop=Element.getHeight(this._clone)/2,this.draw(r),me.show()}if(this.options.scroll)if(this.options.scroll==window){var o=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=o.left,this.originalScrollTop=o.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},Draggable.prototype.draw=function(e){"undefined"==typeof this.elemSizeCaptured&&(setTimeout(function(){if(this._sizes){var e=jQuery(this.element);this._sizes.element={w:e.outerWidth(),h:e.outerHeight()}}}.bind(this),100),this.elemSizeCaptured=!0);var t=jQuery(this.element),n=t.offset(),i={left:e[0]-this._sizes.mouseOffset.left,top:e[1]-this._sizes.mouseOffset.top},r=[i.left,i.top];this.options.snap&&(r=Object.isFunction(this.options.snap)?this.options.snap(r[0],r[1],this):Object.isArray(this.options.snap)?r.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):r.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this))),i={left:r[0],top:r[1]},this.options.constraint&&"horizontal"==this.options.constraint&&(i.top=n.top),this.options.constraint&&"vertical"==this.options.constraint&&(i.left=n.left),this.options.mouseOffset&&(i={left:e[0],top:e[1]}),(0>i.top||0>i.left||i.top+this._sizes.element.h>this._sizes.window.h||i.left+this._sizes.element.w>this._sizes.window.w)&&(0>i.top&&(i.top=0),0>i.left&&(i.left=0),i.top+this._sizes.element.h>this._sizes.window.h&&(i.top=this._sizes.window.h-this._sizes.element.h),i.left+this._sizes.element.w>this._sizes.window.w&&(i.left=this._sizes.window.w-this._sizes.element.w)),t.offset(i),this._sequencer=this._sequencer||0,this._sequencer++,1==this._sequencer&&t.offset(i)},Droppables.isAffected=function(e,t,n){return Position.prepare(),positioned_within=Position.withinIncludingScrolloffsets(n.element,e[0],e[1]),n.element!=t&&(!n._containers||this.isContained(t,n))&&(!n.accept||Element.classNames(t).detect(function(e){return n.accept.include(e)}))&&positioned_within},Draggable.prototype.finishDrag=function(e,t){if(this.dragging=!1,delete this._sequencer,delete this._sizes,this.options.quiet){Position.prepare();var n=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(n,this.element)}this.options.ghosting&&(this.element._originallyAbsolute||Position.relativize(this.element),this.element._originallyAbsolute=void 0,Element.remove(this._clone),this._clone=null),this.options.superghosting&&(body=document.getElementsByTagName("body")[0],Element.remove(this.element),new Draggable(this._clone,this.options));var i=!1;t&&(i=Droppables.fire(e,this.element),i||(i=!1)),i&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var r=this.options.revert;r&&"function"==typeof r&&(r=r(this.element));var o=this.currentDelta();r&&this.options.reverteffect?(0==i||"failure"!=r)&&this.options.reverteffect(this.element,o[1]-this.delta[1],o[0]-this.delta[0]):this.delta=o,this.options.zindex&&(this.element.style.zIndex=this.originalZ,this._clone&&(this._clone.style.zIndex=this.originalZ)),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},define("dragdrop.extra",["dragdrop","jquery"],function(e){return function(){var t;return t||e.Draggable}}(this));var Truncator=Class.create({initialize:function(e,t){if(e&&e[0]){var n=null;t&&(n=t),e.each(function(e){this.truncate(e,n)}.bind(this))}},truncate:function(e,t){if("ABBR"==e.nodeName){var n=e.title.replace("&quot;",'"');e=e.parentNode,e.update(n.strip().escapeHTML())}var i=Object.isUndefined(e.innerText)?e.textContent:e.innerText;e.insert(Truncator.template.evaluate({divId:Truncator.tmpDivId,spanId:Truncator.tmpSpanId}));var r=$(Truncator.tmpSpanId);r.insert(i.escapeHTML());var o=t?t:e.getWidth(),a=r.getWidth();if(o>=a)return void $(Truncator.tmpDivId).remove();for(var s=i,u=0,l=i.length,c=(l-u)/2;c>1;)c+=u,s=i.substr(0,c),isIE()?r.innerText=s:r.update(s.escapeHTML()),r.getWidth()+30>o?l=c:u=c,c=(l-u)/2;$(Truncator.tmpDivId).remove(),e.update(this.truncateString(this.ellipsifyString(s.escapeHTML()),i.escapeHTML().replace('"',"&quot;")))},untruncate:function(e){e.each(function(e){"ABBR"==e.nodeName&&e.update(e.title.strip().escapeHTML())})},ellipsifyString:function(e){return e+"&hellip;"},truncateString:function(e,t){return'<abbr title="'+t+'">'+e+"</abbr>"}});Truncator.tmpDivId="truncator-tmp-div",Truncator.tmpSpanId="truncator-tmp-span",Truncator.template=new Template('    <div id="#{divId}" style="width:9999px; left:-9999px; top:-9999px; display:block; position: absolute">        <span id="#{spanId}"></span>    </div>'),define("tools.truncator",["prototype"],function(e){return function(){var t;return t||e.jQuery}}(this)),function(){var e=Math,t=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r="ontouchstart"in window,o=t+"Transform"in document.documentElement.style,a=/android/gi.test(navigator.appVersion),s=/iphone|ipad/gi.test(navigator.appVersion),u=/playbook/gi.test(navigator.appVersion),c=s||u,d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),p=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),f="onorientationchange"in window?"orientationchange":"resize",h=r?"touchstart":"mousedown",m=r?"touchmove":"mousemove",g=r?"touchend":"mouseup",v=r?"touchcancel":"mouseup",_="Moz"==t?"DOMMouseScroll":"mousewheel",y="translate"+(n?"3d(":"("),b=n?",0)":")",E=function(e,i){var u,l=this,d=document;l.wrapper="object"==typeof e?e:d.getElementById(e),l.wrapper.style.overflow="hidden",l.scroller=l.wrapper.children[0],l.options={hScroll:!0,vScroll:!0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:a,hideScrollbar:s,fadeScrollbar:s&&n,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(u in i)l.options[u]=i[u];l.options.useTransform=o?l.options.useTransform:!1,l.options.hScrollbar=l.options.hScroll&&l.options.hScrollbar,l.options.vScrollbar=l.options.vScroll&&l.options.vScrollbar,l.options.zoom=l.options.useTransform&&l.options.zoom,l.options.useTransition=c&&l.options.useTransition,l.scroller.style[t+"TransitionProperty"]=l.options.useTransform?"-"+t.toLowerCase()+"-transform":"top left",l.scroller.style[t+"TransitionDuration"]="0",l.scroller.style[t+"TransformOrigin"]="0 0",l.options.useTransition&&(l.scroller.style[t+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),l.options.useTransform?l.scroller.style[t+"Transform"]=y+"0,0"+b:l.scroller.style.cssText+=";position:absolute;top:0;left:0",l.options.useTransition&&(l.options.fixedScrollbar=!0),l.refresh(),l._bind(f,window),l._bind(h),r||(l._bind("mouseout",l.wrapper),l._bind(_)),l.options.checkDOMChanges&&(l.checkDOMTime=setInterval(function(){l._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case h:if(!r&&0!==e.button)return;t._start(e);break;case m:t._move(e);break;case g:case v:t._end(e);break;case f:t._resize();break;case _:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(n){var i,r=this,a=document;return r[n+"Scrollbar"]?(r[n+"ScrollbarWrapper"]||(i=a.createElement("div"),r.options.scrollbarClass?i.className=r.options.scrollbarClass+n.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+("h"==n?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;-"+t+"-transition-property:opacity;-"+t+"-transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(i),r[n+"ScrollbarWrapper"]=i,i=a.createElement("div"),r.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+t+"-background-clip:padding-box;-"+t+"-box-sizing:border-box;"+("h"==n?"height:100%":"width:100%")+";-"+t+"-border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;-"+t+"-transition-property:-"+t+"-transform;-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+t+"-transition-duration:0;-"+t+"-transform:"+y+"0,0"+b,r.options.useTransition&&(i.style.cssText+=";-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[n+"ScrollbarWrapper"].appendChild(i),r[n+"ScrollbarIndicator"]=i),"h"==n?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=e.max(e.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=e.max(e.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),void r._scrollbarPos(n,!0)):void(r[n+"ScrollbarWrapper"]&&(o&&(r[n+"ScrollbarIndicator"].style[t+"Transform"]=""),r[n+"ScrollbarWrapper"].parentNode.removeChild(r[n+"ScrollbarWrapper"]),r[n+"ScrollbarWrapper"]=null,r[n+"ScrollbarIndicator"]=null))},_resize:function(){var e=this;setTimeout(function(){e.refresh()},a?200:0)},_pos:function(n,i){n=this.hScroll?n:0,i=this.vScroll?i:0,this.options.useTransform?this.scroller.style[t+"Transform"]=y+n+"px,"+i+"px"+b+" scale("+this.scale+")":(n=e.round(n),i=e.round(i),this.scroller.style.left=n+"px",this.scroller.style.top=i+"px"),this.x=n,this.y=i,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(n,i){var r,o=this,a="h"==n?o.x:o.y;o[n+"Scrollbar"]&&(a=o[n+"ScrollbarProp"]*a,0>a?(o.options.fixedScrollbar||(r=o[n+"ScrollbarIndicatorSize"]+e.round(3*a),8>r&&(r=8),o[n+"ScrollbarIndicator"].style["h"==n?"width":"height"]=r+"px"),a=0):a>o[n+"ScrollbarMaxScroll"]&&(o.options.fixedScrollbar?a=o[n+"ScrollbarMaxScroll"]:(r=o[n+"ScrollbarIndicatorSize"]-e.round(3*(a-o[n+"ScrollbarMaxScroll"])),8>r&&(r=8),o[n+"ScrollbarIndicator"].style["h"==n?"width":"height"]=r+"px",a=o[n+"ScrollbarMaxScroll"]+(o[n+"ScrollbarIndicatorSize"]-r))),o[n+"ScrollbarWrapper"].style[t+"TransitionDelay"]="0",o[n+"ScrollbarWrapper"].style.opacity=i&&o.options.hideScrollbar?"0":"1",o[n+"ScrollbarIndicator"].style[t+"Transform"]=y+("h"==n?a+"px,0":"0,"+a+"px")+b)},_start:function(n){var i,o,a,s,u,l=this,c=r?n.touches[0]:n;E.scrolling=!1,clearTimeout(E.scrollTimer),!l.enabled||Draggables.dragging||n.touches.length<2||(l.options.onBeforeScrollStart&&l.options.onBeforeScrollStart.call(l,n),
(l.options.useTransition||l.options.zoom)&&l._transitionTime(0),l.moved=!1,l.animating=!1,l.zoomed=!1,l.distX=0,l.distY=0,l.absDistX=0,l.absDistY=0,l.dirX=0,l.dirY=0,l.options.zoom&&r&&n.touches.length>1&&(s=e.abs(n.touches[0].pageX-n.touches[1].pageX),u=e.abs(n.touches[0].pageY-n.touches[1].pageY),l.touchesDistStart=e.sqrt(s*s+u*u),l.originX=e.abs(n.touches[0].pageX+n.touches[1].pageX-2*l.wrapperOffsetLeft)/2-l.x,l.originY=e.abs(n.touches[0].pageY+n.touches[1].pageY-2*l.wrapperOffsetTop)/2-l.y,l.options.onZoomStart&&l.options.onZoomStart.call(l,n)),l.options.momentum&&(l.options.useTransform?(i=getComputedStyle(l.scroller,null)[t+"Transform"].replace(/[^0-9-.,]/g,"").split(","),o=1*i[4],a=1*i[5]):(o=1*getComputedStyle(l.scroller,null).left.replace(/[^0-9-]/g,""),a=1*getComputedStyle(l.scroller,null).top.replace(/[^0-9-]/g,"")),(o!=l.x||a!=l.y)&&(l.options.useTransition?l._unbind("webkitTransitionEnd"):p(l.aniTime),l.steps=[],l._pos(o,a))),l.absStartX=l.x,l.absStartY=l.y,l.startX=l.x,l.startY=l.y,l.pointX=c.pageX,l.pointY=c.pageY,l.startTime=n.timeStamp||(new Date).getTime(),l.options.onScrollStart&&l.options.onScrollStart.call(l,n),l._bind(m),l._bind(g),l._bind(v),E.scrolling=!0)},_move:function(n){var i,o,a,s=this,u=r?n.touches[0]:n,l=u.pageX-s.pointX,c=u.pageY-s.pointY,d=s.x+l,p=s.y+c,f=n.timeStamp||(new Date).getTime();return s.options.onBeforeScrollMove&&s.options.onBeforeScrollMove.call(s,n),s.options.zoom&&r&&n.touches.length>1?(i=e.abs(n.touches[0].pageX-n.touches[1].pageX),o=e.abs(n.touches[0].pageY-n.touches[1].pageY),s.touchesDist=e.sqrt(i*i+o*o),s.zoomed=!0,a=1/s.touchesDistStart*s.touchesDist*this.scale,a<s.options.scaleMin?a=.5*s.options.scaleMin*Math.pow(2,a/s.options.scaleMin):a>s.options.scaleMax&&(a=2*s.options.scaleMax*Math.pow(.5,s.options.scaleMax/a)),s.lastScale=a/this.scale,d=this.originX-this.originX*s.lastScale+this.x,p=this.originY-this.originY*s.lastScale+this.y,this.scroller.style[t+"Transform"]=y+d+"px,"+p+"px"+b+" scale("+a+")",void(s.options.onZoom&&s.options.onZoom.call(s,n))):(s.pointX=u.pageX,s.pointY=u.pageY,(d>0||d<s.maxScrollX)&&(d=s.options.bounce?s.x+l/2:d>=0||s.maxScrollX>=0?0:s.maxScrollX),(p>0||p<s.maxScrollY)&&(p=s.options.bounce?s.y+c/2:p>=0||s.maxScrollY>=0?0:s.maxScrollY),s.absDistX<6&&s.absDistY<6?(s.distX+=l,s.distY+=c,s.absDistX=e.abs(s.distX),void(s.absDistY=e.abs(s.distY))):(s.options.lockDirection&&(s.absDistX>s.absDistY+5?(p=s.y,c=0):s.absDistY>s.absDistX+5&&(d=s.x,l=0)),s.moved=!0,s._pos(d,p),s.dirX=l>0?-1:0>l?1:0,s.dirY=c>0?-1:0>c?1:0,f-s.startTime>300&&(s.startTime=f,s.startX=s.x,s.startY=s.y),void(s.options.onScrollMove&&s.options.onScrollMove.call(s,n))))},_end:function(n){if(!r||0==n.touches.length){var i,o,a,s,u,l,c=this,d=r?n.changedTouches[0]:n,p={dist:0,time:0},f={dist:0,time:0},h=(n.timeStamp||(new Date).getTime())-c.startTime,_=c.x,S=c.y;if(c._unbind(m),c._unbind(g),c._unbind(v),E.scrollTimer=setTimeout(function(){E.scrolling=!1},1e3),c.options.onBeforeScrollEnd&&c.options.onBeforeScrollEnd.call(c,n),c.zoomed)return l=c.scale*c.lastScale,l=Math.max(c.options.zoomMin,l),l=Math.min(c.options.zoomMax,l),c.lastScale=l/c.scale,c.scale=l,c.x=c.originX-c.originX*c.lastScale+c.x,c.y=c.originY-c.originY*c.lastScale+c.y,c.scroller.style[t+"TransitionDuration"]="200ms",c.scroller.style[t+"Transform"]=y+c.x+"px,"+c.y+"px"+b+" scale("+c.scale+")",c.zoomed=!1,c.refresh(),void(c.options.onZoomEnd&&c.options.onZoomEnd.call(c,n));if(!c.moved)return r&&(c.doubleTapTimer&&c.options.zoom?(clearTimeout(c.doubleTapTimer),c.doubleTapTimer=null,c.options.onZoomStart&&c.options.onZoomStart.call(c,n),c.zoom(c.pointX,c.pointY,1==c.scale?c.options.doubleTapZoom:1)):c.doubleTapTimer=setTimeout(function(){for(c.doubleTapTimer=null,i=d.target;1!=i.nodeType;)i=i.parentNode;"SELECT"!=i.tagName&&"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,n.view,1,d.screenX,d.screenY,d.clientX,d.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),o._fake=!0,i.dispatchEvent(o))},c.options.zoom?250:0)),c._resetPos(200),void(c.options.onTouchEnd&&c.options.onTouchEnd.call(c,n));if(n.scrollEvent=!0,300>h&&c.options.momentum&&(p=_?c._momentum(_-c.startX,h,-c.x,c.scrollerW-c.wrapperW+c.x,c.options.bounce?c.wrapperW:0):p,f=S?c._momentum(S-c.startY,h,-c.y,c.maxScrollY<0?c.scrollerH-c.wrapperH+c.y:0,c.options.bounce?c.wrapperH:0):f,_=c.x+p.dist,S=c.y+f.dist,(c.x>0&&_>0||c.x<c.maxScrollX&&_<c.maxScrollX)&&(p={dist:0,time:0}),(c.y>0&&S>0||c.y<c.maxScrollY&&S<c.maxScrollY)&&(f={dist:0,time:0})),p.dist||f.dist)return u=e.max(e.max(p.time,f.time),10),c.options.snap&&(a=_-c.absStartX,s=S-c.absStartY,e.abs(a)<c.options.snapThreshold&&e.abs(s)<c.options.snapThreshold?c.scrollTo(c.absStartX,c.absStartY,200):(snap=c._snap(_,S),_=snap.x,S=snap.y,u=e.max(snap.time,u))),c.scrollTo(_,S,u),void(c.options.onTouchEnd&&c.options.onTouchEnd.call(c,n));if(c.options.snap)return a=_-c.absStartX,s=S-c.absStartY,e.abs(a)<c.options.snapThreshold&&e.abs(s)<c.options.snapThreshold?c.scrollTo(c.absStartX,c.absStartY,200):(snap=c._snap(c.x,c.y),(snap.x!=c.x||snap.y!=c.y)&&c.scrollTo(snap.x,snap.y,snap.time)),void(c.options.onTouchEnd&&c.options.onTouchEnd.call(c,n));c._resetPos(200),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,n)}},_resetPos:function(e){var n=this,i=n.x>=0?0:n.x<n.maxScrollX?n.maxScrollX:n.x,r=n.y>=0||n.maxScrollY>0?0:n.y<n.maxScrollY?n.maxScrollY:n.y;return i==n.x&&r==n.y?(n.moved&&(n.moved=!1,n.options.onScrollEnd&&n.options.onScrollEnd.call(n)),n.hScrollbar&&n.options.hideScrollbar&&("webkit"==t&&(n.hScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),n.hScrollbarWrapper.style.opacity="0"),void(n.vScrollbar&&n.options.hideScrollbar&&("webkit"==t&&(n.vScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),n.vScrollbarWrapper.style.opacity="0"))):void n.scrollTo(i,r,e||0)},_wheel:function(e){var t,n,i,r,o,a=this;return"wheelDeltaX"in e?(t=e.wheelDeltaX/12,n=e.wheelDeltaY/12):t=n="detail"in e?3*-e.detail:-e.wheelDelta,"zoom"==a.options.wheelAction?(o=a.scale*Math.pow(2,1/3*(n?n/Math.abs(n):0)),n<a.options.zoomMin&&(n=a.options.zoomMin),n>a.options.zoomMax&&(n=a.options.zoomMax),void(n!=a.scale&&(!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,e),a.wheelZoomCount++,a.zoom(e.pageX,e.pageY,n,400),setTimeout(function(){a.wheelZoomCount--,!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,e)},400)))):(i=a.x+t,r=a.y+n,i>0?i=0:i<a.maxScrollX&&(i=a.maxScrollX),r>0?r=0:r<a.maxScrollY&&(r=a.maxScrollY),void a.scrollTo(i,r,0))},_mouseout:function(e){var t=e.relatedTarget;if(!t)return void this._end(e);for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;e.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,n,i=this,r=i.x,o=i.y,a=(new Date).getTime();if(!i.animating)return i.steps.length?(t=i.steps.shift(),t.x==r&&t.y==o&&(t.time=0),i.animating=!0,i.moved=!0,i.options.useTransition?(i._transitionTime(t.time),i._pos(t.x,t.y),i.animating=!1,void(t.time?i._bind("webkitTransitionEnd"):i._resetPos(0))):void function s(){var u,l,c=(new Date).getTime();return c>=a+t.time?(i._pos(t.x,t.y),i.animating=!1,i.options.onAnimationEnd&&i.options.onAnimationEnd.call(i),void i._startAni()):(c=(c-a)/t.time-1,n=e.sqrt(1-c*c),u=(t.x-r)*n+r,l=(t.y-o)*n+o,i._pos(u,l),void(i.animating&&(i.aniTime=d(s))))}()):void i._resetPos(400)},_transitionTime:function(e){e+="ms",this.scroller.style[t+"TransitionDuration"]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[t+"TransitionDuration"]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[t+"TransitionDuration"]=e)},_momentum:function(t,n,i,r,o){var a=6e-4,s=e.abs(t)/n,u=s*s/(2*a),l=0,c=0;return t>0&&u>i?(c=o/(6/(u/s*a)),i+=c,s=s*i/u,u=i):0>t&&u>r&&(c=o/(6/(u/s*a)),r+=c,s=s*r/u,u=r),u*=0>t?-1:1,l=s/a,{dist:u,time:e.round(l)}},_offset:function(e){for(var t=-e.offsetLeft,n=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,n-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,n*=this.scale),{left:t,top:n}},_snap:function(t,n){var i,r,o,a,s,u,l=this;for(o=l.pagesX.length-1,i=0,r=l.pagesX.length;r>i;i++)if(t>=l.pagesX[i]){o=i;break}for(o==l.currPageX&&o>0&&l.dirX<0&&o--,t=l.pagesX[o],s=e.abs(t-l.pagesX[l.currPageX]),s=s?e.abs(l.x-t)/s*500:0,l.currPageX=o,o=l.pagesY.length-1,i=0;o>i;i++)if(n>=l.pagesY[i]){o=i;break}return o==l.currPageY&&o>0&&l.dirY<0&&o--,n=l.pagesY[o],u=e.abs(n-l.pagesY[l.currPageY]),u=u?e.abs(l.y-n)/u*500:0,l.currPageY=o,a=e.round(e.max(s,u))||200,{x:t,y:n,time:a}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[t+"Transform"]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(f,window),e._unbind(h),e._unbind(m),e._unbind(g),e._unbind(v),e.options.hasTouch&&(e._unbind("mouseout",e.wrapper),e._unbind(_)),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var n,r=this,o=0,a=0;if(E.scrolling=!1,r.scale<r.options.zoomMin&&(r.scale=r.options.zoomMin),r.wrapperW=r.wrapper.clientWidth||1,r.wrapperH=r.wrapper.clientHeight||1,r.scrollerW=e.round(r.scroller.offsetWidth*r.scale),r.scrollerH=e.round(r.scroller.offsetHeight*r.scale),r.maxScrollX=r.wrapperW-r.scrollerW,r.maxScrollY=r.wrapperH-r.scrollerH,r.dirX=0,r.dirY=0,r.hScroll=r.options.hScroll&&r.maxScrollX<0,r.vScroll=r.options.vScroll&&(!r.options.bounceLock&&!r.hScroll||r.scrollerH>r.wrapperH),r.hScrollbar=r.hScroll&&r.options.hScrollbar,r.vScrollbar=r.vScroll&&r.options.vScrollbar&&r.scrollerH>r.wrapperH,n=r._offset(r.wrapper),r.wrapperOffsetLeft=-n.left,r.wrapperOffsetTop=-n.top,"string"==typeof r.options.snap)for(r.pagesX=[],r.pagesY=[],els=r.scroller.querySelectorAll(r.options.snap),i=0,l=els.length;i<l;i++)o=r._offset(els[i]),o.left+=r.wrapperOffsetLeft,o.top+=r.wrapperOffsetTop,r.pagesX[i]=o.left<r.maxScrollX?r.maxScrollX:o.left*r.scale,r.pagesY[i]=o.top<r.maxScrollY?r.maxScrollY:o.top*r.scale;else if(r.options.snap){for(r.pagesX=[];o>=r.maxScrollX;)r.pagesX[a]=o,o-=r.wrapperW,a++;for(r.maxScrollX%r.wrapperW&&(r.pagesX[r.pagesX.length]=r.maxScrollX-r.pagesX[r.pagesX.length-1]+r.pagesX[r.pagesX.length-1]),o=0,a=0,r.pagesY=[];o>=r.maxScrollY;)r.pagesY[a]=o,o-=r.wrapperH,a++;r.maxScrollY%r.wrapperH&&(r.pagesY[r.pagesY.length]=r.maxScrollY-r.pagesY[r.pagesY.length-1]+r.pagesY[r.pagesY.length-1])}r._scrollbar("h"),r._scrollbar("v"),r.zoomed||(r.scroller.style[t+"TransitionDuration"]="0",r._resetPos(200))},scrollTo:function(e,t,n,i){var r,o,a=this,s=e;for(a.stop(),s.length||(s=[{x:e,y:t,time:n,relative:i}]),r=0,o=s.length;o>r;r++)s[r].relative&&(s[r].x=a.x-s[r].x,s[r].y=a.y-s[r].y),a.steps.push({x:s[r].x,y:s[r].y,time:s[r].time||0});a._startAni()},scrollToElement:function(t,n){var i,r=this;t=t.nodeType?t:r.scroller.querySelector(t),t&&(i=r._offset(t),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.top=i.top>0?0:i.top<r.maxScrollY?r.maxScrollY:i.top,n=void 0===n?e.max(2*e.abs(i.left),2*e.abs(i.top)):n,r.scrollTo(i.left,i.top,n))},scrollToPage:function(e,t,n){var i,r,o=this;o.options.snap?(e="next"==e?o.currPageX+1:"prev"==e?o.currPageX-1:e,t="next"==t?o.currPageY+1:"prev"==t?o.currPageY-1:t,e=0>e?0:e>o.pagesX.length-1?o.pagesX.length-1:e,t=0>t?0:t>o.pagesY.length-1?o.pagesY.length-1:t,o.currPageX=e,o.currPageY=t,i=o.pagesX[e],r=o.pagesY[t]):(i=-o.wrapperW*e,r=-o.wrapperH*t,i<o.maxScrollX&&(i=o.maxScrollX),r<o.maxScrollY&&(r=o.maxScrollY)),o.scrollTo(i,r,n||400)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(m),this._unbind(g),this._unbind(v)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):p(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,n,i,r){var o=this,a=i/o.scale;o.options.useTransform&&(o.zoomed=!0,r=void 0===r?200:r,e=e-o.wrapperOffsetLeft-o.x,n=n-o.wrapperOffsetTop-o.y,o.x=e-e*a+o.x,o.y=n-n*a+o.y,o.scale=i,o.refresh(),o.x=o.x>0?0:o.x<o.maxScrollX?o.maxScrollX:o.x,o.y=o.y>0?0:o.y<o.maxScrollY?o.maxScrollY:o.y,o.scroller.style[t+"TransitionDuration"]=r+"ms",o.scroller.style[t+"Transform"]=y+o.x+"px,"+o.y+"px"+b+" scale("+i+")",o.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=E:window.iScroll=E}(),define("iscroll",function(e){return function(){var t;return t||e.iScroll}}(this));var webHelpModule={currentContext:"default",displayWebHelp:function(){var e=__jrsConfigs__.webHelpModuleState;if(e){var t=e.hostURL+"/"+e.pagePrefix+webHelpModule.getPageForContext();window.name="";var n=window.open(t,"MCWebHelp");n.focus()}},getPageForContext:function(){return __jrsConfigs__.webHelpModuleState.contextMap[webHelpModule.currentContext]},setCurrentContext:function(e){webHelpModule.currentContext=e}};define("components.webHelp",["jrs.configs"],function(e){return function(){var t;return t||e.webHelpModule}}(this));var layoutModule={ELEMENT_CONTEXTMENU:"element:contextmenu",SIZEABLE_PATTERN:".sizeable",SIZER_PATTERN:".sizer",RESIZE_OVERLAY_PATTERN:".resizeOverlay",MOVEABLE_PATTERN:".moveable",MOVER_PATTERN:".mover",MINIMIZER_PATTERN:".maximized .minimize",MINIMIZED_PATTERN:".minimized .minimize",TRUNCATE_PATTERN:".trunc",TREE_LEAF_PATTERN:"a.>node",TREE_CONTAINER_PATTERN:".collapsible",TOOLBAR_CAPSULE_PATTERN:"#toolbar .capsule",NAVIGATION_MUTTON_PATTERN:"li.mutton",NAVIGATION_PATTERN:"#navigationOptions li",NAVIGATION_HOVER_PATTERN:"#navigationOptions li.over",META_LINKS_PATTERN:"#metaLinks #main_logOut_link",BUTTON_SET_BUTTON:".buttonSet > *",TABSET_TAB_PATTERN:".tab",BUTTON_PATTERN:".button",PRESSED_PATTERN:".pressed",SELECTED_PATTERN:".selected",LIST_ITEM_PATTERN:".list.responsive > li",LIST_ITEM_WRAP_PATTERN:".wrap",DISCLOSURE_BUTTON_PATTERN:".disclosure",MENU_LIST_PATTERN:"#menu li",SEPARATOR_PATTERN:".separator",MESSAGE_PATTERN:".message",MESSAGE_WARNING_PATTERN:".message.warning",MESSAGE_WARNING_DETAILS_PATTERN:".details",MESSAGE_SUCCESS_PATTERN:".message.success",DETAILS_PATTERN:".details",COLUMN_NODE_WRAPPER_PATTERN:".node > .wrap > .column",COLUMN_LEAF_WRAPPER_PATTERN:".leaf > .wrap > .column",SEARCH_LOCKUP_PATTERN:".searchLockup",DIALOG_PATTERN:".dialog",DIALOG_LOADING_PATTERN:".dialog.loading",SWIPE_SCROLL_PATTERN:".swipeScroll",SCROLL_WRAPPER_PATTERN:".scrollWrapper",ADHOC_MODE_OPTION_CLASS:"tab mode horizontal",DRAGGING_CLASS:"dragging",COPY_CLASS:"copy",PRESSED_CLASS:"pressed",SELECTED_CLASS:"selected",DISABLED_CLASS:"disabled",HOVERED_CLASS:"over",ERROR_CLASS:"error",SUCCESS_CLASS:"error",MESSAGE_CLASS:"error",UP_CLASS:"up",LAST_CLASS:"last",FIRST_CLASS:"first",SCHEDULED_CLASS:"scheduled",MENU_ROOT_CLASS:"menuRoot",NODE_CLASS:"node",LEAF_CLASS:"leaf",ICON_CLASS:"icon",OPEN_CLASS:"open",CLOSED_CLASS:"closed",LOADING_CLASS:"loading",NOTHING_TO_DISPLAY_CLASS:"nothingToDisplay",COLLAPSIBLE_CLASS:"collapsible",RESPONSIVE_CLASS:"responsive",HIDDEN_CLASS:"hidden",NO_GENERATORS_CLASS:"noGenerators",STACKTRACE_CLASS:"stacktrace",EMPHASIS_CLASS:"emphasis",ASCENDING_CLASS:"ascending",DESCENDING_CLASS:"descending",CANCELLABLE_CLASS:"cancellable",DROP_TARGET_CLASS:"dropTarget",BUTTON_CLASS:"button",ONE_COLUMN_CLASS:"oneColumn",CONTROL_PAGE_CLASS:"controlPage",DISABLED_ATTR_NAME:"disabled",SELECTED_ATTR_NAME:"selected",OPEN_ATTR_NAME:"open",CLOSED_ATTR_NAME:"closed",READONLY_ATTR_NAME:"readonly",DIMMER_ID:"pageDimmer",PAGE_BODY_ID:"display",MENU_ID:"menu",MAIN_NAVIGATION_ID:"mainNavigation",MAIN_NAVIGATION_HOME_ITEM_ID:"main_home",MAIN_NAVIGATION_LIBRARY_ITEM_ID:"main_library",META_LINK_LOGOUT_ID:"main_logOut_link",SCROLL_SENSITIVITY:50,DND_MOVABLE_ZINDEX:2e3,DIMMER_Z_INDEX:900,FOLDERS_RESIZABLE_PANEL_ID:"folders",FILTERS_RESIZABLE_PANEL_ID:"filters",PROPERTIES_RESIZABLE_PANEL_ID:"properties",FIELDS_RESIZABLE_PANEL_ID:"fields",FOLDERS_RESIZABLE_PANEL_COOKIE_NAME:"foldersPanelWidth",FOLDERS_MINIMIZED_PANEL_COOKIE_NAME:"foldersMinimized",FILTERS_RESIZABLE_PANEL_COOKIE_NAME:"filtersPanelWidth",FILTERS_MINIMIZED_PANEL_COOKIE_NAME:"filtersMinimized",PROPERTIES_RESIZABLE_PANEL_COOKIE_NAME:"propertiesPanelWidth",PROPERTIES_MINIMIZED_PANEL_COOKIE_NAME:"propertiesMinimized",FIELDS_RESIZABLE_PANEL_COOKIE_NAME:"fieldsPanelWidth",FIELDS_MINIMIZED_PANEL_COOKIE_NAME:"fieldsMinimized",PANEL_WIDTH:"PanelWidth",MINIMIZED:"Minimized",PANEL_STATE_CHANGED_MANUALLY:"PSCM",scrolls:$H(),initialize:function(e){e=$(e)||$(document.body),new Truncator(e.select(layoutModule.TRUNCATE_PATTERN)),isIE7()&&this.fixIE7Sizes(),e.select(this.SIZEABLE_PATTERN).each(this.createSizer.bind(this)),e.select(this.MOVEABLE_PATTERN).each(this.createMover.bind(this)),e.select(".centered_horz,.centered_vert").each(function(e){var t=parseFunc(e,"centered_fn_");t||(t=centerElement),t(e,{horz:e.match(".centered_horz"),vert:e.match(".centered_vert")})}),null!=$(layoutModule.DIMMER_ID)&&($(layoutModule.DIMMER_ID).style.zIndex=layoutModule.DIMMER_Z_INDEX),jQuery.datepicker&&jQuery.datepicker.initialized&&(jQuery.datepicker.initialized=!1),jQuery(function(){0===jQuery("#ajaxbuffer").length&&jQuery("body").append(jQuery('<div id="ajaxbuffer" style="display:none"></div>'))}),jQuery(window).resize(function(){this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){jQuery(this).trigger("resizeEnd")},500)})},updateOnOrientation:function(){},isVisible:function(e){return e&&!$(e).hasClassName(layoutModule.HIDDEN_CLASS)},createScroller:function(e,t){if(e){e=e.identify?e:$(e);var n=layoutModule.scrolls.get(e.identify());n&&n.destroy();var i=["mainTableContainer","resultsContainer","filtersPanel","foldersPodContent"];e.identify().startsWith("iframeScroll_")&&i.push(e.identify()),t=Object.extend({hideScrollbar:!1,useTransform:!i.include(e.identify()),bounce:["resultsContainer"].include(e.identify())},t||{});var r=new iScroll(e,t);return layoutModule.scrolls.set(e.identify(),r),r}return null},createSizer:function(e,t){e=$(e);var n=t&&t.sizer?$(t.sizer):e.down(this.SIZER_PATTERN);if(n&&!matchMeOrUp(e,"."+layoutModule.HIDDEN_CLASS)){var i=this.getSizerType(n),r=this.alignmentModule.getSizerAlignment(n,i),o=new Draggable(n);o.resizeablePanel=e,o.primaryPanel=$(e).siblings().find(function(e){return e.match(".primary")}),t&&t.fillerPattern&&(o.filler=$(jQuery(e).find(t.fillerPattern)[0]));var a=function(){return function(e){o.pointerX=e.pointerX(),o.pointerY=e.pointerY()}}();n.observe("mousedown",a),jQuery(n).bind({touchstart:function(e){a(e.originalEvent),this.style.background="#666",this.style.zIndex=9},touchend:function(){this.style.background="transparent"}}),o.sizerType=i,o.alignment=r,o.options={constraint:"diagonal"===i?"":i,onStart:layoutModule.beginSizerDragging.bind(layoutModule),onDrag:isIPad()?doNothing:layoutModule.respondToDrag.bind(layoutModule),onEnd:layoutModule.endSizerDragging.bind(layoutModule)}}},getSizerType:function(e){return e.match(".horizontal")&&"horizontal"||e.match(".vertical")&&"vertical"||e.match(".diagonal")&&"diagonal"},alignmentModule:{alignments:[["left","right"],["top","bottom"]],alignmentIndexes:{horizontal:0,vertical:1},dimensions:["width","height"],getSizerAlignment:function(e,t){var n=["",""];if("diagonal"===t)return["right","bottom"];var i=this.alignmentIndexes[t],r=this.alignments[i],o=[0,1].map(function(t){return parseInt(e.getStyle(r[t]))}),a=isNaN(o[0])||o[0]>o[1]?r[1]:r[0];return n[i]=a,n}},beginSizerDragging:function(e,t){var n=e.element;e.parentOffset=[n.getStyle(e.alignment[0]),n.getStyle(e.alignment[1])],e.offsetUnit="px",e.pointerX=e.pointerX||t.pointerX(),e.pointerY=e.pointerY||t.pointerY(),e.element.addClassName(layoutModule.DRAGGING_CLASS),$$(layoutModule.RESIZE_OVERLAY_PATTERN).each(function(e){e.removeClassName(layoutModule.HIDDEN_CLASS)})},endSizerDragging:function(e,t){layoutModule.respondToDrag(e,t),e.element.removeClassName(layoutModule.DRAGGING_CLASS),$$(layoutModule.RESIZE_OVERLAY_PATTERN).each(function(e){e.addClassName(layoutModule.HIDDEN_CLASS)}),document.fire("dragger:sizer",{targetEvent:t,element:e.element}),jQuery(window).trigger("resize",{targetEvent:t,element:e.element})},respondToDrag:function(e,t){"vertical"!==e.sizerType&&this.resizeOnDrag(e,t,"horizontal"),"horizontal"!==e.sizerType&&this.resizeOnDrag(e,t,"vertical")},resizeOnDrag:function(e,t,n){var i={};i.axis="horizontal"==n?0:1,i.myAlignments=this.alignmentModule.alignments[i.axis],i.dimension=this.alignmentModule.dimensions[i.axis],i.sizeProperty=i.axis?"offsetHeight":"offsetWidth";var r=i.axis?"pointerY":"pointerX",o={pointerY:"clientY",pointerX:"clientX"};e.element;i.sizeableAnchorage=e.alignment[i.axis]===i.myAlignments[0]?i.myAlignments[1]:i.myAlignments[0];var a=t.changedTouches?t.changedTouches[0][o[r]]:t[r](),s=e[r]?a-e[r]:0;s=e.alignment[i.axis]===i.myAlignments[1]?s:0-s,i.dragDelta=s,e[r]=t[r](),this.resizePanelsOnDrag(e,i)},resizePanelsOnDrag:function(e,t){var n=this.getSizeTracker();n.checkpoint(e.resizeablePanel[t.sizeProperty]),e.filler&&!e["fillerDelta"+t.dimension]&&(e["fillerDelta"+t.dimension]=e.resizeablePanel[t.sizeProperty]-e.filler[t.sizeProperty]);var i=getDimensionInPx(e.resizeablePanel,t.dimension);if((this.isInBounds(e,t)||!this.isInBounds(e,t)&&t.dragDelta<0)&&(e.resizeablePanel.setStyle(t.dimension+":"+(i+t.dragDelta)+"px"),e.filler&&e.filler.setStyle(t.dimension+":"+(i+t.dragDelta-e["fillerDelta"+t.dimension])+"px")),window.localStorage&&localStorage.setItem(e.resizeablePanel.identify()+layoutModule.PANEL_WIDTH,e.resizeablePanel.getWidth()),!n.changed(e.resizeablePanel[t.sizeProperty])){var r=getActualDimension(e.resizeablePanel,t.dimension);return e.alignment[t.axis]!=t.myAlignments[0]&&(e.element.style[t.myAlignments[0]]=""),e.element.setStyle(e.alignment[t.axis]+":"+e.parentOffset[t.axis]),e.resizeablePanel.setStyle(t.dimension+":"+r+"px"),e.primaryPanel&&e.primaryPanel.style.zIndex==e.resizeablePanel.style.zIndex&&e.primaryPanel.setStyle(t.sizeableAnchorage+":"+r+"px"),void(e.filler&&e.filler.setStyle(t.dimension+":"+(r-e["fillerDelta"+t.dimension])+"px"))}var o;if(e.resizeablePanel.currentStyle?o=e.resizeablePanel.currentStyle.minWidth:(o=document.defaultView.getComputedStyle(e.resizeablePanel,null),o=o["min-width"]?o["min-width"]:o.minWidth),o=o.substring(0,o.indexOf("px")),e.primaryPanel&&e.primaryPanel.style.zIndex==e.resizeablePanel.style.zIndex){var a=getDimensionInPx(e.primaryPanel,t.sizeableAnchorage)+t.dragDelta,s=o>a?o:a;e.primaryPanel.setStyle(t.sizeableAnchorage+":"+s+"px")}e.alignment[t.axis]!=t.myAlignments[0]&&(e.element.style[t.myAlignments[0]]=""),e.element.setStyle(e.alignment[t.axis]+":"+e.parentOffset[t.axis]),jQuery("body").trigger("layout_update")},isInBounds:function(e,t){var n,i,r,o,a,s=jQuery(e.primaryPanel),u=s.parent(),l=t.dimension;if(e.primaryPanel){l=l.replace(l.charAt(0),l.charAt(0).toUpperCase()),a=jQuery.fn["outer"+l],o=a.call(s,!0)-a.call(s),n=parseInt(s.css("min-"+t.dimension)),isNaN(n)&&(n=0),i=parseInt(s.css(t.sizeableAnchorage)),r=parseInt(u.css(t.dimension));var c=u.children("div:visible:not(.minimized)");return jQuery.each(c,function(){var t=jQuery(this),n=0===t.width()||0===t.height();e.resizeablePanel==this||e.primaryPanel==this||n||(r-=a.call(t,!0))}),r-i-t.dragDelta>n+o}return!0},getSizeTracker:function(){return lastSize=-1,{checkpoint:function(e){lastSize=e},changed:function(e){return e!=lastSize}}},createMover:function(e){var t=e.down(this.MOVER_PATTERN);if(t&&!matchMeOrUp(e,"."+layoutModule.HIDDEN_CLASS)){var n=Math.max(this.DND_MOVABLE_ZINDEX,e.getStyle("zIndex"));new Draggable(e,{handle:t,zindex:n})}},maximize:function(e,t){function n(){r.removeClassName("minimized_if_vertical_orientation"),r.removeClassName("minimized"),r.addClassName("maximized"),window.localStorage&&localStorage.setItem(r.identify()+layoutModule.MINIMIZED,!1),jQuery("div.content",r).show()}t=!0;var i=e.hasClassName?e:$(e),r=i.hasClassName("column")?i:i.up(".column");0===window.orientation&&("filters"==r.id&&layoutModule.minimize(document.getElementById("fields")),"fields"==r.id&&layoutModule.minimize(document.getElementById("filters")));var o,a=layoutModule.alignmentModule.alignments[0],s=a.map(function(e){return parseInt(r.getStyle(e))}),u=a[0===s[0]?0:1],l=r.siblings().find(function(e){return e.match(".primary")});l&&window.localStorage&&(o=localStorage.getItem(r.identify()+layoutModule.PANEL_WIDTH)),o&&!isNaN(o)&&(o+="px",r.setStyle({width:o}),t?(l.style[u]=o,r.removeClassName("minimized_if_vertical_orientation"),r.removeClassName("minimized"),r.addClassName("maximized"),window.localStorage&&localStorage.setItem(r.identify()+layoutModule.MINIMIZED,!1),jQuery("div.content",r).show(),jQuery("div.vtitle",r).hide()):(new Effect.Morph(l,{style:u+":"+o,duration:.6,afterFinish:function(){jQuery("body").trigger("layout_update")}}),new Effect.Opacity(r,{to:0,from:1,duration:.3,queue:{position:"front",scope:"sidePanel"},afterFinish:n}),new Effect.Opacity(r,{to:1,from:0,duration:.3,queue:{position:"end",scope:"sidePanel"}}))),jQuery(r).find(".sizer").show(),jQuery("body").trigger("layout_update",{elem:e.parentNode,type:"panel-maximize"}),jQuery(".column.secondary > div.content > .body").show().height()},minimize:function(e,t){function n(){a.addClassName("minimized"),a.removeClassName("maximized"),a.removeClassName("minimized_if_vertical_orientation"),window.localStorage&&localStorage.setItem(a.identify()+layoutModule.MINIMIZED,!0),jQuery("div.content",a).hide()}var i,r;t=!0;var o=e.hasClassName?e:$(e),a=o.hasClassName("column")?o:o.up(".column"),s=window.localStorage&&"true"==localStorage.getItem(a.identify()+layoutModule.MINIMIZED);!s&&window.localStorage&&localStorage.setItem(a.identify()+layoutModule.PANEL_WIDTH,a.getWidth());var u=layoutModule.alignmentModule.alignments[0],l=u.map(function(e){return parseInt(a.getStyle(e))}),c=u[0===l[0]?0:1];if(i=a.siblings().find(function(e){return e.match(".primary")}))if(r=i.getStyle(c),t){var d=jQuery("div.title",a).eq(0),p=jQuery("div.vtitle",a),f=d.html(),h=d.width();h=7*jQuery.trim(d.text()).length,i.style[c]="24px",a.addClassName("minimized"),a.removeClassName("maximized"),a.removeClassName("minimized_if_vertical_orientation"),window.localStorage&&localStorage.setItem(a.identify()+layoutModule.MINIMIZED,!0),p.length||(p=jQuery('<div class="vtitle"></div>').appendTo(a),p.on("mouseup touchend",function(e){layoutModule.maximize(p[0]),e.preventDefault()}),p.html(jQuery.trim(f)).width(h+24)),isIE7()||isIE8()||isIE9()?p.css({top:0,left:0}):p.css("top",h+24+"px"),location.href.indexOf("nui=1")>0?p.hide():p.show(),jQuery("div.content",a).hide()}else new Effect.Morph(i,{style:c+":0px",duration:.6,afterFinish:function(){jQuery("body").trigger("layout_update")}}),new Effect.Opacity(a,{to:0,from:1,duration:.3,queue:{position:"front",scope:"sidePanel"},afterFinish:n}),new Effect.Opacity(a,{to:1,from:0,duration:.3,queue:{position:"end",scope:"sidePanel"}});jQuery(a).find(".sizer").hide(),jQuery("body").trigger("layout_update",{elem:e.parentNode,type:"panel-minimize"})},resizeOnClient:function(e,t,n){var i,r=[],o=jQuery("#"+t),a=jQuery("#display").width()-20-parseInt(o.width());jQuery.each([e,n],function(e,t){t&&(r.push({id:t,isLeft:0===e,jo:jQuery("#"+t),width:window.localStorage?parseInt(localStorage.getItem(t+layoutModule.PANEL_WIDTH)):250}),r[e].minimized=window.localStorage?localStorage.getItem(t+layoutModule.MINIMIZED):!1,r[e].minimized=Object.isUndefined(r[e].minimized)?r[e].jo.hasClass("minimized"):"true"==r[e].minimized,i=r[e].jo[0].currentStyle?r[e].jo[0].currentStyle.minWidth:document.defaultView.getComputedStyle(r[e].jo[0],null).minWidth,r[e].minWidth=(i&&i.indexOf("px"))>0?i.substring(0,i.indexOf("px")):200,r[e].width=r[e].width?r[e].width:r[e].jo.width(),a-=r[e].width)});var s=0>a?Math.abs(a):0;a=0,jQuery.each(r,function(e,t){t.jo.length&&t.jo.is(":visible")&&(t.minimized?(t.jo.removeClass("maximized").addClass("minimized"),layoutModule.minimize(t.jo[0],!0)):(1==e&&!r[0].minimized&&r[0].jo.is(":visible")&&(t.width-=s,t.width<t.minWidth&&(a=t.width-t.minWidth,t.width=t.minWidth)),t.jo.removeClass("minimized").addClass("maximized"),o.css(t.isLeft?"left":"right",t.width+"px"),t.jo.css("width",t.width+"px")))}),0!==a&&(r[0].width+=a,r[0].width=r[0].width<r[0].minWidth?r[0].minWidth:r[0].width,o.css("left",r[0].width+"px"),r[0].jo.css("width",r[0].width+"px"))},autoMaximize:function(e){var t=window.localStorage?localStorage.getItem(e.identify()+layoutModule.MINIMIZED):"false";"true"==t?e.hasClassName("minimized")&&layoutModule.maximize(e,!0):!e.hasClassName("minimized")&&layoutModule.minimize(e,!0)},autoMinimize:function(e){var t=window.localStorage?localStorage.getItem(e.identify()+layoutModule.MINIMIZED):"false";"false"==t?layoutModule.minimize(e,!0):e.removeClassName("minimized")},fixIE7Sizes:function(){$$(".control.tabSet.buttons.vertical").each(function(e){e.immediateDescendants().each(function(t){t.style.width=e.clientWidth||e.offsetWidth})})},storePanelWidth:function(e,t){window.localStorage&&localStorage.setItem(e+layoutModule.PANEL_WIDTH,t)},getPanelWidth:function(e){return window.localStorage?localStorage.getItem(e+layoutModule.PANEL_WIDTH):void 0},getPanelMinimizedState:function(e){return window.localStorage?localStorage.getItem(e+layoutModule.MINIMIZED):void 0},storePanelMinimizedState:function(e,t){window.localStorage&&localStorage.setItem(e+layoutModule.MINIMIZED,t.toString())},manuallyChangePanelState:function(e,t,n){window.localStorage&&localStorage.setItem(e+layoutModule.PANEL_STATE_CHANGED_MANUALLY+t,n)},panelStateWasManuallyChanged:function(e,t){return window.localStorage?"true"===localStorage.getItem(e+layoutModule.PANEL_STATE_CHANGED_MANUALLY+t):!1}};define("core.layout",["jquery","prototype","utils.common","dragdrop.extra","tools.truncator","iscroll","components.webHelp"],function(e){return function(){var t;return t||e.layoutModule}}(this)),define("common/config/requestSettings",["require"],function(e){return{headers:{"X-Suppress-Basic":"true","Cache-Control":"no-cache, no-store",Pragma:"no-cache"}}}),define("requestSettings",["require","common/config/requestSettings","jrs.configs"],function(e){var t=e("common/config/requestSettings"),n=e("jrs.configs"),i=n.userLocale.replace(/_/g,"-");return t.headers["Accept-Language"]=i,t}),function(e,t){"function"==typeof define&&define.amd?define("common/enum/loggingLevels",[],e):(t.logging||(t.logging={}),t.logging.loggingLevels=e())}(function(){return{DEBUG:100,INFO:200,WARN:300,ERROR:400}},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/Level",["common/enum/loggingLevels"],e):(t.logging||(t.logging={}),t.logging.Level=e(t.logging.loggingLevels))}(function(e){function t(e,t){this.level=e,this.name=t.toUpperCase()}t.prototype.isGreaterOrEqual=function(e){var n=(e instanceof t?e:t.getLevel(e)).level;return this.level>=n},t.prototype.toString=function(){return this.name},t.getLevel=function(e){return t[e.toUpperCase()]};for(var n in e)e.hasOwnProperty(n)&&(t[n]=new t(e[n],n));return t},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/LogItem",[],e):(t.logging||(t.logging={}),t.logging.LogItem=e())}(function(){"use strict";function e(e){var t,n=e.getHours().toString(),i=e.getMinutes().toString(),r=e.getSeconds().toString(),o=e.getMilliseconds();return 1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),t=n+":"+i+":"+r+"."+o}function t(e){for(var t in e)if(e.hasOwnProperty(t)){if("args"===t)for(var n=0,i=e[t].length;i>n;n++)e[t][n]instanceof Error&&(e[t][n]=e[t][n].message);this[t]=e[t]}}return t.prototype.toArray=function(){var t=[];return t.push(e(this.time)),t.push("["+this.id+"]"),"unknown"!==this.file&&t.push("["+this.file+":"+this.line+"]"),t.push("["+this.level.toString()+"] -"),t=t.concat(this.args)},t},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/Log",["common/logging/Level","common/logging/LogItem"],e):(t.logging||(t.logging={}),
t.logging.Log=e(t.logging.Level,t.logging.LogItem))}(function(e,t){function n(t){return function(){return this._prepareLogItem({level:e.getLevel(t),args:arguments})}}function i(e,t){this._id=e.id,this._callback=t}return i.prototype._prepareLogItem=function(e){e.id=this._id,e.args=Array.prototype.slice.call(e.args,0),e.time=new Date;var n=(new Error).stack;if(n){var i=n.split("\n")[2],r=i.match(/\/(\w+\.\w+):(\d+)/i);r&&(e.file=r[1],e.line=r[2])}return e.file||(e.file="unknown",e.line="0"),e=new t(e),this._callback(e),e},i.prototype.debug=n("debug"),i.prototype.info=n("info"),i.prototype.warn=n("warn"),i.prototype.error=n("error"),i},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/appender/ConsoleAppender",[],e):(t.logging||(t.logging={}),t.logging.appender||(t.logging.appender={}),t.logging.appender.ConsoleAppender=e())}(function(){function e(){}return e.prototype.console=function(){if("undefined"==typeof console){var e=function(){};return{assert:e,clear:e,count:e,debug:e,dir:e,dirxml:e,error:e,group:e,groupCollapsed:e,groupEnd:e,info:e,log:e,markTimeline:e,profile:e,profileEnd:e,table:e,time:e,timeEnd:e,timeStamp:e,trace:e,warn:e}}return console}(),e.prototype.write=function(e){var t=this.console.log;switch(e.level.toString()){case"DEBUG":t=this.console.debug||this.console.log;break;case"INFO":t=this.console.info||this.console.log;break;case"WARN":t=this.console.warn;break;case"ERROR":t=this.console.error}try{t.apply(this.console,e.toArray())}catch(n){try{Function.prototype.apply.call(t,this.console,e.toArray())}catch(i){}}},e},this),function(e,t,n){"function"==typeof define&&define.amd?define("common/logging/LoggerManager",["underscore","common/logging/Log","common/logging/Level","common/logging/appender/ConsoleAppender"],e):(t.logging||(t.logging={}),t.logging.LoggerManager=e(n,t.logging.Log,t.logging.Level,t.logging.appender.ConsoleAppender))}(function(e,t,n,i){var r={console:i},o=function(e){this.initialize(e||{})};return e.extend(o.prototype,{defaults:function(){return{enabled:!1,level:"error",appenders:{},appenderInstances:{},loggers:{}}},initialize:function(t){this.attributes=e.defaults(t,this.defaults());var n={};e.each(r,function(e,t){n[t]=new e}),this.set("appenderInstances",n)},get:function(e){return this.attributes[e]},set:function(e,t){this.attributes[e]=t},register:function(n){var i={id:"root"};if("string"==typeof n&&""!==n?i.id=n:n&&n.hasOwnProperty("id")&&(i.id=n.id),!this.get("loggers").hasOwnProperty(i.id)){var r=this.get("loggers");r[i.id]=new t(i,e.bind(this._processLogItem,this)),this.set("loggers",r)}return this.get("loggers")[i.id]},disable:function(){this.set("enabled",!1)},enable:function(e){e&&this.set("level",n.getLevel(e)),this.set("enabled",!0)},setLevel:function(e){this.set("level",e)},_processLogItem:function(e){this.get("enabled")&&e.level.isGreaterOrEqual(this.get("level"))&&this._appendLogItem(e)},_appendLogItem:function(e){var t=this.get("appenders"),n=this.get("appenderInstances");for(var i in t)n.hasOwnProperty(t[i])&&n[t[i]].write(e)}}),o},this,this._),define("logger",["require","exports","module","common/logging/LoggerManager"],function(e,t,n){"use strict";var i=e("common/logging/LoggerManager"),r=n.config(),o=new i(r);return o}),function(e){"use strict";define("xdm",["logger"],e)}(function(e){function t(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function n(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!h(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var n=navigator.plugins[e].description;n&&!h(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(T=n.match(/\d+/g))}if(!T){var i;try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),T=Array.prototype.slice.call(i.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),i=null}catch(r){}}if(!T)return!1;var o=parseInt(T[0],10),a=parseInt(T[1],10);return w=o>9&&a>0,!0}function o(){if(!U){U=!0,B("firing dom_onReady");for(var e=0;e<K.length;e++)K[e]();K.length=0}}function a(e,t){return U?void e.call(t):void K.push(function(){e.call(t)})}function s(){var e=parent;if(""!==L)for(var t=0,n=L.split(".");t<n.length;t++)e=e[n[t]];return e.easyXDM}function u(e){return B("Settings namespace to '"+e+"'"),window.easyXDM=k,L=e,L&&(F="easyXDM_"+L.replace(".","_")+"_"),j}function l(e){return e.match(D)[3]}function c(e){return e.match(D)[4]||""}function d(e){var t=e.toLowerCase().match(D),n=t[2],i=t[3],r=t[4]||"";return("http:"==n&&":80"==r||"https:"==n&&":443"==r)&&(r=""),n+"//"+i+r}function p(e){if(e=e.replace(P,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":location.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+t+e}for(;R.test(e);)e=e.replace(R,"");return B("resolved url '"+e+"'"),e}function f(e,t){var n="",i=e.indexOf("#");-1!==i&&(n=e.substring(i),e=e.substring(0,i));var r=[];for(var o in t)t.hasOwnProperty(o)&&r.push(o+"="+encodeURIComponent(t[o]));return e+(z?"#":-1==e.indexOf("?")?"?":"&")+r.join("&")+n}function h(e){return"undefined"==typeof e}function m(e,t,n){var i;for(var r in t)t.hasOwnProperty(r)&&(r in e?(i=t[r],"object"==typeof i?m(e[r],i,n):n||(e[r]=t[r])):e[r]=t[r]);return e}function g(){var e=document.body.appendChild(document.createElement("form")),t=e.appendChild(document.createElement("input"));t.name=F+"TEST"+C,S=t!==e.elements[t.name],document.body.removeChild(e),B("HAS_NAME_PROPERTY_BUG: "+S)}function v(e){B("creating frame: "+e.props.src),h(S)&&g();var t;S?t=document.createElement('<iframe name="'+e.props.name+'"/>'):(t=document.createElement("IFRAME"),t.name=e.props.name),t.id=t.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=document.getElementById(e.container)),e.container||(m(t.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=document.body);var n=e.props.src;if(e.props.src="javascript:false",m(t,e.props),t.border=t.frameBorder=0,t.allowTransparency=!0,e.container.appendChild(t),e.onLoad&&x(t,"load",e.onLoad),e.usePost){var i,r=e.container.appendChild(document.createElement("form"));if(r.target=t.name,r.action=n,r.method="POST","object"==typeof e.usePost)for(var o in e.usePost)e.usePost.hasOwnProperty(o)&&(S?i=document.createElement('<input name="'+o+'"/>'):(i=document.createElement("INPUT"),i.name=o),i.value=e.usePost[o],r.appendChild(i));r.submit(),r.parentNode.removeChild(r)}else t.src=n;return e.props.src=n,t}function _(e,t){"string"==typeof e&&(e=[e]);for(var n,i=e.length;i--;)if(n=e[i],n=new RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),n.test(t))return!0;return!1}function y(e){var n,i=e.protocol;if(e.isHost=e.isHost||h($.xdm_p),z=e.hash||!1,B("preparing transport stack"),e.props||(e.props={}),e.isHost)e.remote=p(e.remote),e.channel=e.channel||"default"+C++,e.secret=Math.random().toString(16).substring(2),h(i)?(i=d(location.href)==d(e.remote)?"4":t(window,"postMessage")||t(document,"postMessage")?"1":e.swf&&t(window,"ActiveXObject")&&r()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0",B("selecting protocol: "+i)):B("using protocol: "+i);else if(B("using parameters from query"),e.channel=$.xdm_c.replace(/["'<>\\]/g,""),e.secret=$.xdm_s,e.remote=$.xdm_e.replace(/["'<>\\]/g,""),i=$.xdm_p,e.acl&&!_(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=i,i){case"0":if(m(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){B("looking for image to use as local");for(var o,a=location.protocol+"//"+location.host,s=document.body.getElementsByTagName("img"),u=s.length;u--;)if(o=s[u],o.src.substring(0,a.length)===a){e.local=o.src;break}e.local||(B("no image found, defaulting to using the window"),e.local=window)}var l={xdm_c:e.channel,xdm_p:0};e.local===window?(e.usePolling=!0,e.useParent=!0,e.local=location.protocol+"//"+location.host+location.pathname+location.search,l.xdm_e=e.local,l.xdm_pa=1):l.xdm_e=p(e.local),e.container&&(e.useResize=!1,l.xdm_po=1),e.remote=f(e.remote,l)}else m(e,{channel:$.xdm_c,remote:$.xdm_e,useParent:!h($.xdm_pa),usePolling:!h($.xdm_po),useResize:e.useParent?!1:e.useResize});n=[new j.stack.HashTransport(e),new j.stack.ReliableBehavior({}),new j.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new j.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":n=[new j.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=p(e.remoteHelper)),n=[new j.stack.NameTransport(e),new j.stack.QueueBehavior,new j.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":n=[new j.stack.NixTransport(e)];break;case"4":n=[new j.stack.SameOriginTransport(e)];break;case"5":n=[new j.stack.FrameElementTransport(e)];break;case"6":T||r(),n=[new j.stack.FlashTransport(e)]}return n.push(new j.stack.QueueBehavior({lazy:e.lazy,remove:!0})),n}function b(e){for(var t,n={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},i=0,r=e.length;r>i;i++)t=e[i],m(t,n,!0),0!==i&&(t.down=e[i-1]),i!==r-1&&(t.up=e[i+1]);return t}function E(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if("undefined"==typeof document)return{};var S,T,w,x,A,O=window.setTimeout,I=e.register("EasyXDM"),N=this,C=Math.floor(1e4*Math.random()),M=Function.prototype,D=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,R=/[\-\w]+\/\.\.\//,P=/([^:])\/\//g,L="",j={},k=window.easyXDM,F="easyXDM_",z=!1,B=M;if(t(window,"addEventListener"))x=function(e,t,n){B("adding listener "+t),e.addEventListener(t,n,!1)},A=function(e,t,n){B("removing listener "+t),e.removeEventListener(t,n,!1)};else{if(!t(window,"attachEvent"))throw new Error("Browser not supported");x=function(e,t,n){B("adding listener "+t),e.attachEvent("on"+t,n)},A=function(e,t,n){B("removing listener "+t),e.detachEvent("on"+t,n)}}var H,U=!1,K=[];if("readyState"in document?(H=document.readyState,U="complete"==H||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==H||"interactive"==H)):U=!!document.body,!U){if(t(window,"addEventListener"))x(document,"DOMContentLoaded",o);else if(x(document,"readystatechange",function(){"complete"==document.readyState&&o()}),document.documentElement.doScroll&&window===top){var V=function(){if(!U){try{document.documentElement.doScroll("left")}catch(e){return void O(V,1)}o()}};V()}x(window,"load",o)}var $=function(e){e=e.substring(1).split("&");for(var t,n={},i=e.length;i--;)t=e[i].split("="),n[t[0]]=decodeURIComponent(t[1]);return n}(/xdm_e=/.test(location.search)?location.search:location.hash),q=function(){var e={},t={a:[1,2,3]},n='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===n?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===n&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=n.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(q=function(){return e},e):null)};m(j,{version:"2.4.19.0",query:$,stack:{},apply:m,getJSONObject:q,whenReady:a,noConflict:u});var W={_deferred:[],flush:function(){this.trace("... deferred messages ...");for(var e=0,t=this._deferred.length;t>e;e++)this.trace(this._deferred[e]);this._deferred.length=0,this.trace("... end of deferred messages ...")},getTime:function(){var e=new Date,t=e.getHours()+"",n=e.getMinutes()+"",i=e.getSeconds()+"",r=e.getMilliseconds()+"",o="000";return 1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),r=o.substring(r.length)+r,t+":"+n+":"+i+"."+r},log:function(e){I.debug(location.host+(L?":"+L:"")+": "+e)},getTracer:function(t){var n=e.register(t);return function(e){n.debug(e)}}};return W.log("easyXDM present on '"+location.href),j.Debug=W,B=W.getTracer("EasyXDM.{Private}"),j.DomHelper={on:x,un:A,requiresJSON:function(e){n(window,"JSON")?W.log("native JSON found"):(W.log("loading external JSON"),document.write('<script type="text/javascript" src="'+e+'"></script>'))}},function(){var e={};j.Fn={set:function(t,n){this._trace("storing function "+t),e[t]=n},get:function(t,n){if(this._trace("retrieving function "+t),e.hasOwnProperty(t)){var i=e[t];return i||this._trace(t+" not found"),n&&delete e[t],i}}},j.Fn._trace=W.getTracer("easyXDM.Fn")}(),j.Socket=function(e){var t=W.getTracer("easyXDM.Socket");t("constructor");var n=b(y(e).concat([{incoming:function(t,n){e.onMessage(t,n)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=d(e.remote);this.origin=d(e.remote),this.destroy=function(){n.destroy()},this.postMessage=function(e){n.outgoing(e,i)},n.init()},j.Rpc=function(e,t){var n=W.getTracer("easyXDM.Rpc");if(n("constructor"),t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var r=t.local[i];"function"==typeof r&&(t.local[i]={method:r})}var o=b(y(e).concat([new j.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=d(e.remote),this.destroy=function(){o.destroy()},o.init()},j.stack.SameOriginTransport=function(e){var t=W.getTracer("easyXDM.stack.SameOriginTransport");t("constructor");var n,i,r,o;return n={outgoing:function(e,t,n){r(e),n&&n()},destroy:function(){t("destroy"),i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){t("init"),o=d(e.remote),e.isHost?(m(e.props,{src:f(e.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:e.channel,xdm_p:4}),name:F+e.channel+"_provider"}),i=v(e),j.Fn.set(e.channel,function(e){return r=e,O(function(){n.up.callback(!0)},0),function(e){n.up.incoming(e,o)}})):(r=s().Fn.get(e.channel,!0)(function(e){n.up.incoming(e,o)}),O(function(){n.up.callback(!0)},0))},init:function(){a(n.onDOMReady,n)}}},j.stack.FlashTransport=function(e){function t(e,t){O(function(){i("received message"),r.up.incoming(e,s)},0)}function n(t){i("creating factory with SWF from "+t);var n=e.swf+"?host="+e.isHost,r="easyXDM_swf_"+Math.floor(1e4*Math.random());j.Fn.set("flash_loaded"+t.replace(/[\-.]/g,"_"),function(){j.stack.FlashTransport[t].swf=u=h.firstChild;for(var e=j.stack.FlashTransport[t].queue,n=0;n<e.length;n++)e[n]();e.length=0}),e.swfContainer?h="string"==typeof e.swfContainer?document.getElementById(e.swfContainer):e.swfContainer:(h=document.createElement("div"),m(h.style,w&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),document.body.appendChild(h));var o="callback=flash_loaded"+encodeURIComponent(t.replace(/[\-.]/g,"_"))+"&proto="+N.location.protocol+"&domain="+encodeURIComponent(l(N.location.href))+"&port="+encodeURIComponent(c(N.location.href))+"&ns="+encodeURIComponent(L);o+="&log=true",h.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+r+"' data='"+n+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+n+"'></param><param name='flashvars' value='"+o+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+o+"' allowScriptAccess='always' wmode='transparent' src='"+n+"' height='1' width='1'></embed></object>"}var i=W.getTracer("easyXDM.stack.FlashTransport");i("constructor");var r,o,s,u,h;return r={outgoing:function(t,n,i){u.postMessage(e.channel,t.toString()),i&&i()},destroy:function(){i("destroy");try{u.destroyChannel(e.channel)}catch(t){}u=null,o&&(o.parentNode.removeChild(o),o=null)},onDOMReady:function(){i("init"),s=e.remote,j.Fn.set("flash_"+e.channel+"_init",function(){O(function(){i("firing onReady"),r.up.callback(!0)})}),j.Fn.set("flash_"+e.channel+"_onMessage",t),e.swf=p(e.swf);var a=l(e.swf),c=function(){j.stack.FlashTransport[a].init=!0,u=j.stack.FlashTransport[a].swf,u.createChannel(e.channel,e.secret,d(e.remote),e.isHost),e.isHost&&(w&&e.swfNoThrottle&&m(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),m(e.props,{src:f(e.remote,{xdm_e:d(location.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:F+e.channel+"_provider"}),o=v(e))};j.stack.FlashTransport[a]&&j.stack.FlashTransport[a].init?c():j.stack.FlashTransport[a]?j.stack.FlashTransport[a].queue.push(c):(j.stack.FlashTransport[a]={queue:[c]},n(a))},init:function(){a(r.onDOMReady,r)}}},j.stack.PostMessageTransport=function(e){function t(e){if(e.origin)return d(e.origin);if(e.uri)return d(e.uri);if(e.domain)return location.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function n(n){var o=t(n);i("received message '"+n.data+"' from "+o),o==u&&n.data.substring(0,e.channel.length+1)==e.channel+" "&&r.up.incoming(n.data.substring(e.channel.length+1),o)}var i=W.getTracer("easyXDM.stack.PostMessageTransport");i("constructor");var r,o,s,u;return r={outgoing:function(t,n,i){s.postMessage(e.channel+" "+t,n||u),i&&i()},destroy:function(){i("destroy"),A(window,"message",n),o&&(s=null,o.parentNode.removeChild(o),o=null)},onDOMReady:function(){if(i("init"),u=d(e.remote),e.isHost){var t=function(a){a.data==e.channel+"-ready"&&(i("firing onReady"),s="postMessage"in o.contentWindow?o.contentWindow:o.contentWindow.document,A(window,"message",t),x(window,"message",n),O(function(){r.up.callback(!0)},0))};x(window,"message",t),m(e.props,{src:f(e.remote,{xdm_e:d(location.href),xdm_c:e.channel,xdm_p:1}),name:F+e.channel+"_provider"}),o=v(e)}else x(window,"message",n),s="postMessage"in window.parent?window.parent:window.parent.document,s.postMessage(e.channel+"-ready",u),O(function(){r.up.callback(!0)},0)},init:function(){a(r.onDOMReady,r)}}},j.stack.FrameElementTransport=function(e){var t=W.getTracer("easyXDM.stack.FrameElementTransport");t("constructor");var n,i,r,o;return n={outgoing:function(e,t,n){r.call(this,e),n&&n()},destroy:function(){t("destroy"),i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){t("init"),o=d(e.remote),e.isHost?(m(e.props,{src:f(e.remote,{xdm_e:d(location.href),xdm_c:e.channel,xdm_p:5}),name:F+e.channel+"_provider"}),i=v(e),i.fn=function(e){return delete i.fn,r=e,O(function(){n.up.callback(!0)},0),function(e){n.up.incoming(e,o)}}):(document.referrer&&d(document.referrer)!=$.xdm_e&&(window.top.location=$.xdm_e),r=window.frameElement.fn(function(e){n.up.incoming(e,o)}),n.up.callback(!0))},init:function(){a(n.onDOMReady,n)}}},j.stack.NameTransport=function(e){function t(t){var n=e.remoteHelper+(u?"#_3":"#_2")+e.channel;o("sending message "+t),o("navigating to  '"+n+"'"),l.contentWindow.sendMessage(t,n)}function n(){u?2!==++g&&u||s.up.callback(!0):(t("ready"),o("calling onReady"),s.up.callback(!0))}function i(e){o("received message "+e),s.up.incoming(e,y)}function r(){_&&O(function(){_(!0)},0)}var o=W.getTracer("easyXDM.stack.NameTransport");o("constructor"),e.isHost&&h(e.remoteHelper)&&o("missing remoteHelper");var s,u,l,c,g,_,y,b;return s={outgoing:function(e,n,i){_=i,t(e)},destroy:function(){o("destroy"),l.parentNode.removeChild(l),l=null,u&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){o("init"),u=e.isHost,g=0,y=d(e.remote),e.local=p(e.local),u?(j.Fn.set(e.channel,function(t){o("received initial message "+t),u&&"ready"===t&&(j.Fn.set(e.channel,i),n())}),b=f(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),m(e.props,{src:b+"#"+e.channel,name:F+e.channel+"_provider"}),c=v(e)):(e.remoteHelper=e.remote,j.Fn.set(e.channel,i));var t=function(){var i=l||this;A(i,"load",t),j.Fn.set(e.channel+"_load",r),function o(){"function"==typeof i.contentWindow.sendMessage?n():O(o,50)}()};l=v({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){a(s.onDOMReady,s)}}},j.stack.HashTransport=function(e){function t(t){if(o("sending message '"+(f+1)+" "+t+"' to "+y),!g)return void o("no caller window");var n=e.remote+"#"+f++ +"_"+t;(u||!_?g.contentWindow:g).location=n}function n(e){p=e,o("received message '"+p+"' from "+y),s.up.incoming(p.substring(p.indexOf("_")+1),y)}function i(){if(h){var e=h.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=p&&(o("poll: new message"),n(t))}}function r(){o("starting polling"),l=setInterval(i,c)}var o=W.getTracer("easyXDM.stack.HashTransport");o("constructor");var s,u,l,c,p,f,h,g,_,y;return s={outgoing:function(e,n){t(e)},destroy:function(){window.clearInterval(l),(u||!_)&&g.parentNode.removeChild(g),g=null},onDOMReady:function(){if(u=e.isHost,c=e.interval,p="#"+e.channel,f=0,_=e.useParent,y=d(e.remote),u){if(m(e.props,{src:e.remote,name:F+e.channel+"_provider"}),_)e.onLoad=function(){h=window,r(),s.up.callback(!0)};else{var t=0,n=e.delay/50;!function i(){if(++t>n)throw o("unable to get reference to _listenerWindow, giving up"),new Error("Unable to reference listenerwindow");try{h=g.contentWindow.frames[F+e.channel+"_consumer"]}catch(a){}h?(r(),o("got a reference to _listenerWindow"),s.up.callback(!0)):O(i,50)}()}g=v(e)}else h=window,r(),_?(g=parent,s.up.callback(!0)):(m(e,{props:{src:e.remote+"#"+e.channel+new Date,name:F+e.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),g=v(e))},init:function(){a(s.onDOMReady,s)}}},j.stack.ReliableBehavior=function(e){var t=W.getTracer("easyXDM.stack.ReliableBehavior");t("constructor");var n,i,r=0,o=0,a="";return n={incoming:function(e,s){t("incoming: "+e);var u=e.indexOf("_"),l=e.substring(0,u).split(",");e=e.substring(u+1),l[0]==r&&(t("message delivered"),a="",i&&i(!0)),e.length>0&&(t("sending ack, and passing on "+e),n.down.outgoing(l[1]+","+r+"_"+a,s),o!=l[1]&&(o=l[1],n.up.incoming(e,s)))},outgoing:function(e,t,s){a=e,i=s,n.down.outgoing(o+","+ ++r+"_"+e,t)}}},j.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===o.length)return n("removing myself from the stack"),void E(i);if(!a&&0!==o.length&&!r){n("dispatching from queue"),a=!0;var s=o.shift();i.down.outgoing(s.data,s.origin,function(e){a=!1,s.callback&&O(function(){s.callback(e)},0),t()})}}var n=W.getTracer("easyXDM.stack.QueueBehavior");n("constructor");var i,r,o=[],a=!0,s="",u=0,l=!1,c=!1;return i={init:function(){h(e)&&(e={}),e.maxLength&&(u=e.maxLength,c=!0),e.lazy?l=!0:i.down.init()},callback:function(e){a=!1;var n=i.up;t(),n.callback(e)},incoming:function(t,r){if(c){var o=t.indexOf("_"),a=parseInt(t.substring(0,o),10);s+=t.substring(o+1),0===a?(n("received the last fragment"),e.encode&&(s=decodeURIComponent(s)),i.up.incoming(s,r),s=""):n("waiting for more fragments, seq="+t)}else i.up.incoming(t,r)},outgoing:function(r,a,s){e.encode&&(r=encodeURIComponent(r));var d,p=[];if(c){for(;0!==r.length;)d=r.substring(0,u),r=r.substring(d.length),p.push(d);for(;d=p.shift();)n("enqueuing"),o.push({data:p.length+"_"+d,origin:a,callback:0===p.length?s:null})}else o.push({data:r,origin:a,callback:s});l?i.down.init():t()},destroy:function(){n("destroy"),r=!0,i.down.destroy()}}},j.stack.VerifyBehavior=function(e){function t(){n("requesting verification"),r=Math.random().toString(16).substring(2),i.down.outgoing(r)}var n=W.getTracer("easyXDM.stack.VerifyBehavior");n("constructor");var i,r,o;return i={incoming:function(a,s){var u=a.indexOf("_");-1===u?a===r?(n("verified, calling callback"),i.up.callback(!0)):o||(n("returning secret"),o=a,e.initiate||t(),i.down.outgoing(a)):a.substring(0,u)===o&&i.up.incoming(a.substring(u+1),s)},outgoing:function(e,t,n){i.down.outgoing(r+"_"+e,t,n)},callback:function(n){e.initiate&&t()}}},j.stack.RpcBehavior=function(e,t){function n(e){e.jsonrpc="2.0",a.down.outgoing(u.stringify(e))}function r(e,t){var i=Array.prototype.slice;return s("creating method "+t),function(){s("executing method "+t);var r,o=arguments.length,a={method:t};o>0&&"function"==typeof arguments[o-1]?(o>1&&"function"==typeof arguments[o-2]?(r={success:arguments[o-2],error:arguments[o-1]},a.params=i.call(arguments,0,o-2)):(r={success:arguments[o-1]},a.params=i.call(arguments,0,o-1)),c[""+ ++l]=r,a.id=l):a.params=i.call(arguments,0),e.namedParams&&1===a.params.length&&(a.params=a.params[0]),n(a)}}function o(e,t,r,o){if(!r)return s("requested to execute non-existent procedure "+e),void(t&&n({id:t,error:{code:-32601,message:"Procedure not found."}}));s("requested to execute procedure "+e);var a,u;t?(a=function(e){a=M,n({id:t,result:e})},u=function(e,i){u=M;var r={id:t,error:{code:-32099,message:e}};i&&(r.error.data=i),n(r)}):a=u=M,i(o)||(o=[o]);try{var l=r.method.apply(r.scope,o.concat([a,u]));h(l)||a(l)}catch(c){u(c.message)}}var a,s=W.getTracer("easyXDM.stack.RpcBehavior"),u=t.serializer||q(),l=0,c={};return a={incoming:function(e,i){var r=u.parse(e);if(r.method)s("received request to execute method "+r.method+(r.id?" using callback id "+r.id:"")),t.handle?t.handle(r,n):o(r.method,r.id,t.local[r.method],r.params);else{s("received return value destined to callback with id "+r.id);var a=c[r.id];r.error?a.error?a.error(r.error):s("unhandled error returned."):a.success&&a.success(r.result),delete c[r.id]}},init:function(){if(s("init"),t.remote){s("creating stubs");for(var n in t.remote)t.remote.hasOwnProperty(n)&&(e[n]=r(t.remote[n],n))}a.down.init()},destroy:function(){s("destroy");for(var n in t.remote)t.remote.hasOwnProperty(n)&&e.hasOwnProperty(n)&&delete e[n];a.down.destroy()}}},j}),define("fakeXhrFactory",["require","underscore"],function(e){var t=e("underscore");return function(e){var n={},i={};return t.extend(e,{getResponseHeader:function(t){var n,i=/^(.*?):[ \t]*([^\r\n]*)$/gm;if(4===e.readyState){if(!this.responseHeaders)for(this.responseHeaders={};n=i.exec(this.responseHeadersString);)this.responseHeaders[n[1].toLowerCase()]=n[2];n=this.responseHeaders[t.toLowerCase()]}return null==n?null:n},getAllResponseHeaders:function(){return 2===e.readyState?this.responseHeadersString:null},setRequestHeader:function(t,r){var o=t.toLowerCase();return e.readyState||(t=n[o]=n[o]||t,i[t]=r),this}})}}),define("transport/xdmRequest",["require","jquery","underscore","xdm","fakeXhrFactory","jrs.configs","logger"],function(e){"use strict";function t(e,t){var n=i.Deferred(),r=i.Deferred(),o=e.request(t,function(e){n.resolve(e.data,e.status,a(e.xhr))},function(e){n.reject(e.message,e.data)});return t.success&&n.done(t.success),t.error&&n.fail(t.error),t.complete&&n.always(t.complete),n.done(r.resolve).fail(r.reject).progress(r.notify),r.fail(function(){"pending"==n.state()&&e.abort(o)}),r}function n(){var e=[];return e.push({name:"logEnabled",value:u.get("enabled")}),u.get("level")&&e.push({name:"logLevel",value:u.get("level")}),i.param(e)}var i=e("jquery"),r=e("underscore"),o=e("xdm"),a=e("fakeXhrFactory"),s=e("jrs.configs"),u=e("logger"),l=function(e){if(0===arguments.length)throw new Error("Not enough arguments to perform the request.");var n=l.create(e.baseUrl?e.baseUrl:s.contextPath);return t(n,e)};return l.create=r.memoize(function(e){return new o.Rpc({remote:e+"/xdm.html?"+n(),container:document.body,props:{style:{display:"none"}}},{remote:{request:{},abort:{}}})}),l}),define("transport/xhrRequest",["require","jquery","underscore","logger"],function(e){"use strict";function t(){a.trigger.apply(a,arguments)}function n(e){(401==e.status||e.getResponseHeader("LoginRequested"))&&(i(window).trigger("sessionExpired"),o.warn("Session timed-out. Redirecting to login page."),window.location.reload())}var i=e("jquery"),r=e("underscore"),o=e("logger").register("request");if("undefined"==typeof document)return{};var a=i(document);return function(e){return r.partial(t,"request:before").apply(null,arguments),i.ajax(e).fail(n).fail(function(e,t,n){e.getResponseHeader("adhocException")?o.error(e.getResponseHeader("adhocException")):(500==e.status||e.getResponseHeader("JasperServerError")&&!e.getResponseHeader("SuppressError"))&&o.error(e.responseText)}).fail(r.partial(t,"request:failure")).done(r.partial(t,"request:success"))}}),define("request",["require","jquery","underscore","jrs.configs","requestSettings","transport/xdmRequest","transport/xhrRequest"],function(e){"use strict";var t,n=e("jquery"),i=e("underscore"),r=e("jrs.configs"),o=e("requestSettings"),a=e("transport/xdmRequest"),s=e("transport/xhrRequest");return function(){t||(t=r.isXdm?a:s);var e=i.extend({},o,arguments[0]);return o.headers&&arguments[0].headers&&(e.headers=i.extend({},o.headers,arguments[0].headers)),arguments[0]=e,t.apply(n,arguments)}}),define("bundle",["require","request","requestSettings","underscore","jrs.configs"],function(e){"use strict";var t=e("request"),n=e("requestSettings"),i=e("underscore"),r=e("jrs.configs"),o=r.runtimeContextPath+"/rest_v2/bundles",a="all",s=function(e,r){var s;a===e?s="?expanded=true":(e=e.split("/"),s="/"+e[e.length-1]);var u=i.extend({},n,{type:"GET",dataType:"json",url:o+s});u.headers["Cache-Control"]="private",delete u.headers.Pragma,t(u).then(function(t){r(a!==e?t:i(t).reduce(function(e,t){return i.extend(e,t)},{}))})};return s.load=function(e,t,n,i){return i.isBuild?void n():void s(e,n)},s}),define("common/util/browserDetection",["require","jquery"],function(e){"use strict";var t=e("jquery");return{isMozilla:function(){return"Netscape"===navigator.appName},isFirefox:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("firefox")},isWebKitEngine:function(){return t.browser&&t.browser.webkit},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")},isIPad:function(){return"iPad"==navigator.platform},isIOS:function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},isAndroid:function(){return navigator.userAgent.toLowerCase().indexOf("android")},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.indexOf("Trident/")>=0},isIE6:function(){return this.isIEVersion(6)},isIE7:function(){return this.isIEVersion(7)},isIE8:function(){return this.isIEVersion(8)},isIE9:function(){return this.isIEVersion(9)},isIE10:function(){return this.isIEVersion(10)},isIE11:function(){return this.isIEVersion(11)},isIEVersion7Upwards:function(){return this.getIEVersion()>=7},isIEVersion:function(e){return this.getIEVersion()===e},getIEVersion:function(){var e=0;if(this.getIEVersion.version>=0)return this.getIEVersion.version;if(this.isIE())if("Netscape"===navigator.appName){var t=navigator.userAgent,n=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}else{var i=navigator.appVersion.split("MSIE")[1];e=parseFloat(i)}return this.getIEVersion.version=e,e}}}),define("stdnav",["require","exports","module","jquery","underscore","common/util/browserDetection","logger"],function(e,t,n){"use strict";var i=e("jquery"),r=(e("underscore"),e("common/util/browserDetection")),o=e("logger").register(n),a=0,s=function(){a++,this.serial=a,this.menuItemCallbacks={click:{}},this.plugins={},this.modalDialogActive=!1,this.modalDialogRoot=null,this.debugElementID=null,this.chaffLength=1,this.maxChaffLength=8};i.extend(s.prototype,{_maxNavDepth:100,nullOrUndefined:function(e){return null===e||"undefined"==typeof e?!0:!1},closestAncestor:function(e,t,n,r){if(void 0!==e&&null!==e)for(var o=i(e).parent(),a=1;void 0!==o;){if(null!==r&&void 0!==r&&a>=r)return;if(o.is(n))return;if(o.is(t))return o;a++,o=o.parent()}},closestDescendant:function(e,t,n,r){if(null!==e&&void 0!==e&&null!==t&&void 0!==t){var o;o=null===r||void 0===r?this._maxNavDepth:r;for(var a=[],s=0,u=1,l=0,c=e;void 0!==c;){if(i(c).is(t)&&s>0)return c;if(!i(c).is(n)){var d=i(c).children();d.each(function(e,t){a.unshift(t),l++})}if(0===--u&&(s++,u=l,l=0),s>o)return;c=a.pop()}}},zinit:function(e){return o.debug("stdnav.init("+e+")\n"),this},navtype_nodeNames:{},updateDebugInfo:function(){if(this.debugElementID){var e=i("#"+this.debugElementID),t=i(".superfocus"),n=i(document.activeElement),r=i(".subfocus"),o="[sup:";e.length<1||(o+=t.length,o+=t.length>0?":"+t[0].nodeName+"#"+t[0].id:"?",o+=", foc:",o+=n.length,o+=n.length>0?":"+n[0].nodeName+"#"+n[0].id:"?",o+=", sub:",o+=r.length,o+=r.length>0?":"+r[0].nodeName+"#"+r[0].id:"?",t=i(this._priorSuperfocus),
n=i(this._priorFocus),r=i(this._priorSubfocus),o+=" :: psup:",e.length<1||(o+=t.length,o+=t.length>0?":"+t[0].nodeName+"#"+t[0].id:"?",o+=", pfoc:",o+=n.length,o+=n.length>0?":"+n[0].nodeName+"#"+n[0].id:"?",o+=", psub:",o+=r.length,o+=r.length>0?":"+r[0].nodeName+"#"+r[0].id:"?",o+="]",e.text(o)))}},beginModalFocus:function(e){if(e){this.modalDialogActive===!0&&this.endModalFocus(this.modalDialogRoot);var t=i(e),n=i("body *").filter(function(){return!(i.contains(e,this)||t.is(this))});this.modalDialogActive=!0,this.modalDialogRoot=e,n.each(function(e,t){var n=i(t),r=n.attr("tabIndex");"undefined"==typeof r?(n.attr("js-nonmodal-tabindex","undefined"),n.attr("tabIndex","-1")):(n.attr("js-nonmodal-tabindex",r),n.attr("tabIndex","-1"))})}},endModalFocus:function(e){var t,n;e?(t=i(e),n=i("body *").filter(function(){return!(i.contains(t,this)||t.is(this))})):(t=i(),n=i("body *")),n.each(function(e,t){var n=i(t),r=n.attr("js-nonmodal-tabindex");"undefined"==typeof r||("undefined"===r?(n.removeAttr("js-nonmodal-tabindex"),n.removeAttr("tabIndex")):(n.removeAttr("js-nonmodal-tabindex"),n.attr("tabIndex",r)))}),this.modalDialogActive=!1,this.modalDialogRoot=null},isNavigable:function(e){return i(e).is(this._navigableFilter)&&!i(e).is(this._unnavigableFilter)?!0:!1},closestNavigableAncestor:function(e){return this.closestAncestor(e,this._navigableFilter,this._unnavigableFilter,this._maxNavDepth)},closestNavigableDescendant:function(e){return this.closestDescendant(e,this._navigableFilter,this._unnavigableFilter,this._maxNavDepth)},_rebuildNavigationFilters:function(){var e="";i.each(this.navtype_nodeNames,function(t,n){i.each(n,function(t,n){e+=n+","})}),e+="[js-navtype]",this._navigableFilter=e,this._unnavigableFilter='[js-stdnav="false"],[js-navtype="none"]'},registerPlugin:function(e,t){this.plugins[e]=t},unregisterPlugin:function(e){this.plugins[e].unload(),delete this.plugins[e]},registerNavtype:function(e,t,n){this.navtypeBehaviors[e.toLowerCase()]=t,this.navtype_nodeNames[e.toLowerCase()]=n,this._rebuildNavigationFilters()},unregisterNavtype:function(e,t){delete this.navtypeBehaviors[e.toLowerCase()],delete this.navtype_nodeNames[e.toLowerCase()],this._rebuildNavigationFilters()},activate:function(){this.nullBehavior={ariaprep:null,ariarefresh:null,click:null,down:null,end:null,enter:null,entered:null,exit:null,fixfocus:null,fixsubfocus:null,fixsuperfocus:null,focusin:null,focusout:null,home:null,hoverin:null,hoverout:null,inherit:null,inheritable:null,left:null,mousedown:null,mouseover:null,mouseout:null,mouseup:null,next:null,pagedown:null,pageup:null,prev:null,rejoined:null,right:null,subfocusin:null,subfocusout:null,superfocusin:null,superfocusout:null,toggle:null,touchend:null,touchstart:null,up:null},this.defaultBehavior={enter:[this,this.basicEnter,null],entered:[this,this.basicEntered,null],exit:[this,this.basicExit,null],fixfocus:[this,this.basicFixFocus,null],fixsubfocus:[this,this.basicFixSubfocus,null],fixsuperfocus:[this,this.basicFixSuperfocus,null],focusin:[this,this.basicFocusIn,{maxdepth:0}],focusout:[this,this.basicFocusOut,null],inherit:!0,inheritable:!0,rejoined:[this,this.basicRejoined,null],subfocusin:[this,this.basicSubfocusIn,null],subfocusout:[this,this.basicSubfocusOut,null],superfocusin:[this,this.basicSuperfocusIn,null],superfocusout:[this,this.basicSuperfocusOut,{ghostfocus:!1}]},this.navtypeBehaviors={block:{},global:{},inline:{},modal:{next:this._onModalNext,inherit:!1,inheritable:!0}},this._refocusing=!1,this._priorSuperfocus=null,this._priorFocus=null,this._priorSubfocus=null,this._currentSuperfocus=document.activeElement,this._currentFocus=document.activeElement,this._currentSubfocus=document.activeElement,i(this._currentSuperfocus).addClass("superfocus"),i(this._currentSubfocus).addClass("subfocus"),this._rebuildNavigationFilters(),this._bindFocusEvents(),this._bindKeyboardEvents(),this._bindMouseEvents(),this._bindTouchEvents()},start:function(){var e=i(".stdnavinitialfocus");e.length<1&&(document.activeElement&&document.activeElement!=i("body")[0]?e=i(document.activeElement):(e=i("body").children("[tabindex='0']:first"),e.length<1&&(e=i("body")))),r.isIE11()&&(this.forceFocus(i("body")[0]),i("#IECM").html("&nbsp;"),this._unforceFocus(i("body")[0]),i("body").blur(),i("#IECM").html("&nbsp;&nbsp;")),this.forceFocus(e[e.length-1]),i("body").attr("aria-busy",!1),i("#ariastatus").attr("aria-label","Standard Navigation initialized."),this.updateDebugInfo()},stop:function(){},deactivate:function(){this._unbindTouchEvents(),this._unbindMouseEvents(),this._unbindKeyboardEvents(),this._unbindFocusEvents()},_bindFocusEvents:function(){i("body").on("focusin",i.proxy(this._onFocusIn,this)),i("body").on("focusout",i.proxy(this._onFocusOut,this))},_bindKeyboardEvents:function(){i(document).on("keydown",i.proxy(this._onKeydown,this))},_bindMouseEvents:function(){i("body").on("click",i.proxy(this._onClick,this)),i("body").on("dblclick",i.proxy(this._onDblClick,this)),i("body").on("mousedown",i.proxy(this._onMouseDown,this)),i("body").on("mouseover",i.proxy(this._onMouseOut,this)),i("body").on("mouseout",i.proxy(this._onMouseOver,this)),i("body").on("mouseup",i.proxy(this._onMouseUp,this)),i("body").on("mouseover","[aria-label]",i.proxy(this._onLabeledTagOver,this))},_bindTouchEvents:function(){i("body").on("touchend",i.proxy(this._onTouchStart,this)),i("body").on("touchstart",i.proxy(this._onTouchStart,this))},_unbindTouchEvents:function(){i("body").off("touchend",i.proxy(this._onTouchStart,this)),i("body").off("touchstart",i.proxy(this._onTouchStart,this))},_unbindMouseEvents:function(){i("body").off("click",i.proxy(this._onClick,this)),i("body").off("dblclick",i.proxy(this._onDblClick,this)),i("body").off("mousedown",i.proxy(this._onMouseDown,this)),i("body").off("mouseover",i.proxy(this._onMouseOut,this)),i("body").off("mouseout",i.proxy(this._onMouseOver,this)),i("body").off("mouseup",i.proxy(this._onMouseUp,this))},_unbindKeyboardEvents:function(){i(document).off("keydown",i.proxy(this._onKeydown,this))},_unbindFocusEvents:function(){i("body").off("focusin",i.proxy(this._onFocusIn,this)),i("body").off("focusout",i.proxy(this._onFocusOut,this))},_getExplicitBehavior:function(e){var t={};return void 0!==e.attr("js-stdanv-enter")&&(t.enter=e.attr("js-stdnav-enter")),void 0!==e.attr("js-stdanv-exit")&&(t.exit=e.attr("js-stdnav-exit")),void 0!==e.attr("js-stdanv-entered")&&(t.entered=e.attr("js-stdnav-entered")),void 0!==e.attr("js-stdanv-rejoin")&&(t.rejoin=e.attr("js-stdnav-rejoin")),void 0!==e.attr("js-stdanv-up")&&(t.up=e.attr("js-stdnav-up")),void 0!==e.attr("js-stdanv-down")&&(t.down=e.attr("js-stdnav-down")),void 0!==e.attr("js-stdanv-left")&&(t.left=e.attr("js-stdnav-left")),void 0!==e.attr("js-stdanv-right")&&(t.right=e.attr("js-stdnav-right")),void 0!==e.attr("js-stdanv-next")&&(t.next=e.attr("js-stdnav-next")),void 0!==e.attr("js-stdanv-prev")&&(t.prev=e.attr("js-stdnav-prev")),void 0!==e.attr("js-stdanv-inherit")&&(t.inherit=e.attr("js-stdnav-inherit")),void 0!==e.attr("js-stdanv-inheritable")&&(t.inheritable=e.attr("js-stdnav-inheritable")),t},_buildParentBehaviorOBSOLETE:function(e){var t=i(e.parent()[0]);if(void 0===t)return this.defaultBehavior;var n=this._buildImmediateBehavior(t);if(n.inheritable===!1)return this.defaultBehavior;if(n.inherit===!1||t.is("body,iframe"))return i.extend({},!0,this.defaultBehavior,n);var r=this._buildParentBehavior(t);return i.extend({},!0,r,n,{inherit:!1})},_buildBehavior:function(e){for(var t=i.extend(!0,{},this.nullBehavior),n=e,r=0,a=this._buildImmediateBehavior(n);r<this._maxNavDepth&&(i.each(a,function(e,n){e in t?null===t[e]&&(t[e]=n):(o.warn("StdNav: Key '"+e+"' is missing from the NULL-behavior hash"),t[e]=n)}),a.inherit!==!1)&&(r++,n=i(n).parent()[0],a=this._buildImmediateBehavior(n),a.inheritable!==!1););return i.each(this.defaultBehavior,function(e,n){e in t?null===t[e]&&(t[e]=n):(o.warn("StdNav: Key '"+e+"' is defined in defaults but missing from the NULL-behavior hash"),t[e]=n)}),i.extend(!0,{},t)},_buildImmediateBehavior:function(e){var t=this;if(this.nullOrUndefined(e))return this.defaultBehavior;var n,r=i(e),o=r.prop("nodeName");i.each(this.navtype_nodeNames,function(r,a){i.inArray(o,a)>-1&&t.isNavigable(e)&&(n=r)});var a={};void 0!==n&&(a=this.navtypeBehaviors[n]);var s=r.attr("js-navtype"),u={};void 0!==s&&(u=this.navtypeBehaviors[s.toLowerCase()]);var l=this._getExplicitBehavior(r);return i.extend(!0,{inherit:!0},a,u,l)},_buildBehaviorOBSOLETE:function(e){if(void 0===e||null===e)return this.defaultBehavior;var t=i(e),n=this._buildImmediateBehavior(t),r={};return n.inherit===!0&&(r=this._buildParentBehavior(t)),i.extend(!0,r,n)},isLogicFocusable:function(e){if(this.nullOrUndefined(e))return o.error("isLogicFocusable called on a null or undefined element"),!1;var t=i(e),n=!1,r=t.prop("nodeName");t.attr("tabindex");return(t.is(":input")||i.inArray(r,["A","BUTTON","INPUT","SELECT","OBJECT","TEXTAREA"])>-1)&&t.is(":enabled")&&(n=!0),t.is("[tabindex]")&&(n=!0),n},isUserFocusable:function(e){if(this.nullOrUndefined(e))return o.error("isUserFocusable called on a null or undefined element"),!1;var t=i(e),n=!1,r=t.prop("nodeName"),a=t.attr("tabindex");return(t.is(":input")||i.inArray(r,["A","BUTTON","INPUT","SELECT","OBJECT","TEXTAREA"])>-1)&&t.is(":enabled")&&(n=!0),void 0!==a&&(n="-1"==a?!1:!0),n},suspendFocusability:function(e){if(this.nullOrUndefined(e))return void o.warn("stdnav.suspendFocusability called on null or undefined element");var t=i(e);if(!this.nullOrUndefined(t.attr("js-suspended-tabindex")))return void o.warn("stdnav.suspendFocusability called on already suspended element "+e.nodeType+"#"+e.id);var n=t.attr("tabindex");this.nullOrUndefined(n)?t.attr("js-suspended-tabindex","none"):t.attr("js-suspended-tabindex",n),t.attr("tabindex","-1")},resumeFocusability:function(e){if(this.nullOrUndefined(e))return void o.warn("stdnav.resumeFocusability called on null or undefined element");var t=i(e),n=t.attr("js-suspended-tabindex");return this.nullOrUndefined(n)?void o.warn("stdnav.resumeFocusability called on non-suspended element "+e.nodeName+"#"+e.id):("none"===n?t.removeAttr("tabindex"):t.attr("tabindex",n),void t.removeAttr("js-suspended-tabindex"))},ensureFocusabilityBeyond:function(e){var t=i("[suspended-tabindex]");t.each(function(t){if(!i.contains(t,e)){var n=i(t),r=n.attr("js-suspended-tabindex");n.attr("tabindex",r),n.removeAttr("js-suspended-tabindex")}})},forceFocus:function(e){o.debug("stdnav.forceFocus("+e.nodeName+"#"+e.id+")");var t=i(e),n=0;if(i.each(t.parents("[tabindex]"),function(e,t){var r=i(t);r.attr("tabindex")>n&&(n=r.attr("tabindex")),r.attr("js-suspended-tabindex")>n&&(n=r.attr("js-suspended-tabindex"))}),!t.is(i(document.activeElement))){if((!this.isLogicFocusable(e)||n>t.attr("tabindex"))&&!t.attr("priortabindex")){var r=t.attr("tabindex");void 0!==r?t.data("prior-tabindex",r):t.data("prior-tabindex","none"),t.attr("tabindex",n)}i(e).focus()}},_unforceFocus:function(e){var t=i(e),n=t.data("prior-tabindex");this.nullOrUndefined(n)||("none"==n?t.removeAttr("tabindex"):t.attr("tabindex",n),t.removeData("prior-tabindex"))},_onClick:function(e){var t=i(e.target);if(1==t.length){var n=this._buildBehavior(t);if(null!=n.click){var r=this.runAction("click",e.target);r===!1&&(e.stopPropagation(),e.preventDefault())}}},_onMouseDown:function(e){var t=i(e.target);if(1==t.length){var n=this._buildBehavior(t);if(null!=n.mousedown){var r=this.runAction("mousedown",e.target);r===!1&&(e.stopPropagation(),e.preventDefault())}}},_onMouseUp:function(e){var t=i(e.target);if(1==t.length){var n=this._buildBehavior(t);if(null!=n.mouseup){var r=this.runAction("mouseup",e.target);r===!1&&(e.stopPropagation(),e.preventDefault())}}},_onLabeledTagOver:function(e){var t=i(e.currentTarget);t.attr("aria-label")&&t.data("title")&&t.attr("title",t.attr("aria-label"))},_onFocusIn:function(e){this._currentFocus=e.target;var t=null,n=i(e.target);n.attr("aria-label")&&n.removeAttr("title"),o.info("stdnav._onFocusIn  ev.target=="+e.target.nodeName+"#"+e.target.id),this.updateDebugInfo();for(var r="",a=0;a<this.chaffLength;a++)r+="&nbsp;";if(i("#IECM").html(r),this.chaffLength=(this.chaffLength+1)%this.maxChaffLength,0===this.chaffLength&&(this.chaffLength=1),i(e.target).length<1)return void(this._refocusing=!1);var s=e.target;if(t=this.runAction("fixfocus",s),null===t&&(t=s),t!==s)this._refocusing=!0,this.forceFocus(t);else if(this._refocusing=!1,s===this._priorFocus);else{if(i(".subfocus").removeClass("subfocus"),this._priorSubfocus&&this.runAction("subfocusout",this._priorSubfocus),this._priorFocus&&(this.runAction("focusout",this._priorFocus),this._unforceFocus(this._priorFocus)),this._currentFocus=s,this._currentSuperfocus=this.runAction("fixsuperfocus",this._currentFocus),null===this._currentSuperfocus&&(this._currentSuperfocus=i("body")[0]),o.debug("stdnav._onFocusIn: fixsuperfocus("+this._currentFocus.nodeName+"#"+this._currentFocus.id+") returned "+this._currentSuperfocus.nodeName+"#"+this._currentSuperfocus.id),this._currentSuperfocus!==this._priorSuperfocus){var u=i(".superfocus");u.length>0?o.debug("Removing .superfocus from "+u[0].nodeName+"#"+u[0].id):o.warn("No current .superfocus to remove"),i(".superfocus").removeClass("superfocus"),this._priorSuperfocus&&(this.runAction("superfocusout",this._priorSuperfocus),this.resumeFocusability(this._priorSuperfocus)),o.debug("Running ARIA refresh for "+this._currentSuperfocus.nodeName+"#"+this._currentSuperfocus.id),this.runAction("ariarefresh",this._currentSuperfocus),o.debug("Adding .superfocus to "+this._currentSuperfocus.nodeName+"#"+this._currentSuperfocus.id),i(this._currentSuperfocus).addClass("superfocus"),i(this._currentSuperfocus).is(this._currentFocus)||this.suspendFocusability(this._currentSuperfocus),this.runAction("superfocusin",this._currentSuperfocus)}this._currentSubfocus=this.runAction("focusin",this._currentFocus),null===this._currentSubfocus&&(this._currentSubfocus=this._currentFocus),i(this._currentSubfocus).addClass("subfocus"),this.runAction("subfocusin",this._currentSubfocus),this.ensureFocusabilityBeyond(this._currentFocus)}this.updateDebugInfo()},_onFocusOut:function(e){this.updateDebugInfo(),this._refocusing===!0||(i(".superfocus").length>0?this._priorSuperfocus=i(".superfocus")[0]:(o.warn("no prior superfocus"),this._priorSuperfocus=i("body")[0]),this._priorFocus=e.target,i(".subfocus").length>0?this._priorSubfocus=i(".subfocus")[0]:(o.warn("no prior subfocus"),this._priorSubfocus=e.target)),this.updateDebugInfo()},_prepSubfocusIn:function(e){0===i(e).parents(":focus").length&&i(e).focus()},setSuperfocus:function(e,t){o.debug("stdnav.setSuperfocus("+e.nodeName+"#"+e.id+", "+t+")"),void 0===t&&(t=!0);var n=i(".subfocus");n.length>0&&(t&&this.runAction("subfocusout",n[0]),n.removeClass("subfocus")),i(e).addClass("subfocus"),t&&(this._prepSubfocusIn(e),this.runAction("subfocusin",e))},setSubfocus:function(e,t){o.debug("stdnav.setSubfocus("+e.nodeName+"#"+e.id+", "+t+")"),void 0===t&&(t=!0);var n=i(".subfocus");n.length>0&&(t&&this.runAction("subfocusout",n[0]),n.removeClass("subfocus")),i(e).addClass("subfocus"),t&&(this._prepSubfocusIn(e),this.runAction("subfocusin",e))},runAction:function(e,t){if(null===t)return void o.warn("tried to run action '"+e+"' on null element");if("undefined"==typeof t)return void o.warn("tried to run action '"+e+"' on undefined element");o.debug("stdnav.runAction("+e+", "+t.nodeName+"#"+t.id+")");var n=this._buildBehavior(t);return this.nullOrUndefined(n[e])?void 0:this._runActionDesc(n[e],t)},_runActionDesc:function(e,t){var n=!0;if("string"==typeof e||e instanceof String){if("#"==e.substr(0,1))if("##parent"==e)this.forceFocus(i(t).parent());else if("##child"==e){var r=i(t).children();r.length>0&&this.forceFocus(i(t).children()[0])}else if("##prev"==e){var a=i(t).prev();a.length>0&&this.forceFocus(i(t).prev()[0])}else if("##next"==e){var s=i(t).next();s.length>0&&this.forceFocus(i(t).next()[0])}else{var u=i(e);void 0!==u&&this.forceFocus(u)}else if("@"==e.substr(0,1)){var l,c,d,p,f,h,m=this;if("@"==e.substr(1,1))m=i(t).data("stdnav-context");else if(p=e.indexOf(":"),p>-1){var g=e.substr(0,p);m=this.actionContexts[g]}f=e.indexOf("("),-1==f?l=e.substr(2):(h=e.indexOf(")"),l=e.substr(2,f-2),-1==h?o.warn("Bad stdnav action: "+e):d=e.substr(f,h-f)),c=m[l],n=c.call(m,d)}}else if(e instanceof Array){void 0===e[1]&&o.warn("undefined actionDesc[1]");var m=e[0];(null===m||"undefined"==typeof m)&&(m=this);var v=e[1],_=e[2];(null===_||"undefined"==typeof _)&&(_={}),n=v.call(m,t,_)}return n},basicClick:function(e,t){var n=this.runAction("fixfocus",e);return this.nullOrUndefined(n)?o.debug("stdnav.basicClick: "+e.nodeName+"#"+e.id+" has no navigable ancestor, ignoring"):(o.debug("stdnav.basicClick("+e.nodeName+"#"+e.id+") refocusing to "+n.nodeName+"#"+n.id),this.nullOrUndefined(n)||this.forceFocus(n)),!0},basicFixFocus:function(e,t){if(this.isNavigable(e)||i(e).is(":input"))return e;var n=this.closestNavigableAncestor(e);return this.nullOrUndefined(n)?null:n},basicFixSuperfocus:function(e,t){var n=null;if(i(e).is(":input,fieldset")){var r=i(e).closest("form");i(e).closest("form"),r.length>0&&(n=r[0])}else n=this.isNavigable(e)?e:this.closestNavigableAncestor(e);return(null===n||"undefined"==typeof n)&&(n=e),n},parentFixSuperfocus:function(e,t){return this.basicFixSuperfocus(e.parentNode,t)},basicFixSubfocus:function(e,t){return e},basicFocusIn:function(e,t){return o.debug("stdnav.basicFocusIn("+e.nodeName+"#"+e.id+")"),e},basicFocusOut:function(e,t){return o.debug("stdnav.basicFocusOut("+e.nodeName+"#"+e.id+")"),null},basicMouseDown:function(e,t){var n=this.runAction("fixfocus",e);return this.nullOrUndefined(n)?o.debug("stdnav.basicClick: "+e.nodeName+"#"+e.id+" has no navigable ancestor, ignoring"):(o.debug("stdnav.basicClick("+e.nodeName+"#"+e.id+") refocusing to "+n.nodeName+"#"+n.id),this.nullOrUndefined(n)||this.forceFocus(n)),!0},basicMouseUp:function(e,t){return!0},basicSuperfocusIn:function(e,t){o.debug("stdnav.basicSuperfocusIn("+e.nodeName+"#"+e.id+")");var n=null;if("focusSelector"in t){var r=":input,fieldset,"+t.focusSelector+'[js-navigable!="false"]',a=null;"barrier"in t&&(a=t.barrier);var s=this._maxNavDepth;"maxdepth"in t&&(s=t.maxdepth),"ghostfocus"in t&&t.ghostfocus===!0&&(n=this.closestDescendant(e,r+" .ghostfocus",a,s),i(n).removeClass("ghostfocus")),null==n&&(n=this.closestDescendant(e,r,a,s))}return null==n&&(n=e),n},basicSuperfocusOut:function(e,t){return o.debug("stdnav.basicSuperfocusOut("+e.nodeName+"#"+e.id+")"),"ghostfocus"in t&&t.ghostfocus===!0&&this._priorFocus&&i(this._priorFocus).addClass("ghostfocus"),null},basicSubfocusIn:function(e,t){return o.debug("stdnav.basicSubfocusIn("+e.nodeName+"#"+e.id+")"),null},basicSubfocusOut:function(e,t){return o.debug("stdnav.basicSubfocusOut("+e.nodeName+"#"+e.id+")"),null},basicEnter:function(e,t){o.debug("stdnav.basicEnter("+e.nodeName+"#"+e.id+")");var n=this.closestNavigableDescendant(e);return void 0!==n&&this.runAction("entered",n),e},basicExit:function(e,t){o.debug("stdnav.basicExit("+e.nodeName+"#"+e.id+")");var n=this.closestNavigableAncestor(i(".superfocus"));return n||(n=i("#mainNavigation")),void 0!==n&&this.runAction("rejoined",n[0]),n[0]},basicEntered:function(e,t){o.debug("stdnav.basicEntered("+e.nodeName+"#"+e.id+")")},basicRejoined:function(e,t){o.debug("stdnav.basicRejoined("+e.nodeName+"#"+e.id+")")},_onKeydown:function(e){e.target;if(0!==i(".subfocus").length){var t=i(".subfocus")[0],n=!1,r=i(t).prop("nodeName");if(!(i(t).is(":input")||i.inArray(r,["INPUT","SELECT","OBJECT","TEXTAREA"])>-1)||"BUTTON"==r||27==e.keyCode){for(var a=i(t).parents(),s=0;s<a.length;s++)if(!this.nullOrUndefined(i(a[s]).attr("js-stdnav"))){n="true"==i(a[s]).attr("js-stdnav")?!0:!1;break}if(!n)return void o.warn("StdNav is disabled in this subdom, aborting action");var u;switch(e.keyCode){case 13:u="enter";break;case 27:u="exit";break;case 32:u="toggle";break;case 33:u="pageup";break;case 34:u="pagedown";break;case 35:u="end";break;case 36:u="home";break;case 37:u="left";break;case 38:u="up";break;case 39:u="right";break;case 40:u="down";break;case 91:u="structleft";break;case 93:u="structright"}if(!this.nullOrUndefined(u)){var l=this.runAction(u,t);this.nullOrUndefined(l)||(e.stopPropagation(),e.preventDefault(),this.forceFocus(l))}}}}});var u=new s;return u});var dialogs={};dialogs.systemConfirm={container:null,message:null,show:function(e,t,n){if(window.isEmbeddedDesigner)n&&(e='<span class="warning">'+e+"</span>"),jQuery(document).trigger("adhocDesigner:notification",[e,t]);else{if(this.container=this.container||jQuery("#systemMessageConsole").on("mouseup touchend",function(){dialogs.systemConfirm.container.slideUp()}),this.message=this.message||document.getElementById("systemMessage"),!this.message)return void console.warn(e);this.closeText||(this.closeText=this.message.innerHTML.toLowerCase()),e=xssUtil.escape(e)+' <span>| <a href="#">'+xssUtil.escape(this.closeText)+"</a></span>",n?this.message.innerHTML='<span class="warning">'+e+"</span>":this.message.innerHTML=e,dialogs.systemConfirm.container.slideDown(),setTimeout("dialogs.systemConfirm.hide()",t?t:2e3)}},showWarning:function(e,t){this.show(e,t,!0)},hide:function(){dialogs.systemConfirm.container&&dialogs.systemConfirm.container.slideUp()}},jQuery(document).on("systemDialogWarn",function(e,t,n){dialogs.systemConfirm.showWarning(t,n)}),dialogs.errorPopup={_dom:null,_content:null,_DOM_ID:"standardAlert",_CONTENT_ID:"errorPopupContents",_PAGE_CONTENT_PATTERN:"#errorPageContent",_DIALOG_WIDTH:"546px",_DIALOG_HEIGHT:"350px",clickHandler:null,show:function(e,t,n){n||(n={});var i=Builder.node("DIV",{style:"display:none"});i.innerHTML=xssUtil.escape(e,{softHTMLEscape:!0}),document.body.insertBefore(i,document.body.firstChild);var r=$$(this._PAGE_CONTENT_PATTERN)[0],o=r?r.innerHTML:e,a=r&&r.innerHTML;if(i.remove(),o&&(this._dom||(this._dom=$(this._DOM_ID),this._content=$(this._CONTENT_ID),this.clickHandler=this._clickHandler.bindAsEventListener(this)),this._dom)){var s=o;a||(s=Builder.node("P",{"class":"message"}),s.update(xssUtil.escape(o,{softHTMLEscape:!0}))),this._content.update(xssUtil.escape(s,{softHTMLEscape:!0})),this._dom.observe("click",this.clickHandler),this._dom.setStyle({height:n.height||this._DIALOG_HEIGHT,width:n.width||this._DIALOG_WIDTH}),t&&this._dom.addClassName(layoutModule.STACKTRACE_CLASS),dialogs.popup.show(this._dom,t);var u=document.getElementById("completeStackTrace");u&&isIPad()&&new TouchController(u,u.parentNode,{noInit3d:!0})}},_hide:function(){this._dom&&(this._dom.stopObserving("click",this.clickHandler),dialogs.popup.hide(this._dom))},_clickHandler:function(e){var t=e.element();matchAny(t,["button"],!0)&&this._hide()}},dialogs.clusterErrorPopup=_.extend({},dialogs.errorPopup,{show:function(e){var t=this;require(["bundle!jasperserver_messages","bundle!jsexceptions_messages"],function(e,n){var i=n["cluster.exception.session.attribute.missing.popup"];dialogs.errorPopup.show.call(t,i);var r=e["button.home"];jQuery("#"+t._DOM_ID).find("button span.wrap").html(r)})},_hide:function(e){dialogs.errorPopup._hide.apply(this,arguments),window.location="home.html"}}),dialogs.popup={OWNER_ATTR:"data-owner",show:function(e,t,n){require(["stdnav","jquery"],function(i,r){if(n=n||{},e=$(e)){"message"in n&&r(e).find(".body").text(xssUtil.unescape(n.message)),t&&(pageDimmer.show(),e.match(layoutModule.DIALOG_LOADING_PATTERN)&&pageDimmer.setZindex(e.getStyle("zIndex")-1)),reParent(e,document.body),e.setOpacity(0),e.removeClassName(layoutModule.HIDDEN_CLASS),layoutModule.createSizer.call(layoutModule,e),n.cascade?cascadeElement(e,{position:n.position,number:n.number,horzOffset:40,vertOffset:40}):centerElement(e,{horz:!0,vert:!0}),dialogs.popup._setHigherZIndex(e),layoutModule.createMover.call(layoutModule,e),isIPad()?e.setOpacity(1)&&e.show():appear(e,.4),r(document.activeElement).addClass("preDialogFocus");var o=e;e&&r(".primary",e).length>0&&(o=r(".primary",e)[0]),(!n||"undefined"==typeof n.focus||n.focus)&&(e.tabIndex=0,o.tabIndex=0,o.focus()),!t&&e.observe("click",dialogs.popup.zIndexHandler),i.beginModalFocus(e)}})},hide:function(e){require(["stdnav","jquery"],function(t,n){t.endModalFocus(e);var i=n(".preDialogFocus");i.length&&i.is(":visible")&&(i[0].focus(),i.removeClass("preDialogFocus")),e&&($elem=$(e),$elem.hasClassName(layoutModule.HIDDEN_CLASS)||($elem.addClassName(layoutModule.HIDDEN_CLASS),pageDimmer.hide(),$elem.match(layoutModule.DIALOG_LOADING_PATTERN)&&pageDimmer.setZindex(layoutModule.DIMMER_Z_INDEX)),$elem.stopObserving("click",dialogs.popup.zIndexHandler))})},showShared:function(e,t,n){e&&($elem=$(e),n=n||{},n.owner&&($elem.writeAttribute(this.OWNER_ATTR,n.owner),$elem.hasClassName(layoutModule.HIDDEN_CLASS)&&this.show($elem,t,n)))},hideShared:function(e,t){if(e){$elem=$(e);var n=$elem.readAttribute(this.OWNER_ATTR);n==t&&($elem.writeAttribute(this.OWNER_ATTR,!1),this.hide($elem))}},zIndexHandler:function(e){var t=Event.element(e),n=matchMeOrUp(t,layoutModule.DIALOG_PATTERN);n&&dialogs.popup._setHigherZIndex(n)},_setHigherZIndex:function(e,t){var n,i,r,o=0,a=0;e&&(r=e.getStyle("zIndex"),t&&(o=t.getStyle("zIndex")),n=document.body.select(layoutModule.DIALOG_PATTERN),n=n.filter(function(t){return t.visible()?t.match(layoutModule.DIALOG_LOADING_PATTERN)?!1:t===e?!1:!0:!1}),n.each(function(e){a=Math.max(a,e.getStyle("zIndex"))}),i=Math.max(o,r,a,layoutModule.DIMMER_Z_INDEX),e.setStyle({zIndex:i}),n.each(function(e){var t=e.getStyle("zIndex");t>=i&&e.setStyle({zIndex:i-1})}))}},dialogs.popupConfirm=_.extend({},dialogs.popup,{show:function(e,t,n){dialogs.popup.show.apply(this,arguments),n=_.extend({okButtonSelector:"button.ok",cancelButtonSelector:"button.cancel"},n);var i=jQuery(e),r=i.find(n.okButtonSelector),o=i.find(n.cancelButtonSelector),a=jQuery.Deferred();return r.on("click",function(){n.validateFunc&&n.validateFunc()===!1||(r.off("click"),o.off("click"),dialogs.popupConfirm.hide(e),a.resolve())}),o.on("click",function(){r.off("click"),o.off("click"),dialogs.popupConfirm.hide(e),a.reject()}),a}}),dialogs.childPopup=_.extend({},dialogs.popup,{cascadePopups:{},show:function(e,t,n,i){n?(i=_.extend({parent:n},i),this.cascadePopups[n.id]||(this.cascadePopups[n.id]=[]),this.cascadePopups[n.id].push(e.id),$(e).setAttribute("data-parentDialog",n.id),dialogs.popup.show.apply(this,[e,t,i]),dialogs.popup._setHigherZIndex(e,n),t&&pageDimmer.setZindex(e.getStyle("zIndex")-1),n.stopObserving("click",dialogs.popup.zIndexHandler)):dialogs.popup.show.apply(this,[e,t,i])},hide:function(e){var t=$(e).getAttribute("data-parentDialog");if(t){this.cascadePopups[t]&&(this.cascadePopups[t]=_.without(this.cascadePopups[t],e.id)),dialogs.popup.hide.apply(this,[e]);var n=$(t);pageDimmer.show(n),dialogs.popup._setHigherZIndex(n)}else dialogs.popup.hide.apply(this,[e])}}),define("components.dialogs",["jquery","prototype","underscore","utils.common","utils.animation","core.layout"],function(e){return function(){var t;return t||e.dialogs}}(this)),define("domReady",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](l)}function t(){var t=c;u&&t.length&&(c=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function i(e){return u?e(l):c.push(e),i}var r,o,a,s="undefined"!=typeof window&&window.document,u=!s,l=s?document:null,c=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{r=null===window.frameElement}catch(d){}o.doScroll&&r&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(e,t,n,r){r.isBuild?n(null):i(n)},i}),define("commons.bare.main",["require","components.dialogs","prototype","!domReady"],function(e){"use strict";e("components.dialogs"),e("prototype"),e("!domReady")}),define("touchcontroller",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=function(e,n,i){if(this.element=e,this.parent=n,this.children=[],this.hbar=null,this.vbar=null,i=i||{},i.absolute?this.element.style.position="absolute":this.element.style.position="relative",this.useParent=i.useParent?this.observer=n:this.observer=e,this.translate3d=i.translate3d!==!1?!0:!1,this.forceLayout=i.forceLayout!==!0?!1:!0,this.use2Fingers=i.use2Fingers!==!0?!1:!0,this.fit=i.fit,i.debug&&(n.style.border="solid 1px #f00",e.style.border="solid 1px #00f"),this.translate3d&&!i.noInit3d){var r=t(e).position();e.style.webkitTransform="translate3d("+r.left+"px,"+r.top+"px,0)",e.style.top="",e.style.left=""}if(i.scrollbars===!0){var o=t('<div style="position:absolute;bottom:4px;left:0;right:0;"><div style="position:relative;background:#3fb8fa;min-height:4px;width:24px;opacity:0.4;"></div></div>').appendTo(n),a=t('<div style="position:absolute;top:0;bottom:0;right:4px;"><div style="position:relative;background:#3fb8fa;min-width:4px;height:24px;opacity:0.4;"></div></div>').appendTo(n);this.hbar=o.children().eq(0),this.vbar=a.children().eq(0)}this.computeBoundaries(),this.dragging=!1,this.drag_sensitivity=20,this.scale=1,this.element.style.top=0,this.element.style.left=0,this.maxX=0,this.maxY=0,this.startTouchY=0,this.startTouchX=0,this.contentOffsetX=0,this.contentOffsetY=0,this.observer.addEventListener("touchstart",this,!1),this.observer.addEventListener("touchmove",this,!1),this.observer.addEventListener("touchend",this,!1)};return n.prototype.handleEvent=function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},n.prototype.computeBoundaries=function(){this.maxX=this.parent.clientWidth-this.element.clientWidth,this.maxY=this.parent.clientHeight-this.element.clientHeight,this.maxX=this.maxX<0?this.maxX:0,this.maxY=this.maxY<0?this.maxY:0,this.hbar&&0!==this.maxX?(this.hratio=this.parent.clientWidth/this.element.clientWidth,this.hbar.width(this.hratio*this.parent.clientWidth),this.hbar.show()):this.hbar&&this.hbar.hide(),this.vbar&&0!==this.maxY?(this.vratio=this.parent.clientHeight/this.element.clientHeight,this.vbar.height(this.vratio*this.parent.clientHeight),this.vbar.show()):this.vbar&&this.vbar.hide(),0===this.maxX&&0===this.maxY&&(this.element.style.minWidth=this.parent.clientWidth+"px",this.element.style.minHeight=this.parent.clientHeight+"px","reportContainer"===this.element.id&&(this.element.style.maxWidth=this.parent.clientWidth+"px",this.element.style.maxHeight=this.parent.clientHeight+"px"))},n.prototype.onTouchStart=function(e){this.scale_pre=!1,this.computeBoundaries(),this.startTouchX=e.touches[0].clientX,this.startTouchY=e.touches[0].clientY,this.contentStartOffsetX=this.contentOffsetX,this.contentStartOffsetY=this.contentOffsetY},n.prototype.onTouchMove=function(e){var t=e.touches[0].clientY,i=e.touches[0].clientX;(!this.use2Fingers||this.use2Fingers&&2==e.touches.length)&&(this.dragging?this.animateTo(i,t):this.isDragging(e)&&(n.element_scrolled=!0,this.forceLayout&&(this.element.style.top=0,this.element.style.webkitTransform="translate3d(0,"+this.contentOffsetY+"px,0)"),this.animateTo(i,t)))},n.prototype.onTouchEnd=function(e){this.dragging&&(this.forceLayout&&(this.element.style.webkitTransform="translate3d(0,0,0)",this.element.style.top=this.contentOffsetY+"px"),this.hbar&&this.hbar.hide(),this.vbar&&this.vbar.hide(),e.preventDefault(),this.shouldStartMomentum()),this.dragging=!1},n.prototype.animateTo=function(e,n){var i=e-this.startTouchX,r=n-this.startTouchY,o=i+this.contentStartOffsetX,a=r+this.contentStartOffsetY,s=t(this.element).position();this.translate3d?(o>0&&(o=0),a>0&&(a=0),o<this.maxX&&(o=this.maxX),a<this.maxY&&(a=this.maxY)):(o+s.left>0&&(o=-1*s.left),a+s.top>0&&(a=-1*s.top),s.left+o<this.maxX&&(o=this.maxX-s.left),s.top+a<this.maxY&&(a=this.maxY-s.top)),this.contentOffsetX=o,this.contentOffsetY=a,this.translate3d||this.use2Fingers?this.element.style.webkitTransform="scale("+this.scale+") translate3d("+o+"px,"+a+"px, 0)":(this.element.style.top=s.top+a+"px",
this.element.style.left=s.left+o+"px"),this.hbar&&this.hbar.css("left",-1*o*this.hratio+"px"),this.vbar&&this.vbar.css("top",-1*a*this.vratio+"px")},n.prototype.isDragging=function(e){var t=e.touches[0].clientX-this.startTouchX,n=e.touches[0].clientY-this.startTouchY,i=Math.abs(t),r=Math.abs(n);return this.dragging=i>this.drag_sensitivity||r>this.drag_sensitivity?!0:!1,this.dragging},n.prototype.shouldStartMomentum=function(){return!1},n.prototype.reset=function(){var e=this.contentOffsetX,t=this.contentOffsetY;this.maxX=this.parent.clientWidth-this.element.clientWidth,this.maxY=this.parent.clientHeight-this.element.clientHeight,this.translate3d?(this.element.style.webkitTransform="scale("+this.scale+") translate3d("+e+"px,"+t+"px, 0)",this.element.style.webkitTransform="scale("+this.scale+") translate3d(0,0,0)",this.contentOffsetX=0,this.contentOffsetY=0):(this.element.style.top=0,this.element.style.left=0)},n.prototype.forceRefresh=function(){},n.prototype.isBottom=function(){return this.maxY>=0?!1:this.contentOffsetY-this.maxY<10},n.prototype.addPadding=function(e,n){var i=t("#"+e),r=i.width()+n.right,o=i.height()+n.bottom;this.element.style.width=r+"px",this.element.style.height=o+"px"},window.TouchController=n,n}),JSTooltip.addVar("SEPARATOR","@@"),JSTooltip.addVar("TOOLTIP_LABEL","tooltiplabel"),JSTooltip.addVar("TOOLTIP_TEXT","tooltiptext"),JSTooltip.addVar("TOOLTIP_TEMPLATE","tooltiptemplate"),JSTooltip.addVar("TOOLTIP_TEMPLATE_ID","jsTooltip"),JSTooltip.addVar("LABEL_PATTERN",".message.label"),JSTooltip.addVar("TEXT_PATTERN",".message:not(.label)"),JSTooltip.addMethod("_toAttribute",function(e,t){this.srcElement&&(t=xssUtil.escape(t),this.srcElement.writeAttribute(e,isArray(t)?t.join(this.SEPARATOR):t))}),JSTooltip.addMethod("_fromAttribute",function(e){if(this.srcElement&&this.srcElement.hasAttribute(e)){var t=this.srcElement.readAttribute(e);return t.include(this.SEPARATOR)?t.split(this.SEPARATOR):t}return null}),JSTooltip.addMethod("_setValues",function(e,t){e.each(function(e,n){t[n]&&e.update(xssUtil.escape(t[n]))})}),JSTooltip.addMethod("_calculateZIndex",function(e){function t(e){return parseInt(jQuery(e).css("z-index"))}var n=t(e);(!_.isNumber(n)||_.isNaN(n))&&(n=1e3);var i=_.flatten([this.srcElement,jQuery(this.srcElement).parents().toArray()]),r=_.reduce(i,function(e,n){var i=t(n);return _.isNumber(i)&&!_.isNaN(i)&&(e=Math.max(e,i)),e},n);return r+1}),JSTooltip.addMethod("_escapeText",function(e){return _.isArray(e)?_.map(e,function(e){return xssUtil.escape(e)}):xssUtil.escape(e)}),JSTooltip.addMethod("show",function(e){e&&(this.offsets=e),this._element=$(this.templateId);var e;this.showBelow?(e=getBoxOffsets(this.srcElement),e[1]+=this.srcElement.clientHeight+5):e=[getScrollLeft()+5,getScrollTop()+5],this.offsets&&(e[0]+=this.offsets[0],e[1]+=this.offsets[1]),this._element.setStyle({position:"absolute",left:e[0]+"px",top:e[1]+"px",zIndex:this._calculateZIndex(this._element)});var t=this._element.select(this.LABEL_PATTERN),n=this._element.select(this.TEXT_PATTERN);if(this.label&&this._setValues(t,isArray(this.label)?this.label:[this.label]),this.text&&this._setValues(n,isArray(this.text)?this.text:[this.text]),this._element.removeClassName(layoutModule.HIDDEN_CLASS),e[0]+this._element.clientWidth>jQuery(window).width()){var i=e[0]-this._element.clientWidth>0?e[0]-this._element.clientWidth:15;this._element.setStyle({left:i+"px"})}if(e[1]+this._element.clientHeight>jQuery(window).height()){var r=e[1]-this._element.clientHeight-10;this._element.setStyle({top:r+"px"})}return this.loadTextCallback&&!this.loadTextExecuted&&(this.loadTextExecuted=!0,this.loadTextCallback(this)),this}),JSTooltip.addMethod("updateText",function(e){this.text=this._escapeText(e),this.show()}),JSTooltip.addMethod("hide",function(){this._element&&this._element.addClassName(layoutModule.HIDDEN_CLASS)}),JSTooltip.addMethod("disable",function(){tooltipModule.hideJSTooltip(this.srcElement),this.disabled=!0}),JSTooltip.addMethod("enable",function(){this.disabled=!1,tooltipModule.showJSTooltip(this.srcElement,this.offsets)}),JSTooltip.addMethod("remove",function(){var e=tooltipModule.tooltips.indexOf(this.srcElement.jsTooltip);-1!==e&&(tooltipModule.hideJSTooltip(this.srcElement),tooltipModule.tooltips.splice(e,1)),this.removed=!0}),JSTooltip.addMethod("isRemoved",function(){return this.removed});var tooltipModule={TOOLTIP_PATTERN:"*[tooltiptext] > *",ELEMENT_WITH_TOOLTIP_PATTERN:"*[tooltiptext]",actualX:0,actualY:0,tooltips:[],showJSTooltip:function(e,t){if(e.jsTooltip){if(!e.jsTooltip.disabled){this.actualX=t[0],this.actualY=t[1],this.cleanUp();var n=jQuery(e).attr("tooltipappeardelay");n=n?parseInt(n):1e3,e.jsTooltip.timer&&clearTimeout(e.jsTooltip.timer),e.jsTooltip.timer=setTimeout(function(){e.jsTooltip.show([tooltipModule.actualX,tooltipModule.actualY])},n),jQuery(e).on("mousemove",function(e){tooltipModule.actualX=e.clientX,tooltipModule.actualY=e.clientY})}}else e.jsTooltip=new JSTooltip(e,{})},hideJSTooltip:function(e){e&&e.jsTooltip&&(e.jsTooltip.timer&&clearTimeout(e.jsTooltip.timer),e.jsTooltip.hide(),jQuery(e).off("mousemove"))},cleanUp:function(){if(this.tooltips&&this.tooltips.length>0){var e=[],t="fuigasuifdughaiadbvguaidbapvuwbev";this.tooltips.each(function(n){n.srcElement.id&&document.getElementById(n.srcElement.id)||(n.srcElement.setAttribute("id",t),document.getElementById(t)||(n.hide(),e.push(n)),n.srcElement.setAttribute("id",null))}),e.length>0&&(this.tooltips=this.tooltips.reject(function(t){return e.include(t)}))}}};define("components.tooltip",["jquery","prototype","underscore","utils.common","core.layout"],function(e){return function(){var t;return t||e.JSTooltip}}(this)),document.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(e){var t=e.memo.targetEvent.element();if(!isSupportsTouch()||!event.treeEvent&&!event.listEvent){var n=matchMeOrUp(t,layoutModule.LIST_ITEM_PATTERN);n&&!t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(n,function(e){return $(e).down(layoutModule.LIST_ITEM_WRAP_PATTERN)}),t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(t)}});var buttonManager={over:function(e,t){if(e&&!this.isSelected(e)){var n=t?t(e):e;$(n).addClassName(layoutModule.HOVERED_CLASS)}},out:function(e,t){if(e){var n=t?t(e):e;$(n).removeClassName(layoutModule.HOVERED_CLASS).removeClassName(layoutModule.PRESSED_CLASS)}},down:function(e,t){if(e&&!this.isSelected(e)){var n=t?t(e):e;$(n).removeClassName(layoutModule.HOVERED_CLASS).addClassName(layoutModule.PRESSED_CLASS)}},up:function(e,t){if(e&&!this.isSelected(e)){var n=t?t(e):e;n=$(n),n.removeClassName(layoutModule.PRESSED_CLASS),!isIPad()&&n.addClassName(layoutModule.HOVERED_CLASS)}},disable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,layoutModule.DISABLED_ATTR_NAME))},enable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,null))},isDisabled:function(e){return e?$(e).readAttribute(layoutModule.DISABLED_ATTR_NAME)===layoutModule.DISABLED_ATTR_NAME||$(e).hasClassName(layoutModule.DISABLED_CLASS):void 0},unSelect:function(e){e&&$(e).removeClassName(layoutModule.SELECTED_CLASS)},select:function(e){e&&$(e).addClassName(layoutModule.SELECTED_CLASS)},isSelected:function(e,t){if(e){var n=t?t(e):$(e),i=n.up("li");return i&&i.hasClassName(layoutModule.SELECTED_CLASS)}return!1}};document.observe("mouseup",function(e){if(isRightClick(e)){var t=e.element();document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:e,node:t})}}),document.observe("contextmenu",function(e){return Event.stop(e),!1}),document.observe("dom:loaded",function(e){isIE()&&document.body.setAttribute("oncontextmenu","return false"),jQuery("body").on("mouseover",layoutModule.BUTTON_PATTERN,function(e){hasDisabledAttributeSet(this)||buttonManager.over(this)}),jQuery("body").on("mouseout",layoutModule.BUTTON_PATTERN,function(e){buttonManager.out(this)}),jQuery("body").on("focus",layoutModule.BUTTON_PATTERN,function(e){hasDisabledAttributeSet(this)||buttonManager.over(this)}),jQuery("body").on("blur",layoutModule.BUTTON_PATTERN+"."+layoutModule.HOVERED_CLASS,function(e){hasDisabledAttributeSet(this)||buttonManager.out(this)}),jQuery("body").on("mousedown mouseup touchstart touchend",[layoutModule.BUTTON_PATTERN,layoutModule.MENU_LIST_PATTERN,layoutModule.DISCLOSURE_BUTTON_PATTERN,layoutModule.META_LINKS_PATTERN].join(","),function(e){"mousedown"==e.type||"touchstart"==e.type?!hasDisabledAttributeSet(this)&&buttonManager.down(this):!hasDisabledAttributeSet(this)&&buttonManager.up(this),("mouseup"==e.type||"touchend"==e.type)&&(this.parentNode.id==layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID&&primaryNavModule.navigationOption("home"),this.parentNode.id==layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID&&primaryNavModule.navigationOption("library"))}),jQuery("#frame").on("touchend mouseup",".minimize",function(e){this.parentNode.className.indexOf("maximized")>=0?layoutModule.minimize(this):layoutModule.maximize(this),e.preventDefault()}),jQuery("#frame").on("touchend mouseup",layoutModule.TABSET_TAB_PATTERN,function(e){if(!hasDisabledAttributeSet(this)&&"true"!==jQuery(this.parentNode).attr("disableCoreEvents")){jQuery(this).siblings().removeClass(layoutModule.SELECTED_CLASS).each(function(e,t){jQuery(jQuery(this).attr("tabId")).addClass("hidden")}),jQuery(this).addClass(layoutModule.SELECTED_CLASS),jQuery(jQuery(this).attr("tabId")).removeClass("hidden");var t=jQuery(this).closest(".tabs").find(".control.tabSet.anchor");"#attributesTab"===jQuery(this).attr("tabId")?t.addClass("attributesAnchor"):t.removeClass("attributesAnchor")}}),jQuery("#"+layoutModule.META_LINK_LOGOUT_ID).on("mousedown touchstart",function(e){e.preventDefault(),primaryNavModule.navigationOption("logOut")}),jQuery("body").on("mouseover mouseout click","[tooltiptext]",function(e){("mouseout"==e.type||"click"==e.type)&&tooltipModule.hideJSTooltip(this),"mouseover"==e.type&&tooltipModule.showJSTooltip(this,[e.clientX,e.clientY])}),jQuery("#mainNavigation").on("mouseover",layoutModule.NAVIGATION_MUTTON_PATTERN,function(e){primaryNavModule.showNavButtonMenu(e,this)}),isSupportsTouch()&&(document.body.addEventListener("touchstart",function(e){window.calendar&&window.calendar.hide&&!window.calendar.hidden&&window.calendar.hide(),"undefined"!=typeof TouchController&&(TouchController.element_scrolled=!1)},!1),document.body.addEventListener("touchmove",function(e){},!1)),jQuery("#filePath").on("mouseenter mouseout",function(){jQuery("#fake_upload_button").toggleClass("over")})}),define("core.events.bis",["jquery","prototype","utils.common","core.layout","components.tooltip"],function(e){return function(){var t;return t||e.buttonManager}}(this));var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(e){e=e.toUpperCase();var t=this.NODEMAP[e]||"div",n=document.createElement(t);try{n.innerHTML="<"+e+"></"+e+">"}catch(i){}var r=n.firstChild||null;if(r&&r.tagName.toUpperCase()!=e&&(r=r.getElementsByTagName(e)[0]),r||(r=document.createElement(e)),r){if(arguments[1])if(this._isStringOrNumber(arguments[1])||arguments[1]instanceof Array||arguments[1].tagName)this._children(r,arguments[1]);else{var o=this._attributes(arguments[1]);if(o.length){try{n.innerHTML="<"+e+" "+o+"></"+e+">"}catch(i){}if(r=n.firstChild||null,!r){r=document.createElement(e);for(attr in arguments[1])r["class"==attr?"className":attr]=arguments[1][attr]}r.tagName.toUpperCase()!=e&&(r=n.getElementsByTagName(e)[0])}}return arguments[2]&&this._children(r,arguments[2]),$(r)}},_text:function(e){return document.createTextNode(e)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(e){var t=[];for(attribute in e)t.push((attribute in this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'="'+e[attribute].toString().escapeHTML().gsub(/"/,"&quot;")+'"');return t.join(" ")},_children:function(e,t){return t.tagName?void e.appendChild(t):void("object"==typeof t?t.flatten().each(function(t){"object"==typeof t?e.appendChild(t):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t))}):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t)))},_isStringOrNumber:function(e){return"string"==typeof e||"number"==typeof e},build:function(e){var t=this.node("div");return $(t).update(e.strip()),t.down()},dump:function(e){"object"!=typeof e&&"function"!=typeof e&&(e=window);var t="A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR".split(/\s+/);t.each(function(t){e[t]=function(){return Builder.node.apply(Builder,[t].concat($A(arguments)))}})}};define("builder",["prototype"],function(e){return function(){var t;return t||e.Builder}}(this)),jQuery.noConflict();var JRS={vars:{element_scrolled:!1,ajax_in_progress:!1,current_flow:null,contextPath:__jrsConfigs__.contextPath},i18n:{}},Calendar={};if("undefined"==typeof isEncryptionOn)var isEncryptionOn=!1;var jaspersoft={components:{},i18n:{}};"undefined"==typeof JRS&&(JRS={Mocks:{}}),"undefined"==typeof JRS.vars&&(JRS.vars={element_scrolled:!1,ajax_in_progress:!1,current_flow:null}),"undefined"==typeof JRS.Export&&(JRS.Export={i18n:{"file.name.empty":"export.file.name.empty","file.name.too.long":"export.file.name.too.long","file.name.not.valid":"export.file.name.not.valid","export.select.users":"export.select.users","export.select.roles":"export.select.roles","export.session.expired":"export.session.expired","error.timeout":"export.file.name.empty"},configs:{TIMEOUT:12e5,DELAY:3e3}}),"undefined"==typeof localContext&&(localContext={}),__jrsConfigs__.calendar&&(JRS.i18n.bundledCalendarFormat=__jrsConfigs__.calendar.i18n.bundledCalendarFormat,JRS.i18n.bundledCalendarTimeFormat=__jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat),define("namespace",function(e){return function(){var t;return t||e.jaspersoft}}(this));var ajax={};ajax.cancelRequestsBefore,ajax.LOADING_ID="loading",AjaxRequester.addVar("CUMULATIVE_UPDATE","c").addVar("ROW_COPY_UPDATE","r").addVar("TARGETTED_REPLACE_UPDATE","t").addVar("EVAL_JSON","j").addVar("DUMMY_POST_PARAM","dummyPostData").addVar("MAX_WAIT_TIME",2e3).addVar("errorHandler",function(){return!1}).addMethod("doGet",function(){return this.xmlhttp?(this.xmlhttp.open("GET",this.url,this.async),this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xmlhttp.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),this.xmlhttp.setRequestHeader("x-requested-with","AJAXRequest"),this.xmlhttp.send(null),!0):!1}).addMethod("doPost",function(){return this.xmlhttp?(this.postData===AjaxRequester.prototype.DUMMY_POST_PARAM&&(this.postData=null),this.xmlhttp.open("POST",this.url,this.async),this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xmlhttp.setRequestHeader("x-requested-with","AJAXRequest"),this.xmlhttp.send(this.postData),!0):!1}).addMethod("processResponse",function(e){return function(){if(4==e.xmlhttp.readyState){if(ajax.cancelRequestsBefore&&ajax.cancelRequestsBefore>e.requestTime)return void ajaxRequestEnded(e);handleResponse(e)}}}).addMethod("setErrorHandler",function(e){this.errorHandler=errorHandler}).addMethod("verifyAjaxResponse",function(){return this.xmlhttp.getResponseHeader("Server")||this.confirmContinue()}).addMethod("startResponseTimer",function(){this.responseTimer=window.setTimeout(function(){dialogs.popup.show($(ajax.LOADING_ID),!0)},this.MAX_WAIT_TIME)}).addMethod("cancelResponseTimer",function(){window.clearTimeout(this.responseTimer)}).addMethod("confirmContinue",function(){return confirm(serverIsNotResponding)});var clobberingResponseHandler=function(e){var t=e.params[2];document.body.innerHTML=xssUtil.escape(e.xmlhttp.responseText,{softHTMLEscape:!0}),document.fire("dom:loaded"),invokeCallbacks(t)},evalJSONResponseHandler=function(e){var t=null;try{t=e.xmlhttp.responseText.evalJSON()}catch(n){window.console&&console.log(n)}var i=e.params[2];invokeCallbacks(i,t)},ERROR_POPUP_DIV="jsErrorPopup",ERROR_POPUP_CONTENTS="errorPopupContents",ERROR_POPUP_BACK_BUTTON="errorBack",ERROR_POPUP_CLOSE_BUTTON="errorPopupCloseButton";ajax.ajaxRequestCount=0,define("core.ajax",["jquery","prototype","utils.common","builder","namespace"],function(e){return function(){var t;return t||e.ajax}}(this)),jQuery.url=function(e){function t(e){for(var t="",n=0,i=0,r=0;n<e.length;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return t}function n(t,n){var i={},r={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,o){var s,u=o.split("="),l=a(u[0]),c=i,d=0,p=l.split("]["),f=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[f])?(p[f]=p[f].replace(/\]$/,""),p=p.shift().split("[").concat(p),f=p.length-1):f=0,2===u.length)if(s=a(u[1]),n&&(s=s&&!isNaN(s)?+s:"undefined"===s?void 0:void 0!==r[s]?r[s]:s),f)for(;f>=d;d++)l=""===p[d]?c.length:p[d],c=c[l]=f>d?c[l]||(p[d+1]&&isNaN(p[d+1])?{}:[]):s;else e.isArray(i[l])?i[l].push(s):void 0!==i[l]?i[l]=[i[l],s]:i[l]=s;else l&&(i[l]=n?void 0:"")}),i}function i(e){e=e||window.location;for(var t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r=t.exec(e),o={},a=i.length;a--;)o[i[a]]=r[a]||"";return o.query&&(o.params=n(o.query,!1)),o}function r(t){if(t.source)return encodeURI(t.source);var n=[];return t.protocol&&("file"==t.protocol?n.push("file:///"):"mailto"==t.protocol?n.push("mailto:"):n.push(t.protocol+"://")),t.authority?n.push(t.authority):(t.userInfo?n.push(t.userInfo+"@"):t.user&&(n.push(t.user),t.password&&n.push(":"+t.password),n.push("@")),t.host&&(n.push(t.host),t.port&&n.push(":"+t.port))),t.path?n.push(t.path):(t.directory&&n.push(t.directory),t.file&&n.push(t.file)),t.query?n.push("?"+t.query):t.params&&n.push("?"+e.param(t.params)),t.anchor&&n.push("#"+t.anchor),n.join("")}function o(e){return encodeURIComponent(e)}function a(e){return t(unescape(e.replace(/\+/g," ")))}return{encode:o,decode:a,parse:i,build:r}}(jQuery),define("jquery.urldecoder",["jquery"],function(e){return function(){var t;return t||e.jQuery}}(this));var Mustache=function(){function e(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return a[e]||e})}var t=Object.prototype.toString;Array.isArray=Array.isArray||function(e){return"[object Array]"==t.call(e)};var n,i=String.prototype.trim;if(i)n=function(e){return null==e?"":i.call(e)};else{var r,o;/\S/.test("\xa0")?(r=/^[\s\xA0]+/,o=/[\s\xA0]+$/):(r=/^\s+/,o=/\s+$/),n=function(e){return null==e?"":e.toString().replace(r,"").replace(o,"")}}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s={},u=function(){};return u.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,i){if(i||(this.context=t,this.buffer=[]),!this.includes("",e))return i?e:void this.send(e);e=this.render_pragmas(e);var r=this.render_section(e,t,n);return r===!1&&(r=this.render_tags(e,t,n,i)),i?r:void this.sendLines(r)},send:function(e){""!==e&&this.buffer.push(e)},sendLines:function(e){if(e)for(var t=e.split("\n"),n=0;n<t.length;n++)this.send(t[n])},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(n,function(e,n,i){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};if(t.pragmas[n]={},i){var r=i.split("=");t.pragmas[n][r[0]]=r[1]}return""})},render_partial:function(e,t,i){if(e=n(e),!i||void 0===i[e])throw{message:"unknown_partial '"+e+"'"};return t&&"object"==typeof t[e]?this.render(i[e],t[e],i,!0):this.render(i[e],t,i,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var i=this,r=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")});return e.replace(r,function(e,r,o,a,s,u){var l,c=r?i.render_tags(r,t,n,!0):"",d=u?i.render(u,t,n,!0):"",p=i.find(a,t);return"^"===o?l=!p||Array.isArray(p)&&0===p.length?i.render(s,t,n,!0):"":"#"===o&&(l=Array.isArray(p)?i.map(p,function(e){return i.render(s,i.create_context(e),n,!0)}).join(""):i.is_object(p)?i.render(s,i.create_context(p),n,!0):"function"==typeof p?p.call(t,s,function(e){return i.render(e,t,n,!0)}):p?i.render(s,t,n,!0):""),c+l+d})},render_tags:function(t,n,i,r){for(var o=this,a=function(){return o.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+t+"+","g")})},s=a(),u=function(t,r,u){switch(r){case"!":return"";case"=":return o.set_delimiters(u),s=a(),"";case">":return o.render_partial(u,n,i);case"{":case"&":return o.find(u,n);default:return e(o.find(u,n))}},l=t.split("\n"),c=0;c<l.length;c++)l[c]=l[c].replace(s,u,this),r||this.send(l[c]);return r?l.join("\n"):void 0},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function i(e){return e===!1||0===e||e}e=n(e);var r;if(e.match(/([a-z_]+)\./gi)){var o=this.walk_context(e,t);i(o)&&(r=o)}else i(t[e])?r=t[e]:i(this.context[e])&&(r=this.context[e]);return"function"==typeof r?r.apply(t):void 0!==r?r:""},walk_context:function(e,t){for(var n=e.split("."),i=void 0!=t[n[0]]?t:this.context,r=i[n.shift()];void 0!=r&&n.length>0;)i=r,r=r[n.shift()];return"function"==typeof r?r.apply(i):r},includes:function(e,t){return-1!=t.indexOf(this.otag+e)},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&"object"==typeof e},map:function(e,t){if("function"==typeof e.map)return e.map(t);for(var n=[],i=e.length,r=0;i>r;r++)n.push(t(e[r]));return n},getCachedRegex:function(e,t){var n=s[this.otag];n||(n=s[this.otag]={});var i=n[this.ctag];i||(i=n[this.ctag]={});var r=i[e];return r||(r=i[e]=t(this.otag,this.ctag)),r}},{name:"mustache.js",version:"0.4.0",to_html:function(e,t,n,i){var r=new u;return i&&(r.send=i),r.render(e,t||{},n),i?void 0:r.buffer.join("\n")}}}();define("mustache",function(e){return function(){var t,n;return n=function(){return Mustache},t=n.apply(e,arguments)}}(this)),JRS.Log=function(e){window.console||(window.console={log:function(){},debug:function(){},error:function(){}})}(),define("controls.logging",["namespace"],function(e){return function(){var t;return t||e.JRS}}(this)),JRS.Controls=function(e,t,n,i){var r=navigator.userAgent.toLowerCase().indexOf("msie")>-1;return{Base:t.extend(function(){},{extend:function(e,n){var i,r=this;i=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},t.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&t.extend(i.prototype,e),i.__super__=r.prototype,i}}),TemplateEngine:{render:function(e,i,r){if(!r)return n.to_html(e,i);if(r==this.STD_PLACEHOLDERS){var o=String(e);return t.each(i,function(e,t){var n=new RegExp("\\{"+t+"\\}");o=o.replace(n,e)}),o}},renderUrl:function(e,t,i){var o=n.to_html(e,t);return r&&!i&&(o=encodeURI(o)),o},getTemplateText:function(t){var n=e("#"+t);return n.html()},createTemplate:function(t){var i=e("#"+t),r=i.html();return r&&r.length>0?function(e){return n.to_html(r,e)}:void 0},createTemplateSection:function(e,t){var i="\\{\\{#val\\}\\}(\\s|\\S)*\\{\\{/val\\}\\}",r=i.replace(/val/g,e),o=new RegExp(r,"g"),a=this.getTemplateText(t),s=a.match(o)[0];return function(e){return n.to_html(s,e)}},STD_PLACEHOLDERS:"std_placeholder"},Utils:{LOADING_DIALOG_DELAY:800,INPUT_CONTROLS_COMPONENT_ID:"input-controls",isElementInDom:function(e){var t=e.nextSibling,n=e.parentNode&&11!==e.parentNode.nodeType;return t||n},setInnerHtml:function(e,n,i){var o,a,s;if(this.isElementInDom(e)&&(o=e.nextSibling,a=e.parentNode,s=e.style.display,e.style.display="none",a.removeChild(e)),e.innerHTML="",r&&"SELECT"==e.tagName){var u=document.createDocumentFragment();t.each(i.data,function(e){var n=document.createElement("OPTION");n.value=t.isUndefined(e.value)?e.id:e.value,n.innerHTML=e.label,e.selected&&n.setAttribute("selected","selected"),u.appendChild(n)}),e.appendChild(u)}else e.innerHTML=n(i);if(o?a.insertBefore(e,o):a.appendChild(e),e.style.display=s,r&&"SELECT"==e.tagName){var l=e.getAttribute("style");e.removeAttribute("style"),e.setAttribute("style",l)}},wait:function(t){return e.Deferred(function(e){setTimeout(e.resolve,t)})},showLoadingDialogOn:function(n,r,o){this.wait(r?r:this.LOADING_DIALOG_DELAY).then(t.bind(function(){"pending"==n.state()&&(i.popup.showShared($(ajax.LOADING_ID),o,{focus:!1,owner:this.INPUT_CONTROLS_COMPONENT_ID}),e.when(n).always(t.bind(function(){var e=this.INPUT_CONTROLS_COMPONENT_ID;this.wait(500).then(function(){window.viewer&&window.viewer.loading?window.viewer.loaded&&i.popup.hideShared($(ajax.LOADING_ID),e):i.popup.hideShared($(ajax.LOADING_ID),e)})},this)))},this))},createTimer:function(t){var n=new e.Deferred;return n.done(function(e){var n=(new Date).getTime(),i=n-e;console.log(t+" took time: "+i+" msec.")}),{start:function(){return this.startTime=(new Date).getTime(),this},stop:function(){return n.resolve(this.startTime),this}}}},listen:function(n,i){t.each(n,function(n,i){e(document).bind(i,t.bind(n,this))},i?i:this)},ignore:function(t,n){e(document).unbind(t,n)}}}(jQuery,_,Mustache,dialogs),define("controls.core",["jquery","underscore","mustache","components.dialogs","namespace","controls.logging"],function(e){return function(){var t;return t||e.JRS.Controls}}(this)),JRS.Controls=function(e,t,n){function i(e){if(t.isArray(e)){var n=t.filter(e,function(e){return e.selected});return t.map(n,function(e){return e.id||""===e.id?e:e.value})}return e}return t.extend(n,{BaseControl:n.Base.extend({id:null,elem:null,error:null,templateChunks:{},constructor:function(e){this.initialize.apply(this,arguments)},getElem:function(){return this.elem},setElem:function(e){this.elem=e},bindCustomEventListeners:function(){},isSingleSelect:function(){return!t.isArray(this.get("selection"))},isSingleValue:function(){return!t.isArray(this.get("values"))},getTemplateSection:function(e){return this.templateChunks[this.type+"_"+e]||(this.templateChunks[this.type+"_"+e]=n.TemplateEngine.createTemplateSection(e,this.type)),this.templateChunks[this.type+"_"+e]},initialize:function(e){this.baseRender(e),this.isVisible(e)&&this.bindCustomEventListeners()},fireControlSelectionChangeEvent:function(t){e(document).trigger(n.CHANGE_CONTROL,this,t)},baseRender:function(i){i&&t.extend(this,i);var r=n.TemplateEngine.createTemplate(this.type);if(r){var o=e(r(this));this.setElem(o)}},update:function(e){},get:function(e){return this[e]},isValid:function(){return null===this.error||this.error&&this.error instanceof String&&0===this.error.length},isVisible:function(e){return!e||void 0===e.visible||e.visible===!0},updateWarningMessage:function(){var e=null!=this.error?this.error:"";this.getElem()&&this.getElem().find(".warning").text(e)},refresh:function(){var e=this.get("values"),t=this.get("selection");e=this.isSingleValue()?t:n.BaseControl.merge(e,t),this.values=e,this.initialize(this),this.isVisible(this)&&this.update(e)},set:function(e,n){if(t.extend(this,e),void 0!==e.values&&(this.isVisible(this)&&this.update(e.values),this.isSingleValue()?this.selection=e.values:this.isSingleSelect()?this.selection=i(e.values)[0]:this.selection=i(e.values)),void 0!==e.selection&&(this.isSingleValue()&&(this.values=e.selection),!n&&this.fireControlSelectionChangeEvent()),void 0!==e.disabled&&!this.get("readOnly")){var r=e.disabled;n||(r?this.disable():this.enable())}void 0!==e.error&&this.updateWarningMessage()},find:function(e){if(void 0!==e&&e&&"object"==typeof e){var n=t.keys(e)[0],i=t.values(e)[0];return t.find(this.get("values"),function(e){return e[n]===i})}},enable:function(){this.getElem().find("input").prop("disabled",!1),this.getElem().find("select").prop("disabled",!1)},disable:function(){this.getElem().find("input").prop("disabled",!0),this.getElem().find("select").prop("disabled",!0)}},{merge:function(e,n){return t.isNull(e)||t.isUndefined(e)?n:t.isNull(n)||t.isUndefined(n)?e:t.isArray(n)?t.map(e,function(e){var i=t.find(n,function(t){return t===e.value});return void 0!==i?e.selected=!0:delete e.selected,e}):this.merge(e,[n])}}),CHANGE_CONTROL:"changed:control"})}(jQuery,_,JRS.Controls),define("controls.basecontrol",["jquery","underscore","controls.core"],function(e){return function(){var t;return t||e.JRS.Controls}}(this));var ControlsBase={INPUT_CONTROLS_FORM:"inputControlsForm",INPUT_CONTROLS_CONTAINER:"inputControlsContainer",INPUT_CONTROLS_DIALOG:"inputControls",SAVE_REPORT_OPTIONS_DIALOG:"saveValues",REPORT_OPTIONS_SELECTOR:"savedValues",TOOLBAR_CONTROLS_BUTTON:"ICDialog",DEFAULT_OPTION_TEXT:"Options",NULL_SUBSTITUTION_VALUE:null,NULL_SUBSTITUTION_LABEL:null,NOTHING_SUBSTITUTION_VALUE:null,_BUTTON_OK:"ok",_BUTTON_SAVE:"save",_BUTTON_REMOVE:"remove",_BUTTON_APPLY:"apply",_BUTTON_CANCEL:"cancel",TEMP_REPORT_CONTAINER:"tempReportContainer",WRAPPER_ERROR_FLAG_PREFIX_SELECTOR:"div[id^=error_]",WRAPPERS_ERRORS_DIV:"wrappersErrors",EVAL_SCRIPT_ELEMENT_NAME:"_evalScript",CALENDAR_ICON_SPAN:'<span class="button picker calTriggerWrapper" />',_messages:{},getMessage:function(e,t){var n=this._messages[e];return n?new Template(n).evaluate(t?t:{}):""},setControlError:function(e,t){e&&(e=$(e),t?(e.up().addClassName(layoutModule.ERROR_CLASS),e.nextSiblings()[0].update(t)):(e.up().removeClassName(layoutModule.ERROR_CLASS),e.nextSiblings()[0].update("")))},setControlsErrors:function(e){var t=$$(ControlsBase.WRAPPER_ERROR_FLAG_PREFIX_SELECTOR),n=0,i=-1;t.each(function(t){var r=!1;e&&e.each(function(e){if(t.id.indexOf(e[0])>-1)throw ControlsBase.setControlError(t,e[1]),0>i&&(jQuery("#inputControlsForm .leaf").each(function(e,t){n>e&&(i+=t.clientHeight)}),jQuery(".groupBox .content .body")[0].scrollTop=i),r=!0,$break;n++}),r||ControlsBase.setControlError(t,"")})},buildParams:function(e){var t="";if(_.isObject(e)&&!_.isEmpty(e)){var n=function(e){return e.length>0&&"&"!=e[e.length-1]&&(e+="&"),e};_.each(e,function(e,i){t=n(t),_.isArray(e)?_.each(e,function(e){t=n(t),t+=i+"="+encodeURIComponent(e)}):t+=i+"="+encodeURIComponent(e)})}return t},buildSelectedDataUri:function(e,t){var n=ControlsBase.buildParams(e);if(_.isObject(t)&&!_.isEmpty(t)){var i=ControlsBase.buildParams(t);return n+"&"+i}return n}},ControlDialog=function(e){var t=this;this._dom=$(ControlsBase.INPUT_CONTROLS_DIALOG),this.buttonActions=e,jQuery("#"+ControlsBase.INPUT_CONTROLS_DIALOG).on("mouseup touchend","button",function(e){if(this.id&&!this.id.empty()&&!this.disabled){var n=t.buttonActions["button#"+this.id];n&&n()}})};ControlDialog.addMethod("_dialogClickHandler",function(e){
var t=e.element();for(var n in this.buttonActions)if(matchAny(t,[n],!0))return this.buttonActions[n](),void e.stop()}),ControlDialog.addMethod("show",function(){dialogs.popup.show(this._dom)}),ControlDialog.addMethod("hide",function(){dialogs.popup.hide(this._dom)});var OptionsDialog=function(e){this._dom=$(ControlsBase.SAVE_REPORT_OPTIONS_DIALOG),this.input=this._dom.select("input#savedValuesName")[0],this.overwrite=!1,this.buttonActions=e,this._dialogClickHandler=this._dialogClickHandler.bindAsEventListener(this),this._dom.observe("click",this._dialogClickHandler)};OptionsDialog.addMethod("remove",function(){this._dom.stopObserving("click",this._dialogClickHandler)}),OptionsDialog.addMethod("_dialogClickHandler",function(e){var t=e.element();for(var n in this.buttonActions)if(matchAny(t,[n],!0))return this.buttonActions[n](),void e.stop()}),OptionsDialog.addMethod("show",function(){this.input.setValue(ControlsBase.DEFAULT_OPTION_TEXT),dialogs.popup.show(this._dom)}),OptionsDialog.addMethod("hide",function(){dialogs.popup.hide(this._dom),this.hideWarning()}),OptionsDialog.addMethod("showWarning",function(e){var t=jQuery("#"+ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find(".warning");e&&t.text(e),t.show()}),OptionsDialog.addMethod("hideWarning",function(){var e=jQuery("#"+ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find(".warning");e.text(""),e.hide()}),define("controls.base",["jquery","underscore","utils.common"],function(e){return function(){var t;return t||e.ControlsBase}}(this)),function(e){e.Report={_messages:{},_scroll:null,pageActions:{},viewReportForm:null,pageIndex:0,lastPageIndex:0,pageTimestamp:null,checkPageUpdatedTimeoutId:null,emptyReport:!0,reportForceControls:!1,hasInputControls:!1,reportControlsLayout:null,refreshReportCanceled:!1,reportParameterValues:null,allRequestParameters:null,requestedInputParameters:{},parametersWithoutDefaultValues:null,isLoaded:!1,EXPORT_ACTION_FORM:"exportActionForm",TOOLBAR_SUBMENU:"toolbarText",PAGINATION_CONTAINER:"pagination",PAGINATION_PAGE_FIRST:"page_first",PAGINATION_PAGE_PREV:"page_prev",PAGINATION_PAGE_CURRENT:"page_current",PAGINATION_PAGE_NEXT:"page_next",PAGINATION_PAGE_LAST:"page_last",PAGINATION_PAGE_TOTAL:"page_total",DATA_TIMESTAMP_SPAN:"dataTimestampMessage",DATA_REFRESH_BUTTON:"dataRefreshButton",ASYNC_CANCEL_BUTTON:"asyncCancel",REPORT_COMPONENT_ID:"report",getMessage:function(e,t){var n=this._messages[e];return n?new Template(n).evaluate(t?t:{}):""},commonInit:function(e){var t=jQuery("#"+ajax.LOADING_ID);t.length>0&&(t.addClass(layoutModule.CANCELLABLE_CLASS),t.find("#cancel").click(function(){Report.cancelReportExecution()})),document.location.href.indexOf("frame=0")>0&&(jQuery("#reportViewFrame > .content > .header").hide(),jQuery("#reportViewFrame").css("margin",0),jQuery("#innerPagination").css("margin","none"),jQuery("#reportViewFrame > .content > .body").css({top:0,"margin-top":0}))},navigateToReportPage:function(e,t,n){viewer.jive&&viewer.jive.hide(),viewer.reportInstance.gotoPage(e)},goToPage:function(e){parseInt(e,10)&&parseInt(e,10)>0&&(null==Report.lastPageIndex||parseInt(e,10)<=Report.lastPageIndex+1)?Report.navigateToReportPage(parseInt(e,10)-1):doNothing()},reportExecutionKey:function(){return Report.flowExecutionKeyOutput?Report.flowExecutionKeyOutput:window.dashboardViewFrame?dashboardViewFrame.flowExecutionKey:Report.flowExecutionKey},refreshReport:function(e,t,n){var i=/(\?|&)output=([^&]*)/.exec(location.href),r=i&&3===i.length?i[2]:"";dialogs.popup.showShared($(ajax.LOADING_ID),!0,{owner:this.REPORT_COMPONENT_ID}),e=e||{},e._flowExecutionKey=e._flowExecutionKey?e._flowExecutionKey:Report.reportExecutionKey(),e._eventId=e._eventId?e._eventId:"refreshReport",e.decorate="no",e.confirm="true",e.decorator="empty",e.ajax||(e.ajax="true");var o="flow.html?"+Object.toQueryString(e);return Report.requestedInputParameters=n?n:this.getParametersFromRequest(),e.freshData&&(Report.requestedInputParameters+="&freshData=true"),""===r||"html"===r?Report.isLoaded?(viewer.reportInstance.eventManager.triggerEvent("beforeAction",{name:"beforeAction",type:"reportRefresh"}),viewer.reportInstance.refreshPage(0)):viewer.loadReport().always(function(){Report.isLoaded=!0}):"pdf"===r||"swf"===r?Report.exportReport(r,o):void(window.location.href=o+"&"+Report.requestedInputParameters)},cancelReportExecution:function(){document.body.style.cursor="default",dialogs.popup.hideShared($(ajax.LOADING_ID),this.REPORT_COMPONENT_ID),viewer.reportInstance?viewer.reportInstance.cancelExecution().then(function(){Report.isLoaded||Report.goBack()},function(){}):Report.goBack()},getParametersFromRequest:function(){return ControlsBase.buildParams(Report.getAllRequestParameters())},getAllRequestParameters:function(){return _.isObject(Report.allRequestParameters)?Report.allRequestParameters:{}},canSaveReport:function(){return!Report.isReportReadOnly},confirmExit:function(){return!0},confirmAndLeave:function(){return Report.confirmExit()?Report.closeViewerOnExit:!1},closeViewerOnExit:function(e){viewer.exit().then(function(){e()})},showAjaxDialog:function(){dialogs.popup.showShared($(ajax.LOADING_ID),!0,{owner:this.REPORT_COMPONENT_ID})},hideAjaxDialog:function(){dialogs.popup.hideShared($(ajax.LOADING_ID),this.REPORT_COMPONENT_ID)}}}(window),define("report.view.base",["jquery","underscore","controls.basecontrol","controls.base","core.ajax"],function(e){return function(){var t;return t||e.Report}}(this)),Report.toolbarActionMap={back:"Report.goBack",ICDialog:"Controls.show","export":"doNothing",undo:"Report.undo",redo:"Report.redo",undoAll:"Report.undoAll"},jQuery.extend(Report,{initialize:function(){this.commonInit(),Report.exportForm=$(Report.EXPORT_ACTION_FORM),this.nothingToDisplay=$("nothingToDisplay"),$(Report.DATA_REFRESH_BUTTON)&&$(Report.DATA_REFRESH_BUTTON).observe("mouseup",function(){if(viewer.jive&&viewer.jive.hide(),"undefined"!=typeof Controls){var e=Controls.viewModel.get("selection"),t=ControlsBase.buildSelectedDataUri(e);this.refreshReport({freshData:!0},null,t?"&"+t:"")}else this.refreshReport({freshData:!0},null,"")}.bindAsEventListener(this)),$(Report.ASYNC_CANCEL_BUTTON)&&$(Report.ASYNC_CANCEL_BUTTON).observe("mouseup",function(){this.cancelReportAsyncExecution(!0)}.bindAsEventListener(this)),window.toolbarButtonModule&&(toolbarButtonModule.ACTION_MODEL_TAG=Report.TOOLBAR_SUBMENU,toolbarButtonModule.initialize(Report.toolbarActionMap)),$(Report.PAGINATION_PAGE_CURRENT)&&($(Report.PAGINATION_PAGE_CURRENT).observe("change",function(e){this.goToPage($(Report.PAGINATION_PAGE_CURRENT).getValue()),e.stop()}.bindAsEventListener(this)),$(this.PAGINATION_CONTAINER).observe("click",function(e){var t=e.element();e.stop();for(var n in this.pageActions)if(matchAny(t,[n],!0))return void this.navigateToReportPage(this.pageActions[n])}.bindAsEventListener(this))),document.location.href.indexOf("noReturn=true")>0&&buttonManager.disable($("back")),"undefined"!=typeof Controls?Controls.initialize.bind(Controls)(Report.refreshReport):Report.refreshReport()},reportRefreshed:function(e){var t,n;if("undefined"!=typeof JRS&&JRS.fid){t=jQuery("#"+JRS.fid,window.parent.document),n=t.contents().find("#reportContainer"),t.removeClass("hidden").show(),isIPad()||t.parent().parent().css("background-image","none");n.height(),n.width();isSupportsTouch()&&(new TouchController(n.get(0),t.get(0).parentNode.parentNode,{use2Fingers:!0,showBorders:!0,noInit3d:!0}),n.children("div").bind({touchstart:function(){t.parent().parent().siblings().removeClass("over"),t.parent().parent().addClass("over")}})),n.show(),window.reportFrameHeight=window.reportFrameHeight||t.parent().height(),window.reportFrameWidth=window.reportFrameWidth||t.parent().width()}else{var i=$(ControlsBase.INPUT_CONTROLS_FORM);if(isSupportsTouch()){if(this.touchController)this.touchController.reset();else{var r=jQuery("#reportContainer").parent().parent(),o=jQuery("#reportContainer > div").width();r.width()<o&&r.css("width",o+"px"),this.touchController=new TouchController(r[0],r.parent()[0],{noInit3d:!0,scrollbars:!0})}var a=jQuery("#"+ControlsBase.INPUT_CONTROLS_FORM+" > button.minimize");if(i&&a&&a.is(":visible")){var s=i.hasClassName("minimized");layoutModule.maximize(i),s&&layoutModule.minimize(i)}}jQuery("#reportContainer").show().height()}jQuery("#reportContainer").parents(".body").slice(0,1).scrollTop(0),Report.nothingToDisplay&&(Report.nothingToDisplay.addClassName(layoutModule.HIDDEN_CLASS),jQuery("#"+Report.DATA_REFRESH_BUTTON).removeAttr(layoutModule.DISABLED_ATTR_NAME));var u=jQuery("#paginationIndexHolder"),l=jQuery("#emptyReportMessageHolder");if(u.length>0){var c=u.attr("data-lastPageIndex");jQuery("#emptyReportID").addClass("hidden"),"0"===c?jQuery("#pagination").addClass("hidden"):jQuery("#pagination").removeClass("hidden")}if(l&&l.length>0){var d=l.html();jQuery("#pagination").addClass("hidden"),jQuery(jQuery("#emptyReportID p.message")[1]).html(d),jQuery("#emptyReportID").removeClass("hidden"),centerElement(jQuery("#emptyReportID"),{horz:!0,vert:!0})}Report.refreshPagination(e),Report.refreshExporters(),Report.refreshSave(),Report.refreshAsyncCancel(),this.dataTimestampMessage&&$(Report.DATA_TIMESTAMP_SPAN)&&$(Report.DATA_TIMESTAMP_SPAN).update(this.dataTimestampMessage),jQuery("#innerPagination").css("margin",0),dialogs.popup.hideShared($(ajax.LOADING_ID),Report.REPORT_COMPONENT_ID)}}),jQuery.extend(Report,{refreshExporters:function(){buttonManager[null!=this.lastPageIndex?"enable":"disable"]($("export"))},refreshSave:function(){},refreshPagination:function(e){var t=viewer.reportInstance.currentpage,n=viewer.reportInstance.status.totalPages;return this.emptyReport||null!=n&&0>=n?(buttonManager.disable($(Report.PAGINATION_PAGE_FIRST)),buttonManager.disable($(Report.PAGINATION_PAGE_PREV)),buttonManager.disable($(Report.PAGINATION_PAGE_CURRENT)),buttonManager.disable($(Report.PAGINATION_PAGE_NEXT)),buttonManager.disable($(Report.PAGINATION_PAGE_LAST)),void($(Report.PAGINATION_PAGE_CURRENT)&&($(Report.PAGINATION_PAGE_CURRENT).setValue(""),$(Report.PAGINATION_PAGE_TOTAL).update("")))):(t>0?(buttonManager.enable($(Report.PAGINATION_PAGE_FIRST)),buttonManager.enable($(Report.PAGINATION_PAGE_PREV))):(buttonManager.disable($(Report.PAGINATION_PAGE_FIRST)),buttonManager.disable($(Report.PAGINATION_PAGE_PREV))),null==n?(null==this.lastPartialPageIndex||t<this.lastPartialPageIndex?buttonManager.enable($(Report.PAGINATION_PAGE_NEXT)):buttonManager.disable($(Report.PAGINATION_PAGE_NEXT)),buttonManager.disable($(Report.PAGINATION_PAGE_LAST))):n>t+1?(buttonManager.enable($(Report.PAGINATION_PAGE_NEXT)),buttonManager.enable($(Report.PAGINATION_PAGE_LAST))):(buttonManager.disable($(Report.PAGINATION_PAGE_NEXT)),buttonManager.disable($(Report.PAGINATION_PAGE_LAST))),buttonManager.enable($(Report.PAGINATION_PAGE_CURRENT)),$(Report.PAGINATION_PAGE_CURRENT)&&(e||$(Report.PAGINATION_PAGE_CURRENT).setValue(t+1),null==n?$(Report.PAGINATION_PAGE_TOTAL).update(""):$(Report.PAGINATION_PAGE_TOTAL).update(this.getMessage("jasper.report.view.page.of")+n)),this.pageActions={"button#page_first":0,"button#page_prev":t-1,"button#page_next":t+1},void(null!=viewer.reportInstance.status.totalPages&&(this.pageActions["button#page_last"]=n-1)))},refreshAsyncCancel:function(e){var t=viewer.reportInstance.status;$(Report.ASYNC_CANCEL_BUTTON)&&(e?($("asyncIndicator").addClassName(layoutModule.HIDDEN_CLASS),buttonManager.disable(Report.ASYNC_CANCEL_BUTTON),$(Report.DATA_REFRESH_BUTTON).removeClassName(layoutModule.HIDDEN_CLASS)):t.jasperPrintName&&"running"==t.reportStatus&&null==t.totalPages?(buttonManager.enable(Report.ASYNC_CANCEL_BUTTON),$("asyncIndicator").removeClassName(layoutModule.HIDDEN_CLASS),$(Report.DATA_REFRESH_BUTTON).addClassName(layoutModule.HIDDEN_CLASS)):($("asyncIndicator").addClassName(layoutModule.HIDDEN_CLASS),buttonManager.disable(Report.ASYNC_CANCEL_BUTTON),$(Report.DATA_REFRESH_BUTTON).removeClassName(layoutModule.HIDDEN_CLASS)))}}),jQuery.extend(Report,{exportReport:function(e,t){var n,i,r,o,a=Report.exportForm;jQuery(a).empty(),a.method="post",a.target="_blank",n=a.action,o=function(){a.target="_self",a.action=n},i={_eventId:"export",_flowExecutionKey:Report.reportExecutionKey(),output:""+e};var s=Controls.getLastSelection();r=_.extend(i,s),addDataToForm(a,r),t&&(a.action=t),a.submit(),setTimeout(o,500)},goBack:function(){Report.confirmExit()&&(buttonManager.disable($("back")),window.history.back())},open:function(){alert("Not implemented yet: open report")},save:function(){alert("Report saving is not available in community edition")},saveAs:function(){alert("Report saving is not available in community edition")},undo:function(){viewer.reportInstance.undo()},redo:function(){viewer.reportInstance.redo()},undoAll:function(){viewer.reportInstance.undoAll()},cancelReportAsyncExecution:function(e){viewer.reportInstance.status.jasperPrintName&&(buttonManager.disable($(Report.ASYNC_CANCEL_BUTTON)),viewer.reportInstance.cancelExecution(e).then(function(e,t,n){var i=e.result.status;if("finished"!=viewer.reportInstance.status.reportStatus&&null==viewer.reportInstance.status.totalPages)return e.result.lastPartialPageIndex&&(Report.lastPartialPageIndex=e.result.lastPartialPageIndex),"error"==i?void alert("Report execution error: "+e.result.errorMessage):"canceled"==i?(Report.refreshAsyncCancel(!0),void dialogs.systemConfirm.show(Report.getMessage("jasper.report.view.report.canceled"),5e3)):(e.result.lastPageIndex&&(Report.lastPageIndex=e.result.lastPageIndex,viewer.reportInstance.status.totalPages=Report.lastPageIndex+1),e.result.snapshotSaveStatus&&(Report.snapshotSaveStatus=e.result.snapshotSaveStatus),viewer.reportInstance.status.reportStatus=i,Report.refreshPagination(!0),Report.refreshExporters(),Report.refreshSave(),Report.refreshAsyncCancel(),void 0)},function(e){e.getResponseHeader("lastPartialPageIndex")&&(Report.lastPartialPageIndex=e.getResponseHeader("lastPartialPageIndex")),Report.refreshPagination(!0)}))}}),define("report.view.runtime",["report.view.base"],function(e){return function(){var t;return t||e.Report}}(this)),define("dashboardDeprecated/dashboardDesignerFrameMain",["require","ReportRequireJsConfig","commons.bare.main","components.dialogs","touchcontroller","core.events.bis","core.ajax","jquery.urldecoder","domReady","report.view.runtime","jrs.configs","jquery"],function(e){"use strict";e("ReportRequireJsConfig"),e("commons.bare.main"),e("components.dialogs"),e("touchcontroller"),e("core.events.bis"),e("core.ajax"),e("jquery.urldecoder");var t=e("domReady"),n=e("report.view.runtime"),i=e("jrs.configs"),r=e("jquery");t(function(){if(window.Prototype&&(delete Object.prototype.toJSON,delete Array.prototype.toJSON,delete Hash.prototype.toJSON,delete String.prototype.toJSON),"undefined"==typeof JRS.vars&&(JRS.vars={}),JRS.fid=i.dashboardDesignerFrame.fid,window.printRequest=function(){try{parent.document.getElementById("fusioncharts_managed_print")&&(parent.getIEVersion()>0&&parent.getIEVersion()<9?parent.requestBrowserUpdate():(window.parent.jQuery(parent).trigger("managed_print_request"),FusionCharts.printManager.enabled(!0),FusionCharts.addEventListener(FusionChartsEvents.PrintReadyStateChange,function(e,t){t.ready&&window.parent.jQuery(parent).trigger("chart_rendered")})))}catch(e){}},window.FC_Rendered=function(e){r("#"+e).hide().show()},r(function(){try{"dashboardViewer"==window.parent.document.body.id&&"no"==window.parent.document.getElementById(JRS.fid).getAttribute("scrolling")&&(document.body.style.overflow="hidden")}catch(e){}isIPad()&&(document.addEventListener("touchstart",function(e){window.parent.TouchController.proxy&&window.parent.TouchController.proxy.onTouchStart(e)},!1),document.body.addEventListener("touchmove",function(e){window.parent.TouchController.proxy&&1==e.touches.length&&window.parent.TouchController.proxy.onTouchMove(e),e.preventDefault()},!1))}),n.allRequestParameters=i.dashboardDesignerFrame.reportRequestParams,i.dashboardDesignerFrame.isAdhocReportUnit){var t=r("#"+JRS.fid,window.parent.document);t.removeClass("hidden").show(),isIPad()||t.parents(".iframe").css("background-image","none")}else e(["ReportRequireJsConfig"],function(){e(["reportViewer/viewer"],function(e){window.viewer=new e({at:"#reportContainer",reporturi:n.allRequestParameters.reportUnit,async:!0,page:0,contextPath:__jrsConfigs__.contextPath}),window.jasperreports={reportviewertoolbar:window.viewer},n.initialize()})})})});